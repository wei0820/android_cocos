window.__require = function e(t, n, r) {
  function s(o, u) {
    if (!n[o]) {
      if (!t[o]) {
        var b = o.split("/");
        b = b[b.length - 1];
        if (!t[b]) {
          var a = "function" == typeof __require && __require;
          if (!u && a) return a(b, !0);
          if (i) return i(b, !0);
          throw new Error("Cannot find module '" + o + "'");
        }
      }
      var f = n[o] = {
        exports: {}
      };
      t[o][0].call(f.exports, function(e) {
        var n = t[o][1][e];
        return s(n || e);
      }, f, f.exports, e, t, n, r);
    }
    return n[o].exports;
  }
  var i = "function" == typeof __require && __require;
  for (var o = 0; o < r.length; o++) s(r[o]);
  return s;
}({
  BRCattleConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1a01c+qea5EmYgfC/m7dpHy", "BRCattleConstant");
    "use strict";
    window.BRCattle = window.BRCattle || {};
    var n = 0;
    BRCattle.CardType = {
      niu_0: 0,
      niu_niu: 10,
      niu_silver: 11,
      niu_gold: 12,
      niu_bomb: 13,
      niu_small: 14
    };
    n = 0;
    BRCattle.Satge = {
      CutTheCards: n++,
      SendCard: n++,
      Bet: n++,
      OpenCard: n++,
      Rewar: n++,
      WaitStart: n++
    };
    BRCattle.SatgeTxt = [];
    BRCattle.SatgeTxt[BRCattle.Satge.CutTheCards] = "\u6b63\u5728\u6d17\u724c...";
    BRCattle.SatgeTxt[BRCattle.Satge.SendCard] = "\u6b63\u5728\u53d1\u724c...";
    BRCattle.SatgeTxt[BRCattle.Satge.Bet] = "\u8bf7\u4e0b\u6ce8...";
    BRCattle.SatgeTxt[BRCattle.Satge.OpenCard] = "\u6b63\u5728\u5f00\u724c...";
    BRCattle.SatgeTxt[BRCattle.Satge.Rewar] = "\u6b63\u5728\u6d3e\u5956...";
    BRCattle.SatgeTxt[BRCattle.Satge.WaitStart] = "\u4f11\u606f\u4e00\u4f1a...";
    BRCattle.StageBeginTime = [ 0, 2, 5, 20, 26, 28 ];
    var _action = "DoPlay";
    BRCattle.PostBet = {
      action: _action,
      eventName: "bet"
    };
    BRCattle.PostOnLinePlayerCount = {
      action: _action,
      eventName: "getCount"
    };
    cc._RF.pop();
  }, {} ],
  BRCattleDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "7869cRff85MxqN1OLO59yJD", "BRCattleDataLogic");
    "use strict";
    window.BRCattleDataLogic = {
      init: function init() {
        this.betBtnConfig = [ 1, 2, 3, 4, 5 ];
        this.resetData();
        this.continuousNotBetInning = 0;
        this.isKickedOut = false;
        this.curSatge = null;
        this.otherPlayers = [];
        this.trend = [];
        this.latelyPlayIds = [];
      },
      resetData: function resetData() {
        this.areaBetNum = [ 0, 0, 0, 0 ];
        this.areaMyBetNum = [ 0, 0, 0, 0 ];
        this.cardData = [];
        this.settlementAmount = 0;
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setCardData: function setCardData(data) {
        this.cardData = kf.clone(data);
      },
      setTrend: function setTrend(data) {
        this.trend = kf.clone(data);
      },
      setSettlementAmount: function setSettlementAmount(num) {
        this.settlementAmount = num;
      },
      getTotalBetNum: function getTotalBetNum() {
        var total = 0;
        for (var i = 0; i < this.areaBetNum.length; i++) total += this.areaBetNum[i];
        return total;
      },
      setAreaBetNum: function setAreaBetNum(key, num) {
        this.areaBetNum[key] = num;
      },
      setAreaMyBetNum: function setAreaMyBetNum(key, num) {
        this.areaMyBetNum[key] = num;
      },
      getAreaMyTotalBetNum: function getAreaMyTotalBetNum() {
        var count = 0;
        for (var i = 0; i < this.areaMyBetNum.length; i++) count += this.areaMyBetNum[i];
        return count;
      },
      addContinuousNotBetInning: function addContinuousNotBetInning() {
        this.continuousNotBetInning++;
      },
      setContinuousNotBetInning: function setContinuousNotBetInning(num) {
        this.continuousNotBetInning = num;
      },
      setOtherPlayerInfo: function setOtherPlayerInfo(data) {
        this.otherPlayers = kf.clone(data);
      },
      setKickedOut: function setKickedOut(isKickedOut) {
        this.isKickedOut = isKickedOut;
      },
      setCurStage: function setCurStage(stage) {
        this.curSatge = stage;
      },
      getCurStage: function getCurStage(curTime) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        return time < BRCattle.StageBeginTime[1] ? BRCattle.Satge.CutTheCards : time < BRCattle.StageBeginTime[2] ? BRCattle.Satge.SendCard : time < BRCattle.StageBeginTime[3] ? BRCattle.Satge.Bet : time < BRCattle.StageBeginTime[4] ? BRCattle.Satge.OpenCard : time < BRCattle.StageBeginTime[5] ? BRCattle.Satge.Rewar : BRCattle.Satge.WaitStart;
      },
      getDistanceNextStageTime: function getDistanceNextStageTime(curTime, curStage) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        var nextStageBeginTime = BRCattle.StageBeginTime[this.getNextStage(curStage)];
        var distanceNextStageTime = nextStageBeginTime - time;
        distanceNextStageTime < 0 && (distanceNextStageTime = 30 - time);
        return distanceNextStageTime;
      },
      getNextStage: function getNextStage(curStage) {
        return (curStage + 1) % 6;
      },
      playIdDiffValue: function playIdDiffValue(playId1, playId2) {
        var v1 = Number(playId1.substr(-4));
        var v2 = Number(playId2.substr(-4));
        return v2 - v1;
      },
      pushPlayId: function pushPlayId(playId) {
        this.latelyPlayIds.length > 1 && this.latelyPlayIds.shift();
        this.latelyPlayIds.push(playId);
      }
    };
    BRCattleDataLogic.init();
    cc._RF.pop();
  }, {} ],
  BRCattleHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d93acqaxZRLlrYuEEee1u5k", "BRCattleHall");
    "use strict";
    var _isTenfold = false;
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {
        bg: cc.Sprite,
        acTenfoldBRCattle: {
          default: null,
          type: cc.AudioClip
        },
        acBRCattle: {
          default: null,
          type: cc.AudioClip
        }
      },
      onLoad: function onLoad() {
        this.bg.spriteFrame = new cc.SpriteFrame(resMgr.bgTexture);
        _isTenfold = dataLogic.curGameId == constant.GameId.TenfoldBRCattle;
        this.bgAudio = _isTenfold ? this.acTenfoldBRCattle : this.acBRCattle;
        this.baseInit(dataLogic.curGameId);
        if (BRCattleDataLogic.isKickedOut) {
          this.showKickedOut();
          BRCattleDataLogic.setKickedOut(false);
        }
      },
      setGameNameSf: function setGameNameSf() {
        this.gameNameIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(resMgr.gameNameTexture);
        this.sFGameName = this.gameNameIcon.getComponent(cc.Sprite).spriteFrame;
      },
      showKickedOut: function showKickedOut() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u8fde\u7eed5\u5c40\u672a\u4e0b\u6ce8\uff0c\u88ab\u8bf7\u79bb\u4e86\u724c\u684c",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "BRCattle/miniPng/UI/arrow", "BRCattle/miniPng/effect/cm1" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  BRCattle: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "68485/HaaxKMJ7lmi47tzNq", "BRCattle");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _isTenfold = false;
    var trendItemStartX = -95;
    var trendItemSpace = 24;
    var trendItemY = [ 25, 1, -23, -47, -71 ];
    var rankingItemStartY = -38;
    var rankingItemSpace = -73;
    var playerWorldPos = cc.v2();
    var chipMoveSpeed = 5e-4;
    var bankerWorldPos = cc.v2();
    var chipRandomPos = [];
    var stopBetAnimFinished = false;
    var canvasPosOff = {};
    var otherPlayerYMin = 0;
    var otherPlayerYMax = 0;
    var gameHidePlayId = "";
    var gameHideStage = "";
    var curPlayId = "";
    var cutTimesLimitBetNum = 0;
    var isMaintaining = false;
    var curTimesHaveBet = false;
    var maxTableChipNum = 40;
    var chipTxtColor = [ new cc.Color(75, 179, 139), new cc.Color(73, 176, 159), new cc.Color(73, 147, 183), new cc.Color(80, 120, 185), new cc.Color(164, 111, 224) ];
    var receivedOpenCardMsg = false;
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        dispenseCardNode: cc.Node,
        reciprocal: cc.Node,
        roomNum: cc.Node,
        trendBg: cc.Node,
        ranking: cc.Node,
        rankingContant: cc.Node,
        rankingArrow: cc.Node,
        rankingContent: cc.Node,
        betArea: [ cc.Node ],
        chipLayer: cc.Node,
        banker: cc.Node,
        txtNickname: cc.Label,
        txtBalance: cc.Label,
        txtStage: cc.Label,
        txtTotalBetAmount: [ cc.Label ],
        txtSelfBetAmount: [ cc.Label ],
        txtSettlementAmount: cc.Label,
        txtCountPlayer: cc.Label,
        spGameBg: cc.Sprite,
        spHead: cc.Sprite,
        spTable: cc.Sprite,
        spTenfoldTable: cc.Sprite,
        sfTrenIcon: [ cc.SpriteFrame ],
        pfTrenItem: cc.Prefab,
        pfRankingItem: cc.Prefab,
        pfBackCard: cc.Prefab,
        pfChip: cc.Prefab,
        pfCardType: cc.Prefab,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        cardAtlas: cc.SpriteAtlas,
        isNiuAtlas: cc.SpriteAtlas,
        choiceBet: [ cc.Node ],
        animStart: cc.Animation,
        animStop: cc.Animation,
        animHeadWin: cc.Animation,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        cowAudio: {
          default: [],
          type: cc.AudioClip
        },
        audioWin: {
          default: null,
          type: cc.AudioClip
        },
        audioUpturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        audioSendCard: {
          default: null,
          type: cc.AudioClip
        },
        audioStartBet: {
          default: null,
          type: cc.AudioClip
        },
        audioStopBet: {
          default: null,
          type: cc.AudioClip
        },
        audioChip: {
          default: null,
          type: cc.AudioClip
        },
        audioClearingChip: {
          default: null,
          type: cc.AudioClip
        },
        audioCutTheCards: {
          default: null,
          type: cc.AudioClip
        },
        audioSomeChip: {
          default: null,
          type: cc.AudioClip
        },
        audioAlarmClock: {
          default: null,
          type: cc.AudioClip
        },
        acTenfoldBRCattle: {
          default: null,
          type: cc.AudioClip
        },
        acBRCattle: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onOpen", this.onOpen.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "reqOnLinePlayerCountCb", this.reqOnLinePlayerCountCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this = this;
        _isTenfold = dataLogic.curGameId == constant.GameId.TenfoldBRCattle;
        this.bgAudio = _isTenfold ? this.acTenfoldBRCattle : this.acBRCattle;
        this.spGameBg.spriteFrame = new cc.SpriteFrame(resMgr.bgTexture);
        isMaintaining = false;
        this.baseInit(dataLogic.curGameId);
        this.registerEvent();
        var path = _isTenfold ? "tenfoldBRCattle/" : "BRCattle/miniPng/UI/";
        var dir = "";
        var _loop = function _loop(i) {
          dir = 0 == i || 3 == i ? path + "betArea1" : path + "betArea2";
          resMgr.loadSingleRes(dir, function(sf) {
            _this.betArea[i].getChildByName("halo").getComponent(cc.Sprite).spriteFrame = sf;
          }, cc.SpriteFrame);
        };
        for (var i = 0; i < 4; i++) _loop(i);
        _isTenfold ? this.spTenfoldTable.spriteFrame = new cc.SpriteFrame(resMgr.tableTexture) : this.spTable.spriteFrame = new cc.SpriteFrame(resMgr.tableTexture);
        this.card = [];
        for (var i = 0; i < 25; i++) {
          this.card[i] = cc.instantiate(this.pfBackCard);
          this.card[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.card[i].parent = this.dispenseCardNode;
          this.card[i].opacity = 0;
          this.card[i].scale = .55;
        }
        this.setSelfUI();
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        var selRoomKey = dataLogic.curRoomKey;
        this.ranking.x = -cc.winSize.width / 2 - 234;
        this.isShowRanking = false;
        this.curChoiceBetKey = 0;
        kf.createPool(constant.PoolId.Chip, 500, this.pfChip);
        this.chipNode = [];
        for (var _i = 0; _i < 4; _i++) this.chipNode[_i] = [];
        this.leisureChip = [];
        this.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this.packUpRankingView();
        });
      },
      getWorldPos: function getWorldPos(node) {
        var pos = node.position;
        do {
          node = node.parent;
          pos.x += node.x;
          pos.y += node.y;
        } while ("Canvas" != node.name);
        return pos;
      },
      start: function start() {
        var _this2 = this;
        otherPlayerYMin = cc.winSize.height / 2 - 150;
        otherPlayerYMax = cc.winSize.height / 2 + 150;
        canvasPosOff.x = cc.winSize.width / 2 - this.node.x;
        canvasPosOff.y = cc.winSize.height / 2 - this.node.y;
        playerWorldPos.x = this.spHead.node.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        playerWorldPos.y = this.spHead.node.getWorldMatrix(cc.mat4()).m13;
        bankerWorldPos.x = this.banker.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        bankerWorldPos.y = this.banker.getWorldMatrix(cc.mat4()).m13 + canvasPosOff.y;
        this.getWorldPos(this.chipLayer);
        this.trenItem = [];
        var item = null;
        for (var i = 0; i < 4; i++) {
          this.trenItem[i] = [];
          for (var j = 0; j < 10; j++) {
            item = cc.instantiate(this.pfTrenItem);
            item.parent = this.trendBg;
            item.x = trendItemSpace * j + trendItemStartX;
            item.y = trendItemY[i];
            this.trenItem[i].push(item);
          }
        }
        var pos = this.spHead.node.parent.position;
        var _loop2 = function _loop2(_i2) {
          chipRandomPos[_i2] = {};
          chipRandomPos[_i2].x = _this2.betArea[_i2].getWorldMatrix(cc.mat4()).m12 - 85 + canvasPosOff.x;
          chipRandomPos[_i2].y = _this2.betArea[_i2].getWorldMatrix(cc.mat4()).m13 - 85 + canvasPosOff.y;
          var betNum = 0;
          var totalBet = 0;
          var areaBet = 0;
          _this2.betArea[_i2].on(cc.Node.EventType.TOUCH_END, function(i, pos, event) {
            this.packUpRankingView();
            betNum = BRCattleDataLogic.betBtnConfig[this.curChoiceBetKey];
            totalBet = BRCattleDataLogic.getAreaMyTotalBetNum().add(betNum);
            areaBet = BRCattleDataLogic.areaMyBetNum[i].add(betNum);
            if (BRCattleDataLogic.curSatge != BRCattle.Satge.Bet) {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u975e\u4e0b\u6ce8\u72b6\u6001\uff0c\u8bf7\u7a0d\u7b49~"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
              return;
            }
            if (totalBet > cutTimesLimitBetNum) {
              var _arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u4e0b\u6ce8\u5931\u8d25\uff0c\u4e0b\u6ce8\u603b\u989d\u4e0d\u80fd\u8d85\u8fc7\u4f59\u989d\u76841/" + (_isTenfold ? "10" : "4")
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg);
              return;
            }
            if (areaBet > 100 * BRCattleDataLogic.betBtnConfig[0]) {
              var _arg2 = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u4e0b\u6ce8\u5931\u8d25\uff0c\u8be5\u4e0b\u6ce8\u70b9\u9650\u7ea2" + BRCattleDataLogic.betBtnConfig[0] + "~" + 100 * BRCattleDataLogic.betBtnConfig[0]
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg2);
              return;
            }
            audioMgr.playEffect(this.audioChip);
            this.spHead.node.parent.stopAllActions();
            this.spHead.node.parent.runAction(cc.jumpTo(.05, pos, 10, 1));
            this.setPlayerBalance(dataLogic.userBalance.minus(betNum));
            this.bet(playerWorldPos, this.randomChipPos(i), betNum, i, true);
            var reqArg = {
              action: "DoPlay",
              eventName: "bet",
              betArea: i,
              betNum: betNum
            };
            var localCbArg = {
              betArea: i,
              betNum: betNum
            };
            http.post(reqArg, "betCb", localCbArg);
          }.bind(_this2, _i2, pos));
        };
        for (var _i2 = 0; _i2 < 4; _i2++) _loop2(_i2);
        this.initRanking();
        this.cardType = [];
        var cardType = void 0;
        for (var _i3 = 0; _i3 < 5; _i3++) {
          cardType = cc.instantiate(this.pfCardType);
          cardType.parent = this.dispenseCardNode;
          cardType.scale = .8;
          pos = this.getCardPos(5 * _i3 + 2);
          pos.y -= 20;
          cardType.position = pos;
          cardType.zIndex = 30;
          this.cardType.push(cardType);
        }
      },
      tryExitRoom: function tryExitRoom() {
        0 == BRCattleDataLogic.getAreaMyTotalBetNum() ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u7b49\u5f85\u6e38\u620f\u7ed3\u675f\u518d\u9000\u51fa", BRCattleDataLogic.getAreaMyTotalBetNum());
      },
      exitRoom: function exitRoom() {
        cc.log("\u9000\u51fa\u623f\u95f4");
        audioMgr.stopEffect(this.alarmClockAudioId);
        BRCattleDataLogic.setContinuousNotBetInning(0);
        this.unscheduleAllCallbacks();
        isMaintaining || http.post({
          action: "DoPlay",
          eventName: "leave"
        });
        this.goBackSelectRoom();
      },
      bet: function bet(startPos, endPos, chipNum, betBlock, isSelf) {
        var txt = void 0;
        if (isSelf) {
          txt = this.betArea[betBlock].getChildByName("txtSelfBetNum").getComponent(cc.Label);
          txt.string = Number(txt.string).add(chipNum);
          BRCattleDataLogic.setAreaMyBetNum(betBlock, Number(BRCattleDataLogic.areaMyBetNum[betBlock]).add(chipNum));
        }
        BRCattleDataLogic.setAreaBetNum(betBlock, Number(BRCattleDataLogic.areaBetNum[betBlock]).add(chipNum));
        txt = this.betArea[betBlock].getChildByName("txtTotalBetNum").getComponent(cc.Label);
        txt.string = Number(txt.string).add(chipNum);
        this.chipMoveToTable(startPos, endPos, chipNum, betBlock);
      },
      genChip: function genChip(chipNum, pos) {
        var chip = null;
        if (0 == this.leisureChip.length) chip = kf.getObj(constant.PoolId.Chip, this.chipLayer, this.pfChip); else {
          chip = this.leisureChip.pop();
          if (chip.isUse) {
            cc.log("---------\u8fd9\u4e2a\u7b79\u7801\u5df2\u7ecf\u88ab\u7528\u4e86");
            this.genChip(chipNum, pos);
            return;
          }
          chip.opacity = 255;
        }
        var key = kf.getArrIndexByValue(BRCattleDataLogic.betBtnConfig, chipNum);
        if (-1 == key) {
          cc.error("\u672a\u627e\u5230\u5bf9\u5e94\u7684\u4e0b\u6ce8\u6309\u94ae\u914d\u7f6e", chipNum);
          return;
        }
        var data = {
          chipNum: chipNum,
          iconKey: key,
          pos: pos,
          color: chipTxtColor[key]
        };
        chip.opacity = 0;
        chip.getComponent("chip").initUI(data);
        chip.isUse = true;
        return chip;
      },
      recycleChip: function recycleChip(chip) {
        chip.opacity = 0;
        chip.isUse = false;
        this.leisureChip.push(chip);
      },
      chipAction: function chipAction(startPos, endPos, chip, isEndKill, betAreaKey) {
        var _this3 = this;
        var index = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
        var notDelayAction = arguments[6];
        if (dataLogic.isHide) {
          if (isEndKill) this.recycleChip(chip); else {
            chip.position = endPos;
            this.chipNode[betAreaKey].push(chip);
          }
          return;
        }
        var actionTime = startPos.add(endPos).mag() * chipMoveSpeed;
        var move = cc.moveTo(actionTime, endPos).easing(cc.easeInOut(3));
        chip.stopAllActions();
        chip.rotation = 360 * Math.random();
        if (isEndKill) {
          var seq = cc.sequence(move, cc.callFunc(function() {
            _this3.recycleChip(chip);
          }));
          chip.runAction(seq);
        } else {
          this.chipNode[betAreaKey].push(chip);
          chip.runAction(cc.sequence(cc.delayTime(notDelayAction ? 0 : .1 * index), cc.callFunc(function() {
            chip.opacity = 255;
          }, this), move, cc.callFunc(function() {
            if (_this3.chipNode[betAreaKey].length >= maxTableChipNum && !notDelayAction) {
              var chip = _this3.chipNode[betAreaKey].shift();
              chip.stopAllActions();
              _this3.recycleChip(chip);
            }
          }, this)));
        }
      },
      chipMoveToTable: function chipMoveToTable(startPos, endPos, chipNum, betBlock) {
        var chip = this.genChip(chipNum, startPos);
        this.chipAction(startPos, endPos, chip, false, betBlock);
      },
      chipMoveToPlayer: function chipMoveToPlayer(startPos, endPos, chip) {
        this.chipAction(startPos, endPos, chip, true);
      },
      killAllChip: function killAllChip() {
        var chip = void 0;
        for (var i = 0; i < this.chipNode.length; i++) {
          while (this.chipNode[i].length > 0) {
            chip = this.chipNode[i].pop();
            chip.stopAllActions();
            this.recycleChip(chip);
          }
          this.chipNode[i] = [];
        }
      },
      randomChipPos: function randomChipPos(betAreaKey) {
        var x = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].x, chipRandomPos[betAreaKey].x + 165);
        var y = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].y, chipRandomPos[betAreaKey].y + 130);
        return cc.v2(x, y);
      },
      randomOtherPos: function randomOtherPos() {
        return {
          x: 0,
          y: dataLogic.randomInt(otherPlayerYMin, otherPlayerYMax)
        };
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
      },
      gameHide: function gameHide() {
        this.unscheduleAllCallbacks();
        for (var j = 0; j < 25; j++) this.card[j].opacity = 0;
        gameHidePlayId = curPlayId;
        gameHideStage = BRCattleDataLogic.curSatge;
      },
      gameShow: function gameShow() {
        audioMgr.stopAllEffect();
        if (BRCattleDataLogic.continuousNotBetInning > 4) {
          BRCattleDataLogic.setKickedOut(true);
          this.exitRoom();
        }
        if (isMaintaining) {
          this.unscheduleAllCallbacks();
          this.showMaintainingToast();
          return;
        }
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.animStart.stop();
        this.animStop.stop();
        this.animStart.node.opacity = 0;
        this.animStop.node.opacity = 0;
        cc.log("socket\u662f\u5426\u94fe\u63a5", this.socketIO.isConnected());
        if (this.socketIO.isConnected()) {
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        return;
        var curTime;
        var curStage;
        var timeRemaining;
        var cleanMyBetData, playIdDiffValue;
        var i;
        var trend;
        var _i4;
      },
      syncServerTimeCb: function syncServerTimeCb(msg) {
        var now = new Date().getTime();
        cc.log("\u670d\u52a1\u5668\u65f6\u95f4", msg.Data, now - dataLogic.timeOff);
        return;
        var toast;
        var arg;
      },
      setSelfUI: function setSelfUI() {
        this.txtNickname.string = dataLogic.userName;
        this.setPlayerBalance(dataLogic.userBalance);
        this.setPlayerHead(dataLogic.userHeadUrl, this.spHead);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg, isInit) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          isMaintaining = true;
          constant.HttpCode.error == msg.Code && this.showMaintainingToast(msg.StrCode);
          return;
        }
        var curTime = new Date().getTime();
        var curStage = BRCattleDataLogic.getCurStage(curTime);
        var reReq = false;
        1 != msg.Data.state || curStage != BRCattle.Satge.Rewar && curStage != BRCattle.Satge.WaitStart && curStage != BRCattle.Satge.OpenCard ? 2 == msg.Data.state && curStage == BRCattle.Satge.Bet && (reReq = true) : reReq = true;
        if (reReq) {
          cc.log("\u91cd\u65b0\u8bf7\u6c42\u6570\u636e\u6062\u590dmsg.state", msg.Data.state, "\u670d\u52a1\u5668\u65f6\u95f4", (curTime - dataLogic.timeOff) / 1e3, "curStage", curStage);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", isInit);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          return;
        }
        var isOpenCard = true;
        1 != msg.Data.state && curStage != BRCattle.Satge.Bet && curStage != BRCattle.Satge.SendCard || (isOpenCard = false);
        this.onGameRecover(msg.Data, isInit, curTime, curStage, isOpenCard);
      },
      onGameRecover: function onGameRecover(msg, isInit, curTime, curStage, isOpenCard) {
        BRCattleDataLogic.resetData();
        isInit && BRCattleDataLogic.setContinuousNotBetInning(0);
        dataLogic.setNeedRecover(true);
        var timeRemaining = BRCattleDataLogic.getDistanceNextStageTime(curTime, curStage);
        cc.log("\u91cd\u8fde-----", curStage, timeRemaining, isOpenCard);
        this.countDown(curStage, timeRemaining);
        this.setSatge(curStage);
        curStage == BRCattle.Satge.Bet || this.simulateOnLinePlayerNum(msg.count);
        dataLogic.setReqRecoverState(false);
        dataLogic.setDeskId(msg.deskId);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        BRCattleDataLogic.setOtherPlayerInfo();
        this.setBetToggleConfig(msg.betConfig);
        this.setCountPlayer(msg.count);
        var trend = kf.clone(msg.trend);
        BRCattleDataLogic.setTrend(msg.trend);
        trend = kf.clone(msg.trend);
        var settlementAmount = 0;
        var balance = 0;
        if (null != msg.endData) {
          settlementAmount = msg.endData.split(",")[0];
          balance = Number(msg.endData.split(",")[1]);
        } else balance = msg.balance;
        cutTimesLimitBetNum = _isTenfold ? balance.divide(10) : balance.divide(4);
        BRCattleDataLogic.setSettlementAmount(settlementAmount);
        if (isOpenCard) {
          receivedOpenCardMsg = true;
          BRCattleDataLogic.pushPlayId(msg.lastPlayId);
          for (var i = 0; i < trend.length; i++) trend[i].length > 10 && trend[i].splice(10, 1);
          BRCattleDataLogic.setCardData(msg.lastOpenCards);
          if (curStage == BRCattle.Satge.OpenCard) {
            this.setPlayerBalance(balance.minus(settlementAmount));
            dataLogic.setUserBalance(balance);
          } else this.setPlayerBalance(balance);
        } else {
          receivedOpenCardMsg = false;
          for (var _i5 = 0; _i5 < trend.length; _i5++) trend[_i5].length > 10 && trend[_i5].splice(0, 1);
          var totalBetNum = 0;
          for (var _i6 = 0; _i6 < 4; _i6++) totalBetNum = totalBetNum.add(msg.myBet[_i6]);
          this.setPlayerBalance(balance.minus(totalBetNum));
        }
        dataLogic.setPlayId(msg.playId);
        BRCattleDataLogic.pushPlayId(msg.playId);
        this.updateTrendUI(trend);
        for (var _i7 = 0; _i7 < 4; _i7++) {
          this.setBetAmount(_i7, false, msg.allBet[_i7]);
          this.setBetAmount(_i7, true, msg.myBet[_i7]);
        }
        curTimesHaveBet = BRCattleDataLogic.getAreaMyTotalBetNum() > 0;
        this.updateUI(curStage, timeRemaining);
        this.updateRanking(msg.others);
        stopBetAnimFinished = false;
      },
      showCardAndCardType: function showCardAndCardType(key, data) {
        var cardData = [];
        for (var j = 0; j < 5; j++) cardData.push(cDataLogic.getCardValueAndColor(data[j]));
        var niuNum = cDataLogic.isNiu(cardData);
        this.setPlayerHandCard(key, cardData);
        this.showCardType(key, niuNum);
      },
      showAllCardAndCardType: function showAllCardAndCardType(data) {
        if (0 == data.length) return;
        for (var i = 0; i < 5; i++) this.showCardAndCardType(i, data[i]);
      },
      recoverTableChip: function recoverTableChip() {
        var genTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 15;
        var allBet = null;
        for (var i = 0; i < 4; i++) {
          allBet = BRCattleDataLogic.areaBetNum[i];
          if (allBet > 0) for (var j = 0; j < genTime; j++) this.genSomeChipToTable(i, allBet / genTime, true);
        }
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(balance) {
        "string" == typeof balance && (balance = Number(balance));
        this.txtBalance.string = balance.toFixed(2);
        dataLogic.setUserBalance(balance);
      },
      betUpcomingStopHint: function betUpcomingStopHint() {
        var _this4 = this;
        this.alarmClockAudioId = audioMgr.playEffect(this.audioAlarmClock);
        this.reciprocal.rotation = -10;
        var seq = cc.sequence(cc.rotateTo(.05, 10), cc.rotateTo(.05, -10));
        var repeat = cc.repeat(seq, 2.8 / .1);
        this.reciprocal.runAction(cc.sequence(repeat, cc.callFunc(function() {
          _this4.reciprocal.rotation = 0;
        })));
      },
      countDown: function countDown(stage, time, overCb) {
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        timeTxt.string = time;
        audioMgr.stopEffect(this.alarmClockAudioId);
        this.reciprocal.stopAllActions();
        this.reciprocal.rotation = 0;
        stage == BRCattle.Satge.Bet && time < 4 && this.betUpcomingStopHint();
        this.callback = function() {
          stage == BRCattle.Satge.Bet && 4 == time && this.betUpcomingStopHint();
          time--;
          timeTxt.string = time;
          if (time <= 0) {
            audioMgr.stopEffect(this.alarmClockAudioId);
            this.reciprocal.stopAllActions();
            this.reciprocal.rotation = 0;
            time = 0;
            this.unschedule(this.callback);
            this.intoNewStage(BRCattleDataLogic.getNextStage(stage));
            overCb && overCb();
          }
        };
        this.schedule(this.callback, 1);
      },
      intoNewStage: function intoNewStage(stage) {
        var curTime = new Date().getTime();
        var timeRemaining = BRCattleDataLogic.getDistanceNextStageTime(curTime, stage);
        BRCattle.Satge.Rewar == stage && (timeRemaining = 2);
        this.countDown(stage, timeRemaining);
        cc.log("--intoNewStage ", BRCattle.SatgeTxt[stage], timeRemaining);
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        switch (stage) {
         case BRCattle.Satge.CutTheCards:
          this.hideAllCard();
          this.hideCardType();
          curTimesHaveBet = false;
          BRCattleDataLogic.resetData();
          receivedOpenCardMsg = false;
          this.txtSettlementAmount.node.opacity = 0;
          this.killAllChip();
          3 == BRCattleDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.setPlayId(dataLogic.playId);
          stopBetAnimFinished = false;
          this.cutTheCards();
          break;

         case BRCattle.Satge.SendCard:
          this.dispenseCardAction();
          break;

         case BRCattle.Satge.Bet:
          cutTimesLimitBetNum = _isTenfold ? dataLogic.userBalance / 10 : dataLogic.userBalance / 4;
          stopBetAnimFinished = false;
          this.animStart.node.opacity = 255;
          this.animStart.play();
          audioMgr.playEffect(this.audioStartBet);
          break;

         case BRCattle.Satge.OpenCard:
          audioMgr.playEffect(this.audioStopBet);
          stopBetAnimFinished = false;
          this.animStop.node.opacity = 255;
          this.animStop.on("finished", this.openCard, this);
          this.animStop.play();
          break;

         case BRCattle.Satge.Rewar:
          var myWin = [], totalWin = [], endKey = BRCattleDataLogic.trend[0].length - 1;
          for (var i = 0; i < 4; i++) if (1 == BRCattleDataLogic.trend[i][endKey]) {
            myWin[i] = BRCattleDataLogic.areaMyBetNum[i];
            totalWin[i] = BRCattleDataLogic.areaBetNum[i];
          } else {
            myWin[i] = 0;
            totalWin[i] = 0;
          }
          this.clearing(myWin, totalWin);
          this.setPlayerBalance(dataLogic.userBalance);
          break;

         case BRCattle.Satge.WaitStart:
          this.cleanBetAmount();
          this.killAllChip();
          this.updateTrendUI(BRCattleDataLogic.trend, true);
          if (BRCattleDataLogic.continuousNotBetInning > 4) {
            BRCattleDataLogic.setKickedOut(true);
            this.exitRoom();
          } else if (isMaintaining) {
            this.unscheduleAllCallbacks();
            this.showMaintainingToast();
          }
        }
        this.setSatge(stage);
      },
      updateUI: function updateUI(stage, timeRemaining) {
        cc.log(BRCattle.SatgeTxt[stage], timeRemaining);
        this.killAllChip();
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        this.txtSettlementAmount.node.opacity = 0;
        switch (stage) {
         case BRCattle.Satge.CutTheCards:
          this.setPlayId(dataLogic.playId);
          this.hideCardType();
          3 == BRCattleDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.cleanBetAmount();
          this.cutTheCards();
          break;

         case BRCattle.Satge.SendCard:
          this.setPlayId(dataLogic.playId);
          this.hideCardType();
          3 == BRCattleDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.cleanBetAmount();
          this.dispenseCardAction(timeRemaining);
          break;

         case BRCattle.Satge.Bet:
          this.recoverTableChip(15 - timeRemaining);
          this.setPlayId(dataLogic.playId);
          this.hideCardType();
          this.updateBetAmount();
          this.setDispenseCardEndUI(true);
          break;

         case BRCattle.Satge.OpenCard:
          this.recoverTableChip();
          this.updateBetAmount();
          this.setDispenseCardEndUI(true);
          this.openSomeCardAction(BRCattleDataLogic.cardData, 5 - timeRemaining);
          this.setPlayId(BRCattleDataLogic.latelyPlayIds[0]);
          break;

         case BRCattle.Satge.Rewar:
          this.recoverTableChip();
          this.setDispenseCardEndUI();
          this.showAllCardAndCardType(BRCattleDataLogic.cardData);
          timeRemaining > 1 ? this.clearing() : this.showSettlementAmount();
          this.setPlayId(BRCattleDataLogic.latelyPlayIds[0]);
          break;

         case BRCattle.Satge.WaitStart:
          this.showSettlementAmount();
          this.setDispenseCardEndUI();
          this.showAllCardAndCardType(BRCattleDataLogic.cardData);
          this.setPlayId(BRCattleDataLogic.latelyPlayIds[0]);
          this.cleanBetAmount();
          if (BRCattleDataLogic.continuousNotBetInning > 4) {
            BRCattleDataLogic.setKickedOut(true);
            this.exitRoom();
          }
        }
      },
      setSatge: function setSatge(stage) {
        BRCattleDataLogic.setCurStage(stage);
        this.txtStage.string = BRCattle.SatgeTxt[stage];
      },
      setPlayId: function setPlayId(playId) {
        curPlayId = playId;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
        this.setRoomNumState();
      },
      betCb: function betCb(msgData, localCbArg) {
        if (msgData.Code == constant.HttpCode.Succeed) {
          BRCattleDataLogic.setContinuousNotBetInning(-1);
          curTimesHaveBet = true;
        } else {
          BRCattleDataLogic.setAreaMyBetNum(localCbArg.betArea, Number(BRCattleDataLogic.areaMyBetNum[localCbArg.betArea]).minus(localCbArg.betNum));
          this.setBetAmount(localCbArg.betArea, true, BRCattleDataLogic.areaMyBetNum[localCbArg.betArea]);
          msgData.Code == constant.HttpCode.NotSufficientFunds ? this.setPlayerBalance(msgData.Data) : this.setPlayerBalance(dataLogic.userBalance.add(localCbArg.betNum));
        }
        cc.log("\u4e0b\u6ce8\u91d1\u989d", BRCattleDataLogic.areaMyBetNum, localCbArg);
      },
      onBet: function onBet(msgData) {
        var betNum = 0;
        for (var i = 0; i < 4; i++) {
          betNum = msgData.allBet[i].minus(BRCattleDataLogic.areaBetNum[i]);
          betNum > 0 && this.castSomeChipToTable(betNum, i, null, 20);
          this.setBetAmount(i, false, msgData.allBet[i]);
        }
        this.setCountPlayer(msgData.count);
        audioMgr.playEffect(this.audioSomeChip);
      },
      genSomeChip: function genSomeChip(totalChipNum) {
        var maxCount = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10;
        var isRecover = arguments[2];
        var base = 2 * dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].ante;
        var count = Math.ceil(totalChipNum / base);
        var _maxCount = isRecover ? maxTableChipNum : maxCount;
        count = count > _maxCount ? _maxCount : count;
        var chipNum = 0, key = void 0, chips = [], pos = {
          x: 0,
          y: 0
        };
        for (var i = 0; i < count; i++) {
          key = dataLogic.randomInt(0, 4);
          chipNum = BRCattleDataLogic.betBtnConfig[key];
          chips.push(this.genChip(chipNum, pos));
        }
        return chips;
      },
      genSomeChipToTable: function genSomeChipToTable(areaKey, totalChipNum) {
        var isRecover = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        var chips = this.genSomeChip(totalChipNum, isRecover);
        for (var i = 0; i < chips.length; i++) {
          chips[i].opacity = 255;
          chips[i].position = this.randomChipPos(areaKey);
          this.chipNode[areaKey].push(chips[i]);
        }
      },
      castSomeChipToTable: function castSomeChipToTable(totalChipNum, areaKey) {
        var startPos = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
        var maxCount = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10;
        var isEnd = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
        if (dataLogic.isHide) return;
        var chips = this.genSomeChip(totalChipNum, maxCount);
        for (var i = 0; i < chips.length; i++) if (null == startPos) {
          chips[i].position = this.randomOtherPos();
          this.chipAction(chips[i].position, this.randomChipPos(areaKey), chips[i], false, areaKey, i, isEnd);
        } else {
          chips[i].position = startPos;
          this.chipAction(startPos, this.randomChipPos(areaKey), chips[i], false, areaKey, i, isEnd);
        }
      },
      hidePoker: function hidePoker(UISeatId) {
        for (var i = 0; i < 5; i++) this.card[5 * UISeatId + i].opacity = 0;
      },
      hideAllCard: function hideAllCard() {
        for (var i = 0; i < 25; i++) {
          this.card[i].stopAllActions();
          this.card[i].opacity = 0;
        }
      },
      cutTheCards: function cutTheCards() {
        var _this5 = this;
        this.initDispenseCardFrontUI();
        var card = void 0, repeat = 5;
        var moveDis = 0, moveTime = .2;
        for (var i = 0; i < this.card.length; i++) {
          card = this.card[i];
          moveDis = dataLogic.randomInt(20, 40);
          i % 2 == 0 ? card.runAction(cc.repeat(cc.sequence(cc.callFunc(function() {
            audioMgr.playEffect(_this5.audioCutTheCards);
          }), cc.moveBy(moveTime, cc.v2(-moveDis, -1.5)), cc.callFunc(function(zIndex, key) {
            this.card[key].zIndex = zIndex;
          }.bind(this, 24 - i, i)), cc.moveBy(moveTime, cc.v2(moveDis, 1.5)), cc.callFunc(function(zIndex, key) {
            this.card[key].zIndex = zIndex;
          }.bind(this, 25 - i, i))), repeat)) : card.runAction(cc.repeat(cc.sequence(cc.moveBy(moveTime, cc.v2(moveDis, 1.5)), cc.callFunc(function(zIndex, key) {
            this.card[key].zIndex = zIndex;
          }.bind(this, 26 - i, i)), cc.moveBy(moveTime, cc.v2(-moveDis, -1.5)), cc.callFunc(function(zIndex, key) {
            this.card[key].zIndex = zIndex;
          }.bind(this, 25 - i, i))), repeat));
        }
      },
      dispenseCardAction: function dispenseCardAction() {
        var timeRemaining = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 3;
        if (dataLogic.isHide) return;
        this.send = true;
        this.initDispenseCardFrontUI();
        var endPos = void 0, basecDelay = 0, key = void 0, sequence = void 0, delay = void 0, dis = void 0, speed = 5e-4, elapsedTime = 3 - timeRemaining;
        for (var i = 0; i < 5; i++) {
          for (var j = 0; j < 5; j++) {
            key = 5 * i + j;
            this.card[key].opacity = 255;
            delay = .1 * j + basecDelay;
            endPos = this.getCardPos(key);
            if (delay < elapsedTime) {
              this.card[key].position = endPos;
              this.card[key].zIndex = key;
            } else {
              dis = dataLogic.getDistance(this.card[key].position, endPos);
              sequence = cc.sequence(cc.delayTime(delay - elapsedTime), cc.moveTo(speed * dis, endPos), cc.callFunc(function(key) {
                this.card[key].zIndex = key;
                audioMgr.playEffect(this.audioSendCard);
              }.bind(this, key)));
              this.card[key].runAction(sequence);
            }
          }
          basecDelay += .5;
        }
      },
      initDispenseCardFrontUI: function initDispenseCardFrontUI() {
        for (var i = 0; i < 25; i++) {
          this.card[i].stopAllActions();
          this.card[i].x = 373;
          this.card[i].y = 148 + 1.5 * i;
          this.card[i].opacity = 255;
          this.card[i].zIndex = 25 - i;
          this.card[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
        }
      },
      setDispenseCardEndUI: function setDispenseCardEndUI() {
        var isShowBackCard = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        for (var i = 0; i < 25; i++) {
          this.card[i].stopAllActions();
          this.card[i].position = this.getCardPos(i);
          this.card[i].opacity = 255;
          this.card[i].zIndex = i;
          isShowBackCard && (this.card[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard"));
        }
      },
      getCardPos: function getCardPos(cardKey) {
        var space = 30;
        var key1 = Math.floor(cardKey / 5);
        var key2 = cardKey % 5;
        if (0 == key1) {
          var y = 148;
          var x = space * key2 + 103;
          return cc.v2(x, y);
        }
        var startX = 239 * (key1 - 1) - 421;
        var _y = -185;
        var _x10 = space * key2 + startX;
        return cc.v2(_x10, _y);
      },
      clearing: function clearing() {
        var selfWin = [], allPlayerWin = [], endKey = BRCattleDataLogic.trend[0].length - 1;
        for (var i = 0; i < 4; i++) if (1 == BRCattleDataLogic.trend[i][endKey]) {
          selfWin[i] = BRCattleDataLogic.areaMyBetNum[i];
          selfWin[i] = null == selfWin[i] ? 0 : selfWin[i];
          allPlayerWin[i] = BRCattleDataLogic.areaBetNum[i];
        } else {
          selfWin[i] = 0;
          allPlayerWin[i] = 0;
        }
        var actionTime = .5, seq = void 0, delayTime = 0, isAllWin = true, chip = void 0;
        for (var _i8 = 0; _i8 < 4; _i8++) if (0 == allPlayerWin[_i8]) {
          while (this.chipNode[_i8].length > 0) {
            chip = this.chipNode[_i8].pop();
            seq = cc.sequence(cc.moveTo(actionTime, bankerWorldPos).easing(cc.easeInOut(3)), cc.callFunc(function(chip) {
              this.recycleChip(chip);
            }.bind(this, chip)));
            chip.stopAllActions();
            chip.runAction(seq);
          }
          delayTime = actionTime;
          audioMgr.playEffect(this.audioClearingChip);
        } else isAllWin = false;
        this.scheduleOnce(function() {
          for (var _i9 = 0; _i9 < 4; _i9++) if (allPlayerWin[_i9] > 0) {
            this.castSomeChipToTable(allPlayerWin[_i9], _i9, bankerWorldPos, 20, true);
            audioMgr.playEffect(this.audioSomeChip);
            isAllWin = false;
          }
        }.bind(this), delayTime);
        this.scheduleOnce(this.showSettlementAmount.bind(this), delayTime + .5);
        if (!isAllWin) {
          delayTime += actionTime;
          this.scheduleOnce(this.award.bind(this, selfWin, allPlayerWin), delayTime + .1);
        }
      },
      award: function award(selfWin, allPlayerWin) {
        cc.log("\u6d3e\u5956", selfWin, allPlayerWin);
        var count = void 0, otherPlayerWin = 0, chip = void 0;
        for (var i = 0; i < 4; i++) {
          count = 0;
          if (selfWin[i] > 0) {
            count = Math.ceil(selfWin[i] / allPlayerWin[i] * this.chipNode[i].length);
            count = count < 3 ? 3 : count;
            count = count > this.chipNode[i].length ? this.chipNode[i].length : count;
            var j = 0;
            while (j < count) {
              chip = this.chipNode[i].pop();
              this.chipMoveToPlayer(chip.position, playerWorldPos, chip);
              j++;
            }
          }
          otherPlayerWin = allPlayerWin[i] - selfWin[i];
          if (otherPlayerWin > 0) {
            while (this.chipNode[i].length > 0) {
              chip = this.chipNode[i].pop();
              this.chipMoveToPlayer(chip.position, this.randomOtherPos(), chip);
            }
            audioMgr.playEffect(this.audioClearingChip);
          }
          allPlayerWin[i] > 0 && this.betArea[i].getChildByName("halo").runAction(cc.blink(1, 4));
        }
        if (curTimesHaveBet) if (BRCattleDataLogic.settlementAmount < 0) ; else {
          audioMgr.playEffect(this.audioClearingChip);
          audioMgr.playEffect(this.audioWin);
          this.animHeadWin.node.opacity = 255;
          this.animHeadWin.play();
        }
      },
      showSettlementAmount: function showSettlementAmount() {
        var num = BRCattleDataLogic.settlementAmount;
        if (!curTimesHaveBet) return;
        0 === num && cc.error("\u7ed3\u7b97\u91d1\u989d\u9519\u8bef");
        if (num < 0) {
          this.txtSettlementAmount.font = this.loseChipNumFont;
          this.txtSettlementAmount.string = num;
        } else {
          this.txtSettlementAmount.string = "+" + num;
          this.txtSettlementAmount.font = this.winChipNumFont;
        }
        this.txtSettlementAmount.node.y = 0;
        this.txtSettlementAmount.node.opacity = 255;
        this.txtSettlementAmount.node.stopAllActions();
        this.txtSettlementAmount.node.runAction(cc.moveBy(.2, 0, 70));
      },
      onOpen: function onOpen(msgData) {
        receivedOpenCardMsg = true;
        BRCattleDataLogic.addContinuousNotBetInning();
        BRCattleDataLogic.setCardData(msgData.cards);
        BRCattleDataLogic.setTrend(msgData.trend);
        stopBetAnimFinished && this.openAllCardAction(msgData.cards);
        dataLogic.setPlayId(msgData.playId);
        BRCattleDataLogic.pushPlayId(msgData.playId);
        if (dataLogic.isHide && BRCattleDataLogic.continuousNotBetInning > 4) {
          BRCattleDataLogic.setKickedOut(true);
          this.exitRoom();
        }
        this.updateRanking(msgData.others);
        var settlementAmount = msgData.endData.split(",")[0];
        BRCattleDataLogic.setSettlementAmount(settlementAmount);
        var balance = msgData.endData.split(",")[1];
        dataLogic.setUserBalance(balance);
        this.setCountPlayer(msgData.count);
        1 == msgData.isStop ? isMaintaining = true : this.simulateOnLinePlayerNum(msgData.count);
      },
      setCountPlayer: function setCountPlayer(num) {
        this.txtCountPlayer.string = "\u672c\u684c\u5171" + num + "\u4eba";
      },
      updateUserBalance: function updateUserBalance() {
        for (var i = 0; i < this.endData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = Math.abs(balance).toFixed(2);
          UISeatId == constant.SelfUISeatId && dataLogic.setUserBalance(balance);
        }
      },
      openCard: function openCard() {
        cc.log("\u51c6\u5907\u6267\u884c\u5f00\u5956\u52a8\u753b,\u662f\u5426\u6536\u5230\u672c\u5c40\u7684\u5f00\u5956\u6d88\u606f", receivedOpenCardMsg);
        stopBetAnimFinished = true;
        if (receivedOpenCardMsg) this.openAllCardAction(BRCattleDataLogic.cardData); else {
          this.unscheduleAllCallbacks();
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
      },
      openSomeCardAction: function openSomeCardAction(data, actionBeginKey) {
        var key = 0;
        for (var i = 0; i < 5; i++) {
          key = (i + 1) % 5;
          i < actionBeginKey ? this.showCardAndCardType(key, data[key]) : this.scheduleOnce(function(key) {
            this.openCardAction(key, data[key]);
          }.bind(this, key), .7 * (i - actionBeginKey));
        }
      },
      openAllCardAction: function openAllCardAction(data) {
        if (dataLogic.isHide) {
          this.showAllCardAndCardType(data);
          return;
        }
        var key = 0;
        for (var i = 0; i < 5; i++) {
          key = (i + 1) % 5;
          this.scheduleOnce(function(key) {
            this.openCardAction(key, data[key]);
          }.bind(this, key), .7 * i);
        }
      },
      showCardType: function showCardType(key, niuNum) {
        var cowPic = null;
        cowPic = _isTenfold && niuNum > 1 ? this.isNiuAtlas.getSpriteFrame("tenfold" + niuNum) : this.isNiuAtlas.getSpriteFrame(niuNum);
        var cowAnim = this.cardType[key];
        if (0 == niuNum) {
          cowAnim.children[2].active = true;
          cowAnim.children[2].getComponent(cc.Animation).play();
        } else if (niuNum > 0 && niuNum < 10) {
          cowAnim.children[0].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[0].active = true;
          cowAnim.children[0].getComponent(cc.Animation).play();
        } else {
          cc.log("\u7279\u6b8a\u725b", niuNum);
          cowAnim.children[1].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[1].active = true;
          cowAnim.children[1].getComponent(cc.Animation).play();
        }
      },
      hideCardType: function hideCardType() {
        for (var i = 0; i < 5; i++) {
          this.cardType[i].children[0].active = false;
          this.cardType[i].children[1].active = false;
          this.cardType[i].children[2].active = false;
        }
      },
      openCardAction: function openCardAction(key, cards) {
        var _this6 = this;
        var cardData = [];
        for (var j = 0; j < 5; j++) cardData.push(cDataLogic.getCardValueAndColor(cards[j]));
        var endPos = this.card[5 * key + 2].position, startPos = void 0;
        var id = void 0, moveTime = .15;
        for (var i = 0; i < 5; i++) {
          id = 5 * key + i;
          startPos = this.card[id].position;
          var seq = cc.sequence(cc.moveTo(moveTime, endPos), cc.moveTo(moveTime, startPos));
          this.card[id].runAction(seq);
        }
        audioMgr.playEffect(this.audioUpturnPoker);
        var niuNum = cDataLogic.isNiu(cardData);
        this.scheduleOnce(function() {
          _this6.setPlayerHandCard(key, cardData);
          _this6.showCardType(key, niuNum);
          audioMgr.playEffect(_this6.cowAudio[niuNum]);
        }, moveTime);
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var pokers = [];
        pokers = cDataLogic.sortCard(cards);
        var key = void 0;
        for (var i = 0; i < pokers.length; i++) {
          key = 5 * UISeatId + i;
          this.card[key].getComponent(cc.Sprite).spriteFrame = cDataLogic.getSFByImgName(this.cardAtlas, pokers[i].key);
        }
      },
      packUpRankingView: function packUpRankingView() {
        if (this.isShowRanking) {
          var endPos = {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = false;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        "setRankingView" != key && this.packUpRankingView();
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "exitRoom":
          this.tryExitRoom();
          break;

         case "helpBtn":
          var help = kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(dataLogic.curGameId);
          break;

         case "Setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "setRankingView":
          var endPos = null;
          endPos = this.isShowRanking ? {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          } : {
            x: -cc.winSize.width / 2,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = !this.isShowRanking;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      setBetToggleConfig: function setBetToggleConfig(config) {
        BRCattleDataLogic.setBetBtnConfig(config);
        for (var i = 0; i < 5; i++) this.choiceBet[i].getChildByName("txt").getComponent(cc.Label).string = config[i];
      },
      choiceBetNumEvent: function choiceBetNumEvent(event, key) {
        "" != event && audioMgr.playEffect(this.clickAudio);
        this.packUpRankingView();
        key = Number(key);
        this.curChoiceBetKey = key;
      },
      initRanking: function initRanking() {
        var item = null;
        this.rankingItem = [];
        for (var i = 0; i < 20; i++) {
          item = cc.instantiate(this.pfRankingItem);
          item.parent = this.rankingContent;
          item.y = i * rankingItemSpace + rankingItemStartY;
          this.rankingItem.push(item);
        }
      },
      showNotBetWarning: function showNotBetWarning() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u7ecf3\u5c40\u6ca1\u6709\u8fdb\u884c\u4e0b\u6ce8\uff0c\u8d85\u8fc75\u5c40\u5c06\u88ab\u8bf7\u51fa\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      updateRanking: function updateRanking(data) {
        var item = null, showItemCount = 0;
        for (var i = 0; i < 20; i++) {
          item = this.rankingItem[i];
          if (i < data.length) {
            showItemCount++;
            item.opacity = 255;
            item.getChildByName("txtNickname").getComponent(cc.Label).string = data[i].name;
            item.getChildByName("txtBetNum").getComponent(cc.Label).string = data[i].money;
            this.setPlayerHead(data[i].avatar, item.getChildByName("head").getComponent(cc.Sprite));
          } else item.opacity = 0;
        }
        this.rankingContant.height = showItemCount * -rankingItemSpace + 5;
      },
      updateTrendUI: function updateTrendUI(trend) {
        var isBlink = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        var data = kf.clone(trend);
        for (var i = 0; i < 4; i++) {
          data[i].length > 10 && data[i].splice(0, data[i].length - 10);
          for (var j = data[i].length; j < 10; j++) data[i].unshift(2);
        }
        for (var _i10 = 0; _i10 < 4; _i10++) for (var _j = 0; _j < 10; _j++) this.trenItem[_i10][_j].getComponent(cc.Sprite).spriteFrame = this.sfTrenIcon[data[_i10][_j]];
        if (isBlink) for (var _i11 = 0; _i11 < 4; _i11++) this.trenItem[_i11][9].runAction(cc.blink(1.5, 4));
      },
      cleanBetAmount: function cleanBetAmount() {
        for (var i = 0; i < 4; i++) {
          this.setBetAmount(i, true, 0);
          this.setBetAmount(i, false, 0);
        }
      },
      setBetAmount: function setBetAmount(betAreaKey, isSelf, amount) {
        if (isSelf) {
          this.txtSelfBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          BRCattleDataLogic.setAreaMyBetNum(betAreaKey, amount);
        } else {
          this.txtTotalBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          BRCattleDataLogic.setAreaBetNum(betAreaKey, amount);
        }
      },
      updateBetAmount: function updateBetAmount() {
        for (var i = 0; i < 4; i++) {
          this.setBetAmount(i, false, BRCattleDataLogic.areaBetNum[i]);
          this.setBetAmount(i, true, BRCattleDataLogic.areaMyBetNum[i]);
        }
      },
      netDisconnect: function netDisconnect() {
        this.unscheduleAllCallbacks();
      },
      showMaintainingToast: function showMaintainingToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u7cfb\u7edf\u9700\u8981\u51e0\u5206\u949f\u5347\u7ea7\u4e00\u4e0b\uff0c\u8bf7\u7a0d\u7b49";
        if (this.getToast(constant.ToastType.Hint, 4)) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "exitRoom" ],
            btnTxt: [ null, "\u597d\u7684" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.Chip);
      },
      simulateOnLinePlayerNum: function simulateOnLinePlayerNum(num) {
        var _this7 = this;
        var updateCount = 0;
        var min = num - 10, max = num + 10;
        min < 1 && (min = 1);
        this.updateSimulateOnLinePlayerNum && this.unschedule(this.updateSimulateOnLinePlayerNum);
        this.updateSimulateOnLinePlayerNum = function() {
          if (BRCattleDataLogic.curSatge == BRCattle.Satge.Bet) {
            _this7.unschedule(_this7.updateSimulateOnLinePlayerNum);
            return;
          }
          _this7.setCountPlayer(dataLogic.randomInt(min, max));
          updateCount++;
          if (5 == updateCount) {
            updateCount = 0;
            http.post(BRCattle.PostOnLinePlayerCount);
          }
        };
        this.schedule(this.updateSimulateOnLinePlayerNum, 1);
      },
      reqOnLinePlayerCountCb: function reqOnLinePlayerCountCb(msg) {
        msg.Code == constant.HttpCode.Succeed && this.simulateOnLinePlayerNum(msg.Data);
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  LongHuConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "ac7190JnIRAZYpJrYV6L2TH", "LongHuConstant");
    "use strict";
    window.LongHuConstant = window.LongHuConstant || {};
    var n = 0;
    n = 0;
    LongHuConstant.Satge = {
      Ready: n++,
      Bet: n++,
      OpenCard: n++,
      PieAward: n++
    };
    LongHuConstant.SatgeTxt = [];
    LongHuConstant.SatgeTxt[LongHuConstant.Satge.Ready] = "\u51c6\u5907\u5f00\u59cb...";
    LongHuConstant.SatgeTxt[LongHuConstant.Satge.Bet] = "\u8bf7\u4e0b\u6ce8...";
    LongHuConstant.SatgeTxt[LongHuConstant.Satge.OpenCard] = "\u5f00\u724c\u4e2d...";
    LongHuConstant.SatgeTxt[LongHuConstant.Satge.PieAward] = "\u6d3e\u5956\u4e2d...";
    LongHuConstant.StageBeginTime = [ 0, 3, 21, 27 ];
    var _action = "DoPlay";
    LongHuConstant.PostBet = {
      action: _action,
      eventName: "bet"
    };
    cc._RF.pop();
  }, {} ],
  LongHuDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "25ce6pBgk9IJbolmSzNIir0", "LongHuDataLogic");
    "use strict";
    window.LongHuDataLogic = {
      init: function init() {
        this.betBtnConfig = [ 1, 2, 3, 4, 5 ];
        this.resetData();
        this.continuousNotBetInning = 0;
        this.isKickedOut = false;
        this.curSatge = null;
        this.otherPlayers = [];
        this.trend = [];
        this.latelyPlayIds = [];
        this.curRound = 0;
      },
      resetData: function resetData() {
        this.areaBetNum = [ 0, 0, 0 ];
        this.areaMyBetNum = [ 0, 0, 0 ];
        this.cardData = [];
        this.settlementAmount = 0;
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setCardData: function setCardData(data) {
        this.cardData = kf.clone(data);
      },
      setTrend: function setTrend(data) {
        this.trend = kf.clone(data);
      },
      setSettlementAmount: function setSettlementAmount(num) {
        this.settlementAmount = num;
      },
      getTotalBetNum: function getTotalBetNum() {
        var total = 0;
        for (var i = 0; i < this.areaBetNum.length; i++) total += this.areaBetNum[i];
        return total;
      },
      setAreaBetNum: function setAreaBetNum(key, num) {
        this.areaBetNum[key] = num;
      },
      setAreaMyBetNum: function setAreaMyBetNum(key, num) {
        this.areaMyBetNum[key] = num;
      },
      getAreaMyTotalBetNum: function getAreaMyTotalBetNum() {
        var count = 0;
        for (var i = 0; i < this.areaMyBetNum.length; i++) count += this.areaMyBetNum[i];
        return count;
      },
      addContinuousNotBetInning: function addContinuousNotBetInning() {
        this.continuousNotBetInning++;
      },
      setContinuousNotBetInning: function setContinuousNotBetInning(num) {
        this.continuousNotBetInning = num;
      },
      setOtherPlayerInfo: function setOtherPlayerInfo(data) {
        this.otherPlayers = kf.clone(data);
      },
      setKickedOut: function setKickedOut(isKickedOut) {
        this.isKickedOut = isKickedOut;
      },
      setCurStage: function setCurStage(stage) {
        this.curSatge = stage;
      },
      getCurStage: function getCurStage(curTime) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        return time < LongHuConstant.StageBeginTime[1] ? LongHuConstant.Satge.Ready : time < LongHuConstant.StageBeginTime[2] ? LongHuConstant.Satge.Bet : time < LongHuConstant.StageBeginTime[3] ? LongHuConstant.Satge.OpenCard : LongHuConstant.Satge.PieAward;
      },
      getDistanceNextStageTime: function getDistanceNextStageTime(curTime, curStage) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        var nextStageBeginTime = LongHuConstant.StageBeginTime[this.getNextStage(curStage)];
        var distanceNextStageTime = nextStageBeginTime - time;
        distanceNextStageTime < 0 && (distanceNextStageTime = 30 - time);
        return distanceNextStageTime;
      },
      getNextStage: function getNextStage(curStage) {
        return (curStage + 1) % 4;
      },
      playIdDiffValue: function playIdDiffValue(playId1, playId2) {
        var v1 = Number(playId1.substr(-4));
        var v2 = Number(playId2.substr(-4));
        return v2 - v1;
      },
      pushPlayId: function pushPlayId(playId) {
        this.latelyPlayIds.length > 1 && this.latelyPlayIds.shift();
        this.latelyPlayIds.push(playId);
      },
      getCardValue: function getCardValue(cardKey) {
        if (0 == cardKey % 13) return 1;
        return cardKey % 13 + 1;
      }
    };
    LongHuDataLogic.init();
    cc._RF.pop();
  }, {} ],
  LongHuHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e2f54ktTWBLP4/2deFpP0Ss", "LongHuHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.LongHu);
        if (LongHuDataLogic.isKickedOut) {
          this.showKickedOut();
          LongHuDataLogic.setKickedOut(false);
        }
      },
      showKickedOut: function showKickedOut() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u8fde\u7eed5\u5c40\u672a\u4e0b\u6ce8\uff0c\u88ab\u8bf7\u79bb\u4e86\u724c\u684c",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "BRCattle/miniPng/UI/arrow", "LongHu/effect/he/he_g", "LongHu/table", "LongHu/bg" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  LongHu: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3b13buEkdxFuLBmCq1n78dc", "LongHu");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var trendItemStartX = -111;
    var trendItemSpace = 31.75;
    var trendItemY = [ 28, -4, -38 ];
    var rankingItemStartY = -38;
    var rankingItemSpace = -73;
    var playerWorldPos = cc.v2();
    var chipMoveSpeed = 8e-4;
    var bankerWorldPos = cc.v2();
    var chipRandomPos = [];
    var stopBetAnimFinished = false;
    var canvasPosOff = {};
    var otherPlayerYMin = 0;
    var otherPlayerYMax = 0;
    var gameHidePlayId = "";
    var gameHideStage = "";
    var curPlayId = "";
    var cutTimesLimitBetNum = 0;
    var isMaintaining = false;
    var curTimesHaveBet = false;
    var backCardPosY = 3, maxTableChipNum = 50;
    var betAreaPos = [ cc.v2(-316, -34), cc.v2(1, -74), cc.v2(316, 34) ];
    var chipTxtColor = [ new cc.Color(75, 179, 139), new cc.Color(73, 176, 159), new cc.Color(73, 147, 183), new cc.Color(80, 120, 185), new cc.Color(164, 111, 224) ];
    var receivedOpenCardMsg = false;
    cc.Class((_cc$Class = {
      extends: require("gameSceneBase"),
      properties: {
        reciprocal: cc.Node,
        roomNum: cc.Node,
        trendBg: cc.Node,
        ranking: cc.Node,
        rankingContent: cc.Node,
        rankingArrow: cc.Node,
        betArea: [ cc.Node ],
        chipLayer: cc.Node,
        banker: cc.Node,
        txtNickname: cc.Label,
        txtBalance: cc.Label,
        txtStage: cc.Label,
        txtTotalBetAmount: [ cc.Label ],
        txtSelfBetAmount: [ cc.Label ],
        txtSettlementAmount: cc.Label,
        txtCountPlayer: cc.Label,
        spHead: cc.Sprite,
        sfTrenIcon: [ cc.SpriteFrame ],
        pfTrenItem: cc.Prefab,
        pfRankingItem: cc.Prefab,
        pfChip: cc.Prefab,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        cardAtlas: cc.SpriteAtlas,
        choiceBet: [ cc.Node ],
        animStart: cc.Animation,
        animStop: cc.Animation,
        animHeadWin: cc.Animation,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        audioWin: {
          default: null,
          type: cc.AudioClip
        },
        aduioLose: {
          default: null,
          type: cc.AudioClip
        },
        audioUpturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        audioStartBet: {
          default: null,
          type: cc.AudioClip
        },
        audioStopBet: {
          default: null,
          type: cc.AudioClip
        },
        audioChip: {
          default: null,
          type: cc.AudioClip
        },
        audioClearingChip: {
          default: null,
          type: cc.AudioClip
        },
        audioSomeChip: {
          default: null,
          type: cc.AudioClip
        },
        audioAlarmClock: {
          default: null,
          type: cc.AudioClip
        },
        twoCards: [ cc.Node ],
        malePointAudio: {
          default: [],
          type: cc.AudioClip
        },
        femalePointAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleResultAudio: {
          default: [],
          type: cc.AudioClip
        },
        femaleResultAudio: {
          default: [],
          type: cc.AudioClip
        },
        finalResultAudio: {
          default: [],
          type: cc.AudioClip
        },
        turnCardAudio: {
          default: null,
          type: cc.AudioClip
        },
        animVs: cc.Node,
        vsAudio: {
          default: null,
          type: cc.AudioClip
        },
        lhAnim: cc.Node,
        huWinPfb: cc.Prefab,
        longWinPfb: cc.Prefab,
        heWinPfb: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onOpen", this.onOpen.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "reqOnLinePlayerCountCb", this.reqOnLinePlayerCountCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this2 = this;
        this.baseInit(constant.GameId.LongHu);
        this.registerEvent();
        isMaintaining = false;
        this.setSelfUI();
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        this.ranking.x = -cc.winSize.width / 2 - 234;
        this.isShowRanking = false;
        this.curChoiceBetKey = 0;
        kf.createPool(constant.PoolId.Chip, 500, this.pfChip);
        this.chipNode = [];
        for (var i = 0; i < 3; i++) this.chipNode[i] = [];
        this.leisureChip = [];
        this.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this2.packUpRankingView();
        });
        var longWinPfb = new cc.instantiate(this.longWinPfb);
        longWinPfb.parent = this.lhAnim;
        longWinPfb.x = -1e4;
        var heWinPfb = new cc.instantiate(this.heWinPfb);
        heWinPfb.parent = this.lhAnim;
        heWinPfb.x = -1e4;
        var huWinPfb = new cc.instantiate(this.huWinPfb);
        huWinPfb.parent = this.lhAnim;
        huWinPfb.x = -1e4;
      },
      start: function start() {
        var _this3 = this;
        otherPlayerYMin = cc.winSize.height / 2 - 150;
        otherPlayerYMax = cc.winSize.height / 2 + 150;
        canvasPosOff.x = cc.winSize.width / 2 - this.node.x;
        canvasPosOff.y = cc.winSize.height / 2 - this.node.y;
        playerWorldPos.x = this.spHead.node.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        playerWorldPos.y = this.spHead.node.getWorldMatrix(cc.mat4()).m13;
        bankerWorldPos.x = this.banker.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        bankerWorldPos.y = this.banker.getWorldMatrix(cc.mat4()).m13 + canvasPosOff.y;
        this.getWorldPos(this.chipLayer);
        this.trenItem = [];
        for (var i = 0; i < 3; i++) for (var j = 0; j < 8; j++) {
          var item = cc.instantiate(this.pfTrenItem);
          item.parent = this.trendBg;
          item.x = trendItemSpace * j + trendItemStartX;
          item.y = trendItemY[i];
          item.opacity = 0;
          this.trenItem.push(item);
        }
        var pos = this.spHead.node.parent.position;
        var _loop = function _loop(_i) {
          chipRandomPos[_i] = {};
          chipRandomPos[_i].x = _this3.betArea[_i].getWorldMatrix(cc.mat4()).m12 - 85 + canvasPosOff.x;
          chipRandomPos[_i].y = _this3.betArea[_i].getWorldMatrix(cc.mat4()).m13 - 85 + canvasPosOff.y;
          var betNum = 0;
          var totalBet = 0;
          var areaBet = 0;
          _this3.betArea[_i].on(cc.Node.EventType.TOUCH_END, function(i, pos, event) {
            this.packUpRankingView();
            betNum = LongHuDataLogic.betBtnConfig[this.curChoiceBetKey];
            totalBet = LongHuDataLogic.getAreaMyTotalBetNum().add(betNum);
            areaBet = LongHuDataLogic.areaMyBetNum[i].add(betNum);
            if (LongHuDataLogic.curSatge != LongHuConstant.Satge.Bet) {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u975e\u4e0b\u6ce8\u72b6\u6001\uff0c\u8bf7\u7a0d\u7b49~"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
              return;
            }
            if (areaBet > 100 * LongHuDataLogic.betBtnConfig[0]) {
              var _arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u4e0b\u6ce8\u5931\u8d25\uff0c\u8be5\u4e0b\u6ce8\u70b9\u9650\u7ea2" + LongHuDataLogic.betBtnConfig[0] + "~" + 100 * LongHuDataLogic.betBtnConfig[0]
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg);
              return;
            }
            if (0 == i && LongHuDataLogic.areaMyBetNum[2] || 2 == i && LongHuDataLogic.areaMyBetNum[0]) {
              this.showLayerTip("\u60a8\u4e0d\u80fd\u540c\u65f6\u5728\u9f99\u864e\u4f4d\u7f6e\u4e0b\u6ce8\u54e6");
              return;
            }
            if (betNum > dataLogic.userBalance) {
              this.showLayerTip("\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u6ce8");
              return;
            }
            audioMgr.playEffect(this.audioChip);
            this.spHead.node.parent.stopAllActions();
            this.spHead.node.parent.runAction(cc.jumpTo(.05, pos, 10, 1));
            this.setPlayerBalance(dataLogic.userBalance.minus(betNum));
            this.bet(playerWorldPos, this.randomChipPos(i), betNum, i, true);
            var reqArg = {
              action: "DoPlay",
              eventName: "bet",
              betArea: i,
              betNum: betNum
            };
            var localCbArg = {
              betArea: i,
              betNum: betNum
            };
            http.post(reqArg, "betCb", localCbArg);
          }.bind(_this3, _i, pos));
        };
        for (var _i = 0; _i < 3; _i++) _loop(_i);
        this.initRanking();
      },
      choiceBetNumEvent: function choiceBetNumEvent(event, key) {
        "" != event && audioMgr.playEffect(this.clickAudio);
        this.packUpRankingView();
        key = Number(key);
        this.curChoiceBetKey = key;
      },
      bet: function bet(startPos, endPos, chipNum, betBlock, isSelf) {
        var txt = void 0;
        if (isSelf) {
          txt = this.betArea[betBlock].getChildByName("txtSelfBetNum").getComponent(cc.Label);
          txt.string = Number(txt.string).add(chipNum);
          LongHuDataLogic.setAreaMyBetNum(betBlock, Number(LongHuDataLogic.areaMyBetNum[betBlock]).add(chipNum));
        }
        LongHuDataLogic.setAreaBetNum(betBlock, Number(LongHuDataLogic.areaBetNum[betBlock]).add(chipNum));
        txt = this.betArea[betBlock].getChildByName("txtTotalBetNum").getComponent(cc.Label);
        txt.string = Number(txt.string).add(chipNum);
        this.chipMoveToTable(startPos, endPos, chipNum, betBlock);
      },
      chipMoveToTable: function chipMoveToTable(startPos, endPos, chipNum, betBlock) {
        var chip = this.genChip(chipNum, startPos);
        this.chipAction(startPos, endPos, chip, false, betBlock, null, true);
      },
      getWorldPos: function getWorldPos(node) {
        var pos = node.position;
        do {
          node = node.parent;
          pos.x += node.x;
          pos.y += node.y;
        } while ("Canvas" != node.name);
        return pos;
      },
      gameRecoverCb: function gameRecoverCb(msg, isInit) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          isMaintaining = true;
          constant.HttpCode.error == msg.Code && this.showMaintainingToast(msg.StrCode);
          return;
        }
        var curTime = new Date().getTime();
        var curStage = LongHuDataLogic.getCurStage(curTime);
        cc.log("\u65ad\u7ebf\u91cd\u8fde\u5904\u4e8e\u4ec0\u4e48\u9636\u6bb5", curStage);
        var reReq = false;
        1 != msg.Data.state || curStage != LongHuConstant.Satge.Ready && curStage != LongHuConstant.Satge.OpenCard && curStage != LongHuConstant.Satge.PieAward ? 2 == msg.Data.state && curStage == LongHuConstant.Satge.Bet && (reReq = true) : reReq = true;
        if (reReq) {
          cc.log("\u91cd\u65b0\u8bf7\u6c42\u6570\u636e\u6062\u590dmsg.state", msg.Data.state, "\u670d\u52a1\u5668\u65f6\u95f4", (curTime - dataLogic.timeOff) / 1e3, "curStage", curStage);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", isInit);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          return;
        }
        var isOpenCard = true;
        1 != msg.Data.state && curStage != LongHuConstant.Satge.Bet && curStage != LongHuConstant.Satge.Ready || (isOpenCard = false);
        this.onGameRecover(msg.Data, isInit, curTime, curStage, isOpenCard);
      },
      betUpcomingStopHint: function betUpcomingStopHint() {
        var _this4 = this;
        this.alarmClockAudioId = audioMgr.playEffect(this.audioAlarmClock);
        this.reciprocal.rotation = -10;
        var seq = cc.sequence(cc.rotateTo(.05, 10), cc.rotateTo(.05, -10));
        var repeat = cc.repeat(seq, 2.8 / .1);
        this.reciprocal.runAction(cc.sequence(repeat, cc.callFunc(function() {
          _this4.reciprocal.rotation = 0;
        })));
      },
      countDown: function countDown(stage, time, overCb) {
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        timeTxt.string = time;
        audioMgr.stopEffect(this.alarmClockAudioId);
        this.reciprocal.stopAllActions();
        this.reciprocal.rotation = 0;
        stage == LongHuConstant.Satge.Bet && time < 4 && this.betUpcomingStopHint();
        this.callback = function() {
          stage == LongHuConstant.Satge.Bet && 4 == time && this.betUpcomingStopHint();
          time--;
          timeTxt.string = time;
          if (time <= 0) {
            audioMgr.stopEffect(this.alarmClockAudioId);
            this.reciprocal.stopAllActions();
            this.reciprocal.rotation = 0;
            time = 0;
            this.unschedule(this.callback);
            this.intoNewStage(LongHuDataLogic.getNextStage(stage));
            overCb && overCb();
          }
        };
        this.schedule(this.callback, 1);
      },
      showNotBetWarning: function showNotBetWarning() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u7ecf3\u5c40\u6ca1\u6709\u8fdb\u884c\u4e0b\u6ce8\uff0c\u8d85\u8fc75\u5c40\u5c06\u88ab\u8bf7\u51fa\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      doLiftAndTurnCards: function doLiftAndTurnCards() {
        for (var i = 0; i < 4; i++) {
          this.twoCards[i].opacity = 255;
          this.twoCards[i].y = backCardPosY;
        }
        for (var _i2 = 2; _i2 <= 3; _i2++) this.twoCards[_i2].runAction(cc.spawn(cc.moveBy(1, cc.v2(0, 100)), cc.fadeOut(1)));
      },
      openCardStage: function openCardStage(timeRemaining) {
        var _this5 = this;
        var cards = LongHuDataLogic.cardData;
        cc.log(timeRemaining, "\u5269\u4f59\u7684\u65f6\u95f4");
        this.twoCards[2].stopAllActions();
        this.twoCards[3].stopAllActions();
        for (var i = 0; i < 4; i++) {
          this.twoCards[i].opacity = i > 1 ? 255 : 0;
          this.twoCards[i].y = backCardPosY;
          this.twoCards[i].rotation = 0;
          this.twoCards[i].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, "backCard");
        }
        if (timeRemaining >= 5) this.node.runAction(cc.sequence(cc.delayTime(.5), cc.callFunc(function() {
          _this5.twoCards[2].runAction(cc.sequence(cc.scaleTo(.2, 0, 1), cc.callFunc(function() {
            _this5.twoCards[2].rotation = 0;
            _this5.twoCards[2].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(_this5.cardAtlas, cards[0][0]);
            var sex = dataLogic.userSex;
            var cardPoint = LongHuDataLogic.getCardValue(cards[0][0]);
            cc.log(cardPoint, "\u9f99\u7684\u70b9\u6570");
            audioMgr.playEffect(1 == sex ? _this5.malePointAudio[cardPoint - 1] : _this5.femalePointAudio[cardPoint - 1]);
          }, _this5), cc.scaleTo(.2, 1, 1)));
        }, this), cc.delayTime(.8), cc.callFunc(function() {
          _this5.twoCards[3].runAction(cc.sequence(cc.scaleTo(.2, 0, 1), cc.callFunc(function() {
            _this5.twoCards[3].rotation = 0;
            _this5.twoCards[3].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(_this5.cardAtlas, cards[1][0]);
            var sex = dataLogic.userSex;
            var cardPoint = LongHuDataLogic.getCardValue(cards[1][0]);
            cc.log(cardPoint, "\u864e\u7684\u70b9\u6570");
            audioMgr.playEffect(1 == sex ? _this5.malePointAudio[cardPoint - 1] : _this5.femalePointAudio[cardPoint - 1]);
          }, _this5), cc.scaleTo(.2, 1, 1)));
        }, this), cc.delayTime(.8), cc.callFunc(function() {
          var lastOpenResult = LongHuDataLogic.trend[LongHuDataLogic.trend.length - 1];
          audioMgr.playEffect(1 == dataLogic.userSex ? _this5.maleResultAudio[lastOpenResult] : _this5.femaleResultAudio[lastOpenResult]);
          if (1 != lastOpenResult) {
            audioMgr.playEffect(_this5.finalResultAudio[lastOpenResult]);
            _this5.betArea[lastOpenResult].getChildByName("halo").opacity = 255;
          }
          _this5.lhAnim.children[lastOpenResult].position = betAreaPos[lastOpenResult];
          _this5.lhAnim.children[lastOpenResult].getComponent(cc.Animation).play();
        }, this))); else if (timeRemaining >= 2) {
          this.twoCards[2].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards[0][0]);
          this.twoCards[3].runAction(cc.sequence(cc.scaleTo(.2, 0, 1), cc.callFunc(function() {
            _this5.twoCards[3].rotation = 0;
            _this5.twoCards[3].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(_this5.cardAtlas, cards[1][0]);
            var sex = dataLogic.userSex;
            var cardPoint = LongHuDataLogic.getCardValue(cards[1][0]);
            audioMgr.playEffect(1 == sex ? _this5.malePointAudio[cardPoint - 1] : _this5.femalePointAudio[cardPoint - 1]);
          }, this), cc.scaleTo(.2, 1, 1)));
        } else {
          this.twoCards[2].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards[0][0]);
          this.twoCards[3].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards[1][0]);
        }
      },
      intoNewStage: function intoNewStage(stage) {
        var _this6 = this;
        var curTime = new Date().getTime();
        var timeRemaining = LongHuDataLogic.getDistanceNextStageTime(curTime, stage);
        this.countDown(stage, timeRemaining);
        cc.log("--intoNewStage ", LongHuConstant.SatgeTxt[stage], timeRemaining);
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        switch (stage) {
         case LongHuConstant.Satge.Ready:
          curTimesHaveBet = false;
          LongHuDataLogic.resetData();
          receivedOpenCardMsg = false;
          this.txtSettlementAmount.node.opacity = 0;
          3 == LongHuDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.setPlayId(dataLogic.playId);
          stopBetAnimFinished = false;
          this.doLiftAndTurnCards();
          this.cleanBetAmount();
          this.killAllChip();
          LongHuDataLogic.curRound = Number(LongHuDataLogic.curRound) + 1;
          this.animVs.getComponent(cc.Animation).play();
          this.scheduleOnce(function() {
            _this6.animVs.opacity = 255;
          }, 0);
          for (var i = 0; i < 3; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          audioMgr.playEffect(this.vsAudio);
          break;

         case LongHuConstant.Satge.Bet:
          cutTimesLimitBetNum = dataLogic.userBalance / 4;
          stopBetAnimFinished = false;
          this.animStart.node.opacity = 255;
          this.animStart.play();
          audioMgr.playEffect(this.audioStartBet);
          this.resetOpenCards();
          for (var _i3 = 0; _i3 < 3; _i3++) this.betArea[_i3].getChildByName("halo").opacity = 0;
          break;

         case LongHuConstant.Satge.OpenCard:
          cc.log("\u5f00\u724c\u5566\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01");
          audioMgr.playEffect(this.audioStopBet);
          stopBetAnimFinished = false;
          this.animStop.node.opacity = 255;
          this.animStop.on("finished", this.openCard, this);
          this.animStop.play();
          break;

         case LongHuConstant.Satge.PieAward:
          cc.log("\u6d3e\u5956\u4e2d\u5566!!!!!!!!");
          this.clearing();
          this.setPlayerBalance(dataLogic.userBalance);
          this.updateTrendUI(LongHuDataLogic.trend, true);
          if (LongHuDataLogic.continuousNotBetInning > 4) {
            LongHuDataLogic.setKickedOut(true);
            this.exitRoom();
          } else if (isMaintaining) {
            this.unscheduleAllCallbacks();
            this.showMaintainingToast();
          }
        }
        this.setSatge(stage);
      },
      cleanBetAmount: function cleanBetAmount() {
        for (var i = 0; i < 3; i++) {
          this.setBetAmount(i, true, 0);
          this.setBetAmount(i, false, 0);
        }
      },
      clearing: function clearing() {
        var selfWin = [], endKey = LongHuDataLogic.trend[LongHuDataLogic.trend.length - 1];
        var areaMyBetNum = kf.clone(LongHuDataLogic.areaMyBetNum), areaBetNum = kf.clone(LongHuDataLogic.areaBetNum);
        for (var i = 0; i < 3; i++) if (i == endKey && areaMyBetNum[endKey]) {
          selfWin[i] = areaMyBetNum[i];
          selfWin[i] = null == selfWin[i] ? 0 : selfWin[i];
        } else selfWin[i] = 0;
        var actionTime = .5, seq = void 0, delayTime = 0, chip = void 0;
        if (1 != endKey) for (var _i4 = 0; _i4 < 3; _i4++) if (_i4 != endKey) {
          while (this.chipNode[_i4].length > 0) {
            chip = this.chipNode[_i4].pop();
            seq = cc.sequence(cc.moveTo(actionTime, bankerWorldPos).easing(cc.easeInOut(3)), cc.callFunc(function(chip) {
              this.recycleChip(chip);
            }.bind(this, chip)));
            chip.stopAllActions();
            chip.runAction(seq);
          }
          delayTime = actionTime;
          audioMgr.playEffect(this.audioClearingChip);
        }
        this.scheduleOnce(function() {
          cc.log(LongHuDataLogic.areaBetNum, endKey);
          this.castSomeChipToTable(LongHuDataLogic.areaBetNum[endKey], endKey, bankerWorldPos, 20, true);
          audioMgr.playEffect(this.audioSomeChip);
        }.bind(this), delayTime);
        this.scheduleOnce(this.showSettlementAmount.bind(this), delayTime + .5);
        delayTime += actionTime;
        this.scheduleOnce(this.award.bind(this, selfWin, endKey), delayTime + .1);
      },
      chipMoveToPlayer: function chipMoveToPlayer(startPos, endPos, chip) {
        this.chipAction(startPos, endPos, chip, true);
      },
      award: function award(selfWin, endKey) {
        var allPlayerWin = LongHuDataLogic.areaBetNum;
        var count = void 0, otherPlayerWin = 0, chip = void 0;
        if (1 == endKey) {
          for (var i = 0; i < 3; i++) if (LongHuDataLogic.areaMyBetNum[i]) {
            count = Math.ceil(LongHuDataLogic.areaMyBetNum[i] / allPlayerWin[i] * this.chipNode[i].length);
            count = count < 3 ? 3 : count;
            count = count > this.chipNode[i].length ? this.chipNode[i].length : count;
            var j = 0;
            while (j < count) {
              chip = this.chipNode[i].pop();
              this.chipMoveToPlayer(chip.position, playerWorldPos, chip);
              j++;
            }
          }
        } else if (selfWin[endKey]) {
          count = Math.ceil(selfWin[endKey] / allPlayerWin[endKey] * this.chipNode[endKey].length);
          count = count < 3 ? 3 : count;
          cc.log(count, "\u7c4c\u78bc\u6578\u91cf", this.chipNode.length);
          count = count > this.chipNode[endKey].length ? this.chipNode[endKey].length : count;
          var _j = 0;
          while (_j < count) {
            cc.log("\u6211\u8d0f\u5566\uff01\uff01\uff01\uff01");
            chip = this.chipNode[endKey].pop();
            this.chipMoveToPlayer(chip.position, playerWorldPos, chip);
            _j++;
          }
        }
        otherPlayerWin = allPlayerWin[endKey] - selfWin[endKey];
        if (otherPlayerWin > 0) {
          if (1 == endKey) for (var _i5 = 0; _i5 < 3; _i5++) while (this.chipNode[_i5].length > 0) {
            chip = this.chipNode[_i5].pop();
            this.chipMoveToPlayer(chip.position, this.randomOtherPos(), chip);
          } else while (this.chipNode[endKey].length > 0) {
            chip = this.chipNode[endKey].pop();
            this.chipMoveToPlayer(chip.position, this.randomOtherPos(), chip);
          }
          audioMgr.playEffect(this.audioClearingChip);
        }
        allPlayerWin[endKey] > 0 && this.betArea[endKey].getChildByName("halo").runAction(cc.blink(1, 4));
        if (curTimesHaveBet) if (LongHuDataLogic.settlementAmount < 0) audioMgr.playEffect(this.aduioLose); else {
          audioMgr.playEffect(this.audioClearingChip);
          audioMgr.playEffect(this.audioWin);
          this.animHeadWin.node.opacity = 255;
          this.animHeadWin.play();
        }
      },
      showSettlementAmount: function showSettlementAmount() {
        var num = LongHuDataLogic.settlementAmount;
        if (!curTimesHaveBet) return;
        0 === num && cc.error("\u7ed3\u7b97\u91d1\u989d\u9519\u8bef");
        if (num < 0) {
          this.txtSettlementAmount.font = this.loseChipNumFont;
          this.txtSettlementAmount.string = num;
        } else {
          this.txtSettlementAmount.string = "+" + num;
          this.txtSettlementAmount.font = this.winChipNumFont;
        }
        this.txtSettlementAmount.node.y = 0;
        this.txtSettlementAmount.node.opacity = 255;
        this.txtSettlementAmount.node.stopAllActions();
        this.txtSettlementAmount.node.runAction(cc.moveBy(.2, 0, 70));
      },
      openCard: function openCard() {
        cc.log("\u51c6\u5907\u6267\u884c\u5f00\u5956\u52a8\u753b,\u662f\u5426\u6536\u5230\u672c\u5c40\u7684\u5f00\u5956\u6d88\u606f", receivedOpenCardMsg);
        stopBetAnimFinished = true;
        if (receivedOpenCardMsg) this.openAllCardAction(LongHuDataLogic.cardData); else {
          this.unscheduleAllCallbacks();
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
      },
      setSatge: function setSatge(stage) {
        LongHuDataLogic.setCurStage(stage);
        this.txtStage.string = LongHuConstant.SatgeTxt[stage];
      },
      netDisconnect: function netDisconnect() {
        this.unscheduleAllCallbacks();
      },
      onGameRecover: function onGameRecover(msg, isInit, curTime, curStage, isOpenCard) {
        LongHuDataLogic.resetData();
        isInit && LongHuDataLogic.setContinuousNotBetInning(0);
        dataLogic.setNeedRecover(true);
        var timeRemaining = LongHuDataLogic.getDistanceNextStageTime(curTime, curStage);
        cc.log("\u91cd\u8fde-----", curStage, timeRemaining, isOpenCard);
        LongHuDataLogic.curRound = msg.Issue;
        this.countDown(curStage, timeRemaining);
        this.setSatge(curStage);
        dataLogic.setReqRecoverState(false);
        dataLogic.setDeskId(msg.deskId);
        dataLogic.setMsgId(msg.msgId);
        curStage == LongHuConstant.Satge.Bet || this.simulateOnLinePlayerNum(msg.count);
        LongHuDataLogic.setOtherPlayerInfo();
        this.setBetToggleConfig(msg.betConfig);
        this.setCountPlayer(msg.count);
        var trend = kf.clone(msg.trend);
        LongHuDataLogic.setTrend(trend);
        var settlementAmount = 0;
        var balance = 0;
        if (null != msg.endData) {
          settlementAmount = Number(msg.endData.split(",")[0]);
          balance = msg.endData.split(",")[1];
        } else balance = msg.balance;
        cutTimesLimitBetNum = balance / 4;
        LongHuDataLogic.setSettlementAmount(settlementAmount);
        if (isOpenCard) {
          receivedOpenCardMsg = true;
          LongHuDataLogic.pushPlayId(msg.lastPlayId);
          LongHuDataLogic.setCardData(msg.lastOpenCards);
          if (curStage == LongHuConstant.Satge.OpenCard) {
            this.setPlayerBalance(balance.minus(settlementAmount));
            dataLogic.setUserBalance(balance);
          } else this.setPlayerBalance(balance);
        } else {
          receivedOpenCardMsg = false;
          var totalBetNum = 0;
          for (var i = 0; i < 3; i++) totalBetNum += msg.myBet[i];
          this.setPlayerBalance(balance.minus(totalBetNum));
        }
        dataLogic.setPlayId(msg.playId);
        LongHuDataLogic.pushPlayId(msg.playId);
        this.updateTrendUI(trend);
        for (var _i6 = 0; _i6 < 3; _i6++) {
          this.setBetAmount(_i6, false, msg.allBet[_i6]);
          this.setBetAmount(_i6, true, msg.myBet[_i6]);
        }
        curTimesHaveBet = LongHuDataLogic.getAreaMyTotalBetNum() > 0;
        this.updateUI(curStage, timeRemaining);
        this.updateRanking(msg.others);
        stopBetAnimFinished = false;
      },
      updateTrendUI: function updateTrendUI(trend) {
        var isBlink = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        var data = kf.clone(trend);
        var curRound = Number(LongHuDataLogic.curRound);
        var startPos = curRound % 8;
        cc.log("\u5f53\u524d\u73e0\u8def\u56fe\u7684\u8d77\u59cb\u4f4d\u7f6e", startPos);
        var getDataNum = startPos + (data.length >= 16 ? 16 : data.length >= 8 ? 8 : 0) + (isBlink ? 1 : 0);
        data = data.length > 24 ? data.slice(-getDataNum) : data;
        if (!this.trenItem.length) for (var i = 0; i < 3; i++) for (var j = 0; j < 8; j++) {
          var item = cc.instantiate(this.pfTrenItem);
          item.parent = this.trendBg;
          item.x = trendItemSpace * j + trendItemStartX;
          item.y = trendItemY[i];
          item.opacity = 0;
          this.trenItem.push(item);
        }
        for (var _i7 = 0; _i7 < this.trenItem.length; _i7++) if (_i7 <= data.length) {
          this.trenItem[_i7].getComponent(cc.Sprite).spriteFrame = this.sfTrenIcon[data[_i7]];
          this.trenItem[_i7].opacity = 255;
        } else this.trenItem[_i7].opacity = 0;
        if (isBlink) {
          cc.log(data);
          this.trenItem[data.length - 1].runAction(cc.sequence(cc.delayTime(.5), cc.blink(3, 6)));
        }
      },
      updateRanking: function updateRanking(data) {
        var item = null, showItemCount = 0;
        for (var i = 0; i < 20; i++) {
          item = this.rankingItem[i];
          if (i < data.length) {
            showItemCount++;
            item.opacity = 255;
            item.getChildByName("txtNickname").getComponent(cc.Label).string = data[i].name;
            item.getChildByName("txtBetNum").getComponent(cc.Label).string = data[i].money;
            this.setPlayerHead(data[i].avatar, item.getChildByName("head").getComponent(cc.Sprite));
          } else item.opacity = 0;
        }
        this.rankingContent.height = showItemCount * -rankingItemSpace + 5;
      },
      initRanking: function initRanking() {
        var item = null;
        this.rankingItem = [];
        for (var i = 0; i < 20; i++) {
          item = cc.instantiate(this.pfRankingItem);
          item.parent = this.rankingContent;
          item.y = i * rankingItemSpace + rankingItemStartY;
          this.rankingItem.push(item);
        }
      },
      killAllChip: function killAllChip() {
        var chip = void 0;
        for (var i = 0; i < this.chipNode.length; i++) {
          while (this.chipNode[i].length > 0) {
            chip = this.chipNode[i].pop();
            chip.stopAllActions();
            this.recycleChip(chip);
          }
          this.chipNode[i] = [];
        }
      },
      recycleChip: function recycleChip(chip) {
        chip.opacity = 0;
        chip.isUse = false;
        this.leisureChip.push(chip);
      },
      packUpRankingView: function packUpRankingView() {
        if (this.isShowRanking) {
          var endPos = {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = false;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        "setRankingView" != key && this.packUpRankingView();
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "exitRoom":
          this.tryExitRoom();
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.LongHu);
          break;

         case "Setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "setRankingView":
          var endPos = null;
          endPos = this.isShowRanking ? {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          } : {
            x: -cc.winSize.width / 2,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = !this.isShowRanking;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      resetOpenCards: function resetOpenCards() {},
      resetDragonAndTigerEffect: function resetDragonAndTigerEffect() {
        for (var i = 0; i < this.lhAnim.childrenCount; i++) {
          this.lhAnim.children[i].getComponent(cc.Animation).stop();
          this.lhAnim.children[i].x = -1e4;
        }
      },
      updateUI: function updateUI(stage, timeRemaining) {
        this.killAllChip();
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        this.txtSettlementAmount.node.opacity = 0;
        switch (stage) {
         case LongHuConstant.Satge.Ready:
          if (LongHuDataLogic.continuousNotBetInning > 4) {
            LongHuDataLogic.setKickedOut(true);
            this.exitRoom();
          }
          this.setPlayId(dataLogic.playId);
          this.resetDragonAndTigerEffect();
          3 == LongHuDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.cleanBetAmount();
          for (var i = 0; i < 3; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          break;

         case LongHuConstant.Satge.Bet:
          this.setPlayId(dataLogic.playId);
          this.recoverTableChip(15 - timeRemaining);
          this.updateBetAmount();
          this.resetDragonAndTigerEffect();
          this.resetOpenCards();
          for (var _i8 = 0; _i8 < 3; _i8++) this.betArea[_i8].getChildByName("halo").opacity = 0;
          break;

         case LongHuConstant.Satge.OpenCard:
          this.setPlayId(LongHuDataLogic.latelyPlayIds[0]);
          this.recoverTableChip();
          this.updateBetAmount();
          cc.log("\u5f00\u724c\u4e2d\uff0c\u66f4\u65b0UI");
          this.openCardStage(timeRemaining);
          break;

         case LongHuConstant.Satge.PieAward:
          this.setPlayId(LongHuDataLogic.latelyPlayIds[0]);
          this.recoverTableChip();
          this.resetDragonAndTigerEffect();
          if (LongHuDataLogic.cardData) {
            var cards = LongHuDataLogic.cardData;
            this.twoCards[2].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards[0][0]);
            this.twoCards[3].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards[1][0]);
          }
          timeRemaining > 1 ? this.clearing() : this.showSettlementAmount();
        }
      },
      recoverTableChip: function recoverTableChip() {
        var genTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 18;
        var allBet = null;
        for (var i = 0; i < 3; i++) {
          allBet = LongHuDataLogic.areaBetNum[i];
          if (allBet > 0) for (var j = 0; j < genTime; j++) this.genSomeChipToTable(i, allBet / genTime, true);
        }
      },
      genSomeChipToTable: function genSomeChipToTable(areaKey, totalChipNum) {
        var isRecover = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        cc.log("\u6bd4\u4f8b", totalChipNum);
        var chips = this.genSomeChip(totalChipNum, isRecover);
        cc.log("chips\u6062\u590d\u7b79\u7801\u6570\u91cf", chips.length);
        for (var i = 0; i < chips.length; i++) {
          chips[i].opacity = 255;
          chips[i].position = this.randomChipPos(areaKey);
          this.chipNode[areaKey].push(chips[i]);
        }
      },
      updateBetAmount: function updateBetAmount() {
        for (var i = 0; i < 3; i++) {
          this.setBetAmount(i, false, LongHuDataLogic.areaBetNum[i]);
          this.setBetAmount(i, true, LongHuDataLogic.areaMyBetNum[i]);
        }
      },
      setBetAmount: function setBetAmount(betAreaKey, isSelf, amount) {
        if (isSelf) {
          this.txtSelfBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          LongHuDataLogic.setAreaMyBetNum(betAreaKey, amount);
        } else {
          this.txtTotalBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          LongHuDataLogic.setAreaBetNum(betAreaKey, amount);
        }
      },
      setPlayerBalance: function setPlayerBalance(balance) {
        "string" == typeof balance && (balance = Number(balance));
        this.txtBalance.string = balance.toFixed(2);
        dataLogic.setUserBalance(balance);
      },
      setBetToggleConfig: function setBetToggleConfig(config) {
        LongHuDataLogic.setBetBtnConfig(config);
        for (var i = 0; i < 5; i++) this.choiceBet[i].getChildByName("txt").getComponent(cc.Label).string = config[i];
      },
      setCountPlayer: function setCountPlayer(num) {
        this.txtCountPlayer.string = "\u672c\u684c\u5171" + num + "\u4eba";
      },
      showMaintainingToast: function showMaintainingToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u7cfb\u7edf\u9700\u8981\u51e0\u5206\u949f\u5347\u7ea7\u4e00\u4e0b\uff0c\u8bf7\u7a0d\u7b49";
        if (this.getToast(constant.ToastType.Hint, 4)) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "exitRoom" ],
            btnTxt: [ null, "\u597d\u7684" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.Chip);
      },
      updateBalanceCb: function updateBalanceCb() {},
      syncServerTimeCb: function syncServerTimeCb() {
        var now = new Date().getTime();
        cc.log("\u670d\u52a1\u5668\u65f6\u95f4", msg.Data, now - dataLogic.timeOff);
        return;
        var toast;
        var arg;
      },
      tryExitRoom: function tryExitRoom() {
        0 == LongHuDataLogic.getAreaMyTotalBetNum() ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u7b49\u5f85\u6e38\u620f\u7ed3\u675f\u518d\u9000\u51fa", LongHuDataLogic.getAreaMyTotalBetNum());
      },
      exitRoom: function exitRoom() {
        cc.log("\u9000\u51fa\u623f\u95f4");
        audioMgr.stopEffect(this.alarmClockAudioId);
        LongHuDataLogic.setContinuousNotBetInning(0);
        this.unscheduleAllCallbacks();
        isMaintaining || http.post({
          action: "DoPlay",
          eventName: "leave"
        });
        this.goBackSelectRoom();
      },
      setSelfUI: function setSelfUI() {
        this.txtNickname.string = dataLogic.userName;
        this.setPlayerBalance(dataLogic.userBalance);
        this.setPlayerHead(dataLogic.userHeadUrl, this.spHead);
      }
    }, _defineProperty(_cc$Class, "setPlayerBalance", function setPlayerBalance(balance) {
      "string" == typeof balance && (balance = Number(balance));
      this.txtBalance.string = balance.toFixed(2);
      dataLogic.setUserBalance(balance);
    }), _defineProperty(_cc$Class, "setPlayerHead", function setPlayerHead(headUrl, sp) {
      resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
        sp.spriteFrame = res;
      }, cc.SpriteFrame);
    }), _defineProperty(_cc$Class, "setPlayId", function setPlayId(playId) {
      curPlayId = playId;
      this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
      this.setRoomNumState();
    }), _defineProperty(_cc$Class, "setRoomNumState", function setRoomNumState() {
      this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
      this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
    }), _defineProperty(_cc$Class, "gameShow", function gameShow() {
      audioMgr.stopAllEffect();
      if (LongHuDataLogic.continuousNotBetInning > 4) {
        LongHuDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      if (isMaintaining) {
        this.unscheduleAllCallbacks();
        this.showMaintainingToast();
        return;
      }
      this.unscheduleAllCallbacks();
      this.unschedule(this.callback);
      this.animVs.opacity = 0;
      this.animVs.getComponent(cc.Animation).stop();
      this.animStart.stop();
      this.animStop.stop();
      this.animStart.node.opacity = 0;
      this.animStop.node.opacity = 0;
      if (this.socketIO.isConnected()) {
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      }
      return;
    }), _defineProperty(_cc$Class, "gameHide", function gameHide() {
      this.unscheduleAllCallbacks();
      gameHidePlayId = curPlayId;
      gameHideStage = LongHuDataLogic.curSatge;
    }), _defineProperty(_cc$Class, "onOpen", function onOpen(msgData) {
      receivedOpenCardMsg = true;
      LongHuDataLogic.addContinuousNotBetInning();
      LongHuDataLogic.setCardData(msgData.cards);
      var trend = kf.clone(msgData.trend);
      LongHuDataLogic.setTrend(trend);
      stopBetAnimFinished && this.openAllCardAction(msgData.cards);
      dataLogic.setPlayId(msgData.playId);
      LongHuDataLogic.pushPlayId(msgData.playId);
      if (dataLogic.isHide && LongHuDataLogic.continuousNotBetInning > 4) {
        LongHuDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      this.updateRanking(msgData.others);
      var settlementAmount = msgData.endData.split(",")[0];
      LongHuDataLogic.setSettlementAmount(settlementAmount);
      var balance = msgData.endData.split(",")[1];
      dataLogic.setUserBalance(balance);
      this.setCountPlayer(msgData.count);
      1 == msgData.isStop ? isMaintaining = true : this.simulateOnLinePlayerNum(msgData.count);
    }), _defineProperty(_cc$Class, "openAllCardAction", function openAllCardAction(data) {
      cc.log("\u7ffb\u62cd\uff01\uff01\uff01\uff01");
      if (dataLogic.isHide) return;
      this.openCardStage(6);
    }), _defineProperty(_cc$Class, "onBet", function onBet(msgData) {
      var betNum = 0;
      for (var i = 0; i < 3; i++) {
        betNum = msgData.allBet[i] - LongHuDataLogic.areaBetNum[i];
        betNum > 0 && this.castSomeChipToTable(betNum, i, null, 20);
        this.setBetAmount(i, false, msgData.allBet[i]);
      }
      this.setCountPlayer(msgData.count);
      audioMgr.playEffect(this.audioSomeChip);
    }), _defineProperty(_cc$Class, "castSomeChipToTable", function castSomeChipToTable(totalChipNum, areaKey) {
      var startPos = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
      var maxCount = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10;
      var isEnd = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
      if (dataLogic.isHide) return;
      var chips = this.genSomeChip(totalChipNum, maxCount);
      doLoop(this, chips.length);
      function doLoop(_this, _loopLength) {
        for (var j = 0; j < _loopLength; j++) {
          var pos = null == startPos ? chips[j].position : startPos;
          chips[j].position = null == startPos ? _this.randomOtherPos() : startPos;
          _this.chipAction(pos, _this.randomChipPos(areaKey), chips[j], false, areaKey, j, isEnd);
        }
      }
    }), _defineProperty(_cc$Class, "randomFrom", function randomFrom(lowerValue, upperValue) {
      return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);
    }), _defineProperty(_cc$Class, "randomChipPos", function randomChipPos(betAreaKey) {
      var x = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].x, chipRandomPos[betAreaKey].x + 165);
      var y = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].y + (1 == betAreaKey ? 10 : 0), chipRandomPos[betAreaKey].y + (1 == betAreaKey ? 60 : 130));
      return cc.v2(x, y);
    }), _defineProperty(_cc$Class, "randomOtherPos", function randomOtherPos() {
      return {
        x: 0,
        y: dataLogic.randomInt(otherPlayerYMin, otherPlayerYMax)
      };
    }), _defineProperty(_cc$Class, "chipAction", function chipAction(startPos, endPos, chip, isEndKill, betAreaKey, index, notDelayAction) {
      var _this7 = this;
      if (dataLogic.isHide) {
        if (isEndKill) this.recycleChip(chip); else {
          chip.position = endPos;
          this.chipNode[betAreaKey].push(chip);
        }
        return;
      }
      var actionTime = startPos.sub(endPos).mag() * chipMoveSpeed;
      var move = cc.moveTo(actionTime, endPos).easing(cc.easeInOut(3));
      chip.stopAllActions();
      chip.rotation = 360 * Math.random();
      if (isEndKill) {
        var seq = cc.sequence(move, cc.callFunc(function() {
          _this7.recycleChip(chip);
        }));
        chip.runAction(seq);
      } else {
        this.chipNode[betAreaKey].push(chip);
        chip.runAction(cc.sequence(cc.delayTime(notDelayAction ? 0 : .1 * index), cc.callFunc(function() {
          chip.opacity = 255;
        }, this), move, cc.callFunc(function() {
          if (_this7.chipNode[betAreaKey].length >= maxTableChipNum && !notDelayAction) {
            var chip = _this7.chipNode[betAreaKey].shift();
            chip.stopAllActions();
            _this7.recycleChip(chip);
          }
        }, this)));
      }
    }), _defineProperty(_cc$Class, "genSomeChip", function genSomeChip(totalChipNum) {
      var maxCount = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10;
      var isRecover = arguments[2];
      var base = 2 * dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].ante;
      var count = Math.ceil(totalChipNum / base);
      var _maxCount = isRecover ? maxTableChipNum : maxCount;
      count = count > _maxCount ? _maxCount : count;
      var chipNum = 0, key = void 0, chips = [], pos = {
        x: 0,
        y: 0
      };
      for (var i = 0; i < count; i++) {
        key = dataLogic.randomInt(0, 4);
        chipNum = LongHuDataLogic.betBtnConfig[key];
        chips.push(this.genChip(chipNum, pos));
      }
      return chips;
    }), _defineProperty(_cc$Class, "genChip", function genChip(chipNum, pos) {
      var chip = null;
      if (0 == this.leisureChip.length) chip = kf.getObj(constant.PoolId.Chip, this.chipLayer, this.pfChip); else {
        chip = this.leisureChip.pop();
        if (chip.isUse) {
          cc.log("---------\u8fd9\u4e2a\u7b79\u7801\u5df2\u7ecf\u88ab\u7528\u4e86");
          this.genChip(chipNum, pos);
          return;
        }
        chip.opacity = 255;
      }
      var key = kf.getArrIndexByValue(LongHuDataLogic.betBtnConfig, chipNum);
      if (-1 == key) {
        cc.error("\u672a\u627e\u5230\u5bf9\u5e94\u7684\u4e0b\u6ce8\u6309\u94ae\u914d\u7f6e", chipNum);
        return;
      }
      var data = {
        chipNum: chipNum,
        iconKey: key,
        pos: pos,
        color: chipTxtColor[key]
      };
      chip.getComponent("chip").initUI(data);
      chip.opacity = 0;
      chip.isUse = true;
      return chip;
    }), _defineProperty(_cc$Class, "betCb", function betCb(msgData, localCbArg) {
      if (msgData.Code == constant.HttpCode.Succeed) {
        LongHuDataLogic.setContinuousNotBetInning(-1);
        curTimesHaveBet = true;
      } else {
        LongHuDataLogic.setAreaMyBetNum(localCbArg.betArea, Number(LongHuDataLogic.areaMyBetNum[localCbArg.betArea]).minus(localCbArg.betNum));
        this.setBetAmount(localCbArg.betArea, true, LongHuDataLogic.areaMyBetNum[localCbArg.betArea]);
        msgData.Code == constant.HttpCode.NotSufficientFunds ? this.setPlayerBalance(msgData.Data) : this.setPlayerBalance(dataLogic.userBalance.add(localCbArg.betNum));
      }
    }), _defineProperty(_cc$Class, "simulateOnLinePlayerNum", function simulateOnLinePlayerNum(num) {
      var _this8 = this;
      var updateCount = 0;
      var min = num - 10, max = num + 10;
      min < 1 && (min = 1);
      this.updateSimulateOnLinePlayerNum && this.unschedule(this.updateSimulateOnLinePlayerNum);
      this.updateSimulateOnLinePlayerNum = function() {
        if (BRCattleDataLogic.curSatge == BRCattle.Satge.Bet) {
          _this8.unschedule(_this8.updateSimulateOnLinePlayerNum);
          return;
        }
        _this8.setCountPlayer(dataLogic.randomInt(min, max));
        updateCount++;
        if (5 == updateCount) {
          updateCount = 0;
          http.post(BRCattle.PostOnLinePlayerCount);
        }
      };
      this.schedule(this.updateSimulateOnLinePlayerNum, 1);
    }), _defineProperty(_cc$Class, "reqOnLinePlayerCountCb", function reqOnLinePlayerCountCb(msg) {
      msg.Code == constant.HttpCode.Succeed && this.simulateOnLinePlayerNum(msg.Data);
    }), _cc$Class));
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  TTQRcode: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "bc437Vq8t9Da4v0RdNRFKMT", "TTQRcode");
    "use strict";
    function QR8bitByte(data) {
      this.mode = QRMode.MODE_8BIT_BYTE;
      this.data = data;
    }
    QR8bitByte.prototype = {
      getLength: function getLength(buffer) {
        return this.data.length;
      },
      write: function write(buffer) {
        for (var i = 0; i < this.data.length; i++) buffer.put(this.data.charCodeAt(i), 8);
      }
    };
    var QRCode = function QRCode(typeNumber, errorCorrectLevel) {
      this.typeNumber = typeNumber;
      this.errorCorrectLevel = errorCorrectLevel;
      this.modules = null;
      this.moduleCount = 0;
      this.dataCache = null;
      this.dataList = new Array();
    };
    QRCode.prototype = {
      addData: function addData(data) {
        var newData = new QR8bitByte(data);
        this.dataList.push(newData);
        this.dataCache = null;
      },
      isDark: function isDark(row, col) {
        if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) throw new Error(row + "," + col);
        return this.modules[row][col];
      },
      getModuleCount: function getModuleCount() {
        return this.moduleCount;
      },
      make: function make() {
        if (this.typeNumber < 1) {
          var typeNumber = 1;
          for (typeNumber = 1; typeNumber < 40; typeNumber++) {
            var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);
            var buffer = new QRBitBuffer();
            var totalDataCount = 0;
            for (var i = 0; i < rsBlocks.length; i++) totalDataCount += rsBlocks[i].dataCount;
            for (var _i = 0; _i < this.dataList.length; _i++) {
              var data = this.dataList[_i];
              buffer.put(data.mode, 4);
              buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));
              data.write(buffer);
            }
            if (buffer.getLengthInBits() <= 8 * totalDataCount) break;
          }
          this.typeNumber = typeNumber;
        }
        this.makeImpl(false, this.getBestMaskPattern());
      },
      makeImpl: function makeImpl(test, maskPattern) {
        this.moduleCount = 4 * this.typeNumber + 17;
        this.modules = new Array(this.moduleCount);
        for (var row = 0; row < this.moduleCount; row++) {
          this.modules[row] = new Array(this.moduleCount);
          for (var col = 0; col < this.moduleCount; col++) this.modules[row][col] = null;
        }
        this.setupPositionProbePattern(0, 0);
        this.setupPositionProbePattern(this.moduleCount - 7, 0);
        this.setupPositionProbePattern(0, this.moduleCount - 7);
        this.setupPositionAdjustPattern();
        this.setupTimingPattern();
        this.setupTypeInfo(test, maskPattern);
        this.typeNumber >= 7 && this.setupTypeNumber(test);
        null == this.dataCache && (this.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList));
        this.mapData(this.dataCache, maskPattern);
      },
      setupPositionProbePattern: function setupPositionProbePattern(row, col) {
        for (var r = -1; r <= 7; r++) {
          if (row + r <= -1 || this.moduleCount <= row + r) continue;
          for (var c = -1; c <= 7; c++) {
            if (col + c <= -1 || this.moduleCount <= col + c) continue;
            this.modules[row + r][col + c] = 0 <= r && r <= 6 && (0 == c || 6 == c) || 0 <= c && c <= 6 && (0 == r || 6 == r) || 2 <= r && r <= 4 && 2 <= c && c <= 4;
          }
        }
      },
      getBestMaskPattern: function getBestMaskPattern() {
        var minLostPoint = 0;
        var pattern = 0;
        for (var i = 0; i < 8; i++) {
          this.makeImpl(true, i);
          var lostPoint = QRUtil.getLostPoint(this);
          if (0 == i || minLostPoint > lostPoint) {
            minLostPoint = lostPoint;
            pattern = i;
          }
        }
        return pattern;
      },
      createMovieClip: function createMovieClip(target_mc, instance_name, depth) {
        var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);
        var cs = 1;
        this.make();
        for (var row = 0; row < this.modules.length; row++) {
          var y = row * cs;
          for (var col = 0; col < this.modules[row].length; col++) {
            var x = col * cs;
            var dark = this.modules[row][col];
            if (dark) {
              qr_mc.beginFill(0, 100);
              qr_mc.moveTo(x, y);
              qr_mc.lineTo(x + cs, y);
              qr_mc.lineTo(x + cs, y + cs);
              qr_mc.lineTo(x, y + cs);
              qr_mc.endFill();
            }
          }
        }
        return qr_mc;
      },
      setupTimingPattern: function setupTimingPattern() {
        for (var r = 8; r < this.moduleCount - 8; r++) {
          if (null != this.modules[r][6]) continue;
          this.modules[r][6] = r % 2 == 0;
        }
        for (var c = 8; c < this.moduleCount - 8; c++) {
          if (null != this.modules[6][c]) continue;
          this.modules[6][c] = c % 2 == 0;
        }
      },
      setupPositionAdjustPattern: function setupPositionAdjustPattern() {
        var pos = QRUtil.getPatternPosition(this.typeNumber);
        for (var i = 0; i < pos.length; i++) for (var j = 0; j < pos.length; j++) {
          var row = pos[i];
          var col = pos[j];
          if (null != this.modules[row][col]) continue;
          for (var r = -2; r <= 2; r++) for (var c = -2; c <= 2; c++) this.modules[row + r][col + c] = -2 == r || 2 == r || -2 == c || 2 == c || 0 == r && 0 == c;
        }
      },
      setupTypeNumber: function setupTypeNumber(test) {
        var bits = QRUtil.getBCHTypeNumber(this.typeNumber);
        for (var i = 0; i < 18; i++) {
          var mod = !test && 1 == (bits >> i & 1);
          this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;
        }
        for (var _i2 = 0; _i2 < 18; _i2++) {
          var _mod = !test && 1 == (bits >> _i2 & 1);
          this.modules[_i2 % 3 + this.moduleCount - 8 - 3][Math.floor(_i2 / 3)] = _mod;
        }
      },
      setupTypeInfo: function setupTypeInfo(test, maskPattern) {
        var data = this.errorCorrectLevel << 3 | maskPattern;
        var bits = QRUtil.getBCHTypeInfo(data);
        for (var i = 0; i < 15; i++) {
          var mod = !test && 1 == (bits >> i & 1);
          i < 6 ? this.modules[i][8] = mod : i < 8 ? this.modules[i + 1][8] = mod : this.modules[this.moduleCount - 15 + i][8] = mod;
        }
        for (var _i3 = 0; _i3 < 15; _i3++) {
          var _mod2 = !test && 1 == (bits >> _i3 & 1);
          _i3 < 8 ? this.modules[8][this.moduleCount - _i3 - 1] = _mod2 : _i3 < 9 ? this.modules[8][15 - _i3 - 1 + 1] = _mod2 : this.modules[8][15 - _i3 - 1] = _mod2;
        }
        this.modules[this.moduleCount - 8][8] = !test;
      },
      mapData: function mapData(data, maskPattern) {
        var inc = -1;
        var row = this.moduleCount - 1;
        var bitIndex = 7;
        var byteIndex = 0;
        for (var col = this.moduleCount - 1; col > 0; col -= 2) {
          6 == col && col--;
          while (true) {
            for (var c = 0; c < 2; c++) if (null == this.modules[row][col - c]) {
              var dark = false;
              byteIndex < data.length && (dark = 1 == (data[byteIndex] >>> bitIndex & 1));
              var mask = QRUtil.getMask(maskPattern, row, col - c);
              mask && (dark = !dark);
              this.modules[row][col - c] = dark;
              bitIndex--;
              if (-1 == bitIndex) {
                byteIndex++;
                bitIndex = 7;
              }
            }
            row += inc;
            if (row < 0 || this.moduleCount <= row) {
              row -= inc;
              inc = -inc;
              break;
            }
          }
        }
      }
    };
    QRCode.PAD0 = 236;
    QRCode.PAD1 = 17;
    QRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {
      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);
      var buffer = new QRBitBuffer();
      for (var i = 0; i < dataList.length; i++) {
        var data = dataList[i];
        buffer.put(data.mode, 4);
        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));
        data.write(buffer);
      }
      var totalDataCount = 0;
      for (var _i4 = 0; _i4 < rsBlocks.length; _i4++) totalDataCount += rsBlocks[_i4].dataCount;
      if (buffer.getLengthInBits() > 8 * totalDataCount) throw new Error("code length overflow. (" + buffer.getLengthInBits() + ">" + 8 * totalDataCount + ")");
      buffer.getLengthInBits() + 4 <= 8 * totalDataCount && buffer.put(0, 4);
      while (buffer.getLengthInBits() % 8 != 0) buffer.putBit(false);
      while (true) {
        if (buffer.getLengthInBits() >= 8 * totalDataCount) break;
        buffer.put(QRCode.PAD0, 8);
        if (buffer.getLengthInBits() >= 8 * totalDataCount) break;
        buffer.put(QRCode.PAD1, 8);
      }
      return QRCode.createBytes(buffer, rsBlocks);
    };
    QRCode.createBytes = function(buffer, rsBlocks) {
      var offset = 0;
      var maxDcCount = 0;
      var maxEcCount = 0;
      var dcdata = new Array(rsBlocks.length);
      var ecdata = new Array(rsBlocks.length);
      for (var r = 0; r < rsBlocks.length; r++) {
        var dcCount = rsBlocks[r].dataCount;
        var ecCount = rsBlocks[r].totalCount - dcCount;
        maxDcCount = Math.max(maxDcCount, dcCount);
        maxEcCount = Math.max(maxEcCount, ecCount);
        dcdata[r] = new Array(dcCount);
        for (var i = 0; i < dcdata[r].length; i++) dcdata[r][i] = 255 & buffer.buffer[i + offset];
        offset += dcCount;
        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);
        var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);
        var modPoly = rawPoly.mod(rsPoly);
        ecdata[r] = new Array(rsPoly.getLength() - 1);
        for (var _i5 = 0; _i5 < ecdata[r].length; _i5++) {
          var modIndex = _i5 + modPoly.getLength() - ecdata[r].length;
          ecdata[r][_i5] = modIndex >= 0 ? modPoly.get(modIndex) : 0;
        }
      }
      var totalCodeCount = 0;
      for (var _i6 = 0; _i6 < rsBlocks.length; _i6++) totalCodeCount += rsBlocks[_i6].totalCount;
      var data = new Array(totalCodeCount);
      var index = 0;
      for (var _i7 = 0; _i7 < maxDcCount; _i7++) for (var _r = 0; _r < rsBlocks.length; _r++) _i7 < dcdata[_r].length && (data[index++] = dcdata[_r][_i7]);
      for (var _i8 = 0; _i8 < maxEcCount; _i8++) for (var _r2 = 0; _r2 < rsBlocks.length; _r2++) _i8 < ecdata[_r2].length && (data[index++] = ecdata[_r2][_i8]);
      return data;
    };
    var QRMode = {
      MODE_NUMBER: 1,
      MODE_ALPHA_NUM: 2,
      MODE_8BIT_BYTE: 4,
      MODE_KANJI: 8
    };
    var QRErrorCorrectLevel = {
      L: 1,
      M: 0,
      Q: 3,
      H: 2
    };
    var QRMaskPattern = {
      PATTERN000: 0,
      PATTERN001: 1,
      PATTERN010: 2,
      PATTERN011: 3,
      PATTERN100: 4,
      PATTERN101: 5,
      PATTERN110: 6,
      PATTERN111: 7
    };
    var QRUtil = {
      PATTERN_POSITION_TABLE: [ [], [ 6, 18 ], [ 6, 22 ], [ 6, 26 ], [ 6, 30 ], [ 6, 34 ], [ 6, 22, 38 ], [ 6, 24, 42 ], [ 6, 26, 46 ], [ 6, 28, 50 ], [ 6, 30, 54 ], [ 6, 32, 58 ], [ 6, 34, 62 ], [ 6, 26, 46, 66 ], [ 6, 26, 48, 70 ], [ 6, 26, 50, 74 ], [ 6, 30, 54, 78 ], [ 6, 30, 56, 82 ], [ 6, 30, 58, 86 ], [ 6, 34, 62, 90 ], [ 6, 28, 50, 72, 94 ], [ 6, 26, 50, 74, 98 ], [ 6, 30, 54, 78, 102 ], [ 6, 28, 54, 80, 106 ], [ 6, 32, 58, 84, 110 ], [ 6, 30, 58, 86, 114 ], [ 6, 34, 62, 90, 118 ], [ 6, 26, 50, 74, 98, 122 ], [ 6, 30, 54, 78, 102, 126 ], [ 6, 26, 52, 78, 104, 130 ], [ 6, 30, 56, 82, 108, 134 ], [ 6, 34, 60, 86, 112, 138 ], [ 6, 30, 58, 86, 114, 142 ], [ 6, 34, 62, 90, 118, 146 ], [ 6, 30, 54, 78, 102, 126, 150 ], [ 6, 24, 50, 76, 102, 128, 154 ], [ 6, 28, 54, 80, 106, 132, 158 ], [ 6, 32, 58, 84, 110, 136, 162 ], [ 6, 26, 54, 82, 110, 138, 166 ], [ 6, 30, 58, 86, 114, 142, 170 ] ],
      G15: 1335,
      G18: 7973,
      G15_MASK: 21522,
      getBCHTypeInfo: function getBCHTypeInfo(data) {
        var d = data << 10;
        while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) d ^= QRUtil.G15 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15);
        return (data << 10 | d) ^ QRUtil.G15_MASK;
      },
      getBCHTypeNumber: function getBCHTypeNumber(data) {
        var d = data << 12;
        while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) d ^= QRUtil.G18 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18);
        return data << 12 | d;
      },
      getBCHDigit: function getBCHDigit(data) {
        var digit = 0;
        while (0 != data) {
          digit++;
          data >>>= 1;
        }
        return digit;
      },
      getPatternPosition: function getPatternPosition(typeNumber) {
        return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];
      },
      getMask: function getMask(maskPattern, i, j) {
        switch (maskPattern) {
         case QRMaskPattern.PATTERN000:
          return (i + j) % 2 == 0;

         case QRMaskPattern.PATTERN001:
          return i % 2 == 0;

         case QRMaskPattern.PATTERN010:
          return j % 3 == 0;

         case QRMaskPattern.PATTERN011:
          return (i + j) % 3 == 0;

         case QRMaskPattern.PATTERN100:
          return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;

         case QRMaskPattern.PATTERN101:
          return i * j % 2 + i * j % 3 == 0;

         case QRMaskPattern.PATTERN110:
          return (i * j % 2 + i * j % 3) % 2 == 0;

         case QRMaskPattern.PATTERN111:
          return (i * j % 3 + (i + j) % 2) % 2 == 0;

         default:
          throw new Error("bad maskPattern:" + maskPattern);
        }
      },
      getErrorCorrectPolynomial: function getErrorCorrectPolynomial(errorCorrectLength) {
        var a = new QRPolynomial([ 1 ], 0);
        for (var i = 0; i < errorCorrectLength; i++) a = a.multiply(new QRPolynomial([ 1, QRMath.gexp(i) ], 0));
        return a;
      },
      getLengthInBits: function getLengthInBits(mode, type) {
        if (1 <= type && type < 10) switch (mode) {
         case QRMode.MODE_NUMBER:
          return 10;

         case QRMode.MODE_ALPHA_NUM:
          return 9;

         case QRMode.MODE_8BIT_BYTE:
         case QRMode.MODE_KANJI:
          return 8;

         default:
          throw new Error("mode:" + mode);
        } else if (type < 27) switch (mode) {
         case QRMode.MODE_NUMBER:
          return 12;

         case QRMode.MODE_ALPHA_NUM:
          return 11;

         case QRMode.MODE_8BIT_BYTE:
          return 16;

         case QRMode.MODE_KANJI:
          return 10;

         default:
          throw new Error("mode:" + mode);
        } else {
          if (!(type < 41)) throw new Error("type:" + type);
          switch (mode) {
           case QRMode.MODE_NUMBER:
            return 14;

           case QRMode.MODE_ALPHA_NUM:
            return 13;

           case QRMode.MODE_8BIT_BYTE:
            return 16;

           case QRMode.MODE_KANJI:
            return 12;

           default:
            throw new Error("mode:" + mode);
          }
        }
      },
      getLostPoint: function getLostPoint(qrCode) {
        var moduleCount = qrCode.getModuleCount();
        var lostPoint = 0;
        for (var row = 0; row < moduleCount; row++) for (var col = 0; col < moduleCount; col++) {
          var sameCount = 0;
          var dark = qrCode.isDark(row, col);
          for (var r = -1; r <= 1; r++) {
            if (row + r < 0 || moduleCount <= row + r) continue;
            for (var c = -1; c <= 1; c++) {
              if (col + c < 0 || moduleCount <= col + c) continue;
              if (0 == r && 0 == c) continue;
              dark == qrCode.isDark(row + r, col + c) && sameCount++;
            }
          }
          sameCount > 5 && (lostPoint += 3 + sameCount - 5);
        }
        for (var _row = 0; _row < moduleCount - 1; _row++) for (var _col = 0; _col < moduleCount - 1; _col++) {
          var count = 0;
          qrCode.isDark(_row, _col) && count++;
          qrCode.isDark(_row + 1, _col) && count++;
          qrCode.isDark(_row, _col + 1) && count++;
          qrCode.isDark(_row + 1, _col + 1) && count++;
          0 != count && 4 != count || (lostPoint += 3);
        }
        for (var _row2 = 0; _row2 < moduleCount; _row2++) for (var _col2 = 0; _col2 < moduleCount - 6; _col2++) qrCode.isDark(_row2, _col2) && !qrCode.isDark(_row2, _col2 + 1) && qrCode.isDark(_row2, _col2 + 2) && qrCode.isDark(_row2, _col2 + 3) && qrCode.isDark(_row2, _col2 + 4) && !qrCode.isDark(_row2, _col2 + 5) && qrCode.isDark(_row2, _col2 + 6) && (lostPoint += 40);
        for (var _col3 = 0; _col3 < moduleCount; _col3++) for (var _row3 = 0; _row3 < moduleCount - 6; _row3++) qrCode.isDark(_row3, _col3) && !qrCode.isDark(_row3 + 1, _col3) && qrCode.isDark(_row3 + 2, _col3) && qrCode.isDark(_row3 + 3, _col3) && qrCode.isDark(_row3 + 4, _col3) && !qrCode.isDark(_row3 + 5, _col3) && qrCode.isDark(_row3 + 6, _col3) && (lostPoint += 40);
        var darkCount = 0;
        for (var _col4 = 0; _col4 < moduleCount; _col4++) for (var _row4 = 0; _row4 < moduleCount; _row4++) qrCode.isDark(_row4, _col4) && darkCount++;
        var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;
        lostPoint += 10 * ratio;
        return lostPoint;
      }
    };
    var QRMath = {
      glog: function glog(n) {
        if (n < 1) throw new Error("glog(" + n + ")");
        return QRMath.LOG_TABLE[n];
      },
      gexp: function gexp(n) {
        while (n < 0) n += 255;
        while (n >= 256) n -= 255;
        return QRMath.EXP_TABLE[n];
      },
      EXP_TABLE: new Array(256),
      LOG_TABLE: new Array(256)
    };
    for (var i = 0; i < 8; i++) QRMath.EXP_TABLE[i] = 1 << i;
    for (var _i9 = 8; _i9 < 256; _i9++) QRMath.EXP_TABLE[_i9] = QRMath.EXP_TABLE[_i9 - 4] ^ QRMath.EXP_TABLE[_i9 - 5] ^ QRMath.EXP_TABLE[_i9 - 6] ^ QRMath.EXP_TABLE[_i9 - 8];
    for (var _i10 = 0; _i10 < 255; _i10++) QRMath.LOG_TABLE[QRMath.EXP_TABLE[_i10]] = _i10;
    function QRPolynomial(num, shift) {
      if (void 0 == num.length) throw new Error(num.length + "/" + shift);
      var offset = 0;
      while (offset < num.length && 0 == num[offset]) offset++;
      this.num = new Array(num.length - offset + shift);
      for (var _i11 = 0; _i11 < num.length - offset; _i11++) this.num[_i11] = num[_i11 + offset];
    }
    QRPolynomial.prototype = {
      get: function get(index) {
        return this.num[index];
      },
      getLength: function getLength() {
        return this.num.length;
      },
      multiply: function multiply(e) {
        var num = new Array(this.getLength() + e.getLength() - 1);
        for (var _i12 = 0; _i12 < this.getLength(); _i12++) for (var j = 0; j < e.getLength(); j++) num[_i12 + j] ^= QRMath.gexp(QRMath.glog(this.get(_i12)) + QRMath.glog(e.get(j)));
        return new QRPolynomial(num, 0);
      },
      mod: function mod(e) {
        if (this.getLength() - e.getLength() < 0) return this;
        var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));
        var num = new Array(this.getLength());
        for (var _i13 = 0; _i13 < this.getLength(); _i13++) num[_i13] = this.get(_i13);
        for (var _i14 = 0; _i14 < e.getLength(); _i14++) num[_i14] ^= QRMath.gexp(QRMath.glog(e.get(_i14)) + ratio);
        return new QRPolynomial(num, 0).mod(e);
      }
    };
    function QRRSBlock(totalCount, dataCount) {
      this.totalCount = totalCount;
      this.dataCount = dataCount;
    }
    QRRSBlock.RS_BLOCK_TABLE = [ [ 1, 26, 19 ], [ 1, 26, 16 ], [ 1, 26, 13 ], [ 1, 26, 9 ], [ 1, 44, 34 ], [ 1, 44, 28 ], [ 1, 44, 22 ], [ 1, 44, 16 ], [ 1, 70, 55 ], [ 1, 70, 44 ], [ 2, 35, 17 ], [ 2, 35, 13 ], [ 1, 100, 80 ], [ 2, 50, 32 ], [ 2, 50, 24 ], [ 4, 25, 9 ], [ 1, 134, 108 ], [ 2, 67, 43 ], [ 2, 33, 15, 2, 34, 16 ], [ 2, 33, 11, 2, 34, 12 ], [ 2, 86, 68 ], [ 4, 43, 27 ], [ 4, 43, 19 ], [ 4, 43, 15 ], [ 2, 98, 78 ], [ 4, 49, 31 ], [ 2, 32, 14, 4, 33, 15 ], [ 4, 39, 13, 1, 40, 14 ], [ 2, 121, 97 ], [ 2, 60, 38, 2, 61, 39 ], [ 4, 40, 18, 2, 41, 19 ], [ 4, 40, 14, 2, 41, 15 ], [ 2, 146, 116 ], [ 3, 58, 36, 2, 59, 37 ], [ 4, 36, 16, 4, 37, 17 ], [ 4, 36, 12, 4, 37, 13 ], [ 2, 86, 68, 2, 87, 69 ], [ 4, 69, 43, 1, 70, 44 ], [ 6, 43, 19, 2, 44, 20 ], [ 6, 43, 15, 2, 44, 16 ], [ 4, 101, 81 ], [ 1, 80, 50, 4, 81, 51 ], [ 4, 50, 22, 4, 51, 23 ], [ 3, 36, 12, 8, 37, 13 ], [ 2, 116, 92, 2, 117, 93 ], [ 6, 58, 36, 2, 59, 37 ], [ 4, 46, 20, 6, 47, 21 ], [ 7, 42, 14, 4, 43, 15 ], [ 4, 133, 107 ], [ 8, 59, 37, 1, 60, 38 ], [ 8, 44, 20, 4, 45, 21 ], [ 12, 33, 11, 4, 34, 12 ], [ 3, 145, 115, 1, 146, 116 ], [ 4, 64, 40, 5, 65, 41 ], [ 11, 36, 16, 5, 37, 17 ], [ 11, 36, 12, 5, 37, 13 ], [ 5, 109, 87, 1, 110, 88 ], [ 5, 65, 41, 5, 66, 42 ], [ 5, 54, 24, 7, 55, 25 ], [ 11, 36, 12 ], [ 5, 122, 98, 1, 123, 99 ], [ 7, 73, 45, 3, 74, 46 ], [ 15, 43, 19, 2, 44, 20 ], [ 3, 45, 15, 13, 46, 16 ], [ 1, 135, 107, 5, 136, 108 ], [ 10, 74, 46, 1, 75, 47 ], [ 1, 50, 22, 15, 51, 23 ], [ 2, 42, 14, 17, 43, 15 ], [ 5, 150, 120, 1, 151, 121 ], [ 9, 69, 43, 4, 70, 44 ], [ 17, 50, 22, 1, 51, 23 ], [ 2, 42, 14, 19, 43, 15 ], [ 3, 141, 113, 4, 142, 114 ], [ 3, 70, 44, 11, 71, 45 ], [ 17, 47, 21, 4, 48, 22 ], [ 9, 39, 13, 16, 40, 14 ], [ 3, 135, 107, 5, 136, 108 ], [ 3, 67, 41, 13, 68, 42 ], [ 15, 54, 24, 5, 55, 25 ], [ 15, 43, 15, 10, 44, 16 ], [ 4, 144, 116, 4, 145, 117 ], [ 17, 68, 42 ], [ 17, 50, 22, 6, 51, 23 ], [ 19, 46, 16, 6, 47, 17 ], [ 2, 139, 111, 7, 140, 112 ], [ 17, 74, 46 ], [ 7, 54, 24, 16, 55, 25 ], [ 34, 37, 13 ], [ 4, 151, 121, 5, 152, 122 ], [ 4, 75, 47, 14, 76, 48 ], [ 11, 54, 24, 14, 55, 25 ], [ 16, 45, 15, 14, 46, 16 ], [ 6, 147, 117, 4, 148, 118 ], [ 6, 73, 45, 14, 74, 46 ], [ 11, 54, 24, 16, 55, 25 ], [ 30, 46, 16, 2, 47, 17 ], [ 8, 132, 106, 4, 133, 107 ], [ 8, 75, 47, 13, 76, 48 ], [ 7, 54, 24, 22, 55, 25 ], [ 22, 45, 15, 13, 46, 16 ], [ 10, 142, 114, 2, 143, 115 ], [ 19, 74, 46, 4, 75, 47 ], [ 28, 50, 22, 6, 51, 23 ], [ 33, 46, 16, 4, 47, 17 ], [ 8, 152, 122, 4, 153, 123 ], [ 22, 73, 45, 3, 74, 46 ], [ 8, 53, 23, 26, 54, 24 ], [ 12, 45, 15, 28, 46, 16 ], [ 3, 147, 117, 10, 148, 118 ], [ 3, 73, 45, 23, 74, 46 ], [ 4, 54, 24, 31, 55, 25 ], [ 11, 45, 15, 31, 46, 16 ], [ 7, 146, 116, 7, 147, 117 ], [ 21, 73, 45, 7, 74, 46 ], [ 1, 53, 23, 37, 54, 24 ], [ 19, 45, 15, 26, 46, 16 ], [ 5, 145, 115, 10, 146, 116 ], [ 19, 75, 47, 10, 76, 48 ], [ 15, 54, 24, 25, 55, 25 ], [ 23, 45, 15, 25, 46, 16 ], [ 13, 145, 115, 3, 146, 116 ], [ 2, 74, 46, 29, 75, 47 ], [ 42, 54, 24, 1, 55, 25 ], [ 23, 45, 15, 28, 46, 16 ], [ 17, 145, 115 ], [ 10, 74, 46, 23, 75, 47 ], [ 10, 54, 24, 35, 55, 25 ], [ 19, 45, 15, 35, 46, 16 ], [ 17, 145, 115, 1, 146, 116 ], [ 14, 74, 46, 21, 75, 47 ], [ 29, 54, 24, 19, 55, 25 ], [ 11, 45, 15, 46, 46, 16 ], [ 13, 145, 115, 6, 146, 116 ], [ 14, 74, 46, 23, 75, 47 ], [ 44, 54, 24, 7, 55, 25 ], [ 59, 46, 16, 1, 47, 17 ], [ 12, 151, 121, 7, 152, 122 ], [ 12, 75, 47, 26, 76, 48 ], [ 39, 54, 24, 14, 55, 25 ], [ 22, 45, 15, 41, 46, 16 ], [ 6, 151, 121, 14, 152, 122 ], [ 6, 75, 47, 34, 76, 48 ], [ 46, 54, 24, 10, 55, 25 ], [ 2, 45, 15, 64, 46, 16 ], [ 17, 152, 122, 4, 153, 123 ], [ 29, 74, 46, 14, 75, 47 ], [ 49, 54, 24, 10, 55, 25 ], [ 24, 45, 15, 46, 46, 16 ], [ 4, 152, 122, 18, 153, 123 ], [ 13, 74, 46, 32, 75, 47 ], [ 48, 54, 24, 14, 55, 25 ], [ 42, 45, 15, 32, 46, 16 ], [ 20, 147, 117, 4, 148, 118 ], [ 40, 75, 47, 7, 76, 48 ], [ 43, 54, 24, 22, 55, 25 ], [ 10, 45, 15, 67, 46, 16 ], [ 19, 148, 118, 6, 149, 119 ], [ 18, 75, 47, 31, 76, 48 ], [ 34, 54, 24, 34, 55, 25 ], [ 20, 45, 15, 61, 46, 16 ] ];
    QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {
      var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);
      if (void 0 == rsBlock) throw new Error("bad rs block @ typeNumber:" + typeNumber + "/errorCorrectLevel:" + errorCorrectLevel);
      var length = rsBlock.length / 3;
      var list = new Array();
      for (var _i15 = 0; _i15 < length; _i15++) {
        var count = rsBlock[3 * _i15 + 0];
        var totalCount = rsBlock[3 * _i15 + 1];
        var dataCount = rsBlock[3 * _i15 + 2];
        for (var j = 0; j < count; j++) list.push(new QRRSBlock(totalCount, dataCount));
      }
      return list;
    };
    QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {
      switch (errorCorrectLevel) {
       case QRErrorCorrectLevel.L:
        return QRRSBlock.RS_BLOCK_TABLE[4 * (typeNumber - 1) + 0];

       case QRErrorCorrectLevel.M:
        return QRRSBlock.RS_BLOCK_TABLE[4 * (typeNumber - 1) + 1];

       case QRErrorCorrectLevel.Q:
        return QRRSBlock.RS_BLOCK_TABLE[4 * (typeNumber - 1) + 2];

       case QRErrorCorrectLevel.H:
        return QRRSBlock.RS_BLOCK_TABLE[4 * (typeNumber - 1) + 3];

       default:
        return;
      }
    };
    function QRBitBuffer() {
      this.buffer = new Array();
      this.length = 0;
    }
    QRBitBuffer.prototype = {
      get: function get(index) {
        var bufIndex = Math.floor(index / 8);
        return 1 == (this.buffer[bufIndex] >>> 7 - index % 8 & 1);
      },
      put: function put(num, length) {
        for (var _i16 = 0; _i16 < length; _i16++) this.putBit(1 == (num >>> length - _i16 - 1 & 1));
      },
      getLengthInBits: function getLengthInBits() {
        return this.length;
      },
      putBit: function putBit(bit) {
        var bufIndex = Math.floor(this.length / 8);
        this.buffer.length <= bufIndex && this.buffer.push(0);
        bit && (this.buffer[bufIndex] |= 128 >>> this.length % 8);
        this.length++;
      }
    };
    cc.Class({
      extends: cc.Component,
      editor: {
        requireComponent: cc.Graphics,
        executeInEditMode: true
      },
      properties: {
        string: {
          default: "Hello World!",
          notify: function notify(oldValue) {
            if (this.string === oldValue) return;
            this.setContent();
          }
        },
        backColor: {
          type: cc.Color,
          default: cc.Color.WHITE,
          notify: function notify() {
            this.setContent();
          }
        },
        foreColor: {
          type: cc.Color,
          default: cc.Color.BLACK,
          notify: function notify(old) {
            this.node.color = this.graphics.fillColor;
            this.setContent();
          }
        },
        margin: {
          type: cc.Float,
          default: 10,
          notify: function notify(old) {
            if (old === this.margin) return;
            this.setContent();
          }
        },
        _size: 230,
        size: {
          type: cc.Float,
          get: function get() {
            return this._size;
          },
          set: function set(value) {
            if (this._size === value) return;
            this.node.setContentSize(value, value);
            this.setContent();
            this._size = value;
          }
        }
      },
      onLoad: function onLoad() {
        this.graphics = this.node.getComponent(cc.Graphics);
        this.node.setContentSize(this.size, this.size);
        this.setContent();
      },
      setContent: function setContent() {
        this.graphics.clear();
        this.graphics.fillColor = this.backColor;
        var width = this.node.width;
        this.graphics.rect(0 - .5 * width, 0 - .5 * width, width, width);
        this.graphics.fill();
        this.graphics.close();
        var qrcode = new QRCode(-1, 2);
        qrcode.addData(this.string);
        qrcode.make();
        this.graphics.fillColor = this.foreColor;
        var size = width - 2 * this.margin;
        var num = qrcode.getModuleCount();
        var tileW = size / num;
        var tileH = size / num;
        var w = Math.ceil(tileW);
        var h = Math.ceil(tileH);
        for (var row = 0; row < num; row++) for (var col = 0; col < num; col++) if (qrcode.isDark(row, col)) {
          this.graphics.rect(this.margin + col * tileW - .5 * width, size - tileH - Math.round(row * tileH) + this.margin - .5 * width, w, h);
          this.graphics.fill();
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  activityCenter: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "575827Ho7VKlKVVD9rAmsOr", "activityCenter");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var _loadProcessCb = null;
    cc.Class((_cc$Class = {
      extends: require("dialogExtend"),
      properties: {
        mask: cc.Node,
        closeBtn: cc.Button,
        mainDialog: cc.Node,
        activityToggle_pf: cc.Prefab,
        leftSide: cc.Node,
        leftSideScrollView: cc.ScrollView,
        otherIntroImg: cc.Sprite,
        userBetData: [ cc.Label ],
        userBetTag: [ cc.Label ],
        bonusTitle: cc.Node,
        getBonusBtnArr: [ cc.Node ],
        getBonusBox: cc.Node,
        scrollContent: cc.Node,
        scrollView: cc.ScrollView,
        startTime: cc.Label,
        endTime: cc.Label,
        betInfo: cc.Node,
        activityDurationTime: cc.Node,
        tableTitleArea: cc.Node,
        tableTitleTxt: cc.Label,
        td_pf: cc.Prefab,
        tableBody: cc.Node,
        tableBg: [ cc.SpriteFrame ],
        activityRule: cc.Node,
        captionTxt: cc.Label,
        captionTitle: cc.Node,
        bonusBtnBg: [ cc.SpriteFrame ],
        activityRuleBox: cc.Node,
        captionBox: cc.Node,
        achievementActivityPfb: cc.Prefab,
        achievementActivityPanel: cc.Node,
        achievementBox: cc.Node,
        achievementTime: cc.Label,
        lockAchievementNum: cc.Label,
        panelArr: [ cc.Node ],
        reliefFundData: [ cc.Label ],
        levelUpData: [ cc.Label ],
        btnStateArr: [ cc.SpriteFrame ],
        btnBgArr: [ cc.SpriteFrame ],
        animEffect: cc.Animation
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getActivityCb", this.getActivityCb.bind(this) ], [ "getUserAwardInfoCb", this.getUserAwardInfoCb.bind(this) ], [ "getActivityBonusCb", this.getActivityBonusCb.bind(this) ], [ "getAchievementAwardCb", this.getAchievementAwardCb.bind(this) ], [ "getAchievementActivityDataCb", this.getAchievementActivityDataCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      loadResource: function loadResource(sceneName) {
        var _this = this;
        if (dataLogic.isToastLoad) this.toastShow(); else {
          var arg = {
            type: constant.ToastType.Loading
          };
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var txt = load.getChildByName("txt").getComponent(cc.Label);
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
          var n = 0;
          _loadProcessCb = function _loadProcessCb() {
            n++;
            txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
          };
          this.schedule(_loadProcessCb, .1, 98);
          var preloadRes = constant.GameRes[sceneName].concat(constant.initActivityRes);
          var loadDone = function loadDone() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            _this.toastShow();
            dataLogic.isToastLoad = true;
          };
          var loadTimeout = function loadTimeout() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            kf.killObj(_this.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      toastShow: function toastShow() {
        this.mask.active = true;
        this.mainDialog.opacity = 255;
        var sendData = {
          action: "GetInitData",
          Requirement: JSON.stringify([ "SysActivity", "OtherActivity", "DailyRewardConfig", "GradeList" ])
        };
        this.reqDateAndShowLoadView(sendData, "getActivityCb");
        this.freeTdNodeList = [];
      },
      btnEvent: function btnEvent(event, key) {
        switch (key) {
         case "closeBtn":
          audioMgr.playEffect(this.clickAudio);
          this.recordMainClose();
        }
      },
      onLoad: function onLoad() {
        this.mask.width = cc.winSize.width;
        this.mask.height = cc.winSize.height;
      },
      init: function init(initArg) {
        this.id = null;
        this.activityData = [];
        this.curActivityData = {};
        this.DailyRewardConfig = [];
        this.achievementData = {};
        this.GradeList = [];
        this.defaultActivityData = null;
        this.defaultShowIndex = 0;
        initArg && initArg.id && (this.id = initArg.id);
        this.registerEvent();
        this.loadResource(constant.ToastName.InfoToast);
      },
      getActivityCb: function getActivityCb(data) {
        this.hideLoadView();
        if (1 == data.Code && (data.BackData.SysActivity.length || data.BackData.OtherActivity.length)) {
          var bubbleSort2 = function bubbleSort2(arr) {
            var i = arr.length - 1;
            while (i > 0) {
              var pos = 0;
              for (var j = 0; j < i; j++) if (arr[j].Sort > arr[j + 1].Sort) {
                pos = j;
                var tmp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = tmp;
              }
              i = pos;
            }
            return arr;
          };
          this.activityData = this.activityData.concat(data.BackData.OtherActivity).concat(data.BackData.SysActivity);
          this.activityData = bubbleSort2(this.activityData);
          this.defaultActivityData = this.activityData[0];
          this.defaultShowIndex = 0;
          for (var i = 0; i < this.activityData.length; i++) {
            if (this.id && this.activityData[i].ID == this.id) {
              this.defaultActivityData = this.activityData[i];
              this.defaultShowIndex = i;
            }
            var newNode = cc.instantiate(this.activityToggle_pf);
            newNode.parent = this.leftSide;
            var checkEventHandler = new cc.Component.EventHandler();
            checkEventHandler.target = this.node;
            checkEventHandler.component = "activityCenter";
            checkEventHandler.handler = "toggleActivity";
            checkEventHandler.customEventData = [ this.activityData[i].Name, this.activityData[i].Type ];
            var toggleComponent = newNode.getComponent(cc.Button);
            newNode.y = i * (5 - newNode.height) - newNode.height / 2;
            newNode.x = -125;
            newNode.getChildByName("txt").getComponent(cc.Label).string = this.activityData[i].Name;
            toggleComponent.clickEvents[0] = checkEventHandler;
            newNode.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBgArr[0];
            newNode.getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
          }
          this.curActivityData = this.defaultActivityData;
          this.leftSide.children[this.defaultShowIndex].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
          this.leftSide.children[this.defaultShowIndex].getChildByName("txt").color = new cc.Color(255, 255, 255);
          this.leftSide.children[this.defaultShowIndex].getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBgArr[1];
          this.checkRenderWhichPanel();
          this.DailyRewardConfig = data.BackData.DailyRewardConfig;
          this.GradeList = data.BackData.GradeList;
          this.leftSide.parent.height = this.leftSide.height = this.activityData.length * (this.leftSide.children[0].height - 5);
          if (0 != this.defaultShowIndex) {
            var pos = this.leftSide.children[this.defaultShowIndex].position;
            var percent = Math.abs(pos.y) / this.leftSide.height;
            var offset = percent * this.leftSideScrollView.getMaxScrollOffset().y;
            this.leftSideScrollView.scrollToOffset(cc.p(0, offset), .1);
          }
        }
      },
      checkRenderWhichPanel: function checkRenderWhichPanel() {
        "\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name && 1 == this.curActivityData.Type ? this.renderReliefFundPanel() : "\u664b\u7ea7\u5956\u52b1" == this.curActivityData.Name && 1 == this.curActivityData.Type ? this.renderLevelUpPanel() : 3 == this.curActivityData.Type ? this.getAchievementActivityData() : 1 != this.curActivityData.Type && this.renderActivityPanel();
      },
      renderReliefFundPanel: function renderReliefFundPanel() {
        var sendData = {
          action: "GetDailyRewardData",
          Qort: "\u6bcf\u65e5\u6551\u6d4e\u91d1"
        };
        this.reqDateAndShowLoadView(sendData, "getUserAwardInfoCb", this.curActivityData.Name);
      },
      renderLevelUpPanel: function renderLevelUpPanel() {
        var sendData = {
          action: "GetInitData",
          Requirement: JSON.stringify([ "UserUpGradeBonus" ])
        };
        this.reqDateAndShowLoadView(sendData, "getUserAwardInfoCb", this.curActivityData.Name);
      },
      showPanel: function showPanel(whichOne) {
        for (var i = 0; i < this.panelArr.length; i++) this.panelArr[i].active = false;
        this.panelArr[whichOne].active = true;
      },
      getActivityBonus: function getActivityBonus(event, type) {
        var sendData = {};
        audioMgr.playEffect(this.clickAudio);
        1 == this.curActivityData.Type ? sendData = "\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name ? {
          Action: "GetReward",
          Qort: 1
        } : {
          Action: "GetReward",
          Qort: "2"
        } : 2 == this.curActivityData.Type && (sendData = {
          Action: "GetReward",
          Qort: 3,
          ID: this.curActivityData.ID
        });
        this.reqDateAndShowLoadView(sendData, "getActivityBonusCb");
      },
      getActivityBonusCb: function getActivityBonusCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          this.showLayerTip(data.StrCode);
          1 == this.curActivityData.Type ? this.setNewGetBonusBtnState("\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name ? 0 : 1, false, 1) : this.setGetBonusBtnState(false, 120, "\u5df2\u9886\u53d6");
          2 == this.curActivityData.Type && (this.userBetData[2].string = this.userBetData[1].string);
        }
      },
      toggleActivity: function toggleActivity(event, customData) {
        http.abortAllReq();
        audioMgr.playEffect(this.clickAudio);
        this.otherIntroImg.node.active = false;
        this.otherIntroImg.sizeMode = cc.Sprite.SizeMode.TRIMMED;
        this.scrollView.stopAutoScroll();
        this.scrollView.scrollToTop();
        this.clearObjPool(this.tableBody);
        this.scrollContent.opacity = 0;
        for (var i = 0; i < this.leftSide.children.length; i++) {
          this.leftSide.children[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
          this.leftSide.children[i].getChildByName("txt").color = new cc.Color(138, 69, 58);
          this.leftSide.children[i].getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBgArr[0];
        }
        event.target.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        event.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
        event.target.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBgArr[1];
        for (var _i = 0; _i < this.activityData.length; _i++) if (this.activityData[_i].Name == customData[0] && this.activityData[_i].Type == customData[1]) {
          this.curActivityData = this.activityData[_i];
          this.checkRenderWhichPanel();
        }
      },
      getAchievementActivityData: function getAchievementActivityData() {
        if ("{}" != JSON.stringify(this.achievementData) && this.achievementData.progressList.length) this.renderAchievementActivityPanel(); else {
          var sendData = {
            action: "UserAchievementProgress",
            ID: this.curActivityData.ID
          };
          this.reqDateAndShowLoadView(sendData, "getAchievementActivityDataCb");
        }
      },
      renderAchievementActivityPanel: function renderAchievementActivityPanel() {
        this.hideLoadView();
        this.showPanel(2);
        var hasGetBonusNum = 0;
        if (!this.achievementBox.children.length) for (var i = 0; i < 6; i++) {
          var node = new cc.instantiate(this.achievementActivityPfb);
          node.parent = this.achievementBox;
          node.x = 181 + i % 3 * (node.width + 20);
          node.y = -Math.floor(i / 3) * (node.height + 17.5) - 240;
          node.getChildByName("bonusMoney").getComponent(cc.Label).string = "\xd7" + this.achievementData.progressList[i].money;
          node.getChildByName("unlockNum").getComponent(cc.Label).string = "\u89e3\u9501 " + this.achievementData.progressList[i].achievementNum + " \u4e2a\u6210\u5c31";
          node._index = this.achievementData.progressList[i]._index;
          var hasGetBonusTag = node.getChildByName("hasGetBonusTag");
          var getBonusTip = node.getChildByName("getBonusTip");
          var mask = node.getChildByName("unlockMask");
          if (0 == this.achievementData.progressList[i].status) {
            mask.opacity = 255;
            hasGetBonusTag.opacity = 0;
            getBonusTip.opacity = 0;
          } else if (1 == this.achievementData.progressList[i].status) {
            mask.opacity = 0;
            getBonusTip.opacity = 255;
            hasGetBonusTag.opacity = 0;
          } else {
            mask.opacity = 0;
            getBonusTip.opacity = 0;
            hasGetBonusTag.opacity = 255;
            hasGetBonusNum += 1;
          }
          var clickEventHandler = new cc.Component.EventHandler();
          clickEventHandler.target = this.node;
          clickEventHandler.component = "activityCenter";
          clickEventHandler.handler = "getAchievementAward";
          clickEventHandler.customEventData = i + 1;
          node.getComponent(cc.Button).clickEvents[0] = clickEventHandler;
        }
        this.achievementTime.string = "\u6d3b\u52a8\u65f6\u95f4\uff1a" + this.achievementData.actTime;
        this.lockAchievementNum.string = "\u5df2\u89e3\u9501\u6210\u5c31\uff1a" + this.achievementData.unlockProgress;
        this.achievementActivityPanel.active = true;
        this.scrollContent.parent.parent.active = false;
      },
      seeRule: function seeRule(event, type) {
        audioMgr.playEffect(this.clickAudio);
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/activityRuleBox",
          js: "activityRule",
          initArg: {
            data: this.curActivityData,
            GradeList: this.GradeList,
            DailyRewardConfig: this.DailyRewardConfig
          }
        });
      },
      getAchievementAward: function getAchievementAward(event, index) {
        var sendData = {
          action: "GetReward",
          ID: this.curActivityData.ID,
          Qort: 4,
          RewardIndex: event.target._index + 1
        };
        if (255 == this.achievementBox.children[index - 1].getChildByName("getBonusTip").opacity) {
          audioMgr.playEffect(this.clickAudio);
          if (this.achievementData.actTime) {
            var startTime = this.achievementData.actTime.split("~")[0];
            var endTime = this.achievementData.actTime.split("~")[1];
            var nowSerTime = _Tool.Date.getGMTTime();
            var start = _Tool.Date.parse(startTime);
            var end = endTime ? _Tool.Date.parse(endTime) : null;
            nowSerTime < start ? this.showLayerTip("\u8be5\u6d3b\u52a8\u672a\u5f00\u59cb") : end && nowSerTime > end ? this.showLayerTip("\u8be5\u6d3b\u52a8\u5df2\u7ed3\u675f") : this.reqDateAndShowLoadView(sendData, "getAchievementAwardCb", {
              index: index
            });
          }
        }
      },
      getAchievementAwardCb: function getAchievementAwardCb(data, arg) {
        this.hideLoadView();
        if (1 == data.Code) {
          this.showLayerTip("\u9886\u53d6\u6210\u529f");
          var node = this.achievementBox.children[arg.index - 1];
          node.getChildByName("getBonusTip").opacity = 0;
          node.getChildByName("hasGetBonusTag").opacity = 255;
        }
      },
      getAchievementActivityDataCb: function getAchievementActivityDataCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          this.achievementData = data.Data;
          var index = [ [ 0, 2, 4 ], [ 1, 3, 5 ] ];
          var arr = [];
          for (var k = 0; k <= 1; k++) for (var i = 0; i < data.Data.progressList.length; i++) if (-1 != index[k].indexOf(i)) {
            data.Data.progressList[i]._index = i;
            arr.push(data.Data.progressList[i]);
          }
          this.achievementData.progressList = arr;
          this.renderAchievementActivityPanel();
        }
      }
    }, _defineProperty(_cc$Class, "btnEvent", function btnEvent(event, key) {
      switch (key) {
       case "closeBtn":
        audioMgr.playEffect(this.clickAudio);
        this.recordMainClose();
      }
    }), _defineProperty(_cc$Class, "recordMainClose", function recordMainClose() {
      var _this2 = this;
      this.tableBody.childrenCount && this.clearObjPool(this.tableBody);
      this.leftSide.childrenCount && this.clearObjPool(this.leftSide);
      this.achievementBox.childrenCount && this.clearObjPool(this.achievementBox);
      this.leftSideScrollView.scrollToTop();
      this.mask.active = false;
      this.mainDialog.opacity = 0;
      for (var i = 0; i < this.panelArr.length; i++) this.panelArr[i].active = false;
      this.scheduleOnce(function() {
        kf.killObj(_this2.node);
      }, .3);
    }), _defineProperty(_cc$Class, "renderActivityPanel", function renderActivityPanel() {
      this.hideLoadView();
      this.showPanel(3);
      this.scrollContent.parent.parent.getComponent(cc.ScrollView).scrollToTop();
      if (this.curActivityData.Img) {
        var self = this;
        var loadUrl = this.curActivityData.Img;
        kf.loadNetImg(constant.imgServer + this.curActivityData.Img, this.otherIntroImg, function(resSprite) {
          if (self.curActivityData.Img != loadUrl) return;
          var originalSize = null;
          if (resSprite) {
            originalSize = resSprite._originalSize;
            self.otherIntroImg.node.width = self.tableBody.width;
            self.otherIntroImg.sizeMode = cc.Sprite.SizeMode.CUSTOM;
            self.otherIntroImg.node.active = true;
            0 == self.curActivityData.Type ? self.otherIntroImg.node.height = originalSize.height : self.otherIntroImg.node.height = originalSize.height > 180 ? 180 : originalSize.height;
            self.scrollContent.getComponent(cc.Layout).updateLayout();
          } else {
            self.otherIntroImg.node.active = false;
            self.scrollContent.getComponent(cc.Layout).updateLayout();
          }
        });
      } else {
        this.otherIntroImg.node.active = false;
        this.scrollContent.getComponent(cc.Layout).updateLayout();
      }
      if (this.curActivityData.Content) {
        this.captionBox.active = true;
        this.captionTxt.string = this.curActivityData.Content;
        this.captionTitle.active = true;
        0 == this.curActivityData.Type && (this.scrollContent.getComponent(cc.Layout).paddingBottom = 20);
      } else {
        this.captionBox.active = false;
        this.captionTitle.active = false;
        0 == this.curActivityData.Type && (this.scrollContent.getComponent(cc.Layout).paddingBottom = 0);
      }
      this.captionTxt._updateRenderData(true);
      this.captionBox.height = this.captionTxt.node.height;
      this.tableBody.active = 0 != this.curActivityData.Type;
      this.activityDurationTime.active = 2 == this.curActivityData.Type;
      if (0 == this.curActivityData.Type) {
        this.betInfo.active = false;
        this.tableTitleArea.active = false;
        this.activityRuleBox.active = false;
        this.scrollContent.opacity = 255;
        this.bonusTitle.active = false;
        this.getBonusBox.active = false;
      } else {
        this.betInfo.active = true;
        this.tableTitleArea.active = true;
        this.bonusTitle.active = true;
        this.getBonusBox.active = true;
        var sendData = {};
        if (1 == this.curActivityData.Type) {
          sendData = "\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name ? {
            action: "GetDailyRewardData",
            Qort: "\u6bcf\u65e5\u6551\u6d4e\u91d1"
          } : {
            action: "GetInitData",
            Requirement: JSON.stringify([ "UserUpGradeBonus" ])
          };
          this.activityRuleBox.active = false;
        } else if (2 == this.curActivityData.Type) {
          sendData = {
            action: "UserActivity",
            ID: this.curActivityData.ID
          };
          this.curActivityData.Start && this.setDurationTimeData();
          this.activityRuleBox.active = true;
        }
        this.reqDateAndShowLoadView(sendData, "getUserAwardInfoCb", this.curActivityData.Name);
      }
    }), _defineProperty(_cc$Class, "getUserAwardInfoCb", function getUserAwardInfoCb(data, activityName) {
      var _this3 = this;
      this.hideLoadView();
      if (1 == data.Code) {
        if ("\u6bcf\u65e5\u6551\u6d4e\u91d1" == activityName) {
          this.reliefFundData[0].string = data.BackData.YesterdayBet || 0;
          this.reliefFundData[1].string = data.BackData.UserGrade || "VIP1";
          this.reliefFundData[2].string = data.BackData.Bonus || 0;
          this.judgeGetBonusBtnState(data.BackData.State, true, 0);
          this.showPanel(0);
        } else if ("\u664b\u7ea7\u5956\u52b1" == activityName) {
          this.levelUpData[0].string = "\u5f53\u524d\u7b49\u7ea7 " + data.BackData.UserUpGradeBonus.Grade;
          this.levelUpData[1].string = "\u53ef\u5f97\u5956\u52b1\xd7" + data.BackData.UserUpGradeBonus.GradeBonus;
          this.judgeGetBonusBtnState(data.BackData.UserUpGradeBonus.State, true, 1);
          this.showPanel(1);
        } else {
          var cs = null;
          this.curActivityData.Moneys && (cs = this.curActivityData.Moneys.split("\r"));
          var renderObj = {};
          this.scrollContent.opacity = 255;
          if (cs) if (cs.length > 1) {
            renderObj.Cycle = cs[0] - 0;
            renderObj.Where = cs[1] - 0;
            renderObj.Areas = cs[2].split(",");
            renderObj.Bonus = cs[3].split(",");
          } else {
            renderObj.Cycle = 0;
            renderObj.Where = 0;
            renderObj.Bonus = cs[0].split(",");
          }
          renderObj.Title = 1 == renderObj.Where ? "\u5145\u503c\u91d1\u989d" : 2 == renderObj.Where ? "\u6295\u6ce8\u91d1\u989d" : "\u7b49\u7ea7";
          renderObj.Oneday = 1 == renderObj.Cycle ? "\u4e00\u5929" : 2 == renderObj.Cycle ? "\u4e00\u5468" : 3 == renderObj.Cycle ? "\u4e00\u4e2a\u6708" : "";
          renderObj.Today = 1 == renderObj.Cycle ? "\u4eca\u5929" : 2 == renderObj.Cycle ? "\u672c\u5468" : 3 == renderObj.Cycle ? "\u672c\u6708" : "";
          if (0 == renderObj.Where) {
            renderObj.Areas = [];
            for (var i = 0; i < 9; i++) renderObj.Areas.push("VIP" + (i + 1));
          }
          this.userBetTag[0].string = "\u7b49\u7ea7" != renderObj.Title ? renderObj.Today + renderObj.Title + "\uff1a" : renderObj.Title + "\uff1a";
          this.userBetTag[1].string = "\u53ef\u5f97\u793c\u91d1\uff1a";
          this.userBetTag[2].string = "\u5df2\u9886\u53d6\u793c\u91d1\uff1a";
          this.userBetData[0].string = data.BackData.GradeName;
          var Bonus = renderObj.Bonus.length ? renderObj.Bonus[data.BackData.Grade - 1] : 0;
          this.userBetData[1].string = Bonus || 0;
          this.userBetData[2].string = data.BackData.Geted || 0;
          var getBonusBtnState = Bonus && Bonus - 0 > 0 ? data.BackData.State : -1;
          if (this.curActivityData.Start || this.curActivityData.End) {
            var nowSerTime = _Tool.Date.getGMTTime();
            var start = _Tool.Date.parse(this.curActivityData.Start);
            var end = this.curActivityData.End ? _Tool.Date.parse(this.curActivityData.End) : null;
            nowSerTime < start ? this.setGetBonusBtnState(false, 120, "\u6d3b\u52a8\u672a\u5f00\u59cb") : end && nowSerTime > end ? this.setGetBonusBtnState(false, 120, "\u6d3b\u52a8\u5df2\u7ed3\u675f") : this.judgeGetBonusBtnState(getBonusBtnState);
          }
          this.tableTitleTxt.string = "\u6d3b\u52a8\u89c4\u5219";
          this.tableBody.getComponent(cc.Sprite).spriteFrame = this.tableBg[1];
          var line1Data = [ "" + ("\u7b49\u7ea7" == renderObj.Title ? renderObj.Title : renderObj.Oneday + renderObj.Title) ].concat(renderObj.Areas);
          var line2Data = [ "\u53ef\u5f97\u5956\u91d1" ].concat(renderObj.Bonus);
          this.scheduleOnce(function() {
            _this3.createGiftActivityTable(line1Data, 0);
            _this3.createGiftActivityTable(line2Data, 1);
          }, .3);
          var _str = "\u7b49\u7ea7" == renderObj.Title ? "" : "\uff0c" + renderObj.Oneday + "\u540e" + renderObj.Title + "\u91cd\u65b0\u8ba1\u7b97";
          var _txt1 = "1\u3001\u6d3b\u52a8\u5468\u671f\u4e3a" + renderObj.Oneday + _str + "\u3002\n2\u3001" + renderObj.Oneday + "\u5185\u53ef\u591a\u6b21\u9886\u53d6\uff0c\u4f46\u8981\u6263\u9664\u4e4b\u524d\u5df2\u7ecf\u9886\u53d6\u7684\u91d1\u989d\u3002\n\u5982\uff1a\u5728" + renderObj.Oneday + "\u5185\uff0c" + renderObj.Title + "\u8fbe\u5230" + renderObj.Areas[6] + "\u65f6\u9886\u53d6\u4e86" + renderObj.Bonus[6] + "\u5143\uff0c\u4e4b\u540e" + renderObj.Title + "\u8fbe\u5230" + renderObj.Areas[7] + "\u65f6\u53ef\u9886\u53d6" + renderObj.Bonus[7] + "-" + renderObj.Bonus[6] + "=" + (renderObj.Bonus[7] - renderObj.Bonus[6]) + "\u5143\u3002";
          var _txt2 = "\u6d3b\u52a8\u671f\u95f4\u53ef\u591a\u6b21\u9886\u53d6\uff0c\u4f46\u8981\u6263\u9664\u4e4b\u524d\u5df2\u7ecf\u9886\u53d6\u7684\u91d1\u989d\u3002\n\u5982\uff1a\u5728\u6d3b\u52a8\u671f\u95f4\uff0c" + renderObj.Title + "\u8fbe\u5230" + renderObj.Areas[6] + "\u65f6\u9886\u53d6\u4e86" + renderObj.Bonus[6] + "\u5143\uff0c\u4e4b\u540e" + renderObj.Title + "\u8fbe\u5230" + renderObj.Areas[7] + "\u65f6\u53ef\u9886\u53d6" + renderObj.Bonus[7] + "-" + renderObj.Bonus[6] + "=" + (renderObj.Bonus[7] - renderObj.Bonus[6]) + "\u5143\u3002";
          this.activityRule.getComponent(cc.Label).string = renderObj.Cycle > 0 ? _txt1 : _txt2;
        }
        for (var _i2 = 0; _i2 < this.userBetTag.length; _i2++) {
          this.userBetTag[_i2]._updateRenderData(true);
          this.userBetData[_i2]._updateRenderData(true);
          this.userBetData[_i2].node.x = this.userBetTag[_i2].node.width + 40 - this.userBetData[_i2].node.parent.width / 2;
        }
        this.activityRule.getComponent(cc.Label)._updateRenderData(true);
        this.activityRuleBox.height = this.activityRule.height;
        this.scrollContent.getComponent(cc.Layout).updateLayout();
      }
    }), _defineProperty(_cc$Class, "createGiftActivityTable", function createGiftActivityTable(renderData, column) {
      var _tableHeight = this.tableBody.height / 2;
      var _tableWidth = this.tableBody.width / 2;
      for (var i = 0; i < renderData.length; i++) {
        var tdNode = cc.instantiate(this.td_pf);
        tdNode.parent = this.tableBody;
        tdNode.width = _tableWidth;
        tdNode.x = column * tdNode.width + tdNode.width / 2;
        tdNode.y = i * -tdNode.height - tdNode.height / 2 - (0 == i ? 6 : 10) + _tableHeight;
        tdNode.getChildByName("txt").getComponent(cc.Label).string = renderData[i];
      }
    }), _defineProperty(_cc$Class, "setDurationTimeData", function setDurationTimeData() {
      this.startTime.string = this.curActivityData.Start;
      this.endTime.string = this.curActivityData.End || "\u6c38\u4e45\u6709\u6548";
      this.endTime.node.y = this.curActivityData.End ? -34 : -31;
    }), _defineProperty(_cc$Class, "judgeGetBonusBtnState", function judgeGetBonusBtnState(state, isNewStyle, whichBtn) {
      -1 == state ? isNewStyle ? this.setNewGetBonusBtnState(whichBtn, false, 0 == whichBtn ? 3 : 2) : this.setGetBonusBtnState(false, 120, "\u4e0d\u53ef\u9886\u53d6") : 0 == state ? isNewStyle ? this.setNewGetBonusBtnState(whichBtn, true, 0 == whichBtn ? 4 : 0) : this.setGetBonusBtnState(true, 255, "\u7acb\u5373\u9886\u53d6") : 1 == state && (isNewStyle ? this.setNewGetBonusBtnState(whichBtn, false, 1) : this.setGetBonusBtnState(false, 120, "\u5df2\u9886\u53d6"));
    }), _defineProperty(_cc$Class, "setGetBonusBtnState", function setGetBonusBtnState(btnEnableState, opacity, btnTxt) {
      this.getBonusBtnArr[2].getComponent(cc.Button).enabled = btnEnableState;
      if ("\u4e0d\u53ef\u9886\u53d6" == btnTxt || "\u6d3b\u52a8\u5df2\u7ed3\u675f" == btnTxt) {
        this.getBonusBtnArr[2].getComponent(cc.Sprite).spriteFrame = this.bonusBtnBg[1];
        this.getBonusBtnArr[2].getChildByName("btnTxt").getComponent(cc.LabelOutline).color = new cc.Color(101, 101, 101);
        this.getBonusBtnArr[2].opacity = 255;
      } else {
        this.getBonusBtnArr[2].opacity = opacity;
        this.getBonusBtnArr[2].getComponent(cc.Sprite).spriteFrame = this.bonusBtnBg[0];
        this.getBonusBtnArr[2].getChildByName("btnTxt").getComponent(cc.LabelOutline).color = new cc.Color(156, 45, 8);
      }
      this.getBonusBtnArr[2].getChildByName("btnTxt").getComponent(cc.Label).string = btnTxt;
    }), _defineProperty(_cc$Class, "setNewGetBonusBtnState", function setNewGetBonusBtnState(whichBtn, btnEnableState, spriteIndex) {
      this.getBonusBtnArr[whichBtn].getComponent(cc.Button).enabled = btnEnableState;
      this.getBonusBtnArr[whichBtn].getComponent(cc.Sprite).spriteFrame = this.btnStateArr[spriteIndex];
    }), _defineProperty(_cc$Class, "clearObjPool", function clearObjPool(killObj) {
      for (var i = killObj.children.length - 1; i >= 0; i--) killObj.children[i].destroy();
    }), _cc$Class));
    cc._RF.pop();
  }, {
    dialogExtend: "dialogExtend"
  } ],
  activityRule: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3377fTRb2lGurwQ8dWLTqnT", "activityRule");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        captionTxt: [ cc.Label ],
        captionTitle: [ cc.Node ],
        tableBody: [ cc.Node ],
        tableBg: [ cc.SpriteFrame ],
        td_pf: cc.Prefab,
        scrollContent: cc.Node,
        panelArr: [ cc.Node ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        this.curActivityData = initArg.data;
        this.GradeList = initArg.GradeList;
        this.DailyRewardConfig = initArg.DailyRewardConfig;
        this.index = "\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name ? 0 : 1;
        for (var i = 0; i < 2; i++) this.panelArr[i].active = false;
        this.panelArr[this.index].active = true;
        if (this.curActivityData.Content) {
          this.captionTxt[this.index].string = this.curActivityData.Content;
          this.captionTitle[this.index].active = true;
          this.captionTxt[this.index]._updateRenderData(true);
        } else this.captionTitle[this.index].active = false;
        "\u6bcf\u65e5\u6551\u6d4e\u91d1" == this.curActivityData.Name ? this.createDailyRewardTable() : "\u664b\u7ea7\u5956\u52b1" == this.curActivityData.Name && this.createLevelUpTable();
      },
      createDailyRewardTable: function createDailyRewardTable() {
        var _this = this;
        this.renderTableHeadData = [ "\u7b49\u7ea7/\u6628\u65e5\u8d1f\u76c8\u5229" ].concat(this.DailyRewardConfig[0].Title);
        var _tableHeight = this.tableBody[0].height / 2;
        var _tableWidth = this.tableBody[0].width / 4;
        for (var i = 0; i < this.renderTableHeadData.length; i++) {
          var tdNode = cc.instantiate(this.td_pf);
          tdNode.parent = this.tableBody[0];
          tdNode.width = _tableWidth;
          tdNode.x = i * tdNode.width + tdNode.width / 2;
          tdNode.y = -tdNode.height / 2 - 6 + _tableHeight;
          tdNode.getChildByName("txt").getComponent(cc.Label).string = this.renderTableHeadData[i];
        }
        this.renderData = [];
        for (var _i = 0; _i < this.DailyRewardConfig.length; _i++) {
          var _data = [];
          _data = [ this.DailyRewardConfig[_i].Grade ].concat(this.DailyRewardConfig[_i].Rewards);
          var _allData = this.renderData.concat(_data);
          this.renderData = _allData;
        }
        for (var j = 0; j < this.renderData.length; j++) {
          var tdNode = cc.instantiate(this.td_pf);
          tdNode.parent = this.tableBody[0];
          tdNode.width = _tableWidth;
          tdNode.x = j % 4 * tdNode.width + tdNode.width / 2;
          tdNode.y = Math.floor(j / 4) * -tdNode.height - tdNode.height / 2 - 46 + _tableHeight;
          tdNode.getChildByName("txt").getComponent(cc.Label).string = this.renderData[j];
        }
        for (var _i2 = 0; _i2 < this.panelArr[0].children.length; _i2++) this.panelArr[0].height += this.panelArr[0].children[_i2].height;
        this.scheduleOnce(function() {
          _this.scrollContent.height = _this.panelArr[0].height;
        }, 0);
      },
      createLevelUpTable: function createLevelUpTable() {
        var _this2 = this;
        var renderData = [ "\u7b49\u7ea7", "\u6210\u957f\u79ef\u5206", "\u664b\u7ea7\u5956\u52b1" ];
        for (var i = 0; i < this.GradeList.length; i++) {
          var _arr = [ "VIP" + this.GradeList[i].Grade, this.GradeList[i].GradeGrow, this.GradeList[i].Bonus ];
          renderData = renderData.concat(_arr);
        }
        var _tableHeight = this.tableBody[1].height / 2;
        for (var j = 0; j < renderData.length; j++) {
          var tdNode = cc.instantiate(this.td_pf);
          tdNode.parent = this.tableBody[1];
          tdNode.width = this.tableBody[1].width / 3;
          tdNode.x = j % 3 * tdNode.width + tdNode.width / 2;
          tdNode.y = Math.floor(j / 3) * -tdNode.height - tdNode.height / 2 - (0 == Math.floor(j / 3) ? 6 : 10) + _tableHeight;
          tdNode.getChildByName("txt").getComponent(cc.Label).string = renderData[j];
        }
        for (var _i3 = 0; _i3 < this.panelArr[1].children.length; _i3++) this.panelArr[1].height += this.panelArr[1].children[_i3].height;
        this.scheduleOnce(function() {
          _this2.scrollContent.height = _this2.panelArr[1].height;
        }, 0);
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  addBankCard: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a8971b9dSFBtpogAUnzDef0", "addBankCard");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _bankList = [ "\u5de5\u5546\u94f6\u884c", "\u5efa\u8bbe\u94f6\u884c", "\u519c\u4e1a\u94f6\u884c", "\u6c11\u751f\u94f6\u884c", "\u62db\u5546\u94f6\u884c", "\u4ea4\u901a\u94f6\u884c", "\u4e2d\u56fd\u94f6\u884c", "\u90ae\u653f\u50a8\u84c4", "\u4e2d\u4fe1\u94f6\u884c", "\u5174\u4e1a\u94f6\u884c", "\u534e\u590f\u94f6\u884c", "\u6d66\u53d1\u94f6\u884c", "\u5e7f\u53d1\u94f6\u884c", "\u5e73\u5b89\u94f6\u884c", "\u5149\u5927\u94f6\u884c", "\u519c\u5546\u94f6\u884c", "\u5176\u5b83" ];
    var province = [ {
      name: "\u5b89\u5fbd\u7701",
      city: [ {
        name: "\u5b89\u5e86\u5e02"
      }, {
        name: "\u868c\u57e0\u5e02"
      }, {
        name: "\u4eb3\u5dde\u5e02"
      }, {
        name: "\u829c\u6e56\u5e02"
      }, {
        name: "\u9ec4\u5c71\u5e02"
      }, {
        name: "\u9a6c\u978d\u5c71\u5e02"
      }, {
        name: "\u94dc\u9675\u5e02"
      }, {
        name: "\u6dee\u5317\u5e02"
      }, {
        name: "\u961c\u9633\u5e02"
      }, {
        name: "\u5ba3\u57ce\u5e02"
      }, {
        name: "\u5bbf\u5dde\u5e02"
      }, {
        name: "\u516d\u5b89\u5e02"
      }, {
        name: "\u6c60\u5dde\u5e02"
      }, {
        name: "\u6dee\u5357\u5e02"
      }, {
        name: "\u5408\u80a5\u5e02"
      }, {
        name: "\u6ec1\u5dde\u5e02"
      } ]
    }, {
      name: "\u5317\u4eac",
      city: [ {
        name: "\u5317\u4eac\u5e02"
      } ]
    }, {
      name: "\u91cd\u5e86",
      city: [ {
        name: "\u91cd\u5e86\u5e02"
      } ]
    }, {
      name: "\u798f\u5efa\u7701",
      city: [ {
        name: "\u4e09\u660e\u5e02"
      }, {
        name: "\u5b81\u5fb7\u5e02"
      }, {
        name: "\u6f33\u5dde\u5e02"
      }, {
        name: "\u8386\u7530\u5e02"
      }, {
        name: "\u5357\u5e73\u5e02"
      }, {
        name: "\u53a6\u95e8\u5e02"
      }, {
        name: "\u798f\u5dde\u5e02"
      }, {
        name: "\u9f99\u5ca9\u5e02"
      }, {
        name: "\u6cc9\u5dde\u5e02"
      } ]
    }, {
      name: "\u7518\u8083\u7701",
      city: [ {
        name: "\u5929\u6c34\u5e02"
      }, {
        name: "\u7518\u5357\u85cf\u65cf"
      }, {
        name: "\u5609\u5cea\u5173\u5e02"
      }, {
        name: "\u5f20\u6396\u5e02"
      }, {
        name: "\u6b66\u5a01\u5e02"
      }, {
        name: "\u9647\u5357\u5e02"
      }, {
        name: "\u767d\u94f6\u5e02"
      }, {
        name: "\u5e86\u9633\u5e02"
      }, {
        name: "\u9152\u6cc9\u5e02"
      }, {
        name: "\u4e34\u590f\u56de\u65cf"
      }, {
        name: "\u5e73\u51c9\u5e02"
      }, {
        name: "\u91d1\u660c\u5e02"
      }, {
        name: "\u5170\u5dde\u5e02"
      }, {
        name: "\u5b9a\u897f\u5e02"
      } ]
    }, {
      name: "\u5e7f\u4e1c\u7701",
      city: [ {
        name: "\u73e0\u6d77\u5e02"
      }, {
        name: "\u6cb3\u6e90\u5e02"
      }, {
        name: "\u4f5b\u5c71\u5e02"
      }, {
        name: "\u63ed\u9633\u5e02"
      }, {
        name: "\u5e7f\u5dde\u5e02"
      }, {
        name: "\u9633\u6c5f\u5e02"
      }, {
        name: "\u4e1c\u839e\u5e02"
      }, {
        name: "\u97f6\u5173\u5e02"
      }, {
        name: "\u6c55\u5c3e\u5e02"
      }, {
        name: "\u4e91\u6d6e\u5e02"
      }, {
        name: "\u6e5b\u6c5f\u5e02"
      }, {
        name: "\u6df1\u5733\u5e02"
      }, {
        name: "\u60e0\u5dde\u5e02"
      }, {
        name: "\u8302\u540d\u5e02"
      }, {
        name: "\u4e2d\u5c71\u5e02"
      }, {
        name: "\u6885\u5dde\u5e02"
      }, {
        name: "\u6c55\u5934\u5e02"
      }, {
        name: "\u8087\u5e86\u5e02"
      }, {
        name: "\u6f6e\u5dde\u5e02"
      }, {
        name: "\u6c5f\u95e8\u5e02"
      }, {
        name: "\u6e05\u8fdc\u5e02"
      } ]
    }, {
      name: "\u5e7f\u897f",
      city: [ {
        name: "\u68a7\u5dde\u5e02"
      }, {
        name: "\u7389\u6797\u5e02"
      }, {
        name: "\u8d3a\u5dde\u5e02"
      }, {
        name: "\u5d07\u5de6\u5e02"
      }, {
        name: "\u767e\u8272\u5e02"
      }, {
        name: "\u94a6\u5dde\u5e02"
      }, {
        name: "\u5317\u6d77\u5e02"
      }, {
        name: "\u8d35\u6e2f\u5e02"
      }, {
        name: "\u6cb3\u6c60\u5e02"
      }, {
        name: "\u67f3\u5dde\u5e02"
      }, {
        name: "\u6765\u5bbe\u5e02"
      }, {
        name: "\u5357\u5b81\u5e02"
      }, {
        name: "\u6842\u6797\u5e02"
      }, {
        name: "\u9632\u57ce\u6e2f\u5e02"
      } ]
    }, {
      name: "\u8d35\u5dde\u7701",
      city: [ {
        name: "\u516d\u76d8\u6c34\u5e02"
      }, {
        name: "\u5b89\u987a\u5e02"
      }, {
        name: "\u9075\u4e49\u5e02"
      }, {
        name: "\u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf"
      }, {
        name: "\u8d35\u9633\u5e02"
      }, {
        name: "\u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf"
      }, {
        name: "\u6bd5\u8282\u5e02"
      }, {
        name: "\u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf"
      }, {
        name: "\u94dc\u4ec1\u5e02"
      } ]
    }, {
      name: "\u6d77\u5357\u7701",
      city: [ {
        name: "\u6d77\u53e3\u5e02"
      }, {
        name: "\u5b9a\u5b89\u53bf"
      }, {
        name: "\u4e34\u9ad8\u53bf"
      }, {
        name: "\u6f84\u8fc8\u53bf"
      }, {
        name: "\u767d\u6c99\u9ece\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u4e09\u6c99\u5e02"
      }, {
        name: "\u510b\u5dde\u5e02"
      }, {
        name: "\u743c\u6d77\u5e02"
      }, {
        name: "\u4e94\u6307\u5c71\u5e02"
      }, {
        name: "\u660c\u6c5f\u9ece\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u6587\u660c\u5e02"
      }, {
        name: "\u4e50\u4e1c\u9ece\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u5c6f\u660c\u53bf"
      }, {
        name: "\u9675\u6c34\u9ece\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u4fdd\u4ead\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u4e09\u4e9a\u5e02"
      }, {
        name: "\u4e07\u5b81\u5e02"
      }, {
        name: "\u743c\u4e2d\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf"
      }, {
        name: "\u4e1c\u65b9\u5e02"
      } ]
    }, {
      name: "\u6cb3\u5317\u7701",
      city: [ {
        name: "\u90af\u90f8\u5e02"
      }, {
        name: "\u8861\u6c34\u5e02"
      }, {
        name: "\u627f\u5fb7\u5e02"
      }, {
        name: "\u77f3\u5bb6\u5e84\u5e02"
      }, {
        name: "\u79e6\u7687\u5c9b\u5e02"
      }, {
        name: "\u5f20\u5bb6\u53e3\u5e02"
      }, {
        name: "\u5eca\u574a\u5e02"
      }, {
        name: "\u90a2\u53f0\u5e02"
      }, {
        name: "\u6ca7\u5dde\u5e02"
      }, {
        name: "\u5510\u5c71\u5e02"
      }, {
        name: "\u4fdd\u5b9a\u5e02"
      } ]
    }, {
      name: "\u6cb3\u5357\u7701",
      city: [ {
        name: "\u7126\u4f5c\u5e02"
      }, {
        name: "\u6d4e\u6e90\u5e02"
      }, {
        name: "\u6fee\u9633\u5e02"
      }, {
        name: "\u4fe1\u9633\u5e02"
      }, {
        name: "\u5f00\u5c01\u5e02"
      }, {
        name: "\u5357\u9633\u5e02"
      }, {
        name: "\u90d1\u5dde\u5e02"
      }, {
        name: "\u5b89\u9633\u5e02"
      }, {
        name: "\u65b0\u4e61\u5e02"
      }, {
        name: "\u9a7b\u9a6c\u5e97\u5e02"
      }, {
        name: "\u9e64\u58c1\u5e02"
      }, {
        name: "\u5546\u4e18\u5e02"
      }, {
        name: "\u5e73\u9876\u5c71\u5e02"
      }, {
        name: "\u4e09\u95e8\u5ce1\u5e02"
      }, {
        name: "\u8bb8\u660c\u5e02"
      }, {
        name: "\u5468\u53e3\u5e02"
      }, {
        name: "\u6f2f\u6cb3\u5e02"
      }, {
        name: "\u6d1b\u9633\u5e02"
      } ]
    }, {
      name: "\u9ed1\u9f99\u6c5f\u7701",
      city: [ {
        name: "\u4e03\u53f0\u6cb3\u5e02"
      }, {
        name: "\u53cc\u9e2d\u5c71\u5e02"
      }, {
        name: "\u9e64\u5c97\u5e02"
      }, {
        name: "\u54c8\u5c14\u6ee8\u5e02"
      }, {
        name: "\u9f50\u9f50\u54c8\u5c14\u5e02"
      }, {
        name: "\u7ee5\u5316\u5e02"
      }, {
        name: "\u7261\u4e39\u6c5f\u5e02"
      }, {
        name: "\u4f73\u6728\u65af\u5e02"
      }, {
        name: "\u4f0a\u6625\u5e02"
      }, {
        name: "\u9ed1\u6cb3\u5e02"
      }, {
        name: "\u9e21\u897f\u5e02"
      }, {
        name: "\u5927\u5e86\u5e02"
      } ]
    }, {
      name: "\u6e56\u5317\u7701",
      city: [ {
        name: "\u4ed9\u6843\u5e02"
      }, {
        name: "\u6f5c\u6c5f\u5e02"
      }, {
        name: "\u9102\u5dde\u5e02"
      }, {
        name: "\u5b9c\u660c\u5e02"
      }, {
        name: "\u54b8\u5b81\u5e02"
      }, {
        name: "\u795e\u519c\u67b6"
      }, {
        name: "\u9ec4\u5188\u5e02"
      }, {
        name: "\u5b5d\u611f\u5e02"
      }, {
        name: "\u968f\u5dde\u5e02"
      }, {
        name: "\u5929\u95e8\u5e02"
      }, {
        name: "\u8346\u5dde\u5e02"
      }, {
        name: "\u5341\u5830\u5e02"
      }, {
        name: "\u8944\u9633\u5e02"
      }, {
        name: "\u8346\u95e8\u5e02"
      }, {
        name: "\u6b66\u6c49\u5e02"
      }, {
        name: "\u9ec4\u77f3\u5e02"
      }, {
        name: "\u6069\u65bd\u5e02"
      } ]
    }, {
      name: "\u6e56\u5357\u7701",
      city: [ {
        name: "\u6c38\u5dde\u5e02"
      }, {
        name: "\u957f\u6c99\u5e02"
      }, {
        name: "\u682a\u6d32\u5e02"
      }, {
        name: "\u5a04\u5e95\u5e02"
      }, {
        name: "\u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf"
      }, {
        name: "\u6e58\u6f6d\u5e02"
      }, {
        name: "\u8861\u9633\u5e02"
      }, {
        name: "\u5e38\u5fb7\u5e02"
      }, {
        name: "\u90b5\u9633\u5e02"
      }, {
        name: "\u6000\u5316\u5e02"
      }, {
        name: "\u5cb3\u9633\u5e02"
      }, {
        name: "\u90f4\u5dde\u5e02"
      }, {
        name: "\u5f20\u5bb6\u754c\u5e02"
      }, {
        name: "\u76ca\u9633\u5e02"
      } ]
    }, {
      name: "\u5409\u6797\u7701",
      city: [ {
        name: "\u5409\u6797\u5e02"
      }, {
        name: "\u56db\u5e73\u5e02"
      }, {
        name: "\u957f\u6625\u5e02"
      }, {
        name: "\u767d\u5c71\u5e02"
      }, {
        name: "\u901a\u5316\u5e02"
      }, {
        name: "\u767d\u57ce\u5e02"
      }, {
        name: "\u8fbd\u6e90\u5e02"
      }, {
        name: "\u677e\u539f\u5e02"
      }, {
        name: "\u5ef6\u8fb9\u5e02"
      } ]
    }, {
      name: "\u6c5f\u82cf\u7701",
      city: [ {
        name: "\u6cf0\u5dde\u5e02"
      }, {
        name: "\u5f90\u5dde\u5e02"
      }, {
        name: "\u82cf\u5dde\u5e02"
      }, {
        name: "\u5357\u4eac\u5e02"
      }, {
        name: "\u5e38\u5dde\u5e02"
      }, {
        name: "\u76d0\u57ce\u5e02"
      }, {
        name: "\u6dee\u5b89\u5e02"
      }, {
        name: "\u8fde\u4e91\u6e2f\u5e02"
      }, {
        name: "\u626c\u5dde\u5e02"
      }, {
        name: "\u65e0\u9521\u5e02"
      }, {
        name: "\u5bbf\u8fc1\u5e02"
      }, {
        name: "\u5357\u901a\u5e02"
      }, {
        name: "\u9547\u6c5f\u5e02"
      } ]
    }, {
      name: "\u6c5f\u897f\u7701",
      city: [ {
        name: "\u5357\u660c\u5e02"
      }, {
        name: "\u4e5d\u6c5f\u5e02"
      }, {
        name: "\u5409\u5b89\u5e02"
      }, {
        name: "\u629a\u5dde\u5e02"
      }, {
        name: "\u666f\u5fb7\u9547\u5e02"
      }, {
        name: "\u840d\u4e61\u5e02"
      }, {
        name: "\u5b9c\u6625\u5e02"
      }, {
        name: "\u65b0\u4f59\u5e02"
      }, {
        name: "\u8d63\u5dde\u5e02"
      }, {
        name: "\u4e0a\u9976\u5e02"
      }, {
        name: "\u9e70\u6f6d\u5e02"
      } ]
    }, {
      name: "\u8fbd\u5b81\u7701",
      city: [ {
        name: "\u4e39\u4e1c\u5e02"
      }, {
        name: "\u629a\u987a\u5e02"
      }, {
        name: "\u672c\u6eaa\u5e02"
      }, {
        name: "\u671d\u9633\u5e02"
      }, {
        name: "\u8fbd\u9633\u5e02"
      }, {
        name: "\u94c1\u5cad\u5e02"
      }, {
        name: "\u5927\u8fde\u5e02"
      }, {
        name: "\u9526\u5dde\u5e02"
      }, {
        name: "\u961c\u65b0\u5e02"
      }, {
        name: "\u6c88\u9633\u5e02"
      }, {
        name: "\u846b\u82a6\u5c9b\u5e02"
      }, {
        name: "\u8425\u53e3\u5e02"
      }, {
        name: "\u978d\u5c71\u5e02"
      }, {
        name: "\u76d8\u9526\u5e02"
      } ]
    }, {
      name: "\u5185\u8499\u53e4",
      city: [ {
        name: "\u8d64\u5cf0\u5e02"
      }, {
        name: "\u4e4c\u5170\u5bdf\u5e03\u5e02"
      }, {
        name: "\u5305\u5934\u5e02"
      }, {
        name: "\u4e4c\u6d77\u5e02"
      }, {
        name: "\u547c\u4f26\u8d1d\u5c14\u5e02"
      }, {
        name: "\u9102\u5c14\u591a\u65af\u5e02"
      }, {
        name: "\u901a\u8fbd\u5e02"
      }, {
        name: "\u547c\u548c\u6d69\u7279\u5e02"
      }, {
        name: "\u5df4\u5f66\u6dd6\u5c14\u5e02"
      }, {
        name: "\u5174\u5b89"
      }, {
        name: "\u963f\u62c9\u5584"
      }, {
        name: "\u9521\u6797\u90ed\u52d2"
      } ]
    }, {
      name: "\u5b81\u590f",
      city: [ {
        name: "\u94f6\u5ddd\u5e02"
      }, {
        name: "\u5434\u5fe0\u5e02"
      }, {
        name: "\u4e2d\u536b\u5e02"
      }, {
        name: "\u77f3\u5634\u5c71\u5e02"
      }, {
        name: "\u56fa\u539f\u5e02"
      } ]
    }, {
      name: "\u9752\u6d77\u7701",
      city: [ {
        name: "\u6d77\u5317\u85cf\u65cf"
      }, {
        name: "\u9ec4\u5357\u85cf\u65cf"
      }, {
        name: "\u6d77\u4e1c\u5e02"
      }, {
        name: "\u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf"
      }, {
        name: "\u897f\u5b81\u5e02"
      }, {
        name: "\u7389\u6811\u85cf\u65cf"
      }, {
        name: "\u679c\u6d1b\u85cf\u65cf"
      }, {
        name: "\u6d77\u5357\u85cf\u65cf"
      } ]
    }, {
      name: "\u5c71\u4e1c\u7701",
      city: [ {
        name: "\u5a01\u6d77\u5e02"
      }, {
        name: "\u70df\u53f0\u5e02"
      }, {
        name: "\u6cf0\u5b89\u5e02"
      }, {
        name: "\u4e34\u6c82\u5e02"
      }, {
        name: "\u67a3\u5e84\u5e02"
      }, {
        name: "\u4e1c\u8425\u5e02"
      }, {
        name: "\u5fb7\u5dde\u5e02"
      }, {
        name: "\u6dc4\u535a\u5e02"
      }, {
        name: "\u804a\u57ce\u5e02"
      }, {
        name: "\u83b1\u829c\u5e02"
      }, {
        name: "\u6ee8\u5dde\u5e02"
      }, {
        name: "\u6f4d\u574a\u5e02"
      }, {
        name: "\u65e5\u7167\u5e02"
      }, {
        name: "\u9752\u5c9b\u5e02"
      }, {
        name: "\u6d4e\u5357\u5e02"
      }, {
        name: "\u6d4e\u5b81\u5e02"
      }, {
        name: "\u83cf\u6cfd\u5e02"
      } ]
    }, {
      name: "\u5c71\u897f\u7701",
      city: [ {
        name: "\u664b\u57ce\u5e02"
      }, {
        name: "\u4e34\u6c7e\u5e02"
      }, {
        name: "\u5415\u6881\u5e02"
      }, {
        name: "\u957f\u6cbb\u5e02"
      }, {
        name: "\u664b\u4e2d\u5e02"
      }, {
        name: "\u592a\u539f\u5e02"
      }, {
        name: "\u8fd0\u57ce\u5e02"
      }, {
        name: "\u6714\u5dde\u5e02"
      }, {
        name: "\u9633\u6cc9\u5e02"
      }, {
        name: "\u5ffb\u5dde\u5e02"
      }, {
        name: "\u5927\u540c\u5e02"
      } ]
    }, {
      name: "\u9655\u897f\u7701",
      city: [ {
        name: "\u6986\u6797\u5e02"
      }, {
        name: "\u6c49\u4e2d\u5e02"
      }, {
        name: "\u5ef6\u5b89\u5e02"
      }, {
        name: "\u5b9d\u9e21\u5e02"
      }, {
        name: "\u94dc\u5ddd\u5e02"
      }, {
        name: "\u54b8\u9633\u5e02"
      }, {
        name: "\u6e2d\u5357\u5e02"
      }, {
        name: "\u5b89\u5eb7\u5e02"
      }, {
        name: "\u897f\u5b89\u5e02"
      }, {
        name: "\u5546\u6d1b\u5e02"
      } ]
    }, {
      name: "\u4e0a\u6d77",
      city: [ {
        name: "\u4e0a\u6d77\u5e02"
      } ]
    }, {
      name: "\u56db\u5ddd\u7701",
      city: [ {
        name: "\u4e50\u5c71\u5e02"
      }, {
        name: "\u51c9\u5c71\u5f5d\u65cf"
      }, {
        name: "\u8d44\u9633\u5e02"
      }, {
        name: "\u5df4\u4e2d\u5e02"
      }, {
        name: "\u81ea\u8d21\u5e02"
      }, {
        name: "\u7518\u5b5c\u85cf\u65cf"
      }, {
        name: "\u5e7f\u5b89\u5e02"
      }, {
        name: "\u5e7f\u5143\u5e02"
      }, {
        name: "\u96c5\u5b89\u5e02"
      }, {
        name: "\u8fbe\u5dde\u5e02"
      }, {
        name: "\u5fb7\u9633\u5e02"
      }, {
        name: "\u7ef5\u9633\u5e02"
      }, {
        name: "\u5b9c\u5bbe\u5e02"
      }, {
        name: "\u963f\u575d\u85cf\u65cf\u7f8c\u65cf"
      }, {
        name: "\u5185\u6c5f\u5e02"
      }, {
        name: "\u6210\u90fd\u5e02"
      }, {
        name: "\u6cf8\u5dde\u5e02"
      }, {
        name: "\u9042\u5b81\u5e02"
      }, {
        name: "\u6500\u679d\u82b1\u5e02"
      }, {
        name: "\u5357\u5145\u5e02"
      }, {
        name: "\u7709\u5c71\u5e02"
      } ]
    }, {
      name: "\u5929\u6d25",
      city: [ {
        name: "\u5929\u6d25\u5e02"
      } ]
    }, {
      name: "\u897f\u85cf",
      city: [ {
        name: "\u660c\u90fd\u5730\u533a"
      }, {
        name: "\u6797\u829d\u5730\u533a"
      }, {
        name: "\u963f\u91cc\u5730\u533a"
      }, {
        name: "\u5c71\u5357\u5730\u533a"
      }, {
        name: "\u62c9\u8428\u5e02"
      }, {
        name: "\u65e5\u5580\u5219\u5e02"
      }, {
        name: "\u90a3\u66f2\u5730\u533a"
      } ]
    }, {
      name: "\u65b0\u7586",
      city: [ {
        name: "\u514b\u62c9\u739b\u4f9d\u5e02"
      }, {
        name: "\u5854\u57ce\u5730\u533a"
      }, {
        name: "\u4f0a\u7281\u54c8\u8428\u514b"
      }, {
        name: "\u56fe\u6728\u8212\u514b\u5e02"
      }, {
        name: "\u5df4\u97f3\u90ed\u695e\u8499\u53e4"
      }, {
        name: "\u963f\u62c9\u5c14\u5e02"
      }, {
        name: "\u535a\u5c14\u5854\u62c9\u8499\u53e4"
      }, {
        name: "\u77f3\u6cb3\u5b50\u5e02"
      }, {
        name: "\u5410\u9c81\u756a\u5730\u533a"
      }, {
        name: "\u5580\u4ec0\u5730\u533a"
      }, {
        name: "\u4e94\u5bb6\u6e20\u5e02"
      }, {
        name: "\u963f\u52d2\u6cf0\u5730\u533a"
      }, {
        name: "\u660c\u5409\u56de\u65cf"
      }, {
        name: "\u54c8\u5bc6\u5730\u533a"
      }, {
        name: "\u548c\u7530\u5730\u533a"
      }, {
        name: "\u963f\u514b\u82cf\u5730\u533a"
      }, {
        name: "\u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c"
      }, {
        name: "\u4e4c\u9c81\u6728\u9f50\u5e02"
      }, {
        name: "\u5317\u5c6f"
      } ]
    }, {
      name: "\u4e91\u5357\u7701",
      city: [ {
        name: "\u4fdd\u5c71\u5e02"
      }, {
        name: "\u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf"
      }, {
        name: "\u6606\u660e\u5e02"
      }, {
        name: "\u8fea\u5e86\u85cf\u65cf"
      }, {
        name: "\u5927\u7406\u767d\u65cf"
      }, {
        name: "\u4e3d\u6c5f\u5e02"
      }, {
        name: "\u4e34\u6ca7\u5e02"
      }, {
        name: "\u897f\u53cc\u7248\u7eb3\u50a3\u65cf"
      }, {
        name: "\u66f2\u9756\u5e02"
      }, {
        name: "\u666e\u6d31\u5e02"
      }, {
        name: "\u662d\u901a\u5e02"
      }, {
        name: "\u695a\u96c4\u5f5d\u65cf"
      }, {
        name: "\u6587\u5c71\u58ee\u65cf\u82d7\u65cf"
      }, {
        name: "\u7389\u6eaa\u5e02"
      }, {
        name: "\u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf"
      }, {
        name: "\u6012\u6c5f\u5088\u50f3\u65cf"
      } ]
    }, {
      name: "\u6d59\u6c5f\u7701",
      city: [ {
        name: "\u4e3d\u6c34\u5e02"
      }, {
        name: "\u7ecd\u5174\u5e02"
      }, {
        name: "\u676d\u5dde\u5e02"
      }, {
        name: "\u5b81\u6ce2\u5e02"
      }, {
        name: "\u821f\u5c71\u5e02"
      }, {
        name: "\u5609\u5174\u5e02"
      }, {
        name: "\u8862\u5dde\u5e02"
      }, {
        name: "\u53f0\u5dde\u5e02"
      }, {
        name: "\u6e29\u5dde\u5e02"
      }, {
        name: "\u91d1\u534e\u5e02"
      }, {
        name: "\u6e56\u5dde\u5e02"
      } ]
    } ];
    var _doneCb = null;
    var _rotationX = 0;
    var _curChoiceBankItemKey = -1;
    var _curChoiceProvinceKey = -1;
    var _curChoiceCityKey = -1;
    var _curPullDownListUse = "";
    var _itemSpacing = 55;
    var _SetBankCard = {
      Action: "SetBankCard",
      Address_P: null,
      Address_C: null,
      BankNum: null,
      RealName: null,
      Qort: "add",
      BankID: -1,
      Branch: null,
      BankName: null,
      SafePassword: null
    };
    var _GetCardDetail = {
      Action: "GetCardDetail",
      BankCardID: null
    };
    var _item = null;
    var _itemList = [];
    var _fontColor = new cc.Color(145, 85, 56);
    var _placeholderColor = new cc.Color(183, 159, 143);
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebName: cc.EditBox,
        ebBankCardId1: cc.EditBox,
        ebBankCardId2: cc.EditBox,
        ebPassword: cc.EditBox,
        ebOtherBankName: cc.EditBox,
        ebBranchName: cc.EditBox,
        svBankCard: cc.ScrollView,
        content: cc.Node,
        bankPullDownListIcon: cc.Node,
        cityPullDownListIcon: cc.Node,
        provincePullDownListIcon: cc.Node,
        checkMask: cc.Node,
        adjustLayer: cc.Node,
        pfBankItem: cc.Prefab,
        txtBtn: cc.Label,
        txtBankName: cc.Label,
        txtProvinceName: cc.Label,
        txtCityName: cc.Label,
        sFDisableInputBg: cc.SpriteFrame
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "setBankCardCb", this.setBankCardCb.bind(this) ], [ "reqBankCardDetailCb", this.reqBankCardDetailCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _curChoiceBankItemKey = -1;
        _curChoiceProvinceKey = -1;
        _curChoiceCityKey = -1;
        _curPullDownListUse = "";
        this.adjustLayer.parent.active = false;
        this.toastShow();
        this.registerEvent();
        _doneCb = initArg.doneCb;
        if (initArg.isAddCard) {
          _SetBankCard.Qort = "add";
          this.setTitleContent("\u7ed1\u5b9a\u94f6\u884c\u5361");
          _GetCardDetail.BankCardID = "add";
          this.reqDateAndShowLoadView(_GetCardDetail, "reqBankCardDetailCb");
          initArg.btnStr && (this.txtBtn.string = initArg.btnStr);
        } else {
          this.setTitleContent("\u4fee\u6539\u94f6\u884c\u5361");
          _SetBankCard.Qort = initArg.bankCardId;
          _SetBankCard.BankID = initArg.bankCardId;
          _GetCardDetail.BankCardID = initArg.bankCardId;
          this.reqDateAndShowLoadView(_GetCardDetail, "reqBankCardDetailCb");
        }
        _itemList = [];
        for (var i = 0; i < province.length; i++) {
          _item = cc.instantiate(this.pfBankItem);
          _item.y = -_itemSpacing * i - 8;
          _item.parent = this.content;
          _item.width = 500;
          _item.getChildByName("line").width = 465;
          _item.getChildByName("txt").x = -230;
          _item.getComponent(cc.Button).clickEvents[0].target = this.node;
          _item.getComponent(cc.Button).clickEvents[0].component = "addBankCard";
          _item.getComponent(cc.Button).clickEvents[0].handler = "choiceItem";
          _item.getComponent(cc.Button).clickEvents[0].customEventData = i;
          _itemList.push(_item);
        }
        this.node.parent.parent.parent.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, this.hidePullDownList, this);
        this.adjustLayer.parent.on(cc.Node.EventType.TOUCH_END, this.hidePullDownList, this);
      },
      closeBeforeHandle: function closeBeforeHandle() {
        this.node.parent.parent.parent.getChildByName("mask").off(cc.Node.EventType.TOUCH_END, this.hidePullDownList, this);
        this.adjustLayer.parent.off(cc.Node.EventType.TOUCH_END, this.hidePullDownList, this);
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "confirm":
          var result = dataLogic.checkFormat(this.ebName.string, {
            RealName: true,
            name: "\u5f00\u6237\u4eba\u59d3\u540d"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (-1 == _curChoiceBankItemKey) {
            this.showLayerTip("\u94f6\u884c\u4e0d\u80fd\u4e3a\u7a7a");
            return;
          }
          if ("\u5176\u5b83" == this.txtBankName.string) {
            result = dataLogic.checkFormat(this.ebOtherBankName.string, {
              name: "\u5f00\u6237\u94f6\u884c"
            });
            if (result) {
              this.showLayerTip(result);
              return;
            }
          } else this.ebOtherBankName.string = "";
          if (-1 == _curChoiceProvinceKey) {
            this.showLayerTip("\u5f00\u6237\u7701\u4e0d\u80fd\u4e3a\u7a7a");
            return;
          }
          if (-1 == _curChoiceCityKey) {
            this.showLayerTip("\u5f00\u6237\u5e02\u4e0d\u80fd\u4e3a\u7a7a");
            return;
          }
          result = dataLogic.checkFormat(this.ebBranchName.string, {
            name: "\u652f\u884c\u540d\u79f0"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebBankCardId1.string, {
            BankNum: true,
            name: "\u5361\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebBankCardId2.string, {
            BankNum: true,
            name: "\u5361\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebPassword.string, {
            Password: true,
            name: "\u5b89\u5168\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (this.ebBankCardId1.string != this.ebBankCardId2.string) {
            this.showLayerTip("\u4e24\u6b21\u8f93\u5165\u7684\u5361\u53f7\u4e0d\u4e00\u81f4");
            return;
          }
          _SetBankCard.Address_P = this.txtProvinceName.string;
          _SetBankCard.Address_C = this.txtCityName.string;
          _SetBankCard.BankName = this.ebOtherBankName.string;
          _SetBankCard.Branch = this.ebBranchName.string;
          _SetBankCard.BankNum = this.ebBankCardId1.string;
          _SetBankCard.RealName = this.ebName.string;
          "\u5176\u5b83" == this.txtBankName.string ? _SetBankCard.BankID = _curChoiceBankItemKey + 2 : _SetBankCard.BankID = _curChoiceBankItemKey + 1;
          _SetBankCard.SafePassword = this.ebPassword.string;
          this.reqDateAndShowLoadView(_SetBankCard, "setBankCardCb", null, true);
        }
      },
      setCheckMaskUI: function setCheckMaskUI(curChoiceItemKey) {
        if (-1 == curChoiceItemKey) this.checkMask.opacity = 0; else {
          this.checkMask.opacity = 255;
          this.checkMask.y = -_itemSpacing * curChoiceItemKey - 16;
        }
      },
      hidePullDownList: function hidePullDownList() {
        this.bankPullDownListIcon.rotationX = 0;
        this.provincePullDownListIcon.rotationX = 0;
        this.cityPullDownListIcon.rotationX = 0;
        this.svBankCard.node.active && (this.svBankCard.node.active = false);
      },
      setPullDownListViewEvent: function setPullDownListViewEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        if (_curPullDownListUse != eventName) {
          this.hidePullDownList();
          _rotationX = 180;
        } else switch (eventName) {
         case "bank":
          _rotationX = 0 == this.bankPullDownListIcon.rotationX ? 180 : 0;
          this.bankPullDownListIcon.rotationX = _rotationX;
          break;

         case "province":
          _rotationX = 0 == this.provincePullDownListIcon.rotationX ? 180 : 0;
          this.provincePullDownListIcon.rotationX = _rotationX;
          break;

         case "city":
          _rotationX = 0 == this.cityPullDownListIcon.rotationX ? 180 : 0;
          this.cityPullDownListIcon.rotationX = _rotationX;
        }
        _curPullDownListUse = eventName;
        if (0 == _rotationX) this.hidePullDownList(); else {
          var list = void 0, offY = 0;
          switch (eventName) {
           case "bank":
            this.bankPullDownListIcon.rotationX = 180;
            this.setCheckMaskUI(_curChoiceBankItemKey);
            list = _bankList;
            offY = this.adjustLayer.y;
            break;

           case "province":
            this.provincePullDownListIcon.rotationX = 180;
            this.setCheckMaskUI(_curChoiceProvinceKey);
            list = province;
            break;

           case "city":
            if (-1 == _curChoiceProvinceKey) {
              this.showLayerTip("\u8bf7\u5148\u9009\u62e9\u5f00\u6237\u7701\u4efd");
              this.cityPullDownListIcon.rotationX = 0;
              return;
            }
            this.cityPullDownListIcon.rotationX = 180;
            this.setCheckMaskUI(_curChoiceCityKey);
            list = province[_curChoiceProvinceKey].city;
          }
          this.svBankCard.node.y = event.target.parent.y - 186 - offY;
          this.content.height = list.length * _itemSpacing + 25;
          this.content.y = 155;
          this.updateItem(list);
          this.svBankCard.node.active = true;
          this.svBankCard.scrollToTop();
        }
      },
      updateItem: function updateItem(list) {
        for (var i = 0; i < list.length; i++) {
          _itemList[i].opacity = 255;
          _itemList[i].getChildByName("txt").getComponent(cc.Label).string = list[i].name ? list[i].name : list[i];
        }
        for (var _i = list.length; _i < province.length; _i++) _itemList[_i].opacity = 0;
      },
      setBankCardCb: function setBankCardCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          _doneCb(msg.strCode);
        }
      },
      reqBankCardDetailCb: function reqBankCardDetailCb(msg) {
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        this.adjustLayer.parent.active = true;
        if ("" != msg.BackData.RealName) {
          this.ebName.string = msg.BackData.RealName;
          this.ebName.node.getChildByName("mask").active = true;
          this.ebName.node.parent.color = new cc.Color(228, 225, 206);
          this.ebName.node.parent.getComponent(cc.Sprite).spriteFrame = this.sFDisableInputBg;
        }
        var key = -1;
        if ("" != msg.BackData.BankName) {
          key = _bankList.indexOf(msg.BackData.BankName);
          _curPullDownListUse = "bank";
          if (key > -1 && key != _bankList.length - 1) this.choiceItem("", key); else {
            this.choiceItem("", _bankList.length - 1);
            this.ebOtherBankName.string = msg.BackData.BankName;
          }
        }
        key = kf.getObjIndexByValue(province, msg.BackData.Address_P, "name");
        if (-1 != key) {
          _curPullDownListUse = "province";
          this.choiceItem("", key);
          key = kf.getObjIndexByValue(province[key].city, msg.BackData.Address_C.split("\r")[0], "name");
          cc.log("msg.BackData.Address_C", msg.BackData.Address_C.split("\r")[0], key, province[_curChoiceProvinceKey]);
          _curPullDownListUse = "city";
          this.choiceItem("", key);
          this.ebBranchName.string = msg.BackData.Address_C.split("\r")[1];
          this.ebBankCardId1.string = msg.BackData.CardNum;
          this.ebBankCardId2.string = msg.BackData.CardNum;
        }
        _curPullDownListUse = -1;
      },
      choiceItem: function choiceItem(event, key) {
        "" != event && audioMgr.playEffect(this.clickAudio);
        key = Number(key);
        var txt = void 0;
        switch (_curPullDownListUse) {
         case "bank":
          _curChoiceBankItemKey = key;
          txt = this.txtBankName;
          this.txtBankName.string = _bankList[key];
          if ("\u5176\u5b83" == this.txtBankName.string) {
            this.ebOtherBankName.node.parent.active = true;
            this.adjustLayer.y = -76;
            this.adjustLayer.parent.height = 924;
          } else {
            this.ebOtherBankName.node.parent.active = false;
            this.adjustLayer.y = 0;
            this.adjustLayer.parent.height = 848;
          }
          break;

         case "province":
          txt = this.txtProvinceName;
          this.txtProvinceName.string = province[key].name;
          if (_curChoiceProvinceKey != key) {
            _curChoiceProvinceKey = key;
            this.txtCityName.string = "\u8bf7\u9009\u62e9\u5f00\u6237\u57ce\u5e02";
            this.txtCityName.node.color = _placeholderColor;
            _curChoiceCityKey = -1;
          }
          break;

         case "city":
          _curChoiceCityKey = key;
          txt = this.txtCityName;
          this.txtCityName.string = province[_curChoiceProvinceKey].city[key].name;
        }
        txt.node.color = _fontColor;
        this.setCheckMaskUI(key);
        this.hidePullDownList();
      },
      choiceBankItem: function choiceBankItem(event, key) {
        key = Number(key);
        _curChoiceBankItemKey = key;
        this.setCheckMaskUI(key);
        this.txtBankName.string = _bankList[key];
        this.svBankCard.node.active = false;
        this.pullDownListIcon.rotationX = 0;
        this.txtBankName.node.color = -1 == _curChoiceBankItemKey ? _fontColor : _placeholderColor;
      },
      editChangeEvent: function editChangeEvent(txt, editbox, data) {
        editbox.isFocused() || (editbox.string = "");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  agentReport_item: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "7de14QZvt1OQ6/ON9S6weiw", "agentReport_item");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        userAccount: cc.Label,
        level: cc.Label,
        levelName: cc.Label,
        inMoney: cc.Label,
        payeeMoney: cc.Label,
        profit: cc.Label
      },
      start: function start() {},
      init: function init(data, initArg) {
        this._msgLocalKey = initArg.msgLocalKey;
        this.userAccount.string = data.UserName;
        this.level.string = data.UserLevel + "\u7ea7";
        this.levelName.string = data.HigherName;
        this.inMoney.string = data.Grade;
        this.payeeMoney.string = data.TaxMoney;
        this.profit.string = data.RebateMoney;
        initArg.msgLocalKey % 2 != 0 ? this.node.getChildByName("bg").color = new cc.Color(252, 242, 227) : this.node.getChildByName("bg").color = new cc.Color(252, 250, 243);
      }
    });
    cc._RF.pop();
  }, {} ],
  alterPassword: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e3a9bpCXBhPnqe4QPgsjrmf", "alterPassword");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _VerifyPwd = {
      Action: "VerifyPwd",
      Password: null
    };
    var _VerifySafePwd = {
      Action: "VerifySafePwd",
      Password: null
    };
    var _SetPwd = {
      Action: "SetPwd",
      Password: null
    };
    var _SetSafePwd = {
      Action: "SetSafePwd",
      Password: null
    };
    var _operationDoneCb = null;
    var _placeholder0 = [ "\u8bf7\u8f93\u5165\u539f\u5b89\u5168\u5bc6\u7801", "\u8bf7\u8f93\u5165\u539f\u5bc6\u7801" ];
    var _placeholder1 = [ "\u8bf7\u8f93\u51656-16\u4f4d\u5b89\u5168\u5bc6\u7801", "\u8bf7\u8f93\u51656-16\u4f4d\u65b0\u5bc6\u7801" ];
    var _placeholder2 = [ "\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u7684\u5b89\u5168\u5bc6\u7801", "\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801" ];
    var _titleStr = [ "\u4fee\u6539\u5b89\u5168\u5bc6\u7801", "\u4fee\u6539\u767b\u5f55\u5bc6\u7801" ];
    var _passwordType = 0;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtOriginalPassword: cc.Label,
        txtNewPassword1: cc.Label,
        txtNewPassword2: cc.Label,
        txtForgetPassword: cc.Label,
        ebOriginalPassword: cc.EditBox,
        ebNewPassword1: cc.EditBox,
        ebNewPassword2: cc.EditBox,
        pfDialogCommonLayer: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "checkOriginalPassword", this.checkOriginalPassword.bind(this) ], [ "setNewPasswordCb", this.setNewPasswordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        cc.log("initArg", initArg);
        this.toastShow();
        this.registerEvent();
        _operationDoneCb = initArg.callBack;
        _passwordType = initArg.passwordType;
        this.setTitleContent(_titleStr[_passwordType]);
        this.ebOriginalPassword.placeholder = _placeholder0[_passwordType];
        this.ebNewPassword1.placeholder = _placeholder1[_passwordType];
        this.ebNewPassword2.placeholder = _placeholder2[_passwordType];
        this.txtForgetPassword.string = 0 == _passwordType ? "\u627e\u56de\u5b89\u5168\u5bc6\u7801     " : "\u627e\u56de\u5bc6\u7801     ";
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "alterPassword":
          var result = dataLogic.checkFormat(this.ebOriginalPassword.string, {
            Password: true,
            name: "\u539f\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebNewPassword1.string, {
            Password: true,
            name: "\u65b0\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebNewPassword2.string, {
            Password: true,
            name: "\u65b0\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (this.ebNewPassword1.string != this.ebNewPassword2.string) {
            this.showLayerTip("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");
            break;
          }
          if (this.ebNewPassword1.string != this.ebNewPassword2.string) {
            this.showLayerTip("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");
            break;
          }
          if (this.ebNewPassword1.string == this.ebOriginalPassword.string) {
            this.showLayerTip("\u65b0\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c");
            break;
          }
          if (1 == _passwordType) {
            _VerifyPwd.Password = this.ebOriginalPassword.string;
            this.reqDateAndShowLoadView(_VerifyPwd, "checkOriginalPassword", null, true);
          } else {
            _VerifySafePwd.Password = this.ebOriginalPassword.string;
            this.reqDateAndShowLoadView(_VerifySafePwd, "checkOriginalPassword", null, true);
          }
          break;

         case "forgetPassword":
          dataLogic.userPhoneNum ? kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/resetPassword",
            js: "resetPassword",
            initArg: {
              doneCb: _operationDoneCb,
              isResetLoginPassword: 1 == _passwordType,
              phoneNum: dataLogic.userPhoneNum
            }
          }) : _operationDoneCb("\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u53f7");
          this.toastClose();
        }
      },
      checkOriginalPassword: function checkOriginalPassword(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (0 == _passwordType) {
          _SetSafePwd.Password = this.ebNewPassword1.string;
          this.reqDateAndShowLoadView(_SetSafePwd, "setNewPasswordCb", null, true);
        } else {
          _SetPwd.Password = this.ebNewPassword1.string;
          this.reqDateAndShowLoadView(_SetPwd, "setNewPasswordCb", null, true);
        }
      },
      setNewPasswordCb: function setNewPasswordCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          _operationDoneCb(msg.StrCode);
        }
      },
      editBoxEvent: function editBoxEvent(edit) {
        var str = edit.string;
        edit.string = "";
        edit.string = str;
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  audioMgr: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3c76arkUa5HVIjlbO746ExS", "audioMgr");
    "use strict";
    window.audioMgr = window.audioMgr || {
      extends: cc.Component
    };
    var _effectVolume = 1;
    var _musicVolume = 1;
    var _isOpenEffect = true;
    var _isOpenMusic = true;
    var _invaliAudioId = -1e3;
    var _musicId = _invaliAudioId;
    var _effectIdList = [];
    var _musicClip = null;
    var _falseAudioClip = null;
    cc.game.on(cc.game.EVENT_HIDE, function() {
      _isOpenMusic && audioMgr.stopMusic();
    });
    cc.game.on(cc.game.EVENT_SHOW, function() {
      _isOpenMusic && audioMgr.setMusicSwitch(_isOpenMusic);
    });
    audioMgr.init = function() {
      var info = cc.sys.localStorage.getItem("game_pokerGameAudioInfo");
      if (null != info) {
        var audio = JSON.parse(info);
        cc.audioEngine.setEffectsVolume(audio.effectVolume);
        cc.audioEngine.setMusicVolume(audio.musicVolume);
        _effectVolume = audio.effectVolume;
        _musicVolume = audio.musicVolume;
        _isOpenEffect = audio.isOpenEffect;
        _isOpenMusic = audio.isOpenMusic;
      }
    };
    audioMgr.setFalseAudioClip = function(clip) {
      _falseAudioClip = clip;
    };
    audioMgr.localStorageData = function() {
      var info = {
        effectVolume: cc.audioEngine.getEffectsVolume(),
        musicVolume: cc.audioEngine.getMusicVolume(),
        isOpenEffect: _isOpenEffect,
        isOpenMusic: _isOpenMusic
      };
      cc.sys.localStorage.setItem("game_pokerGameAudioInfo", JSON.stringify(info));
    };
    audioMgr.getCurMusicClipUuid = function() {
      if (null == _musicClip) return null;
      return _musicClip._uuid;
    };
    audioMgr.setEffectSwitch = function(isOpen) {
      _isOpenEffect = isOpen;
      isOpen || this.stopAllEffect();
    };
    audioMgr.getEffectSwitch = function() {
      return _isOpenEffect;
    };
    audioMgr.setEffectVolume = function(volume) {
      cc.audioEngine.setEffectsVolume(volume);
    };
    audioMgr.getEffectVolume = function() {
      return cc.audioEngine.getEffectsVolume();
    };
    audioMgr.playEffect = function(audioClip) {
      var isLoop = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
      if (dataLogic.isHide) return;
      if (_isOpenEffect) {
        var id = cc.audioEngine.playEffect(audioClip, isLoop);
        _effectIdList.push(id);
        return id;
      }
      return;
    };
    audioMgr.stopEffect = function(audioId) {
      cc.audioEngine.stopEffect(audioId);
    };
    audioMgr.stopAllEffect = function() {
      var state = void 0, id = void 0;
      for (var key in _effectIdList) {
        id = _effectIdList[key];
        if (id === _musicId) {
          cc.log("----id\u548c\u80cc\u666f\u97f3\u4e50id\u51b2\u7a81");
          continue;
        }
        state = cc.audioEngine.getState(id);
        state === cc.audioEngine.AudioState.PLAYING && cc.audioEngine.stop(id);
      }
      _effectIdList = [];
    };
    audioMgr.setMusicSwitch = function(isOpen) {
      _isOpenMusic = isOpen;
      if (isOpen) _musicClip && this.playMusic(_musicClip); else {
        this.stopMusic();
        _musicId = _invaliAudioId;
      }
    };
    audioMgr.getMusicSwitch = function() {
      return _isOpenMusic;
    };
    audioMgr.setMusicVolume = function(volume) {
      cc.audioEngine.setMusicVolume(volume);
    };
    audioMgr.getMusicVolume = function() {
      return cc.audioEngine.getMusicVolume();
    };
    audioMgr.playMusic = function(audioClip) {
      var isLoop = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
      cc.log("\u64ad\u653e\u97f3\u4e50", _isOpenMusic, dataLogic.isHide);
      if (_isOpenMusic) {
        _musicId = cc.audioEngine.playMusic(audioClip, isLoop);
        cc.log("\u64ad\u653e _musicId", _musicId);
      }
    };
    audioMgr.stopMusic = function() {
      cc.log("\u505c\u6b62\u97f3\u4e50", _musicId);
      cc.audioEngine.stop(_musicId);
    };
    audioMgr.setMusicClip = function(clip) {
      _musicClip = clip;
    };
    audioMgr.init();
    cc._RF.pop();
  }, {} ],
  baiJiaLeConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "979636AIWJDh7Vfv2xisxzH", "baiJiaLeConstant");
    "use strict";
    window.baiJiaLeConstant = window.baiJiaLeConstant || {};
    var n = 0;
    n = 0;
    baiJiaLeConstant.Satge = {
      Bet: n++,
      StopBet: n++,
      OpenCard: n++,
      PieAward: n++
    };
    baiJiaLeConstant.SatgeTxt = [];
    baiJiaLeConstant.SatgeTxt[baiJiaLeConstant.Satge.Bet] = "\u8bf7\u4e0b\u6ce8...";
    baiJiaLeConstant.SatgeTxt[baiJiaLeConstant.Satge.StopBet] = "\u505c\u6b62\u4e0b\u6ce8...";
    baiJiaLeConstant.SatgeTxt[baiJiaLeConstant.Satge.OpenCard] = "\u5f00\u5956\u4e2d...";
    baiJiaLeConstant.SatgeTxt[baiJiaLeConstant.Satge.PieAward] = "\u6d3e\u5956\u4e2d...";
    baiJiaLeConstant.StageBeginTime = [ 0, 15, 17, 25 ];
    var _action = "DoPlay";
    baiJiaLeConstant.PostBet = {
      action: _action,
      eventName: "bet"
    };
    baiJiaLeConstant.PostOnLinePlayerCount = {
      action: _action,
      eventName: "getCount"
    };
    cc._RF.pop();
  }, {} ],
  baiJiaLeDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "626e29Wf4pPYqXtAfxAXyvv", "baiJiaLeDataLogic");
    "use strict";
    window.baiJiaLeDataLogic = {
      init: function init() {
        this.betBtnConfig = [ 1, 2, 3, 4, 5 ];
        this.resetData();
        this.continuousNotBetInning = 0;
        this.isKickedOut = false;
        this.curSatge = null;
        this.otherPlayers = [];
        this.trend = [];
        this.latelyPlayIds = [];
        this.curRound = 0;
      },
      resetData: function resetData() {
        this.areaBetNum = [ 0, 0, 0, 0, 0 ];
        this.areaMyBetNum = [ 0, 0, 0, 0, 0 ];
        this.cardData = [];
        this.settlementAmount = 0;
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setCardData: function setCardData(data) {
        this.cardData = kf.clone(data);
      },
      setTrend: function setTrend(data) {
        this.trend = kf.clone(data);
      },
      setSettlementAmount: function setSettlementAmount(num) {
        this.settlementAmount = num;
      },
      getTotalBetNum: function getTotalBetNum() {
        var total = 0;
        for (var i = 0; i < this.areaBetNum.length; i++) total += this.areaBetNum[i];
        return total;
      },
      setAreaBetNum: function setAreaBetNum(key, num) {
        this.areaBetNum[key] = num;
      },
      setAreaMyBetNum: function setAreaMyBetNum(key, num) {
        this.areaMyBetNum[key] = num;
      },
      getAreaMyTotalBetNum: function getAreaMyTotalBetNum() {
        var count = 0;
        for (var i = 0; i < this.areaMyBetNum.length; i++) count += this.areaMyBetNum[i];
        return count;
      },
      addContinuousNotBetInning: function addContinuousNotBetInning() {
        this.continuousNotBetInning++;
      },
      setContinuousNotBetInning: function setContinuousNotBetInning(num) {
        this.continuousNotBetInning = num;
      },
      setOtherPlayerInfo: function setOtherPlayerInfo(data) {
        this.otherPlayers = kf.clone(data);
      },
      setKickedOut: function setKickedOut(isKickedOut) {
        this.isKickedOut = isKickedOut;
      },
      setCurStage: function setCurStage(stage) {
        this.curSatge = stage;
      },
      getCurStage: function getCurStage(curTime) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        return time < baiJiaLeConstant.StageBeginTime[1] ? baiJiaLeConstant.Satge.Bet : time < baiJiaLeConstant.StageBeginTime[2] ? baiJiaLeConstant.Satge.StopBet : time < baiJiaLeConstant.StageBeginTime[3] ? baiJiaLeConstant.Satge.OpenCard : baiJiaLeConstant.Satge.PieAward;
      },
      getDistanceNextStageTime: function getDistanceNextStageTime(curTime, curStage) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        var nextStageBeginTime = baiJiaLeConstant.StageBeginTime[this.getNextStage(curStage)];
        var distanceNextStageTime = nextStageBeginTime - time;
        distanceNextStageTime < 0 && (distanceNextStageTime = 30 - time);
        return distanceNextStageTime;
      },
      getNextStage: function getNextStage(curStage) {
        return (curStage + 1) % 4;
      },
      playIdDiffValue: function playIdDiffValue(playId1, playId2) {
        var v1 = Number(playId1.substr(-4));
        var v2 = Number(playId2.substr(-4));
        return v2 - v1;
      },
      pushPlayId: function pushPlayId(playId) {
        this.latelyPlayIds.length > 1 && this.latelyPlayIds.shift();
        this.latelyPlayIds.push(playId);
      },
      getCardValue: function getCardValue(cardKey) {
        if (0 == cardKey % 13) return 1;
        return cardKey % 13 + 1;
      }
    };
    baiJiaLeDataLogic.init();
    cc._RF.pop();
  }, {} ],
  baiJiaLeHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "9969cv3cwRAiqtkdzzdb7Ns", "baiJiaLeHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.BaiJiaLe);
        if (baiJiaLeDataLogic.isKickedOut) {
          this.showKickedOut();
          baiJiaLeDataLogic.setKickedOut(false);
        }
      },
      showKickedOut: function showKickedOut() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u8fde\u7eed5\u5c40\u672a\u4e0b\u6ce8\uff0c\u88ab\u8bf7\u79bb\u4e86\u724c\u684c",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "BaiJiaLe/UI/01", "BaiJiaLe/table", "BaiJiaLe/bg" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  baiJiaLe: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "bfcea//G9ROT5xv3EtDwrLI", "baiJiaLe");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var trendItemStartX = -111;
    var trendItemSpace = 31.75;
    var trendItemY = [ 28, -4, -38 ];
    var rankingItemStartY = -38;
    var rankingItemSpace = -73;
    var playerWorldPos = cc.v2();
    var chipMoveSpeed = 8e-4;
    var bankerWorldPos = cc.v2();
    var chipRandomPos = [];
    var stopBetAnimFinished = false;
    var canvasPosOff = {};
    var otherPlayerYMin = 0;
    var otherPlayerYMax = 0;
    var gameHidePlayId = "";
    var gameHideStage = "";
    var curPlayId = "";
    var cutTimesLimitBetNum = 0;
    var isMaintaining = false;
    var curTimesHaveBet = false;
    var maxTableChipNum = 50;
    var chipTxtColor = [ new cc.Color(75, 179, 139), new cc.Color(73, 176, 159), new cc.Color(73, 147, 183), new cc.Color(80, 120, 185), new cc.Color(164, 111, 224) ];
    var receivedOpenCardMsg = false;
    cc.Class((_cc$Class = {
      extends: require("gameSceneBase"),
      properties: {
        reciprocal: cc.Node,
        roomNum: cc.Node,
        trendBg: cc.Node,
        ranking: cc.Node,
        rankingContent: cc.Node,
        rankingArrow: cc.Node,
        betArea: [ cc.Node ],
        chipLayer: cc.Node,
        banker: cc.Node,
        txtNickname: cc.Label,
        txtBalance: cc.Label,
        txtStage: cc.Label,
        txtTotalBetAmount: [ cc.Label ],
        txtSelfBetAmount: [ cc.Label ],
        txtSettlementAmount: cc.Label,
        txtCountPlayer: cc.Label,
        spHead: cc.Sprite,
        sfTrenIcon: [ cc.SpriteFrame ],
        pfTrenItem: cc.Prefab,
        pfRankingItem: cc.Prefab,
        pfChip: cc.Prefab,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        cardAtlas: cc.SpriteAtlas,
        choiceBet: [ cc.Node ],
        animStart: cc.Animation,
        animStop: cc.Animation,
        animHeadWin: cc.Animation,
        cardsArr: [ cc.Node ],
        cardPointArr: [ cc.Node ],
        pointPicArr: [ cc.SpriteFrame ],
        finalAnim: cc.Animation,
        finalResultSprite: [ cc.SpriteFrame ],
        heAnim: cc.Animation,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        audioWin: {
          default: null,
          type: cc.AudioClip
        },
        aduioLose: {
          default: null,
          type: cc.AudioClip
        },
        audioStartBet: {
          default: null,
          type: cc.AudioClip
        },
        audioStopBet: {
          default: null,
          type: cc.AudioClip
        },
        audioChip: {
          default: null,
          type: cc.AudioClip
        },
        audioClearingChip: {
          default: null,
          type: cc.AudioClip
        },
        audioSomeChip: {
          default: null,
          type: cc.AudioClip
        },
        audioAlarmClock: {
          default: null,
          type: cc.AudioClip
        },
        malePointAudio: {
          default: [],
          type: cc.AudioClip
        },
        femalePointAudio: {
          default: [],
          type: cc.AudioClip
        },
        xianDealer_Audio: {
          default: [],
          type: cc.AudioClip
        },
        zhuangDealer_Audio: {
          default: [],
          type: cc.AudioClip
        },
        xian_bupai_Audio: {
          default: [],
          type: cc.AudioClip
        },
        zhuang_bupai_Audio: {
          default: [],
          type: cc.AudioClip
        },
        xianWin_Audio: {
          default: [],
          type: cc.AudioClip
        },
        zhuangWin_Audio: {
          default: [],
          type: cc.AudioClip
        },
        heWin_Audio: {
          default: [],
          type: cc.AudioClip
        },
        dealCardAudio: {
          default: null,
          type: cc.AudioClip
        },
        turnCardAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onOpen", this.onOpen.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "reqOnLinePlayerCountCb", this.reqOnLinePlayerCountCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this2 = this;
        this.baseInit(constant.GameId.BaiJiaLe);
        this.registerEvent();
        isMaintaining = false;
        this.setSelfUI();
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        this.ranking.x = -cc.winSize.width / 2 - 234;
        this.isShowRanking = false;
        this.curChoiceBetKey = 0;
        kf.createPool(constant.PoolId.Chip, 500, this.pfChip);
        this.chipNode = [];
        for (var i = 0; i < this.betArea.length; i++) this.chipNode[i] = [];
        this.leisureChip = [];
        this.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this2.packUpRankingView();
        });
        this.posArr = [ cc.v2(-52, 0), cc.v2(52, 0), cc.v2(-133, 0), cc.v2(133, 0), cc.v2(-230, -16), cc.v2(232, -16) ];
      },
      start: function start() {
        var _this3 = this;
        otherPlayerYMin = cc.winSize.height / 2 - 150;
        otherPlayerYMax = cc.winSize.height / 2 + 150;
        canvasPosOff.x = cc.winSize.width / 2 - this.node.x;
        canvasPosOff.y = cc.winSize.height / 2 - this.node.y;
        playerWorldPos.x = this.spHead.node.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        playerWorldPos.y = this.spHead.node.getWorldMatrix(cc.mat4()).m13;
        bankerWorldPos.x = this.banker.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        bankerWorldPos.y = this.banker.getWorldMatrix(cc.mat4()).m13 + canvasPosOff.y;
        this.getWorldPos(this.chipLayer);
        this.trenItem = [];
        for (var i = 0; i < 3; i++) for (var j = 0; j < 8; j++) {
          var item = cc.instantiate(this.pfTrenItem);
          item.parent = this.trendBg;
          item.x = trendItemSpace * j + trendItemStartX;
          item.y = trendItemY[i];
          item.opacity = 0;
          this.trenItem.push(item);
        }
        var pos = this.spHead.node.parent.position;
        var _loop = function _loop(_i) {
          chipRandomPos[_i] = {};
          chipRandomPos[_i].x = _this3.betArea[_i].getWorldMatrix(cc.mat4()).m12 - 85 + canvasPosOff.x;
          chipRandomPos[_i].y = _this3.betArea[_i].getWorldMatrix(cc.mat4()).m13 - 85 + canvasPosOff.y;
          var betNum = 0;
          var totalBet = 0;
          var areaBet = 0;
          _this3.betArea[_i].on(cc.Node.EventType.TOUCH_END, function(i, pos, event) {
            this.packUpRankingView();
            betNum = baiJiaLeDataLogic.betBtnConfig[this.curChoiceBetKey];
            totalBet = baiJiaLeDataLogic.getAreaMyTotalBetNum().add(betNum);
            areaBet = baiJiaLeDataLogic.areaMyBetNum[i].add(betNum);
            if (baiJiaLeDataLogic.curSatge != baiJiaLeConstant.Satge.Bet) {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u975e\u4e0b\u6ce8\u72b6\u6001\uff0c\u8bf7\u7a0d\u7b49~"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
              return;
            }
            if (areaBet > 100 * baiJiaLeDataLogic.betBtnConfig[0]) {
              var _arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u4e0b\u6ce8\u5931\u8d25\uff0c\u8be5\u4e0b\u6ce8\u70b9\u9650\u7ea2" + baiJiaLeDataLogic.betBtnConfig[0] + "~" + 100 * baiJiaLeDataLogic.betBtnConfig[0]
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg);
              return;
            }
            if (0 == i && baiJiaLeDataLogic.areaMyBetNum[1] || 1 == i && baiJiaLeDataLogic.areaMyBetNum[0]) {
              this.showLayerTip("\u60a8\u4e0d\u80fd\u540c\u65f6\u5728\u5e84\u95f2\u4f4d\u7f6e\u4e0b\u6ce8\u54e6");
              return;
            }
            if (betNum > dataLogic.userBalance) {
              this.showLayerTip("\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u6ce8");
              return;
            }
            audioMgr.playEffect(this.audioChip);
            this.spHead.node.parent.stopAllActions();
            this.spHead.node.parent.runAction(cc.jumpTo(.05, pos, 10, 1));
            this.setPlayerBalance(dataLogic.userBalance.minus(betNum));
            this.bet(playerWorldPos, this.randomChipPos(i), betNum, i, true);
            var reqArg = {
              action: "DoPlay",
              eventName: "bet",
              betArea: i,
              betNum: betNum
            };
            var localCbArg = {
              betArea: i,
              betNum: betNum
            };
            http.post(reqArg, "betCb", localCbArg);
          }.bind(_this3, _i, pos));
        };
        for (var _i = 0; _i < this.betArea.length; _i++) _loop(_i);
        this.initRanking();
      },
      choiceBetNumEvent: function choiceBetNumEvent(event, key) {
        "" != event && audioMgr.playEffect(this.clickAudio);
        this.packUpRankingView();
        key = Number(key);
        this.curChoiceBetKey = key;
      },
      bet: function bet(startPos, endPos, chipNum, betBlock, isSelf) {
        var txt = void 0;
        if (isSelf) {
          txt = this.betArea[betBlock].getChildByName("txtSelfBetNum").getComponent(cc.Label);
          txt.string = Number(txt.string).add(chipNum);
          baiJiaLeDataLogic.setAreaMyBetNum(betBlock, Number(baiJiaLeDataLogic.areaMyBetNum[betBlock]).add(chipNum));
        }
        baiJiaLeDataLogic.setAreaBetNum(betBlock, Number(baiJiaLeDataLogic.areaBetNum[betBlock]).add(chipNum));
        txt = this.betArea[betBlock].getChildByName("txtTotalBetNum").getComponent(cc.Label);
        txt.string = Number(txt.string).add(chipNum);
        this.chipMoveToTable(startPos, endPos, chipNum, betBlock);
      },
      chipMoveToTable: function chipMoveToTable(startPos, endPos, chipNum, betBlock) {
        var chip = this.genChip(chipNum, startPos);
        this.chipAction(startPos, endPos, chip, false, betBlock, null, true);
      },
      getWorldPos: function getWorldPos(node) {
        var pos = node.position;
        do {
          node = node.parent;
          pos.x += node.x;
          pos.y += node.y;
        } while ("Canvas" != node.name);
        return pos;
      },
      gameRecoverCb: function gameRecoverCb(msg, isInit) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          isMaintaining = true;
          constant.HttpCode.error == msg.Code && this.showMaintainingToast(msg.StrCode);
          return;
        }
        var curTime = new Date().getTime();
        var curStage = baiJiaLeDataLogic.getCurStage(curTime);
        cc.log("\u65ad\u7ebf\u91cd\u8fde\u5904\u4e8e\u4ec0\u4e48\u9636\u6bb5", curStage);
        var reReq = false;
        1 != msg.Data.state || curStage != baiJiaLeConstant.Satge.StopBet && curStage != baiJiaLeConstant.Satge.OpenCard && curStage != baiJiaLeConstant.Satge.PieAward ? 2 == msg.Data.state && curStage == baiJiaLeConstant.Satge.Bet && (reReq = true) : reReq = true;
        if (reReq) {
          cc.log("\u91cd\u65b0\u8bf7\u6c42\u6570\u636e\u6062\u590dmsg.state", msg.Data.state, "\u670d\u52a1\u5668\u65f6\u95f4", (curTime - dataLogic.timeOff) / 1e3, "curStage", curStage);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", isInit);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          return;
        }
        var isOpenCard = true;
        1 != msg.Data.state && curStage != baiJiaLeConstant.Satge.Bet || (isOpenCard = false);
        this.onGameRecover(msg.Data, isInit, curTime, curStage, isOpenCard);
      },
      betUpcomingStopHint: function betUpcomingStopHint() {
        var _this4 = this;
        this.alarmClockAudioId = audioMgr.playEffect(this.audioAlarmClock);
        this.reciprocal.rotation = -10;
        var seq = cc.sequence(cc.rotateTo(.05, 10), cc.rotateTo(.05, -10));
        var repeat = cc.repeat(seq, 2.8 / .1);
        this.reciprocal.runAction(cc.sequence(repeat, cc.callFunc(function() {
          _this4.reciprocal.rotation = 0;
        })));
      },
      countDown: function countDown(stage, time, overCb) {
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        timeTxt.string = time;
        audioMgr.stopEffect(this.alarmClockAudioId);
        this.reciprocal.stopAllActions();
        this.reciprocal.rotation = 0;
        stage == baiJiaLeConstant.Satge.Bet && time < 4 && this.betUpcomingStopHint();
        this.callback = function() {
          stage == baiJiaLeConstant.Satge.Bet && 4 == time && this.betUpcomingStopHint();
          time--;
          timeTxt.string = time;
          if (time <= 0) {
            audioMgr.stopEffect(this.alarmClockAudioId);
            this.reciprocal.stopAllActions();
            this.reciprocal.rotation = 0;
            time = 0;
            this.unschedule(this.callback);
            this.intoNewStage(baiJiaLeDataLogic.getNextStage(stage));
            overCb && overCb();
          }
        };
        this.schedule(this.callback, 1);
      },
      showNotBetWarning: function showNotBetWarning() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u7ecf3\u5c40\u6ca1\u6709\u8fdb\u884c\u4e0b\u6ce8\uff0c\u8d85\u8fc75\u5c40\u5c06\u88ab\u8bf7\u51fa\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      setCardIndex: function setCardIndex(index) {
        var cardIndex;
        0 == index ? cardIndex = baiJiaLeDataLogic.cardData[0][0] : 1 == index ? cardIndex = baiJiaLeDataLogic.cardData[1][0] : 2 == index ? cardIndex = baiJiaLeDataLogic.cardData[0][1] : 3 == index ? cardIndex = baiJiaLeDataLogic.cardData[1][1] : 4 == index ? cardIndex = baiJiaLeDataLogic.cardData[0][2] : 5 == index && (cardIndex = baiJiaLeDataLogic.cardData[1][2]);
        return cardIndex;
      },
      cardRunAction: function cardRunAction(index) {
        var _this5 = this;
        this.cardsArr[index].runAction(cc.sequence(cc.callFunc(function() {
          _this5.cardsArr[index].opacity = 255;
          audioMgr.playEffect(_this5.dealCardAudio);
        }), cc.spawn(cc.scaleTo(.2, 4, 4), cc.moveTo(.2, this.posArr[index])), cc.delayTime(.2), cc.callFunc(function() {
          if (3 == index) _this5.flopCard(0); else {
            index++;
            _this5.cardRunAction(index);
          }
        })));
      },
      deal_and_flopCard: function deal_and_flopCard(index) {
        var _this6 = this;
        var role = -1 != [ 0, 2, 4 ].indexOf(index) ? "xian" : "zhuang";
        cc.log(index, "dealllllllllll");
        this.cardsArr[index].runAction(cc.sequence(cc.callFunc(function() {
          _this6.cardsArr[index].opacity = 255;
          var sex = dataLogic.userSex - 1;
          4 == index || 5 == index ? audioMgr.playEffect("xian" == role ? _this6.xian_bupai_Audio[sex] : _this6.zhuang_bupai_Audio[sex]) : audioMgr.playEffect(_this6.dealCardAudio);
        }), cc.spawn(cc.scaleTo(.15, 4, 4), cc.moveTo(.15, this.posArr[index])), cc.delayTime(.3), cc.scaleTo(.2, 0, 4), cc.callFunc(function() {
          var cardIndex = _this6.setCardIndex(index);
          _this6.cardsArr[index].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(_this6.cardAtlas, cardIndex);
        }, this), cc.scaleTo(.2, 4, 4), cc.callFunc(function() {
          var openTimes = _this6.getOpenTimes();
          if (index >= openTimes - 1) _this6.showPoint(); else if (index < openTimes - 1) {
            index++;
            _this6.deal_and_flopCard(index);
          }
        })));
      },
      flopCard: function flopCard(index) {
        var _this7 = this;
        var flopCardIndex = [ 0, 2, 1, 3 ][index];
        this.cardsArr[flopCardIndex].runAction(cc.sequence(cc.scaleTo(.2, 0, 4), cc.callFunc(function() {
          var cardIndex = _this7.setCardIndex(flopCardIndex);
          _this7.cardsArr[flopCardIndex].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(_this7.cardAtlas, cardIndex);
          audioMgr.playEffect(_this7.turnCardAudio);
        }, this), cc.scaleTo(.2, 4, 4), cc.delayTime(.2), cc.callFunc(function() {
          if (3 != index) {
            cc.log(index, "\u7ffb\u76d8");
            index++;
            _this7.flopCard(index);
          } else {
            var openTimes = _this7.getOpenTimes();
            cc.log(openTimes, "\u8865\u724c");
            if (4 == openTimes) _this7.showPoint(); else if (5 == openTimes) {
              var xian_or_zhuang_bupai = -1 != baiJiaLeDataLogic.cardData[0][2] ? "xian" : "zhuang";
              _this7.deal_and_flopCard("xian" == xian_or_zhuang_bupai ? 4 : 5);
            } else _this7.deal_and_flopCard(4);
          }
        })));
      },
      showPoint: function showPoint() {
        var _this8 = this;
        var xianPoint = this.sumCardValue(baiJiaLeDataLogic.cardData[0]);
        var zhuangPoint = this.sumCardValue(baiJiaLeDataLogic.cardData[1]);
        this.cardPointArr[0].getChildByName("point").getComponent(cc.Sprite).spriteFrame = this.pointPicArr[xianPoint];
        this.cardPointArr[1].getChildByName("point").getComponent(cc.Sprite).spriteFrame = this.pointPicArr[zhuangPoint];
        this.cardPointArr[0].opacity = 255;
        this.cardPointArr[1].opacity = 255;
        var sex = dataLogic.userSex - 1;
        this.node.runAction(cc.sequence(cc.delayTime(.2), cc.callFunc(function() {
          audioMgr.playEffect(_this8.xianDealer_Audio[sex]);
        }), cc.delayTime(.5), cc.callFunc(function() {
          audioMgr.playEffect(0 == sex ? _this8.malePointAudio[xianPoint] : _this8.femalePointAudio[xianPoint]);
        }), cc.delayTime(1), cc.callFunc(function() {
          audioMgr.playEffect(_this8.zhuangDealer_Audio[sex]);
        }), cc.delayTime(.5), cc.callFunc(function() {
          audioMgr.playEffect(0 == sex ? _this8.malePointAudio[zhuangPoint] : _this8.femalePointAudio[zhuangPoint]);
        }), cc.delayTime(1), cc.callFunc(function() {
          var lastestResult = baiJiaLeDataLogic.trend[baiJiaLeDataLogic.trend.length - 1];
          var endKey = [ 0, 1, 3 ][lastestResult[0]];
          var sex = dataLogic.userSex - 1;
          if (0 == endKey) {
            audioMgr.playEffect(_this8.xianWin_Audio[sex]);
            _this8.finalAnim.node.getChildByName("xY_0000s_0000").getComponent(cc.Sprite).spriteFrame = _this8.finalResultSprite[0];
            _this8.finalAnim.node.x = 0;
            _this8.finalAnim.play();
          } else if (1 == endKey) {
            audioMgr.playEffect(_this8.zhuangWin_Audio[sex]);
            _this8.finalAnim.node.getChildByName("xY_0000s_0000").getComponent(cc.Sprite).spriteFrame = _this8.finalResultSprite[1];
            _this8.finalAnim.node.x = 0;
            _this8.finalAnim.play();
          } else {
            audioMgr.playEffect(_this8.heWin_Audio[sex]);
            _this8.heAnim.node.x = 0;
            _this8.heAnim.play();
          }
        })));
      },
      sumCardValue: function sumCardValue(cardsArr) {
        var sum = 0;
        for (var i = 0; i < cardsArr.length; i++) {
          var cardValue = dataLogic.getCardValue(cardsArr[i]);
          cardValue = cardValue >= 10 ? 14 == cardValue ? 1 : 0 : cardValue;
          -1 != cardsArr[i] && (sum += cardValue);
        }
        return sum % 10;
      },
      getOpenTimes: function getOpenTimes() {
        var openTimes;
        openTimes = -1 == baiJiaLeDataLogic.cardData[0][2] && -1 == baiJiaLeDataLogic.cardData[1][2] ? 4 : -1 == baiJiaLeDataLogic.cardData[0][2] || -1 == baiJiaLeDataLogic.cardData[1][2] ? 5 : 6;
        return openTimes;
      },
      openCardStage: function openCardStage(timeRemaining) {
        var openTime;
        openTime = this.getOpenTimes();
        if (!timeRemaining || timeRemaining > openTime) this.cardRunAction(0); else if (timeRemaining > 3) {
          var pastTime = openTime - timeRemaining;
          cc.log(pastTime, "555555555555555555555");
          for (var i = 0; i < pastTime; i++) {
            cc.log(i);
            this.cardsArr[i].opacity = 255;
            this.cardsArr[i].position = this.posArr[i];
            this.cardsArr[i].scaleX = 4;
            this.cardsArr[i].scaleY = 4;
            var cardIndex = this.setCardIndex(i);
            this.cardsArr[i].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cardIndex);
          }
          this.cardRunAction(pastTime);
        } else {
          var index = 0;
          for (var _i2 = 0; _i2 < 2; _i2++) for (var j = 0; j < 3; j++) {
            var a = this.setCardIndex(index);
            if (-1 != a) {
              this.cardsArr[index].opacity = 255;
              this.cardsArr[index].position = this.posArr[index];
              this.cardsArr[index].scaleX = 4;
              this.cardsArr[index].scaleY = 4;
              var cardIndex = this.setCardIndex(index);
              this.cardsArr[index].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cardIndex);
            }
            index++;
          }
          var xianPoint = this.sumCardValue(baiJiaLeDataLogic.cardData[0]);
          var zhuangPoint = this.sumCardValue(baiJiaLeDataLogic.cardData[1]);
          this.cardPointArr[0].getChildByName("point").getComponent(cc.Sprite).spriteFrame = this.pointPicArr[xianPoint];
          this.cardPointArr[1].getChildByName("point").getComponent(cc.Sprite).spriteFrame = this.pointPicArr[zhuangPoint];
          this.cardPointArr[0].opacity = 255;
          this.cardPointArr[1].opacity = 255;
        }
      },
      intoNewStage: function intoNewStage(stage) {
        var curTime = new Date().getTime();
        var timeRemaining = baiJiaLeDataLogic.getDistanceNextStageTime(curTime, stage);
        this.countDown(stage, timeRemaining);
        cc.log("--intoNewStage ", baiJiaLeConstant.SatgeTxt[stage], timeRemaining);
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        switch (stage) {
         case baiJiaLeConstant.Satge.Bet:
          curTimesHaveBet = false;
          baiJiaLeDataLogic.resetData();
          receivedOpenCardMsg = false;
          this.txtSettlementAmount.node.opacity = 0;
          3 == baiJiaLeDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.setPlayId(dataLogic.playId);
          stopBetAnimFinished = false;
          this.resetOpenCards();
          this.cleanBetAmount();
          this.killAllChip();
          baiJiaLeDataLogic.curRound = Number(baiJiaLeDataLogic.curRound) + 1;
          for (var i = 0; i < this.betArea.length; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          cutTimesLimitBetNum = dataLogic.userBalance / 4;
          stopBetAnimFinished = false;
          this.animStart.node.opacity = 255;
          this.animStart.play();
          this.finalAnim.node.x = -1e4;
          this.finalAnim.stop();
          this.heAnim.node.x = -1e4;
          this.heAnim.stop();
          audioMgr.playEffect(this.audioStartBet);
          break;

         case baiJiaLeConstant.Satge.StopBet:
          audioMgr.playEffect(this.audioStopBet);
          this.resetOpenCards();
          stopBetAnimFinished = false;
          this.animStop.node.opacity = 255;
          this.animStop.on("finished", this.openCard, this);
          this.animStop.play();
          break;

         case baiJiaLeConstant.Satge.OpenCard:
          cc.log("\u5f00\u724c\u5566\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01");
          break;

         case baiJiaLeConstant.Satge.PieAward:
          cc.log("\u6d3e\u5956\u4e2d\u5566!!!!!!!!");
          this.clearing();
          this.setPlayerBalance(dataLogic.userBalance);
          this.updateTrendUI(baiJiaLeDataLogic.trend, true);
          if (baiJiaLeDataLogic.continuousNotBetInning > 4) {
            baiJiaLeDataLogic.setKickedOut(true);
            this.exitRoom();
          } else if (isMaintaining) {
            this.unscheduleAllCallbacks();
            this.showMaintainingToast();
          }
        }
        this.setSatge(stage);
      },
      cleanBetAmount: function cleanBetAmount() {
        for (var i = 0; i < this.betArea.length; i++) {
          this.setBetAmount(i, true, 0);
          this.setBetAmount(i, false, 0);
        }
      },
      clearing: function clearing() {
        var _this9 = this;
        var selfWin = [], allPlayerWin = [];
        var areaMyBetNum = kf.clone(baiJiaLeDataLogic.areaMyBetNum);
        var lastestResult = baiJiaLeDataLogic.trend[baiJiaLeDataLogic.trend.length - 1];
        var endKey = [ 0, 1, 3 ][lastestResult[0]];
        var xianIsPair = lastestResult[1];
        var zhuangIsPair = lastestResult[2];
        var openResult = [ endKey ];
        zhuangIsPair && openResult.push(4);
        xianIsPair && openResult.push(2);
        for (var i = 0; i < this.betArea.length; i++) if (i == endKey && areaMyBetNum[endKey] || zhuangIsPair && areaMyBetNum[4] || xianIsPair && areaMyBetNum[2]) {
          selfWin[i] = areaMyBetNum[i];
          selfWin[i] = null == selfWin[i] ? 0 : selfWin[i];
          allPlayerWin[i] = baiJiaLeDataLogic.areaBetNum[i];
        } else selfWin[i] = 0;
        var actionTime = .5, seq = void 0, delayTime = 0, chip = void 0;
        for (var _i3 = 0; _i3 < this.betArea.length; _i3++) if (-1 == openResult.indexOf(_i3)) {
          while (this.chipNode[_i3].length > 0) {
            chip = this.chipNode[_i3].pop();
            seq = cc.sequence(cc.moveTo(actionTime, bankerWorldPos).easing(cc.easeInOut(3)), cc.callFunc(function(chip) {
              this.recycleChip(chip);
            }.bind(this, chip)));
            chip.stopAllActions();
            chip.runAction(seq);
          }
          delayTime = actionTime;
          audioMgr.playEffect(this.audioClearingChip);
        }
        this.scheduleOnce(function() {
          for (var _i4 = 0; _i4 < this.betArea.length; _i4++) if (-1 != openResult.indexOf(_i4)) {
            this.castSomeChipToTable(baiJiaLeDataLogic.areaBetNum[_i4], _i4, bankerWorldPos, 20, true);
            audioMgr.playEffect(this.audioSomeChip);
          }
        }.bind(this), delayTime);
        this.scheduleOnce(this.showSettlementAmount.bind(this), delayTime + .5);
        delayTime += actionTime;
        this.scheduleOnce(this.award.bind(this, selfWin, openResult), delayTime + .1);
        var _loop2 = function _loop2(_i5) {
          -1 != openResult.indexOf(_i5) && _this9.betArea[_i5].getChildByName("halo").runAction(cc.sequence(cc.blink(1, 3), cc.callFunc(function() {
            _this9.betArea[_i5].getChildByName("halo").opacity = 255;
          })));
        };
        for (var _i5 = 0; _i5 < this.betArea.length; _i5++) _loop2(_i5);
      },
      chipMoveToPlayer: function chipMoveToPlayer(startPos, endPos, chip) {
        this.chipAction(startPos, endPos, chip, true);
      },
      award: function award(selfWin, openResult) {
        var allPlayerWin = baiJiaLeDataLogic.areaBetNum;
        var otherPlayerWin = 0, chip = void 0;
        for (var i = 0; i < this.betArea.length; i++) {
          var count = 0;
          if (selfWin[i] > 0) {
            count = Math.ceil(selfWin[i] / allPlayerWin[i] * this.chipNode[i].length);
            count = count < 3 ? 3 : count;
            count = count > this.chipNode[i].length ? this.chipNode[i].length : count;
            var j = 0;
            while (j < count) {
              chip = this.chipNode[i].pop();
              this.chipMoveToPlayer(chip.position, playerWorldPos, chip);
              j++;
            }
          }
          otherPlayerWin = allPlayerWin[i] - selfWin[i];
          if (otherPlayerWin > 0) {
            while (this.chipNode[i].length > 0) {
              chip = this.chipNode[i].pop();
              this.chipMoveToPlayer(chip.position, this.randomOtherPos(), chip);
            }
            audioMgr.playEffect(this.audioClearingChip);
          }
        }
        if (curTimesHaveBet) if (baiJiaLeDataLogic.settlementAmount < 0) audioMgr.playEffect(this.aduioLose); else {
          audioMgr.playEffect(this.audioClearingChip);
          audioMgr.playEffect(this.audioWin);
          this.animHeadWin.node.opacity = 255;
          this.animHeadWin.play();
        }
      },
      showSettlementAmount: function showSettlementAmount() {
        var num = baiJiaLeDataLogic.settlementAmount;
        if (!curTimesHaveBet) return;
        0 === num && cc.error("\u7ed3\u7b97\u91d1\u989d\u9519\u8bef");
        if (num < 0) {
          this.txtSettlementAmount.font = this.loseChipNumFont;
          this.txtSettlementAmount.string = num;
        } else {
          this.txtSettlementAmount.string = "+" + num;
          this.txtSettlementAmount.font = this.winChipNumFont;
        }
        this.txtSettlementAmount.node.y = 0;
        this.txtSettlementAmount.node.opacity = 255;
        this.txtSettlementAmount.node.stopAllActions();
        this.txtSettlementAmount.node.runAction(cc.moveBy(.2, 0, 70));
      },
      openCard: function openCard() {
        cc.log("\u51c6\u5907\u6267\u884c\u5f00\u5956\u52a8\u753b,\u662f\u5426\u6536\u5230\u672c\u5c40\u7684\u5f00\u5956\u6d88\u606f", receivedOpenCardMsg);
        stopBetAnimFinished = true;
        if (receivedOpenCardMsg) this.openAllCardAction(baiJiaLeDataLogic.cardData); else {
          this.unscheduleAllCallbacks();
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
      },
      setSatge: function setSatge(stage) {
        baiJiaLeDataLogic.setCurStage(stage);
        this.txtStage.string = baiJiaLeConstant.SatgeTxt[stage];
      },
      netDisconnect: function netDisconnect() {
        this.unscheduleAllCallbacks();
      },
      onGameRecover: function onGameRecover(msg, isInit, curTime, curStage, isOpenCard) {
        baiJiaLeDataLogic.resetData();
        isInit && baiJiaLeDataLogic.setContinuousNotBetInning(0);
        dataLogic.setNeedRecover(true);
        var timeRemaining = baiJiaLeDataLogic.getDistanceNextStageTime(curTime, curStage);
        cc.log("\u91cd\u8fde-----", curStage, timeRemaining, isOpenCard);
        this.countDown(curStage, timeRemaining);
        this.setSatge(curStage);
        dataLogic.setReqRecoverState(false);
        dataLogic.setDeskId(msg.deskId);
        dataLogic.setMsgId(msg.msgId);
        curStage == baiJiaLeConstant.Satge.Bet || this.simulateOnLinePlayerNum(msg.count);
        baiJiaLeDataLogic.setOtherPlayerInfo();
        this.setBetToggleConfig(msg.betConfig);
        this.setCountPlayer(msg.count);
        var trend = kf.clone(msg.trend);
        baiJiaLeDataLogic.setTrend(trend);
        var settlementAmount = 0;
        var balance = 0;
        if (null != msg.endData) {
          settlementAmount = Number(msg.endData.split(",")[0]);
          balance = msg.endData.split(",")[1];
        } else balance = msg.balance;
        cutTimesLimitBetNum = balance / 4;
        baiJiaLeDataLogic.setSettlementAmount(settlementAmount);
        if (isOpenCard) {
          receivedOpenCardMsg = true;
          baiJiaLeDataLogic.pushPlayId(msg.lastPlayId);
          baiJiaLeDataLogic.setCardData(msg.lastOpenCards);
          if (curStage == baiJiaLeConstant.Satge.OpenCard) {
            this.setPlayerBalance(balance - settlementAmount);
            dataLogic.setUserBalance(balance);
          } else this.setPlayerBalance(balance);
        } else {
          receivedOpenCardMsg = false;
          var totalBetNum = 0;
          for (var i = 0; i < this.betArea.length; i++) totalBetNum += msg.myBet[i];
          this.setPlayerBalance(balance.minus(totalBetNum));
        }
        dataLogic.setPlayId(msg.playId);
        baiJiaLeDataLogic.pushPlayId(msg.playId);
        baiJiaLeDataLogic.curRound = msg.lastPlayId.split("-")[1].substr(-4);
        this.updateTrendUI(trend);
        for (var _i6 = 0; _i6 < this.betArea.length; _i6++) {
          this.setBetAmount(_i6, false, msg.allBet[_i6]);
          this.setBetAmount(_i6, true, msg.myBet[_i6]);
        }
        curTimesHaveBet = baiJiaLeDataLogic.getAreaMyTotalBetNum() > 0;
        this.updateUI(curStage, timeRemaining);
        this.updateRanking(msg.others);
        stopBetAnimFinished = false;
      },
      updateTrendUI: function updateTrendUI(trend) {
        var isBlink = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        var data = kf.clone(trend);
        var curRound = Number(baiJiaLeDataLogic.curRound);
        var startPos = curRound % 8;
        cc.log("\u5f53\u524d\u73e0\u8def\u56fe\u7684\u8d77\u59cb\u4f4d\u7f6e", startPos);
        var getDataNum = startPos + (data.length >= 16 ? 16 : data.length >= 8 ? 8 : 0) + (isBlink ? 1 : 0);
        data = data.length > 24 ? data.slice(-getDataNum) : data;
        if (!this.trenItem.length) for (var i = 0; i < 3; i++) for (var j = 0; j < 8; j++) {
          var item = cc.instantiate(this.pfTrenItem);
          item.parent = this.trendBg;
          item.x = trendItemSpace * j + trendItemStartX;
          item.y = trendItemY[i];
          item.opacity = 0;
          this.trenItem.push(item);
        }
        for (var _i7 = 0; _i7 < this.trenItem.length; _i7++) if (_i7 < data.length) {
          this.trenItem[_i7].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = this.sfTrenIcon[data[_i7][0]];
          this.trenItem[_i7].opacity = 255;
          this.trenItem[_i7].getChildByName("blueDot").opacity = data[_i7][1] ? 255 : 0;
          this.trenItem[_i7].getChildByName("redDot").opacity = data[_i7][2] ? 255 : 0;
        } else this.trenItem[_i7].opacity = 0;
        if (isBlink) {
          cc.log(data);
          this.trenItem[data.length - 1].runAction(cc.sequence(cc.delayTime(.5), cc.blink(3, 6)));
        }
      },
      updateRanking: function updateRanking(data) {
        var item = null, showItemCount = 0;
        for (var i = 0; i < 20; i++) {
          item = this.rankingItem[i];
          if (i < data.length) {
            showItemCount++;
            item.opacity = 255;
            item.getChildByName("txtNickname").getComponent(cc.Label).string = data[i].name;
            item.getChildByName("txtBetNum").getComponent(cc.Label).string = data[i].money;
            this.setPlayerHead(data[i].avatar, item.getChildByName("head").getComponent(cc.Sprite));
          } else item.opacity = 0;
        }
        this.rankingContent.height = showItemCount * -rankingItemSpace + 5;
      },
      initRanking: function initRanking() {
        var item = null;
        this.rankingItem = [];
        for (var i = 0; i < 20; i++) {
          item = cc.instantiate(this.pfRankingItem);
          item.parent = this.rankingContent;
          item.y = i * rankingItemSpace + rankingItemStartY;
          this.rankingItem.push(item);
        }
      },
      killAllChip: function killAllChip() {
        var chip = void 0;
        for (var i = 0; i < this.chipNode.length; i++) {
          while (this.chipNode[i].length > 0) {
            chip = this.chipNode[i].pop();
            chip.stopAllActions();
            this.recycleChip(chip);
          }
          this.chipNode[i] = [];
        }
      },
      recycleChip: function recycleChip(chip) {
        chip.opacity = 0;
        chip.isUse = false;
        this.leisureChip.push(chip);
      },
      packUpRankingView: function packUpRankingView() {
        if (this.isShowRanking) {
          var endPos = {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = false;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        "setRankingView" != key && this.packUpRankingView();
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "exitRoom":
          this.tryExitRoom();
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.BaiJiaLe);
          break;

         case "Setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "refresh":
          location.reload();
          break;

         case "setRankingView":
          var endPos = null;
          endPos = this.isShowRanking ? {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          } : {
            x: -cc.winSize.width / 2,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = !this.isShowRanking;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      resetOpenCards: function resetOpenCards() {
        for (var i = 0; i < 6; i++) {
          this.cardsArr[i].stopAllActions();
          this.cardsArr[i].opacity = 0;
          this.cardsArr[i].position = cc.v2(191, 95);
          this.cardsArr[i].scale = 1;
          this.cardsArr[i].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, "backCard");
        }
        this.cardPointArr[0].opacity = 0;
        this.cardPointArr[1].opacity = 0;
      },
      updateUI: function updateUI(stage, timeRemaining) {
        var _this10 = this;
        this.killAllChip();
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        this.txtSettlementAmount.node.opacity = 0;
        this.finalAnim.node.x = -1e4;
        this.finalAnim.stop();
        this.heAnim.node.x = -1e4;
        this.heAnim.stop();
        switch (stage) {
         case baiJiaLeConstant.Satge.Bet:
          if (baiJiaLeDataLogic.continuousNotBetInning > 4) {
            baiJiaLeDataLogic.setKickedOut(true);
            this.exitRoom();
          }
          this.setPlayId(dataLogic.playId);
          3 == baiJiaLeDataLogic.continuousNotBetInning && this.showNotBetWarning();
          for (var i = 0; i < this.betArea.length; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          this.resetOpenCards();
          this.recoverTableChip(15 - timeRemaining);
          break;

         case baiJiaLeConstant.Satge.StopBet:
          cc.log("updateUI====================StopBet", timeRemaining);
          this.setPlayId(dataLogic.playId);
          this.recoverTableChip(5);
          this.resetOpenCards();
          this.updateBetAmount();
          for (var _i8 = 0; _i8 < this.betArea.length; _i8++) this.betArea[_i8].getChildByName("halo").opacity = 0;
          this.scheduleOnce(function() {
            _this10.openCardStage(8);
          }, 2 - timeRemaining);
          break;

         case baiJiaLeConstant.Satge.OpenCard:
          this.resetOpenCards();
          this.setPlayId(baiJiaLeDataLogic.latelyPlayIds[0]);
          this.recoverTableChip(5);
          this.updateBetAmount();
          cc.log("========================================", timeRemaining);
          this.openCardStage(timeRemaining);
          break;

         case baiJiaLeConstant.Satge.PieAward:
          cc.log("\u65ad\u7ebf\u91cd\u8fde\u6d3e\u5956\u4e2d");
          this.setPlayId(baiJiaLeDataLogic.latelyPlayIds[0]);
          this.recoverTableChip();
          timeRemaining > 2 ? this.clearing() : this.showSettlementAmount();
        }
      },
      recoverTableChip: function recoverTableChip() {
        var genTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 18;
        var allBet = null;
        for (var i = 0; i < this.betArea.length; i++) {
          allBet = baiJiaLeDataLogic.areaBetNum[i];
          if (allBet > 0) for (var j = 0; j < genTime; j++) this.genSomeChipToTable(i, allBet / genTime, true);
        }
      },
      genSomeChipToTable: function genSomeChipToTable(areaKey, totalChipNum) {
        var isRecover = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        var chips = this.genSomeChip(totalChipNum, isRecover);
        for (var i = 0; i < chips.length; i++) {
          chips[i].opacity = 255;
          chips[i].position = this.randomChipPos(areaKey);
          this.chipNode[areaKey].push(chips[i]);
        }
      },
      updateBetAmount: function updateBetAmount() {
        for (var i = 0; i < this.betArea.length; i++) {
          this.setBetAmount(i, false, baiJiaLeDataLogic.areaBetNum[i]);
          this.setBetAmount(i, true, baiJiaLeDataLogic.areaMyBetNum[i]);
        }
      },
      setBetAmount: function setBetAmount(betAreaKey, isSelf, amount) {
        if (isSelf) {
          this.txtSelfBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          baiJiaLeDataLogic.setAreaMyBetNum(betAreaKey, amount);
        } else {
          this.txtTotalBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          baiJiaLeDataLogic.setAreaBetNum(betAreaKey, amount);
        }
      },
      setPlayerBalance: function setPlayerBalance(balance) {
        "string" == typeof balance && (balance = Number(balance));
        this.txtBalance.string = balance.toFixed(2);
        dataLogic.setUserBalance(balance);
      },
      setBetToggleConfig: function setBetToggleConfig(config) {
        baiJiaLeDataLogic.setBetBtnConfig(config);
        for (var i = 0; i < baiJiaLeDataLogic.betBtnConfig.length; i++) this.choiceBet[i].getChildByName("txt").getComponent(cc.Label).string = config[i];
      },
      setCountPlayer: function setCountPlayer(num) {
        this.txtCountPlayer.string = "\u672c\u684c\u5171" + num + "\u4eba";
      },
      showMaintainingToast: function showMaintainingToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u7cfb\u7edf\u9700\u8981\u51e0\u5206\u949f\u5347\u7ea7\u4e00\u4e0b\uff0c\u8bf7\u7a0d\u7b49";
        if (this.getToast(constant.ToastType.Hint, 4)) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "exitRoom" ],
            btnTxt: [ null, "\u597d\u7684" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.Chip);
      },
      updateBalanceCb: function updateBalanceCb() {},
      syncServerTimeCb: function syncServerTimeCb() {
        var now = new Date().getTime();
        cc.log("\u670d\u52a1\u5668\u65f6\u95f4", msg.Data, now - dataLogic.timeOff);
        return;
        var toast;
        var arg;
      },
      tryExitRoom: function tryExitRoom() {
        0 == baiJiaLeDataLogic.getAreaMyTotalBetNum() ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u7b49\u5f85\u6e38\u620f\u7ed3\u675f\u518d\u9000\u51fa", baiJiaLeDataLogic.getAreaMyTotalBetNum());
      },
      exitRoom: function exitRoom() {
        cc.log("\u9000\u51fa\u623f\u95f4");
        audioMgr.stopEffect(this.alarmClockAudioId);
        baiJiaLeDataLogic.setContinuousNotBetInning(0);
        this.unscheduleAllCallbacks();
        isMaintaining || http.post({
          action: "DoPlay",
          eventName: "leave"
        });
        this.goBackSelectRoom();
      },
      setSelfUI: function setSelfUI() {
        this.txtNickname.string = dataLogic.userName;
        this.setPlayerBalance(dataLogic.userBalance);
        this.setPlayerHead(dataLogic.userHeadUrl, this.spHead);
      }
    }, _defineProperty(_cc$Class, "setPlayerBalance", function setPlayerBalance(balance) {
      "string" == typeof balance && (balance = Number(balance));
      this.txtBalance.string = balance.toFixed(2);
      dataLogic.setUserBalance(balance);
    }), _defineProperty(_cc$Class, "setPlayerHead", function setPlayerHead(headUrl, sp) {
      resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
        sp.spriteFrame = res;
      }, cc.SpriteFrame);
    }), _defineProperty(_cc$Class, "setPlayId", function setPlayId(playId) {
      curPlayId = playId;
      this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
      this.setRoomNumState();
    }), _defineProperty(_cc$Class, "setRoomNumState", function setRoomNumState() {
      this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
      this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
    }), _defineProperty(_cc$Class, "gameShow", function gameShow() {
      audioMgr.stopAllEffect();
      if (baiJiaLeDataLogic.continuousNotBetInning > 4) {
        baiJiaLeDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      if (isMaintaining) {
        this.unscheduleAllCallbacks();
        this.showMaintainingToast();
        return;
      }
      this.unscheduleAllCallbacks();
      this.unschedule(this.callback);
      this.animStart.stop();
      this.animStop.stop();
      this.animStart.node.opacity = 0;
      this.animStop.node.opacity = 0;
      this.finalAnim.node.x = -1e4;
      this.finalAnim.stop();
      this.heAnim.node.x = -1e4;
      this.heAnim.stop();
      if (this.socketIO.isConnected()) {
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      }
      return;
    }), _defineProperty(_cc$Class, "gameHide", function gameHide() {
      this.unscheduleAllCallbacks();
      gameHidePlayId = curPlayId;
      gameHideStage = baiJiaLeDataLogic.curSatge;
      this.resetOpenCards();
    }), _defineProperty(_cc$Class, "onOpen", function onOpen(msgData) {
      receivedOpenCardMsg = true;
      baiJiaLeDataLogic.addContinuousNotBetInning();
      baiJiaLeDataLogic.setCardData(msgData.cards);
      var trend = kf.clone(msgData.trend);
      baiJiaLeDataLogic.setTrend(trend);
      stopBetAnimFinished && this.openAllCardAction(msgData.cards);
      dataLogic.setPlayId(msgData.playId);
      baiJiaLeDataLogic.pushPlayId(msgData.playId);
      if (dataLogic.isHide && baiJiaLeDataLogic.continuousNotBetInning > 4) {
        baiJiaLeDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      this.updateRanking(msgData.others);
      var settlementAmount = msgData.endData.split(",")[0];
      baiJiaLeDataLogic.setSettlementAmount(settlementAmount);
      var balance = msgData.endData.split(",")[1];
      dataLogic.setUserBalance(balance);
      this.setCountPlayer(msgData.count);
      1 == msgData.isStop ? isMaintaining = true : this.simulateOnLinePlayerNum(msgData.count);
    }), _defineProperty(_cc$Class, "openAllCardAction", function openAllCardAction(data) {
      cc.log("\u7ffb\u62cd\uff01\uff01\uff01\uff01");
      if (dataLogic.isHide) return;
      this.openCardStage();
    }), _defineProperty(_cc$Class, "onBet", function onBet(msgData) {
      var betNum = 0;
      for (var i = 0; i < this.betArea.length; i++) {
        betNum = msgData.allBet[i] - baiJiaLeDataLogic.areaBetNum[i];
        betNum > 0 && this.castSomeChipToTable(betNum, i, null, 20);
        this.setBetAmount(i, false, msgData.allBet[i]);
      }
      this.setCountPlayer(msgData.count);
      audioMgr.playEffect(this.audioSomeChip);
    }), _defineProperty(_cc$Class, "castSomeChipToTable", function castSomeChipToTable(totalChipNum, areaKey) {
      var startPos = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
      var maxCount = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10;
      var isEnd = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
      if (dataLogic.isHide) return;
      var chips = this.genSomeChip(totalChipNum, maxCount);
      doLoop(this, chips.length);
      function doLoop(_this, _loopLength) {
        for (var j = 0; j < _loopLength; j++) {
          var pos = null == startPos ? chips[j].position : startPos;
          chips[j].position = null == startPos ? _this.randomOtherPos() : startPos;
          _this.chipAction(pos, _this.randomChipPos(areaKey), chips[j], false, areaKey, j, isEnd);
        }
      }
    }), _defineProperty(_cc$Class, "randomFrom", function randomFrom(lowerValue, upperValue) {
      return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);
    }), _defineProperty(_cc$Class, "randomChipPos", function randomChipPos(betAreaKey) {
      var x = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].x - (4 == betAreaKey || 1 == betAreaKey ? 40 : 0), chipRandomPos[betAreaKey].x + 180);
      var y = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].y + (betAreaKey > 1 ? 40 : 60), chipRandomPos[betAreaKey].y + (betAreaKey > 1 ? 100 : 120));
      return cc.v2(x, y);
    }), _defineProperty(_cc$Class, "randomOtherPos", function randomOtherPos() {
      return {
        x: 0,
        y: dataLogic.randomInt(otherPlayerYMin, otherPlayerYMax)
      };
    }), _defineProperty(_cc$Class, "chipAction", function chipAction(startPos, endPos, chip, isEndKill, betAreaKey, index, notDelayAction) {
      var _this11 = this;
      if (dataLogic.isHide) {
        if (isEndKill) this.recycleChip(chip); else {
          chip.position = endPos;
          this.chipNode[betAreaKey].push(chip);
        }
        return;
      }
      var actionTime = startPos.sub(endPos).mag() * chipMoveSpeed;
      var move = cc.moveTo(actionTime, endPos).easing(cc.easeInOut(3));
      chip.stopAllActions();
      chip.rotation = 360 * Math.random();
      chip.rotation = 360 * Math.random();
      if (isEndKill) {
        var seq = cc.sequence(move, cc.callFunc(function() {
          _this11.recycleChip(chip);
        }));
        chip.runAction(seq);
      } else {
        this.chipNode[betAreaKey].push(chip);
        chip.runAction(cc.sequence(cc.delayTime(notDelayAction ? 0 : .1 * index), cc.callFunc(function() {
          chip.opacity = 255;
        }, this), move, cc.callFunc(function() {
          if (_this11.chipNode[betAreaKey].length >= maxTableChipNum && !notDelayAction) {
            var chip = _this11.chipNode[betAreaKey].shift();
            chip.stopAllActions();
            _this11.recycleChip(chip);
          }
        }, this)));
      }
    }), _defineProperty(_cc$Class, "genSomeChip", function genSomeChip(totalChipNum) {
      var maxCount = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10;
      var isRecover = arguments[2];
      var base = 2 * dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].ante;
      var count = Math.ceil(totalChipNum / base);
      var _maxCount = isRecover ? maxTableChipNum : maxCount;
      count = count > _maxCount ? _maxCount : count;
      var chipNum = 0, key = void 0, chips = [], pos = {
        x: 0,
        y: 0
      };
      for (var i = 0; i < count; i++) {
        key = dataLogic.randomInt(0, 4);
        chipNum = baiJiaLeDataLogic.betBtnConfig[key];
        chips.push(this.genChip(chipNum, pos));
      }
      return chips;
    }), _defineProperty(_cc$Class, "genChip", function genChip(chipNum, pos) {
      var chip = null;
      if (0 == this.leisureChip.length) chip = kf.getObj(constant.PoolId.Chip, this.chipLayer, this.pfChip); else {
        chip = this.leisureChip.pop();
        if (chip.isUse) {
          cc.log("---------\u8fd9\u4e2a\u7b79\u7801\u5df2\u7ecf\u88ab\u7528\u4e86");
          this.genChip(chipNum, pos);
          return;
        }
        chip.opacity = 255;
      }
      var key = kf.getArrIndexByValue(baiJiaLeDataLogic.betBtnConfig, chipNum);
      if (-1 == key) {
        cc.error("\u672a\u627e\u5230\u5bf9\u5e94\u7684\u4e0b\u6ce8\u6309\u94ae\u914d\u7f6e", chipNum);
        return;
      }
      var data = {
        chipNum: chipNum,
        iconKey: key,
        pos: pos,
        color: chipTxtColor[key]
      };
      chip.getComponent("chip").initUI(data);
      chip.opacity = 0;
      chip.isUse = true;
      return chip;
    }), _defineProperty(_cc$Class, "betCb", function betCb(msgData, localCbArg) {
      if (msgData.Code == constant.HttpCode.Succeed) {
        baiJiaLeDataLogic.setContinuousNotBetInning(-1);
        curTimesHaveBet = true;
      } else {
        baiJiaLeDataLogic.setAreaMyBetNum(localCbArg.betArea, Number(baiJiaLeDataLogic.areaMyBetNum[localCbArg.betArea]).minus(localCbArg.betNum));
        this.setBetAmount(localCbArg.betArea, true, baiJiaLeDataLogic.areaMyBetNum[localCbArg.betArea]);
        msgData.Code == constant.HttpCode.NotSufficientFunds ? this.setPlayerBalance(msgData.Data) : this.setPlayerBalance(dataLogic.userBalance.add(localCbArg.betNum));
      }
    }), _defineProperty(_cc$Class, "simulateOnLinePlayerNum", function simulateOnLinePlayerNum(num) {
      var _this12 = this;
      var updateCount = 0;
      var min = num - 10, max = num + 10;
      min < 1 && (min = 1);
      this.updateSimulateOnLinePlayerNum && this.unschedule(this.updateSimulateOnLinePlayerNum);
      this.updateSimulateOnLinePlayerNum = function() {
        if (BRCattleDataLogic.curSatge == BRCattle.Satge.Bet) {
          _this12.unschedule(_this12.updateSimulateOnLinePlayerNum);
          return;
        }
        _this12.setCountPlayer(dataLogic.randomInt(min, max));
        updateCount++;
        if (5 == updateCount) {
          updateCount = 0;
          http.post(BRCattle.PostOnLinePlayerCount);
        }
      };
      this.schedule(this.updateSimulateOnLinePlayerNum, 1);
    }), _defineProperty(_cc$Class, "reqOnLinePlayerCountCb", function reqOnLinePlayerCountCb(msg) {
      msg.Code == constant.HttpCode.Succeed && this.simulateOnLinePlayerNum(msg.Data);
    }), _cc$Class));
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  bank: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "498e7hNW35IlIKVB2j9NUnZ", "bank");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    var _dayStr = {
      0: "\u4eca\u5929",
      1: "\u6628\u5929",
      7: "\u4e03\u5929"
    };
    var _GetInitData = {
      Action: "GetInitData",
      Requirement: null
    };
    var _AccountDetail = {
      Action: "GetTradeRecord",
      BetweenDays: 7,
      Index: 0,
      ID: 0,
      Type: -1,
      DataNum: -10
    };
    var _GetWithdrawRecord = {
      Action: "GetWithdrawRecord",
      BetweenDays: 7,
      Index: 0,
      ID: 0,
      Type: -1,
      DataNum: -10
    };
    var _GetRechargeRecord = {
      Action: "GetRechargeRecord",
      BetweenDays: 7,
      Index: 0,
      ID: 0,
      Type: -1,
      DataNum: -10
    };
    var _Withdraw = {
      Action: "Withdraw",
      SafePassword: null,
      BankCardID: null,
      Money: null
    };
    var _module = {
      safe: "0",
      transfer: "1",
      withdraw: "2",
      tradingRecord: "3",
      bankCardMgr: "4"
    };
    var _bankCardListNode = [];
    var _bankCardSpacing = 120;
    var _withdrawCardSpacing = 56;
    var _sprite = null;
    var _opacity = 153;
    var _hasLockCard = false;
    var _curCheckModule = -1;
    var _curCheckWithdrawCardKey = 0;
    var _data = null;
    var _withdrawCardList = [];
    var _bankCardData = [];
    var _tradingTitleTxt = {
      accountDetail: [ "\u660e\u7ec6\u7c7b\u578b", "\u6536\u652f\u91d1\u989d", "\u65f6\u95f4" ],
      withdrawRecord: [ "\u63d0\u73b0\u72b6\u6001", "\u63d0\u73b0\u91d1\u989d", "\u65f6\u95f4" ],
      rechargeRecord: [ "\u5145\u503c\u72b6\u6001", "\u5145\u503c\u65b9\u5f0f", "\u5145\u503c\u91d1\u989d", "\u65f6\u95f4" ],
      transferRecord: [ "\u8f6c\u8d26\u7c7b\u578b", "\u5bf9\u65b9\u8d26\u53f7", "\u6536\u652f\u91d1\u989d", "\u65f6\u95f4" ]
    };
    var _bankList = [ "\u5de5\u5546\u94f6\u884c", "\u5efa\u8bbe\u94f6\u884c", "\u519c\u4e1a\u94f6\u884c", "\u6c11\u751f\u94f6\u884c", "\u62db\u5546\u94f6\u884c", "\u4ea4\u901a\u94f6\u884c", "\u4e2d\u56fd\u94f6\u884c", "\u90ae\u653f\u50a8\u84c4", "\u4e2d\u4fe1\u94f6\u884c", "\u5174\u4e1a\u94f6\u884c", "\u534e\u590f\u94f6\u884c", "\u6d66\u53d1\u94f6\u884c", "\u5e7f\u53d1\u94f6\u884c", "\u5e73\u5b89\u94f6\u884c", "\u5149\u5927\u94f6\u884c", "\u519c\u5546\u94f6\u884c" ];
    var _key = 0;
    var _item = null;
    var _y = 0;
    var _tradingRecordItemSpacing = 48;
    var _canViewItemList = [];
    var _itemList = [], _msgLocalKey = void 0, _infoList = [], _isInTheRequest = false;
    var _infoItemLimit = 13, _maxShowItemNum = 11, _infoCount = 0;
    var _curChoiceRecordType = "accountDetail";
    var _canTransferBalance = 0;
    var _canWithdrawBalance = 0;
    var _payMax = 0;
    var _payMini = 0;
    var _tradingLoadIconPos = cc.v2(100, -100);
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        txtNotBankCardHint: cc.Label,
        txtTitleHint: cc.Label,
        txtTradingRecordHint: cc.Label,
        txtSaveAccountBalance: cc.Label,
        txtSaveBalance: cc.Label,
        txtInquireDayCheck: cc.Label,
        txtInquireTypeCheck: cc.Label,
        txtTransferHint: cc.Label,
        txtTradingRecordType: [ cc.Label ],
        txtTradingTitle: [ cc.Label ],
        btTransfer: cc.Button,
        btAddCard: cc.Button,
        pfBankCard: cc.Prefab,
        pfWithdrawCard: cc.Prefab,
        pfTradingDetailChoiceItem: cc.Prefab,
        pfTradingRecordItem: cc.Prefab,
        ebPassword: cc.EditBox,
        ebWithdrawNum: cc.EditBox,
        ebTransferNum: cc.EditBox,
        ebPayeeId: cc.EditBox,
        top: cc.Node,
        gameName: cc.Node,
        settingBtn: cc.Node,
        serviceBtn: cc.Node,
        safeLayer: cc.Node,
        transferLayer: cc.Node,
        withdrawLayer: cc.Node,
        tradingRecordLayer: cc.Node,
        bankCardMgrLayer: cc.Node,
        content: cc.Node,
        loadMask: cc.Node,
        loadIcon: cc.Node,
        withdrawLayerContent: cc.Node,
        transferLayerContent: cc.Node,
        withdrawAccountContent: cc.Node,
        withdrawBg: cc.Node,
        funcCheckMask: cc.Node,
        curWithdrawCard: cc.Node,
        pullDownWithdrawCardIcon: cc.Node,
        tradingRecordContent: cc.Node,
        inquireDayCheck: cc.Node,
        inquireTypeCheck: cc.Node,
        inquireDayCheckArrows: cc.Node,
        inquireTypeCheckArrows: cc.Node,
        funcItem: [ cc.Node ],
        nullTradingRecord: cc.Node,
        toggleAccountDetail: cc.Toggle
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqBankModuleDataCb", this.reqBankModuleDataCb.bind(this) ], [ "withdrawCb", this.withdrawCb.bind(this) ], [ "reqTradingTypeCb", this.reqTradingTypeCb.bind(this) ], [ "reqTradingRecordCb", this.reqTradingRecordCb.bind(this) ], [ "getInitDataCb", this.getInitDataCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this = this;
        _curCheckWithdrawCardKey = 0;
        this.initSceneBase();
        this.registerEvent();
        _curCheckModule = _module.safe;
        _GetInitData.Requirement = JSON.stringify([ "UserBalance" ]);
        this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", _module.safe);
        if (dataLogic.isTransfer) {
          this.btTransfer.node.active = true;
          for (var i = 1; i < 5; i++) this.funcItem[i].y = -86 - 90 * i;
        } else {
          for (var _i = 2; _i < 5; _i++) this.funcItem[_i].y = 4 - 90 * _i;
          this.btTransfer.node.active = false;
        }
        this.withdrawLayer.on(cc.Node.EventType.TOUCH_START, function(event) {
          event.stopPropagation();
          _this.withdrawAccountContent.parent.parent.active = false;
          _this.pullDownWithdrawCardIcon.rotationX = 0;
        });
        this.tradingRecordLayer.on(cc.Node.EventType.TOUCH_START, function(event) {
          event.stopPropagation();
          _this.inquireDayCheck.active = false;
          _this.inquireDayCheckArrows.rotationX = 0;
          _this.inquireTypeCheck.active = false;
          _this.inquireTypeCheckArrows.rotationX = 0;
        });
        this.tradingRecordContent.parent.parent.on(cc.Node.EventType.TOUCH_START, function(event) {
          _this.inquireDayCheck.active = false;
          _this.inquireDayCheckArrows.rotationX = 0;
          _this.inquireTypeCheck.active = false;
          _this.inquireTypeCheckArrows.rotationX = 0;
        });
        this.tradingRecordContent.parent.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.tradingRecordScrollEvent.bind(this, this.tradingRecordContent.parent.parent.getComponent(cc.ScrollView), cc.ScrollView.EventType.TOUCH_UP));
        http.post({
          action: "GetInitData",
          Requirement: JSON.stringify([ "SiteConfig" ])
        }, "getInitDataCb", null, true);
      },
      start: function start() {
        this.top.runAction(cc.sequence(cc.moveBy(.25, 0, -125), cc.moveBy(.15, 0, 10)));
        this.gameName.runAction(cc.sequence(cc.delayTime(.2), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.serviceBtn.runAction(cc.sequence(cc.delayTime(.35), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.settingBtn.runAction(cc.sequence(cc.delayTime(.45), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
      },
      getInitDataCb: function getInitDataCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed) return;
        dataLogic.setServiceAddr(msg.BackData.SiteConfig.Service);
      },
      btnEvent: function btnEvent(eventTouch, eventName) {
        var _this2 = this;
        cc.log("btnEvent", eventName);
        audioMgr.playEffect(this.audioBtn);
        if ("accountDetailView" != eventName) {
          this.inquireTypeCheck.active = false;
          this.inquireTypeCheckArrows.rotationX = 0;
        }
        if ("dayChoiceView" != eventName) {
          this.inquireDayCheck.active = false;
          this.inquireDayCheckArrows.rotationX = 0;
        }
        if ("setWithdrawCardContentView" != eventName) {
          this.withdrawAccountContent.parent.parent.active = false;
          this.pullDownWithdrawCardIcon.rotationX = 0;
        }
        switch (eventName) {
         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "service":
          if ("" == dataLogic.serviceAddr) {
            this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
            return;
          }
          dataLogic.openWindow(dataLogic.serviceAddr);
          break;

         case "addBankCard":
          if (!dataLogic.userPhoneNum) {
            this.createBindPhoneDialog();
            return;
          }
          _hasLockCard ? kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/checkBankCard",
            js: "checkBankCard",
            initArg: {
              doneCb: this.showAddBankCardDialog.bind(this, "2/2 \u786e\u5b9a")
            }
          }) : this.showAddBankCardDialog();
          break;

         case "setWithdrawCardContentView":
          this.pullDownWithdrawCardIcon.rotationX = 0 == this.pullDownWithdrawCardIcon.rotationX ? 180 : 0;
          if (180 == this.pullDownWithdrawCardIcon.rotationX) {
            this.withdrawAccountContent.parent.parent.active = true;
            this.withdrawAccountContent.getChildByName("mask").y = -_curCheckWithdrawCardKey * _withdrawCardSpacing - 13;
          } else this.withdrawAccountContent.parent.parent.active = false;
          break;

         case "withdraw":
          if (!dataLogic.userPhoneNum) {
            this.createBindPhoneDialog(null, function() {
              var txt = _this2.withdrawLayerContent.getChildByName("totalBalance");
              txt.getComponent(cc.Label).string = (Number(txt.getComponent(cc.Label).string) + dataLogic.registerCashGift).toFixed(2);
            });
            return;
          }
          if ("" == this.ebWithdrawNum.string) {
            this.showLayerTip("\u63d0\u73b0\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a");
            return;
          }
          var result = null;
          result = dataLogic.checkFormat(this.ebWithdrawNum.string, {
            Int: true,
            errMsg: "\u63d0\u73b0\u91d1\u989d\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          dataLogic.checkFormat(this.ebPassword.string, {
            Password: true,
            name: "\u5b89\u5168\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (this.ebWithdrawNum.string < _payMini || this.ebWithdrawNum.string > _payMax) {
            this.showLayerTip("\u63d0\u73b0\u91d1\u989d\u5fc5\u987b\u5728" + _payMini + "\u4e0e" + _payMax + "\u4e4b\u95f4");
            return;
          }
          if (Number(this.ebWithdrawNum.string) > _canWithdrawBalance) {
            this.showLayerTip("\u63d0\u73b0\u91d1\u989d\u5927\u4e8e\u53ef\u63d0\u91d1\u989d");
            return;
          }
          _Withdraw.SafePassword = this.ebPassword.string;
          _Withdraw.Money = this.ebWithdrawNum.string;
          _Withdraw.BankCardID = _bankCardData[_curCheckWithdrawCardKey].BankCardID;
          this.reqDateAndShowLoadView(_Withdraw, "withdrawCb", null, true);
          break;

         case "accountDetailView":
          this.inquireTypeCheck.active = !this.inquireTypeCheck.active;
          this.inquireTypeCheckArrows.rotationX = 180 == this.inquireTypeCheckArrows.rotationX ? 0 : 180;
          break;

         case "dayChoiceView":
          this.inquireDayCheck.active = !this.inquireDayCheck.active;
          this.inquireDayCheckArrows.rotationX = 180 == this.inquireDayCheckArrows.rotationX ? 0 : 180;
          break;

         case "toSafe":
          if (0 == this.txtSaveAccountBalance.string) {
            this.showLayerTip("\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5b58\u6b3e");
            return;
          }
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/deposit",
            js: "deposit",
            initArg: {
              doneCb: this.balanceExchangeSucceed.bind(this),
              accountBalance: this.txtSaveAccountBalance.string,
              saveBalance: this.txtSaveBalance.string,
              isWithdraw: false
            }
          });
          break;

         case "withdrawalFromSafe":
          if (0 == this.txtSaveBalance.string) {
            this.showLayerTip("\u4fdd\u9669\u67dc\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u53d6\u6b3e");
            return;
          }
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/withdraw",
            js: "deposit",
            initArg: {
              doneCb: this.balanceExchangeSucceed.bind(this),
              accountBalance: this.txtSaveAccountBalance.string,
              saveBalance: this.txtSaveBalance.string,
              isWithdraw: true
            }
          });
          break;

         case "exit":
          this.loadScene(constant.SceneName.Hall);
          break;

         default:
          cc.log("\u672a\u77e5\u7684\u6309\u94ae\u4e8b\u4ef6\u540d:", eventName);
        }
      },
      showAddBankCardDialog: function showAddBankCardDialog(btnStr) {
        kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
          path: "prefab/baoWang/addBankCard",
          js: "addBankCard",
          initArg: {
            doneCb: this.addSucceed.bind(this),
            isAddCard: true,
            btnStr: btnStr
          }
        });
      },
      showAlterBankCardDialog: function showAlterBankCardDialog(bankCardId) {
        kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
          path: "prefab/baoWang/addBankCard",
          js: "addBankCard",
          initArg: {
            doneCb: this.addSucceed.bind(this),
            isAddCard: false,
            bankCardId: bankCardId
          }
        });
      },
      addSucceed: function addSucceed() {
        _curCheckModule == _module.bankCardMgr ? _GetInitData.Requirement = JSON.stringify([ "UserBankCardList" ]) : _GetInitData.Requirement = JSON.stringify([ "PayLimit", "WithdrawRemainTimes", "UserBankCardList", "UserWithdrawAvail", "UserBalance", "SiteConfig" ]);
        this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", _curCheckModule);
      },
      balanceExchangeSucceed: function balanceExchangeSucceed(hintStr) {
        this.showLayerTip(hintStr);
        _GetInitData.Requirement = JSON.stringify([ "UserBalance" ]);
        this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", _module.safe);
      },
      choiceBankFuncEvent: function choiceBankFuncEvent(enevt, module) {
        cc.log("choiceBankFuncEvent", module, _curCheckModule);
        audioMgr.playEffect(this.audioBtn);
        if (_curCheckModule == module) return;
        _curCheckModule = module;
        this.safeLayer.active = false;
        this.transferLayer.active = false;
        this.withdrawLayer.active = false;
        this.tradingRecordLayer.active = false;
        this.bankCardMgrLayer.active = false;
        for (var i = 0; i < 5; i++) this.funcItem[i].getChildByName("txt").color = new cc.Color(246, 229, 194);
        enevt.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
        this.funcCheckMask.y = enevt.target.y + 2;
        http.abortAllReq();
        switch (module) {
         case _module.safe:
          _GetInitData.Requirement = JSON.stringify([ "UserBalance" ]);
          this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", module);
          break;

         case _module.transfer:
          _GetInitData.Requirement = JSON.stringify([ "TransferLimit", "WithdrawRemainTimes", "UserWithdrawAvail", "UserBalance" ]);
          this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", module);
          break;

         case _module.withdraw:
          _GetInitData.Requirement = JSON.stringify([ "PayLimit", "WithdrawRemainTimes", "UserBankCardList", "UserWithdrawAvail", "UserBalance", "SiteConfig" ]);
          this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", module);
          break;

         case _module.tradingRecord:
          this.choiceDayEvent("", 0);
          this.txtInquireTypeCheck.string = "\u5168\u90e8\u7c7b\u578b";
          _AccountDetail.Type = -1;
          this.choiceRecordType("", "accountDetail");
          this.genInfoItem();
          _GetInitData.Requirement = JSON.stringify([ "TradeType" ]);
          this.reqData(_GetInitData, "reqTradingTypeCb");
          this.toggleAccountDetail.check();
          break;

         case _module.bankCardMgr:
          _GetInitData.Requirement = JSON.stringify([ "UserBankCardList" ]);
          this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", module);
          break;

         default:
          cc.warn("\u672a\u77e5\u4e8b\u4ef6\u540d", module);
        }
      },
      reqBankModuleDataCb: function reqBankModuleDataCb(msg, module) {
        this.hideLoadView();
        if (constant.HttpCode.Succeed == msg.Code) switch (module) {
         case _module.bankCardMgr:
          this.bankCardMgrLayer.active = true;
          this.initBankCard(msg.BackData.UserBankCardList);
          break;

         case _module.safe:
          this.safeLayer.active = true;
          dataLogic.setUserBalance(msg.BackData.UserBalance.PocketMoney);
          this.txtSaveAccountBalance.string = msg.BackData.UserBalance.PocketMoney.toFixed(2);
          this.txtSaveBalance.string = (msg.BackData.UserBalance.UserBalance - msg.BackData.UserBalance.PocketMoney).toFixed(2);
          break;

         case _module.tradingRecord:
          this.tradingRecordLayer.opacity = 255;
          this.setGetTradeRecordArg(msg);
          _infoList = [];
          this.setTradingRecord(msg.BackData, true);
          break;

         case _module.transfer:
          this.transferLayer.active = true;
          this.initTransferLayer(msg.BackData);
          break;

         case _module.withdraw:
          this.withdrawLayer.active = true;
          this.ebWithdrawNum.inputFlag = cc.EditBox.InputFlag.DEFAULT;
          this.initWithdrawLayer(msg.BackData);
        }
      },
      initBankCard: function initBankCard(cards) {
        this.txtTitleHint.string = "\u60a8\u5df2\u7ed1\u5b9a" + cards.length + "\u5f20\u94f6\u884c\u5361\uff0c\u6700\u591a\u53ef\u7ed1\u5b9a5\u5f20\u94f6\u884c\u5361\u3002\n\u4e3a\u4e86\u60a8\u7684\u8d44\u91d1\u5b89\u5168\uff0c\u6210\u529f\u63d0\u73b0\u7684\u94f6\u884c\u5361\u4f1a\u81ea\u52a8\u9501\u5b9a\uff0c\u65e0\u6cd5\u5220\u9664\u548c\u4fee\u6539\u3002";
        _hasLockCard = false;
        if (0 == cards.length) {
          this.content.parent.parent.active = false;
          this.txtNotBankCardHint.node.active = true;
          return;
        }
        this.content.parent.parent.active = true;
        this.txtNotBankCardHint.node.active = false;
        this.content.height = cards.length * _bankCardSpacing;
        if (cards.length < 5) {
          this.btAddCard.enabled = true;
          this.btAddCard.node.opacity = 255;
        } else {
          this.btAddCard.enabled = false;
          this.btAddCard.node.opacity = 120;
        }
        for (var i = 0; i < cards.length; i++) {
          if (!_bankCardListNode[i]) {
            _bankCardListNode[i] = cc.instantiate(this.pfBankCard);
            _bankCardListNode[i].parent = this.content;
            _bankCardListNode[i].y = -i * _bankCardSpacing - 5;
            _item = _bankCardListNode[i].getChildByName("btAlter").getComponent(cc.Button);
            _item.clickEvents[0].target = this.node;
            _item.clickEvents[0].component = "bank";
            _item.clickEvents[0].handler = "alterBankCard";
          }
          _bankCardListNode[i].getChildByName("bankName").getComponent(cc.Label).string = cards[i].BankName;
          _sprite = _bankCardListNode[i].getChildByName("icon").getComponent(cc.Sprite);
          -1 == _bankList.indexOf(cards[i].BankName) ? kf.loadNetImg(constant.imgServer + "/Images/Common/otherBank.png", _sprite) : kf.loadNetImg(constant.imgServer + cards[i].logo_image, _sprite);
          _bankCardListNode[i].getChildByName("cardId").getComponent(cc.Label).string = cards[i].CardNum;
          _bankCardListNode[i].getChildByName("btAlter").getComponent(cc.Button).enabled = !cards[i].isLock && !cards[i].IsDisable;
          _bankCardListNode[i].getChildByName("btAlter").getComponent(cc.Button).clickEvents[0].customEventData = cards[i].BankCardID;
          if (cards[i].IsDisable || cards[i].isLock) {
            _bankCardListNode[i].getChildByName("btAlter").opacity = 120;
            _bankCardListNode[i].getChildByName("btAlter").getChildByName("txt").getComponent(cc.Label).string = cards[i].isLock ? "\u5df2\u9501\u5b9a" : "\u5df2\u7981\u7528";
          } else {
            _bankCardListNode[i].getChildByName("btAlter").getChildByName("txt").getComponent(cc.Label).string = "\u4fee \u6539";
            _bankCardListNode[i].getChildByName("btAlter").opacity = 255;
          }
          cards[i].isLock && (_hasLockCard = true);
        }
      },
      alterBankCard: function alterBankCard(event, bankCardID) {
        audioMgr.playEffect(this.audioBtn);
        this.showAlterBankCardDialog(bankCardID);
      },
      initWithdrawLayer: function initWithdrawLayer(data) {
        if (0 == data.UserBankCardList.length) {
          this.withdrawBg.active = false;
          this.withdrawLayer.getChildByName("nonCardHint").active = true;
          this.withdrawLayer.getChildByName("btAddCard").active = true;
          this.withdrawLayer.getChildByName("bg").active = false;
          return;
        }
        this.withdrawBg.active = true;
        this.withdrawLayer.getChildByName("bg").active = true;
        this.withdrawLayer.getChildByName("nonCardHint").active = false;
        this.withdrawLayer.getChildByName("btAddCard").active = false;
        var txt = void 0;
        if (null != data.UserBalance) {
          txt = this.withdrawLayerContent.getChildByName("totalBalance");
          var safeBalance = data.UserBalance.UserBalance - data.UserBalance.PocketMoney;
          safeBalance = safeBalance.toFixed(2);
          txt.getComponent(cc.Label).string = data.UserBalance.UserBalance.toFixed(2);
        }
        if (null != data.PayLimit) {
          _payMax = data.PayLimit.MaxMoney;
          _payMini = data.PayLimit.MinMoney;
        }
        if (null != data.UserWithdrawAvail) {
          _canWithdrawBalance = data.UserWithdrawAvail.availMoney;
          txt = this.withdrawLayerContent.getChildByName("canWithdrawBalance");
          txt.getComponent(cc.Label).string = _canWithdrawBalance;
          txt.getChildByName("hint").getComponent(cc.Label).string = "\u5269\u4f59\u6d41\u6c34\uff1a\n" + data.UserWithdrawAvail.leftLimit;
          var str = "1.\u4eca\u5929\u8fd8\u53ef\u63d0\u73b0" + data.WithdrawRemainTimes + "\u6b21\uff1b\u5355\u7b14\u53ef\u63d0\u73b0\uff1a\u6700\u4f4e" + _payMini + "\u5143\uff0c\u6700\u9ad8" + _payMax + "\u5143\u3002\n2.\u60a8\u7684\u5145\u503c\u672c\u91d1\u9700\u8981\u6d88\u8d39\u6ee1" + data.PayLimit.Percent + "\u65b9\u53ef\u63d0\u6b3e\uff1b\u724c\u5c40\u5956\u91d1+\u4f63\u91d1\u53ef\u76f4\u63a5\u63d0\u6b3e\u3002\n3.\u82e5\u5fd8\u8bb0\u5b89\u5168\u5bc6\u7801\uff0c\u8bf7\u5230\u4e2a\u4eba\u4e3b\u9875-\u5b89\u5168\u4e2d\u5fc3\u8fdb\u884c\u627e\u56de\u3002";
          1 == data.UserWithdrawAvail.mode && (str = "1.\u4eca\u5929\u8fd8\u53ef\u63d0\u73b0" + data.WithdrawRemainTimes + "\u6b21\uff1b\u5355\u7b14\u53ef\u63d0\u73b0\uff1a\u6700\u4f4e" + _payMini + "\u5143\uff0c\u6700\u9ad8" + _payMax + "\u5143\u3002\n2.\u60a8\u7684\u5145\u503c\u672c\u91d1\u9700\u8981\u6d88\u8d39\u6ee1" + data.PayLimit.Percent + "\u65b9\u53ef\u63d0\u6b3e\u3002\n3.\u82e5\u5fd8\u8bb0\u5b89\u5168\u5bc6\u7801\uff0c\u8bf7\u5230\u4e2a\u4eba\u4e3b\u9875-\u5b89\u5168\u4e2d\u5fc3\u8fdb\u884c\u627e\u56de\u3002");
          this.withdrawLayerContent.getChildByName("hint").getComponent(cc.Label).string = str;
        }
        null != data.SiteConfig && (0 == data.SiteConfig.WithdrawFee ? this.withdrawLayerContent.getChildByName("commissionCharge").getComponent(cc.Label).string = "\u672c\u6b21\u63d0\u73b0\u65e0\u9700\n\u6263\u9664\u624b\u7eed\u8d39" : this.withdrawLayerContent.getChildByName("commissionCharge").getComponent(cc.Label).string = "\u672c\u6b21\u63d0\u73b0\u9700\u6263\u9664\n " + data.SiteConfig.WithdrawFee + "%\u7684\u624b\u7eed\u8d39");
        _bankCardData = data.UserBankCardList;
        this.pullDownWithdrawCardIcon.active = _bankCardData.length > 1;
        for (var i = 0; i < _bankCardData.length; i++) {
          if (null == _withdrawCardList[i]) {
            _withdrawCardList[i] = cc.instantiate(this.pfWithdrawCard);
            _withdrawCardList[i].parent = this.withdrawAccountContent;
            _withdrawCardList[i].y = -i * _withdrawCardSpacing - 8;
            _withdrawCardList[i].getComponent(cc.Button).clickEvents[0].target = this.node;
            _withdrawCardList[i].getComponent(cc.Button).clickEvents[0].component = "bank";
            _withdrawCardList[i].getComponent(cc.Button).clickEvents[0].handler = "choiceWithdrawCard";
            _withdrawCardList[i].getComponent(cc.Button).clickEvents[0].customEventData = i;
          }
          var arr = _bankCardData[i].CardNum.split("*");
          var mantissa = arr[arr.length - 1];
          _withdrawCardList[i].getChildByName("bankName").getComponent(cc.Label).string = _bankCardData[i].BankName + "  (" + mantissa + ")";
        }
        this.withdrawAccountContent.height = _bankCardData.length * _withdrawCardSpacing + 20;
        this.setCurChoiceWithdrawCard(0);
      },
      initTransferLayer: function initTransferLayer(data) {
        var safeBalance = data.UserBalance.UserBalance - data.UserBalance.PocketMoney;
        safeBalance = safeBalance.toFixed(2);
        var txt = this.transferLayerContent.getChildByName("totalBalance");
        txt.getComponent(cc.Label).string = data.UserBalance.UserBalance.toFixed(2);
        _canTransferBalance = data.UserWithdrawAvail.availMoney;
        txt = this.transferLayerContent.getChildByName("canTransferBalance");
        txt.getComponent(cc.Label).string = _canTransferBalance;
        _payMax = data.TransferLimit.MaxMoney;
        _payMini = data.TransferLimit.MinMoney;
        this.txtTransferHint.string = "1.\u8f6c\u8d26\u65f6\u4f18\u5148\u4ece\u4fdd\u9669\u67dc\u4f59\u989d\u6263\u9664\u3002\n2.\u5355\u7b14\u53ef\u8f6c\u8d26\uff1a\u6700\u4f4e" + _payMini + "\u5143\uff0c\u6700\u9ad8" + _payMax + "\u5143\u3002\n3.\u82e5\u5fd8\u8bb0\u5b89\u5168\u5bc6\u7801\uff0c\u8bf7\u5230\u4e2a\u4eba\u4e3b\u9875-\u5b89\u5168\u4e2d\u5fc3\u8fdb\u884c\u627e\u56de\u3002";
      },
      choiceWithdrawCard: function choiceWithdrawCard(event, key) {
        key = Number(key);
        this.pullDownWithdrawCardIcon.rotationX = 0;
        this.withdrawAccountContent.parent.parent.active = false;
        this.setCurChoiceWithdrawCard(key);
        this.withdrawAccountContent.getChildByName("mask").y = -key * _withdrawCardSpacing - 13;
      },
      setCurChoiceWithdrawCard: function setCurChoiceWithdrawCard(key) {
        _curCheckWithdrawCardKey = key;
        var arr = _bankCardData[key].CardNum.split("*");
        var mantissa = arr[arr.length - 1];
        this.curWithdrawCard.getChildByName("bankName").getComponent(cc.Label).string = _bankCardData[key].BankName + "  (" + mantissa + ")";
      },
      withdrawCb: function withdrawCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.showLayerTip("\u63d0\u73b0\u7533\u8bf7\u63d0\u4ea4\u6210\u529f\uff0c\u8bf7\u57283-5\u5206\u949f\u540e\u67e5\u8be2\u662f\u5426\u5230\u8d26");
          _GetInitData.Requirement = JSON.stringify([ "PayLimit", "WithdrawRemainTimes", "UserBankCardList", "UserWithdrawAvail", "UserBalance", "SiteConfig" ]);
          this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", _module.withdraw);
          this.ebPassword.string = "";
        }
      },
      setGetTradeRecordArg: function setGetTradeRecordArg(data) {
        _AccountDetail.Index = -data.DataCount;
        _AccountDetail.ID = -data.Data;
        _GetWithdrawRecord.ID = -data.Data;
        _GetWithdrawRecord.Index = -data.DataCount;
        _GetRechargeRecord.ID = -data.Data;
        _GetRechargeRecord.Index = -data.DataCount;
      },
      resetGetTradeRecordArg: function resetGetTradeRecordArg() {
        _AccountDetail.Index = 0;
        _AccountDetail.ID = 0;
        _GetWithdrawRecord.ID = 0;
        _GetWithdrawRecord.Index = 0;
        _GetRechargeRecord.ID = 0;
        _GetRechargeRecord.Index = 0;
      },
      setTradingRecord: function setTradingRecord(data) {
        var needInitCurItem = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        _isInTheRequest = false;
        this.updateInfo(data);
        if (needInitCurItem) this.initInfoItem(); else for (var i = 0; i < 3; i++) this.tradingRecordScrollEvent();
      },
      choiceDayEvent: function choiceDayEvent(event, day) {
        _infoList = [];
        this.nullTradingRecord.opacity = 0;
        this.txtTradingRecordHint.node.opacity = 0;
        this.hideInfoItem();
        this.resetGetTradeRecordArg();
        this.inquireDayCheck.active = false;
        this.inquireDayCheckArrows.rotationX = 0;
        _AccountDetail.BetweenDays = day;
        _GetWithdrawRecord.BetweenDays = day;
        _GetRechargeRecord.BetweenDays = day;
        this.txtInquireDayCheck.string = _dayStr[day];
        if ("" != event) {
          audioMgr.playEffect(this.audioBtn);
          this.inquireDayCheck.getChildByName("mask").y = event.target.y;
          this.reqTradingRecord(_curChoiceRecordType, true);
        } else this.inquireDayCheck.getChildByName("mask").y = -37.6;
      },
      reqTradingTypeCb: function reqTradingTypeCb(msg) {
        var _this3 = this;
        this.hideLoadView();
        msg.Code == constant.HttpCode.Succeed && function() {
          _data = msg.BackData.TradeType;
          _data.unshift({
            Id: -1,
            Name: "\u5168\u90e8\u7c7b\u578b"
          });
          _this3.inquireTypeCheck.height = 54 * Math.ceil(_data.length / 2) + 44;
          var childs = [];
          for (var i = 0; i < _data.length; i++) {
            _item = _this3.inquireTypeCheck.getChildByName("" + i);
            if (null == _item) {
              _item = cc.instantiate(_this3.pfTradingDetailChoiceItem);
              _item.parent = _this3.inquireTypeCheck;
              _item.name = "" + i;
              _item.y = Math.floor(i / 2) * -(_item.height + 10) - 26;
              _item.x = i % 2 == 0 ? 27 : _item.width + 41;
              _item.on(cc.Node.EventType.TOUCH_START, function(event) {
                event.stopPropagation();
              });
              _item.on(cc.Node.EventType.TOUCH_END, function(event) {
                _infoList = [];
                _this3.nullTradingRecord.opacity = 0;
                _this3.txtTradingRecordHint.node.opacity = 0;
                _this3.hideInfoItem();
                _this3.resetGetTradeRecordArg();
                for (var j = 0; j < childs.length; j++) childs[j].getChildByName("bg").color = new cc.Color(243, 239, 222);
                audioMgr.playEffect(_this3.audioBtn);
                _this3.txtInquireTypeCheck.string = event.target.getChildByName("txt").getComponent(cc.Label).string;
                _this3.inquireTypeCheck.active = false;
                _this3.inquireTypeCheckArrows.rotationX = 0;
                _AccountDetail.Type = event.target.tradeType;
                event.target.getChildByName("bg").color = new cc.Color(252, 242, 179);
                _this3.reqTradingRecord(_curChoiceRecordType, true);
              });
            }
            childs = _this3.inquireTypeCheck.children;
            _item.tradeType = _data[i].Id;
            _item.getChildByName("txt").getComponent(cc.Label).string = _data[i].Name;
            _item.getChildByName("bg").color = 0 == i ? new cc.Color(252, 242, 179) : new cc.Color(243, 239, 222);
          }
        }();
      },
      setInfoItemState: function setInfoItemState(key, state) {
        _itemList[key].x = state ? 9999 : 0;
      },
      reqDateAndShowLoadIcon: function reqDateAndShowLoadIcon(reqArg, cbEventName, cbArg) {
        cc.log("reqDateAndShowLoadIcon----");
        this.txtTradingRecordHint.node.getChildByName("loadIcon").stopAllActions();
        this.txtTradingRecordHint.node.getChildByName("loadIcon").opacity = 255;
        this.txtTradingRecordHint.string = "\u52a0\u8f7d\u4e2d";
        this.txtTradingRecordHint.node.getChildByName("loadIcon").runAction(cc.repeatForever(cc.rotateBy(1, 360)));
        this.txtTradingRecordHint.node.getChildByName("loadIcon").x = -this.txtTradingRecordHint.node.width / 2 - 23;
        this.reqData(reqArg, cbEventName, cbArg);
      },
      reqTradingRecord: function reqTradingRecord(recordType) {
        var needInitCurItem = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        http.abortAllReq();
        var arg = void 0;
        switch (recordType) {
         case "accountDetail":
          arg = _AccountDetail;
          break;

         case "withdrawRecord":
          arg = _GetWithdrawRecord;
          break;

         case "rechargeRecord":
          arg = _GetRechargeRecord;
        }
        cc.log("reqTradingRecord", needInitCurItem);
        needInitCurItem ? this.reqDateAndShowLoadView(arg, "reqTradingRecordCb", needInitCurItem, false, _tradingLoadIconPos) : this.reqDateAndShowLoadIcon(arg, "reqTradingRecordCb", needInitCurItem);
      },
      reqTradingRecordCb: function reqTradingRecordCb(msg) {
        var needInitCurItem = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        this.hideLoadView();
        if (constant.HttpCode.Succeed == msg.Code) {
          needInitCurItem && (_infoList = []);
          this.setGetTradeRecordArg(msg);
          this.setTradingRecord(msg.BackData, needInitCurItem);
        } else constant.HttpCode.Timeout == msg.Code && (_isInTheRequest = false);
      },
      genInfoItem: function genInfoItem() {
        if (null != _itemList[0]) return;
        for (var i = 0; i < _infoItemLimit; i++) {
          _itemList[i] = cc.instantiate(this.pfTradingRecordItem);
          _itemList[i].parent = this.tradingRecordContent;
        }
        this.initInfoItem();
      },
      hideInfoItem: function hideInfoItem() {
        for (var i = 0; i < _itemList.length; i++) this.setInfoItemState(i, true);
      },
      initInfoItem: function initInfoItem() {
        this.tradingRecordContent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        this.tradingRecordContent.y = 0;
        _canViewItemList = [];
        for (var i = 0; i < _infoItemLimit; i++) if (i < _maxShowItemNum && i < _infoList.length) {
          _itemList[i].getComponent("tradingRecordItem").init(_infoList[i], {
            msgLocalKey: i,
            recordType: _curChoiceRecordType
          });
          _canViewItemList[i] = i;
          _itemList[i].y = i * -_tradingRecordItemSpacing;
          this.setInfoItemState(i, false);
        } else this.setInfoItemState(i, true);
      },
      updateInfo: function updateInfo(data) {
        if ("object" == ("undefined" === typeof data ? "undefined" : _typeof(data))) for (var i = 0; i < data.length; i++) _infoList.push(data[i]);
        _infoCount = 10 != data.length ? _infoList.length : _infoList.length + 1;
        if (0 == _infoCount) {
          this.nullTradingRecord.opacity = 255;
          this.txtTradingRecordHint.node.opacity = 0;
        } else {
          this.nullTradingRecord.opacity = 0;
          this.txtTradingRecordHint.node.opacity = 255;
          this.txtTradingRecordHint.node.getChildByName("loadIcon").stopAllActions();
          this.txtTradingRecordHint.node.getChildByName("loadIcon").opacity = 0;
          _infoCount == _infoList.length ? this.txtTradingRecordHint.string = "\u5df2\u663e\u793a" + this.txtInquireDayCheck.string + "\u5168\u90e8\u6570\u636e" : this.txtTradingRecordHint.string = "\u7ee7\u7eed\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a";
        }
        this.txtTradingRecordHint.node.y = -(_infoList.length * _tradingRecordItemSpacing + 38);
        this.tradingRecordContent.height = 62 - this.txtTradingRecordHint.node.y;
      },
      getLeiSureInfoItemKey: function getLeiSureInfoItemKey() {
        for (var i = 0; i < _itemList.length; i++) if (9999 == _itemList[i].x) return i;
        cc.error("\u6ca1\u6709\u7a7a\u95f2\u7684Item");
        return null;
      },
      tradingRecordScrollEvent: function tradingRecordScrollEvent(event, eventName) {
        if (eventName == cc.ScrollView.EventType.TOUCH_UP && this.tradingRecordContent.y + this.tradingRecordContent.parent.height == this.tradingRecordContent.height && _infoList.length < _infoCount) {
          if (!_isInTheRequest) {
            _isInTheRequest = true;
            this.reqTradingRecord(_curChoiceRecordType, false);
          }
          return;
        }
        _key = _canViewItemList[0];
        _item = _itemList[_key];
        _y = _item.y + this.tradingRecordContent.y;
        while (_y > _tradingRecordItemSpacing) {
          this.setInfoItemState(_key, true);
          _canViewItemList.shift();
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
        do {
          _msgLocalKey = _itemList[_key].getComponent("tradingRecordItem")._msgLocalKey;
          if (!(_y < 0 && _msgLocalKey > 0)) break;
          _key = this.getLeiSureInfoItemKey();
          if (null == _key) break;
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y + _tradingRecordItemSpacing;
          _itemList[_key].getComponent("tradingRecordItem").init(_infoList[_msgLocalKey - 1], {
            msgLocalKey: _msgLocalKey - 1,
            recordType: _curChoiceRecordType
          });
          _canViewItemList.unshift(_key);
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        } while (_y < 0);
        _key = _canViewItemList[_canViewItemList.length - 1];
        _item = _itemList[_key];
        _y = _item.y + this.tradingRecordContent.y;
        while (-_y + _tradingRecordItemSpacing < this.tradingRecordContent.parent.height) {
          _msgLocalKey = _itemList[_key].getComponent("tradingRecordItem")._msgLocalKey;
          if (_msgLocalKey == _infoList.length - 1) break;
          _key = this.getLeiSureInfoItemKey();
          if (null == _key) break;
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y - _tradingRecordItemSpacing;
          _itemList[_key].getComponent("tradingRecordItem").init(_infoList[_msgLocalKey + 1], {
            msgLocalKey: _msgLocalKey + 1,
            recordType: _curChoiceRecordType
          });
          _canViewItemList.push(_key);
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
        while (-_y > this.tradingRecordContent.parent.height) {
          this.setInfoItemState(_key, true);
          _canViewItemList.pop();
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
      },
      choiceRecordType: function choiceRecordType(event, type) {
        _infoList = [];
        this.nullTradingRecord.opacity = 0;
        if ("" != event) {
          this.txtTradingRecordHint.node.opacity = 0;
          this.hideInfoItem();
          audioMgr.playEffect(this.audioBtn);
        }
        this.tradingRecordLayer.active || (this.tradingRecordLayer.active = true);
        this.txtInquireTypeCheck.node.parent.active = "accountDetail" == type;
        this.inquireDayCheckArrows.rotationX = 0;
        this.inquireDayCheck.active = false;
        this.inquireTypeCheck.active = false;
        this.inquireTypeCheckArrows.rotationX = 0;
        _curChoiceRecordType = type;
        this.resetGetTradeRecordArg();
        this.reqTradingRecord(_curChoiceRecordType, true);
        this.updateTradingTitleTxt(type);
        for (var i = 0; i < 3; i++) if (0 == i && "accountDetail" == type || 1 == i && "withdrawRecord" == type || 2 == i && "rechargeRecord" == type) {
          this.txtTradingRecordType[i].node.color = cc.Color.WHITE;
          this.txtTradingRecordType[i].node.getComponent(cc.LabelOutline).enabled = true;
        } else {
          this.txtTradingRecordType[i].node.color = new cc.Color(138, 69, 58);
          this.txtTradingRecordType[i].node.getComponent(cc.LabelOutline).enabled = false;
        }
      },
      updateTradingTitleTxt: function updateTradingTitleTxt(type) {
        for (var i = 0; i < _tradingTitleTxt[type].length; i++) this.txtTradingTitle[i].string = _tradingTitleTxt[type][i];
        if (3 == _tradingTitleTxt[type].length) {
          this.txtTradingTitle[3].string = "";
          this.txtTradingTitle[0].node.x = -302;
          this.txtTradingTitle[1].node.x = 1;
          this.txtTradingTitle[2].node.x = 320;
        } else {
          this.txtTradingTitle[0].node.x = -344;
          this.txtTradingTitle[1].node.x = -120;
          this.txtTradingTitle[2].node.x = 105;
          this.txtTradingTitle[3].node.x = 330;
        }
      },
      transferBtnEvent: function transferBtnEvent(event, eventName) {
        var _this4 = this;
        audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "clearTransferBalance":
          this.ebTransferNum.string = "";
          break;

         case "confirm":
          if (!dataLogic.userPhoneNum) {
            this.createBindPhoneDialog(null, function() {
              var txt = _this4.transferLayerContent.getChildByName("totalBalance");
              txt.getComponent(cc.Label).string = (Number(txt.getComponent(cc.Label).string) + dataLogic.registerCashGift).toFixed(2);
            });
            return;
          }
          var result = dataLogic.checkFormat(this.ebPayeeId.string, {
            UserName: true,
            name: "\u6536\u6b3e\u4eba\u8d26\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (dataLogic.account == this.ebPayeeId.string) {
            this.showLayerTip("\u8bf7\u52ff\u7ed9\u81ea\u5df1\u8f6c\u8d26");
            return;
          }
          if ("" == this.ebTransferNum.string) {
            this.showLayerTip("\u8f6c\u8d26\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a");
            return;
          }
          result = dataLogic.checkFormat(this.ebTransferNum.string, {
            Int: true,
            errMsg: "\u8f6c\u8d26\u91d1\u989d\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (this.ebTransferNum.string < _payMini || this.ebTransferNum.string > _payMax) {
            this.showLayerTip("\u8f6c\u8d26\u91d1\u989d\u5fc5\u987b\u5728" + _payMini + "\u4e0e" + _payMax + "\u4e4b\u95f4");
            return;
          }
          if (Number(this.ebTransferNum.string) > _canTransferBalance) {
            cc.log("\u8f6c\u8d26\u91d1\u989d\u5927\u4e8e\u53ef\u8f6c\u91d1\u989d", this.ebTransferNum.string, _canTransferBalance);
            this.showLayerTip("\u8f6c\u8d26\u91d1\u989d\u5927\u4e8e\u53ef\u8f6c\u91d1\u989d");
            return;
          }
          var transferNum = this.ebTransferNum.string;
          var payeeId = this.ebPayeeId.string;
          this.ebTransferNum.string = "";
          this.ebPayeeId.string = "";
          this.scheduleOnce(function() {
            _this4.ebTransferNum.string = transferNum;
            _this4.ebPayeeId.string = payeeId;
          }, .3);
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/transferConfirm",
            js: "transferConfirm",
            initArg: {
              doneCb: this.transferSucceed.bind(this),
              payeeId: payeeId,
              transferNum: transferNum
            }
          });
        }
      },
      transferSucceed: function transferSucceed() {
        this.showLayerTip("\u8f6c\u8d26\u6210\u529f");
        _GetInitData.Requirement = JSON.stringify([ "TransferLimit", "UserWithdrawAvail", "UserBalance" ]);
        this.reqDateAndShowLoadView(_GetInitData, "reqBankModuleDataCb", _module.transfer);
      },
      switchSceneFrontDispose: function switchSceneFrontDispose() {
        _canViewItemList = [];
        _itemList = [];
        _infoList = [];
        _bankCardListNode = [];
        _withdrawCardList = [];
        _bankCardData = [];
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        http.abortAllReq();
        this.tradingRecordContent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  baseGame: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "84a78ZZEtNANZazVaPa20vS", "baseGame");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var worldY = 0, child = void 0, iconName = void 0, i = void 0, j = void 0, surplusDistance = void 0;
    var time = void 0, curJackpot = void 0, num = void 0;
    var offTime = .3;
    var jackpotTiming = null;
    var countDowmTiming = null;
    var resultBlinkTiming = null;
    var freeGameEffectTiming = null;
    var bonusGameEffectTiming = null;
    var pollingWinIconEffectFun = null;
    var updateCountDowmTimingFun = null;
    var efFreeGameTime = 3500;
    var efBonusGameTime = 3500;
    var a = 599;
    var b = -3594;
    var c = kingConstant.RollingStartY;
    var k = -5391;
    var surpass = 36;
    var clickStopRollingY = null;
    var speedDownDistance = null;
    var speedDownStartY = null;
    var speedDownTime = [ null, null, null, null, null ];
    var speedDownTotalTime = 1;
    var isFristPlayRolling = true;
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        iconAtlas: cc.SpriteAtlas,
        pfAxisOfRolling: cc.Prefab,
        pfLine: cc.Prefab,
        pfEfJackpot: cc.Prefab,
        pfAmazing: cc.Prefab,
        pfSuperWin: cc.Prefab,
        pfBigWin: cc.Prefab,
        pfCommonWin: cc.Prefab,
        pfEfFreeGame: cc.Prefab,
        pfEfBonusGame: cc.Prefab,
        pfEfHero: cc.Prefab,
        pfEfScatter: cc.Prefab,
        pfEfWild: cc.Prefab,
        pfEfGetJackpot: cc.Prefab,
        mask: cc.Node,
        frame: cc.Node,
        choiceLineNumBg: cc.ToggleContainer,
        choiceBetNumBg: cc.ToggleContainer,
        heroEffectLayer: cc.Node,
        scatterEffectLayer: cc.Node,
        efFreeGameFrame: cc.Node,
        efFrame: cc.Node,
        efEarnings: cc.Node,
        earningsLayer: cc.Node,
        getJackpotDone: cc.Node,
        efGetJackpotDone: cc.Node,
        resultLoadIcon: cc.Node,
        bg: cc.Node,
        spCollectProgress: cc.Sprite,
        spChoiceLineNumDirection: cc.Sprite,
        spChoiceBetNumDirection: cc.Sprite,
        spFrame: cc.Sprite,
        spFrameBg: cc.Sprite,
        spStart: cc.Sprite,
        txtTotalBet: cc.Label,
        txtWinNum: cc.Label,
        txtBalance: cc.Label,
        txtJackpot: cc.Label,
        txtJackpotCollect: cc.Label,
        txtTime: cc.Label,
        txtCurChioceLineNum: cc.Label,
        txtCurChoiceBetNum: cc.Label,
        txtFreeCount: cc.Label,
        toggleAutoStart: cc.Toggle,
        SFFrame: cc.SpriteFrame,
        SFFrameBg: cc.SpriteFrame,
        SFFreeGameFrame: cc.SpriteFrame,
        SFFreeGameFrameBg: cc.SpriteFrame,
        sfDisableBetBtn: cc.SpriteFrame,
        sfAbleBetBtn: cc.SpriteFrame,
        sfSimulateLoads: [ cc.SpriteFrame ],
        spSimulateLoad: cc.Sprite,
        btStart: cc.Button,
        btShowChoiceLineNum: cc.Button,
        btShowChoiceBetNum: cc.Button,
        btGetJackpot: cc.Button,
        animStart: cc.Animation,
        audioHero: {
          default: [],
          type: cc.AudioClip
        },
        audioRolling: {
          default: null,
          type: cc.AudioClip
        },
        audioStart: {
          default: null,
          type: cc.AudioClip
        },
        audioWin: {
          default: null,
          type: cc.AudioClip
        },
        audioBonusGame: {
          default: null,
          type: cc.AudioClip
        },
        audioWinBg: {
          default: null,
          type: cc.AudioClip
        },
        audioJackpot: {
          default: null,
          type: cc.AudioClip
        },
        audioLineWin: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "checkTimeCb", this.checkTimeCb.bind(this) ], [ "getJackpotCb", this.getJackpotCb.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ] ];
        for (var _i = 0; _i < this.registerHandler.length; _i++) {
          var handler = this.registerHandler[_i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      touchBg: function touchBg() {
        this.setChoiceLineNumView(false);
        this.setChoiceBetNymView(false);
      },
      syncServerTimeCb: function syncServerTimeCb(msg) {
        if (dataLogic.reqServerTimeResidueTime <= 0) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          this.clickedExit || this.showRefreshToast();
          return;
        }
        if (!dataLogic.doneTimeSync) return;
        if (this.clickedExit) ; else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          var timeRemaining = kingDataLogic.jackpotEndTime + dataLogic.timeOff - new Date().getTime();
          timeRemaining /= 1e3;
          timeRemaining = Math.round(timeRemaining);
          if (timeRemaining < 0) {
            timeRemaining = 0;
            kingDataLogic.setReqServerTimeGoBackGameShow(false);
            this.txtTime.string = "00:00";
          }
          kingDataLogic.setTimeRemaining(timeRemaining);
        }
      },
      onLoad: function onLoad() {
        dataLogic.setUndoneGame(false);
        dataLogic.addPlayedGameIdList(constant.GameId.King);
        dataLogic.setCurGameId(constant.GameId.King);
        this.bg.on(cc.Node.EventType.TOUCH_START, this.touchBg, this);
        dataLogic.setSeed(new Date().getTime());
        curJackpot = dataLogic.randomIntBySeed(5e3, 6e3);
        this.initSceneBase();
        this.registerEvent();
        this.rollingSwitch = false;
        this.axisOfRolling = [];
        this.curRollingTime = [];
        this.totalRollingTime = [];
        this.totalRollingDistance = [];
        if (0 == kingDataLogic.lotteryIcon.length) {
          var lotteryIcon = [];
          for (i = 0; i < kingConstant.Row; i++) {
            lotteryIcon[i] = [];
            for (j = 0; j < kingConstant.Columns; j++) lotteryIcon[i][j] = this.randomIcon(j);
          }
          kingDataLogic.setLotteryIcon(lotteryIcon);
        }
        for (i = 0; i < 5; i++) {
          this.axisOfRolling[i] = this.mask.getChildByName("axisOfRolling" + i);
          for (var _k = 0; _k < 3; _k++) {
            child = this.axisOfRolling[i].getChildByName("" + _k);
            iconName = kingConstant.IconName[kingDataLogic.lotteryIcon[2 - _k][i]];
            child.getComponent(cc.Sprite).spriteFrame = this.iconAtlas.getSpriteFrame(iconName);
          }
        }
        this.rollingItemDistance = kingConstant.Spacing + 143;
        for (var _k2 = 0; _k2 < 5; _k2++) {
          this.totalRollingTime[_k2] = kingConstant.TotalRollingTime;
          this.totalRollingDistance[_k2] = kingConstant.TotalRollingDistance;
        }
        this.line = [];
        for (var _k3 = 0; _k3 < 9; _k3++) {
          this.line[_k3] = this.frame.getChildByName("line" + (_k3 + 1));
          this.line[_k3].opacity = 0;
        }
        var toggleContainer = this.choiceLineNumBg.toggleItems;
        this.toggleLine = [];
        for (i = 0; i < toggleContainer.length; i++) this.toggleLine[i] = toggleContainer[i];
        toggleContainer = this.choiceBetNumBg.toggleItems;
        this.toggleBet = [];
        for (i = 0; i < toggleContainer.length; i++) {
          this.toggleBet[i] = toggleContainer[i];
          this.toggleBet[i].node.getChildByName("txt").getComponent(cc.Label).string = dataLogic.betConfig[i];
        }
        this.lotteryIconNode = [];
        for (var _i2 = 0; _i2 < kingConstant.Row; _i2++) this.lotteryIconNode[_i2] = [];
        kf.createPool(constant.PoolId.EfJackpot, 3, this.pfEfJackpot);
        kf.createPool(constant.PoolId.EfHero, 10, this.pfEfHero);
        kf.createPool(constant.PoolId.EfScatter, 3, this.pfEfScatter);
        kf.createPool(constant.PoolId.EfWild, 3, this.pfEfWild);
        kf.createPool(constant.PoolId.EfGetJackpot, 1, this.pfEfGetJackpot);
        this.winningArrIndex = [];
        this.updateBetNumToggle();
        this.updateLineNumToggle();
        this.setBalance(dataLogic.userBalance);
        this.waitStart = true;
        this.jackpotGetting = false;
        this.betError = false;
        kf.createPool(constant.PoolId.Amazing, 1, this.pfAmazing);
        kf.createPool(constant.PoolId.BigWin, 1, this.pfBigWin);
        kf.createPool(constant.PoolId.CommonWin, 1, this.pfCommonWin);
        kf.createPool(constant.PoolId.SuperwWin, 1, this.pfSuperWin);
        kf.createPool(constant.PoolId.EfBonusGame, 1, this.pfEfBonusGame);
        kf.createPool(constant.PoolId.EfFreeGame, 1, this.pfEfFreeGame);
        this.efIcon = [];
        for (var _k4 = 0; _k4 < kingConstant.Row; _k4++) this.efIcon[_k4] = [];
        this.audioRollingId = -1;
        this.isPlayLineAudio = true;
        kingDataLogic.setAutoStartState(false);
        this.clickedExit = false;
      },
      updateTxtJackpot: function updateTxtJackpot() {
        var _this = this;
        time = dataLogic.randomIntBySeed(510, 2e3);
        do {
          num = dataLogic.randomIntBySeed(-500, 500) / 100;
        } while (Math.abs(num) < .8);
        this.schedule(function() {
          curJackpot += num / 5;
          _this.txtJackpot.string = curJackpot.toFixed(2);
        }, .1, 5);
        jackpotTiming = setTimeout(this.updateTxtJackpot.bind(this), time);
      },
      start: function start() {
        this.animStart.play();
        this.switchBtnX = this.btStart.node.x;
        if (kingDataLogic.freeNum > 0) {
          this.setBetBtnState(true);
          this.playFreeGameEffect(true);
          this.txtFreeCount.string = "\u514d\u8d39\u6b21\u6570x" + kingDataLogic.freeNum;
        } else this.txtFreeCount.node.parent.active = false;
        kingDataLogic.setReqServerTimeGoBackGameShow(false);
        if (kingDataLogic.collectState == kingConstant.CollectState.Collecting) {
          var timeRemaining = kingDataLogic.jackpotEndTime + dataLogic.timeOff - new Date().getTime();
          timeRemaining /= 1e3;
          timeRemaining = Math.round(timeRemaining);
          kingDataLogic.setTimeRemaining(timeRemaining);
          cc.log("\u94ed\u6587\u6536\u96c6\u5269\u4f59\u65f6\u95f4", kingDataLogic.timeRemaining);
          this.updateCountDowmTiming();
          kingDataLogic.setReqServerTimeGoBackGameShow(true);
        }
        this.updateJackpotCollect();
        this.preLoadRes();
      },
      gameShow: function gameShow() {
        if (kingDataLogic.isReqServerTimeGoBackGameShow) {
          var arg = {
            type: constant.ToastType.Loading
          };
          this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
          dataLogic.syncServerTime(constant.HttpTimeoutDispose.RetryEndRefresh, 3e4);
        }
      },
      gameHide: function gameHide() {
        cc.log("\u5207\u540e\u53f0", dataLogic.getSecondTimeFomate(kingDataLogic.timeRemaining));
      },
      updateCountDowmTiming: function updateCountDowmTiming() {
        if (kingDataLogic.collectState == kingConstant.CollectState.Done) {
          kingDataLogic.setReqServerTimeGoBackGameShow(false);
          this.txtTime.string = "00:00";
          return;
        }
        if (0 == kingDataLogic.timeRemaining) {
          kingDataLogic.setReqServerTimeGoBackGameShow(false);
          this.waitStart && this.cleanJackpotCollect();
          this.txtTime.string = "00:00";
          return;
        }
        kingDataLogic.setTimeRemaining(kingDataLogic.timeRemaining - 1);
        this.txtTime.string = dataLogic.getSecondTimeFomate(kingDataLogic.timeRemaining);
        this.unschedule(updateCountDowmTimingFun);
        updateCountDowmTimingFun = this.updateCountDowmTiming.bind(this);
        this.scheduleOnce(updateCountDowmTimingFun, 1);
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        cc.log("\u5207\u6362\u573a\u666f\u524d\u5904\u7406", this.audioRollingId);
        this.unschedule(pollingWinIconEffectFun);
        this.stopAllWinIconEffect();
        this.showAllIcon();
        this.setAllLotteryIconNodeMaskView(false);
        audioMgr.stopEffect(this.audioRollingId);
        this.stopIconEffect();
        this.clearAllTiming();
        kf.clearPool(constant.PoolId.EfJackpot);
        kf.clearPool(constant.PoolId.EfHero);
        kf.clearPool(constant.PoolId.EfScatter);
        kf.clearPool(constant.PoolId.EfWild);
        kf.clearPool(constant.PoolId.EfGetJackpot);
        kf.clearPool(constant.PoolId.Amazing);
        kf.clearPool(constant.PoolId.BigWin);
        kf.clearPool(constant.PoolId.CommonWin);
        kf.clearPool(constant.PoolId.SuperwWin);
        kf.clearPool(constant.PoolId.EfBonusGame);
        kf.clearPool(constant.PoolId.EfFreeGame);
        kf.clearPool(constant.PoolId.KingHelp);
      },
      clearAllTiming: function clearAllTiming() {
        this.unscheduleAllCallbacks();
        this.unschedule(updateCountDowmTimingFun);
        clearTimeout(jackpotTiming);
        clearTimeout(countDowmTiming);
        clearTimeout(resultBlinkTiming);
        clearTimeout(freeGameEffectTiming);
        clearTimeout(bonusGameEffectTiming);
        this.unschedule(pollingWinIconEffectFun);
        this.unschedule(this.tryAutoStart);
      },
      btnEvent: function btnEvent(event, data) {
        cc.log("btnEvent", data);
        "" != event && audioMgr.playEffect(this.audioBtn);
        "chioceLineNumView" != data && this.setChoiceLineNumView(false);
        "chioceBetNumView" != data && this.setChoiceBetNymView(false);
        switch (data) {
         case "chioceLineNumView":
          0 == this.choiceLineNumBg.node.x ? this.setChoiceLineNumView(false) : this.setChoiceLineNumView(true);
          break;

         case "chioceBetNumView":
          0 == this.choiceBetNumBg.node.x ? this.setChoiceBetNymView(false) : this.setChoiceBetNymView(true);
          break;

         case "start":
          clickStopRollingY = null;
          if (this.jackpotGetting) {
            cc.log("\u6b63\u5728\u9886\u53d6\u5956\u6c60\uff0c\u4e0d\u80fd\u5f00\u59cb\u6e38\u620f");
            break;
          }
          this.betError = false;
          this.showLineType(0);
          this.setChoiceLineNumView(false);
          this.setChoiceBetNymView(false);
          this.unschedule(pollingWinIconEffectFun);
          this.stopAllWinIconEffect();
          this.showAllIcon();
          this.setAllLotteryIconNodeMaskView(false);
          var isFreeGame = false;
          if (kingDataLogic.freeNum > 0) {
            isFreeGame = true;
            1 == kingDataLogic.freeNum && (this.txtFreeCount.node.parent.active = false);
            kingDataLogic.setFreeNum(kingDataLogic.freeNum - 1);
            this.txtFreeCount.string = "\u514d\u8d39\u6b21\u6570x" + kingDataLogic.freeNum;
          }
          audioMgr.playEffect(this.audioStart);
          this.waitStart = false;
          this.setBetBtnState(true);
          this.btGetJackpot.interactable = false;
          this.stopIconEffect();
          this.txtWinNum.string = "\u5f97\u5206\uff1a0";
          kingDataLogic.setCurBetLineNum(kingDataLogic.curChoiceLineNum);
          kingConstant.PostBaseGameBet.betLine = kingDataLogic.curChoiceLineNum;
          kingConstant.PostBaseGameBet.betNum = dataLogic.betConfig[kingDataLogic.curChoiceBetKey];
          this.btStart.node.getChildByName("wzry_start_zi").opacity = 0;
          this.resultLoadIcon.opacity = 255;
          this.resultLoadIcon.runAction(cc.rotateTo(10, 7200));
          var betInfo = {
            totalBetNum: kingDataLogic.totalBetNum,
            isFreeGame: isFreeGame
          };
          http.post(kingConstant.PostBaseGameBet, "betCb", betInfo);
          this.btStart.interactable = false;
          break;

         case "stop":
          clickStopRollingY = this.axisOfRolling[0].y;
          speedDownDistance = 4 * this.rollingItemDistance + (this.rollingItemDistance - -this.axisOfRolling[0].y % this.rollingItemDistance);
          speedDownStartY = -(this.totalRollingDistance[0] - speedDownDistance);
          for (var l = 0; l < 5; l++) this.totalRollingDistance[l] = speedDownDistance;
          break;

         case "setting":
          var obj = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf);
          break;

         case "help":
          var help = kf.getObj(constant.PoolId.KingHelp, this.toastLayer[0], this.helpPf);
          help.getComponent("kingHelp").helpMainShow();
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          break;

         case "recharge":
          break;

         case "getJackpot":
          if (kingDataLogic.collectState != kingConstant.CollectState.Done || !this.waitStart) break;
          this.btGetJackpot.interactable = false;
          this.btStart.interactable = false;
          this.jackpotGetting = true;
          http.post(kingConstant.PostGetJackpot, "getJackpotCb");
          break;

         case "intoBonusGame":
          this.clearAllTiming();
          this.loadScene(constant.SceneName.BonusGame);
          break;

         case "exit":
          this.goBackHall();
          break;

         case "closeEfJackpot":
          break;

         default:
          cc.warn("\u672a\u77e5\u7684\u4e8b\u4ef6\u6570\u636e:", data);
        }
      },
      choiceAutoStartEvent: function choiceAutoStartEvent(event) {
        event.notUIEvent || audioMgr.playEffect(this.audioBtn);
        cc.log("\u81ea\u52a8\u5f00\u59cb:event.isChecked", event.isChecked, event.notUIEvent);
        if (event.isChecked) {
          if (this.waitStart) {
            cc.log("===\u624b\u52a8\u9009\u62e9\u81ea\u52a8\u5f00\u59cb");
            this.unschedule(this.tryAutoStart);
            this.btnEvent("", "start");
          }
          this.setChoiceLineNumView(false);
          this.setChoiceBetNymView(false);
          kingDataLogic.setAutoStartState(true);
          this.setBetBtnState(true);
          this.btStart.interactable = false;
        } else {
          this.unschedule(this.tryAutoStart);
          kingDataLogic.setAutoStartState(false);
          if (this.waitStart) {
            this.btStart.interactable = true;
            this.setBetBtnState(false);
            this.animStart.node.opacity = 255;
            this.animStart.play();
            this.spStart.setState(cc.Sprite.State.NORMAL);
          }
        }
      },
      setBetBtnState: function setBetBtnState(isDisable) {
        if (isDisable) {
          this.spChoiceLineNumDirection.setState(cc.Sprite.State.GRAY);
          this.spChoiceBetNumDirection.setState(cc.Sprite.State.GRAY);
          this.txtCurChioceLineNum.node.color = new cc.Color(186, 201, 207);
          this.txtCurChoiceBetNum.node.color = new cc.Color(186, 201, 207);
          this.btShowChoiceLineNum.node.parent.getComponent(cc.Sprite).spriteFrame = this.sfDisableBetBtn;
          this.btShowChoiceBetNum.node.parent.getComponent(cc.Sprite).spriteFrame = this.sfDisableBetBtn;
          this.btShowChoiceLineNum.interactable = false;
          this.btShowChoiceBetNum.interactable = false;
        } else {
          this.spChoiceLineNumDirection.setState(cc.Sprite.State.NORMAL);
          this.spChoiceBetNumDirection.setState(cc.Sprite.State.NORMAL);
          this.txtCurChioceLineNum.node.color = new cc.Color(59, 201, 247);
          this.txtCurChoiceBetNum.node.color = new cc.Color(59, 201, 247);
          this.btShowChoiceLineNum.node.parent.getComponent(cc.Sprite).spriteFrame = this.sfAbleBetBtn;
          this.btShowChoiceBetNum.node.parent.getComponent(cc.Sprite).spriteFrame = this.sfAbleBetBtn;
          this.btShowChoiceLineNum.interactable = true;
          this.btShowChoiceBetNum.interactable = true;
        }
      },
      showLineType: function showLineType(lineNum) {
        this.unschedule(this.playAllWinIconEffect);
        this.unschedule(pollingWinIconEffectFun);
        this.stopAllWinIconEffect();
        this.showAllIcon();
        this.setAllLotteryIconNodeMaskView(false);
        for (var l = 0; l < 9; l++) {
          this.line[l].stopAllActions();
          this.line[l].opacity = l < lineNum ? 255 : 0;
        }
      },
      updateLineNumToggle: function updateLineNumToggle() {
        var key = kingDataLogic.curChoiceLineNum - 1;
        this.toggleLine[key].notUIEvent = true;
        this.toggleLine[key].check();
        this.toggleLine[key].notUIEvent = false;
        this.txtCurChioceLineNum.string = kingDataLogic.curChoiceLineNum;
        this.updateTotalBet();
      },
      choiceLineNumEvent: function choiceLineNumEvent(event, num) {
        cc.log("choiceLineNumEvent", num, event.notUIEvent);
        if (!event.notUIEvent) {
          audioMgr.playEffect(this.audioBtn);
          this.showLineType(num);
        }
        this.setChoiceLineNumView(false);
        kingDataLogic.setCurChoiceLineNum(num);
        this.txtCurChioceLineNum.string = num;
        this.updateTotalBet();
      },
      updateBetNumToggle: function updateBetNumToggle() {
        cc.log("updateBetNumToggle", kingDataLogic.curChoiceBetKey);
        var key = kingDataLogic.curChoiceBetKey;
        this.toggleBet[key].notUIEvent = true;
        this.toggleBet[key].check();
        this.toggleBet[key].notUIEvent = false;
        this.txtCurChoiceBetNum.string = dataLogic.betConfig[key];
        this.updateTotalBet();
      },
      choiceBetNumEvent: function choiceBetNumEvent(event, key) {
        cc.log("choiceBetNumEvent", key);
        event.notUIEvent || audioMgr.playEffect(this.audioBtn);
        kingDataLogic.setCurChoiceBetKey(key);
        this.setChoiceBetNymView(false);
        this.txtCurChoiceBetNum.string = dataLogic.betConfig[key];
        this.updateTotalBet();
      },
      betCb: function betCb(msg, betInfo) {
        this.btStart.node.getChildByName("wzry_start_zi").opacity = 255;
        this.resultLoadIcon.stopAllActions();
        this.resultLoadIcon.opacity = 0;
        var data = msg.Data;
        if (msg.Code != constant.HttpCode.Succeed) {
          this.btStart.node.getChildByName("wzry_start_zi").opacity = 255;
          this.resultLoadIcon.opacity = 0;
          this.resultLoadIcon.stopAllActions();
          this.waitStart = true;
          if (kingDataLogic.isAutoStart) {
            this.toggleAutoStart.notUIEven = true;
            this.toggleAutoStart.uncheck();
            this.toggleAutoStart.notUIEven = false;
          }
          this.btStart.interactable = true;
          this.spStart.setState(cc.Sprite.State.NORMAL);
          this.animStart.play();
          this.animStart.node.opacity = 255;
          this.setBetBtnState(false);
          this.btStart.node.x = this.switchBtnX;
          if (constant.HttpCode.NotSufficientFunds == msg.Code) {
            this.setBalance(data.balance);
            if (dataLogic.userBalance < dataLogic.betConfig[0]) this.showRechargeToast(); else {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u8c03\u6574\u62bc\u6ce8"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
            }
          }
          this.betError = true;
          return;
        }
        this.spStart.setState(cc.Sprite.State.GRAY);
        this.animStart.stop();
        this.animStart.node.opacity = 0;
        this.resetAxisOfRolling();
        this.audioRollingId = audioMgr.playEffect(this.audioRolling, true);
        this.rollingSwitch = true;
        dataLogic.setUserBalance(data.balance);
        kingDataLogic.setEanringsNum(data.chipNum);
        kingDataLogic.setLotteryLine(data.lotteryLine);
        kingDataLogic.setLotteryIcon(data.openInfo);
        if (5 == data.freeCount) {
          kingDataLogic.setFreeNum(data.freeCount);
          this.txtFreeCount.string = "\u514d\u8d39\u6b21\u6570x" + kingDataLogic.freeNum;
          kingDataLogic.setCurChoiceLineNum(data.betLineNum);
          this.updateLineNumToggle();
          var key = kf.getArrIndexByValue(dataLogic.betConfig, data.cellbetNum);
          kingDataLogic.setCurChoiceBetKey(key);
          this.updateBetNumToggle();
        }
        if (1 == data.jackpotState) {
          kingDataLogic.setJackpotNum(0);
          this.updateJackpotCollect();
          this.unschedule(updateCountDowmTimingFun);
          kingDataLogic.setJackpotEndTime(data.endTime);
          kingDataLogic.setReqServerTimeGoBackGameShow(true);
        } else if (3 == data.jackpotState) kingDataLogic.setReqServerTimeGoBackGameShow(false); else if (0 == data.jackpotState) {
          kingDataLogic.setJackpotNum(0);
          this.updateJackpotCollect();
          this.unschedule(updateCountDowmTimingFun);
          kingDataLogic.setTimeRemaining(0);
        }
        if (1 == data.bonusState) {
          kingDataLogic.setBonusGameMulti(data.bonusRate);
          kingDataLogic.setTriggerBonusGame(true);
        } else kingDataLogic.setTriggerBonusGame(false);
      },
      checkTimeCb: function checkTimeCb(msg) {
        cc.log("\u670d\u52a1\u7aef\u8bb0\u5f55\u7684\u622a\u6b62\u65f6\u95f4 - \u672c\u5730\u8bb0\u5f55\u7684\u622a\u6b62\u65f6\u95f4\uff0c", (msg.Data.endTime - kingDataLogic.jackpotEndTime) / 1e3);
      },
      getJackpotCb: function getJackpotCb(msg) {
        var _this2 = this;
        if (msg.Code != constant.HttpCode.Succeed) return;
        audioMgr.playEffect(this.audioJackpot);
        this.earningsLayer.active = true;
        var obj = kf.getObj(constant.PoolId.EfGetJackpot, this.earningsLayer, this.pfEfGetJackpot);
        obj.getComponent(cc.Animation).play();
        var txt = obj.getChildByName("txt").getComponent(cc.Label);
        txt.string = "";
        var n = 0, jumpCount = 20, reward = Math.floor(100 * msg.Data.reward) / 100;
        this.schedule(function() {
          n++;
          txt.string = (reward * (n / jumpCount)).toFixed(2);
        }, .05, jumpCount - 1, 1.3);
        this.scheduleOnce(function() {
          _this2.setBalance(dataLogic.userBalance.add(reward));
          kf.killObj(obj);
          _this2.earningsLayer.active = false;
        }, 3.5);
        this.cleanJackpotCollect();
        this.btStart.interactable = true;
        this.jackpotGetting = false;
        this.txtTime.string = "00:00";
      },
      playBonusGameEffect: function playBonusGameEffect() {
        var _this3 = this;
        audioMgr.playEffect(this.audioBonusGame);
        this.earningsLayer.active = true;
        var obj = kf.getObj(constant.PoolId.EfBonusGame, this.earningsLayer, this.pfEfBonusGame);
        obj.getComponent(cc.Animation).play();
        obj.runAction(cc.sequence(cc.delayTime(efBonusGameTime / 1e3), cc.callFunc(function() {
          kf.killObj(obj);
          _this3.earningsLayer.active = false;
          _this3.intoBonusGame();
        })));
      },
      intoBonusGame: function intoBonusGame() {
        this.unschedule(pollingWinIconEffectFun);
        this.stopAllWinIconEffect();
        this.showAllIcon();
        this.setAllLotteryIconNodeMaskView(false);
        if (kingDataLogic.isAutoStart) {
          this.toggleAutoStart.notUIEvent = true;
          this.toggleAutoStart.uncheck();
          this.toggleAutoStart.notUIEvent = false;
        }
        this.loadScene(constant.SceneName.BonusGame);
      },
      playFreeGameEffect: function playFreeGameEffect(onlyPlayFrameEffect) {
        var _this4 = this;
        cc.log("\u64ad\u653efreeGame\u7279\u6548");
        this.txtFreeCount.node.parent.active = true;
        this.efFreeGameFrame.active = true;
        this.spFrame.spriteFrame = this.SFFreeGameFrame;
        this.spFrameBg.spriteFrame = this.SFFreeGameFrameBg;
        if (!onlyPlayFrameEffect) {
          audioMgr.playEffect(this.audioWinBg);
          for (var _k5 = 0; _k5 < 3; _k5++) for (var l = 1; l < 4; l++) if (kingConstant.IconId.Scatter == kingDataLogic.lotteryIcon[_k5][l]) {
            this.efIcon[_k5][l] = kf.getObj(constant.PoolId.EfScatter, this.scatterEffectLayer, this.pfEfScatter);
            this.efIcon[_k5][l].x = this.lotteryIconNode[_k5][l].getWorldMatrix(cc.mat4()).m12;
            this.efIcon[_k5][l].y = this.lotteryIconNode[_k5][l].getWorldMatrix(cc.mat4()).m13 + 81;
            this.efIcon[_k5][l].getComponent(cc.Animation).play();
            this.lotteryIconNode[_k5][l].opacity = 0;
          }
          this.earningsLayer.active = true;
          var obj = kf.getObj(constant.PoolId.EfFreeGame, this.earningsLayer, this.pfEfFreeGame);
          obj.getComponent(cc.Animation).play();
          obj.runAction(cc.sequence(cc.delayTime(efFreeGameTime / 1e3), cc.callFunc(function() {
            kf.killObj(obj);
            _this4.earningsLayer.active = false;
          })));
        }
      },
      stopFreeGameFrameEffect: function stopFreeGameFrameEffect() {
        cc.log("\u505c\u6b62freeGame\u7279\u6548");
        this.efFreeGameFrame.active = false;
        this.spFrame.spriteFrame = this.SFFrame;
        this.spFrameBg.spriteFrame = this.SFFrameBg;
      },
      playEarningsEffect: function playEarningsEffect() {
        var _this5 = this;
        this.earningsLayer.active = true;
        var i = 0, interval = .05, jumpCount = 40, eanringsNum = kingDataLogic.eanringsNum;
        if (eanringsNum < 3 * kingDataLogic.totalBetNum) {
          cc.log("\u666e\u901a");
          audioMgr.playEffect(this.audioWin);
          var obj = kf.getObj(constant.PoolId.CommonWin, this.earningsLayer, this.pfCommonWin);
          obj.getComponent(cc.Animation).play();
          obj.getChildByName("txt").getComponent(cc.Label).string = eanringsNum.toFixed(2);
          this.scheduleOnce(function() {
            cc.log("\u9690\u85cf\u6536\u76ca\u7279\u6548");
            _this5.txtWinNum.string = "\u5f97\u5206\uff1a" + eanringsNum;
            kf.killObj(obj);
            5 == kingDataLogic.freeNum || kingDataLogic.isTriggerBonusGame || (_this5.earningsLayer.active = false);
          }, 2);
        } else if (eanringsNum < 5 * kingDataLogic.totalBetNum) {
          cc.log("Amazing");
          audioMgr.playEffect(this.audioWinBg);
          var _obj = kf.getObj(constant.PoolId.Amazing, this.earningsLayer, this.pfAmazing);
          _obj.getComponent(cc.Animation).play();
          var txt = _obj.getChildByName("txt").getComponent(cc.Label);
          txt.string = 0;
          this.schedule(function() {
            i++;
            txt.string = (eanringsNum * (i / jumpCount)).toFixed(2);
          }, interval, jumpCount - 1);
          this.scheduleOnce(function() {
            cc.log("\u9690\u85cf\u6536\u76ca\u7279\u6548");
            5 == kingDataLogic.freeNum || kingDataLogic.isTriggerBonusGame || (_this5.earningsLayer.active = false);
            _this5.txtWinNum.string = "\u5f97\u5206\uff1a" + eanringsNum;
            kf.killObj(_obj);
          }, 3);
        } else if (eanringsNum < 8 * kingDataLogic.totalBetNum) {
          cc.log("Big win");
          audioMgr.playEffect(this.audioWinBg);
          var _obj2 = kf.getObj(constant.PoolId.BigWin, this.earningsLayer, this.pfBigWin);
          _obj2.getComponent(cc.Animation).play();
          var _txt = _obj2.getChildByName("txt").getComponent(cc.Label);
          _txt.string = 0;
          this.schedule(function() {
            i++;
            _txt.string = (eanringsNum * (i / jumpCount)).toFixed(2);
          }, interval, jumpCount - 1);
          this.scheduleOnce(function() {
            cc.log("\u9690\u85cf\u6536\u76ca\u7279\u6548");
            5 == kingDataLogic.freeNum || kingDataLogic.isTriggerBonusGame || (_this5.earningsLayer.active = false);
            kf.killObj(_obj2);
            _this5.txtWinNum.string = "\u5f97\u5206\uff1a" + eanringsNum;
          }, 3.5);
        } else {
          cc.log("Super win");
          audioMgr.playEffect(this.audioWinBg);
          var _obj3 = kf.getObj(constant.PoolId.SuperwWin, this.earningsLayer, this.pfSuperWin);
          _obj3.getComponent(cc.Animation).play();
          var _txt2 = _obj3.getChildByName("txt").getComponent(cc.Label);
          _txt2.string = 0;
          this.schedule(function() {
            i++;
            _txt2.string = (eanringsNum * (i / jumpCount)).toFixed(2);
          }, interval, jumpCount - 1);
          this.scheduleOnce(function() {
            cc.log("\u9690\u85cf\u6536\u76ca\u7279\u6548", new Date().getTime() / 1e3);
            5 == kingDataLogic.freeNum || kingDataLogic.isTriggerBonusGame || (_this5.earningsLayer.active = false);
            _this5.txtWinNum.string = "\u5f97\u5206\uff1a" + eanringsNum;
            kf.killObj(_obj3);
          }, 3.5);
        }
      },
      stopEarningsEffect: function stopEarningsEffect() {
        cc.log("\u505c\u6b62\u6536\u76ca\u7279\u6548");
        this.efEarnings.active = false;
      },
      updateJackpotCollect: function updateJackpotCollect() {
        var collectNum = kingDataLogic.jackpotNum;
        if (collectNum == kingConstant.MaxCollectNum) {
          this.efGetJackpotDone.active = true;
          this.getJackpotDone.opacity = 255;
          this.waitStart && (this.btGetJackpot.interactable = true);
          this.txtJackpotCollect.string = kingConstant.MaxCollectNum + "/" + kingConstant.MaxCollectNum;
          this.spCollectProgress.fillRange = 1;
        } else {
          this.getJackpotDone.opacity = 0;
          this.efGetJackpotDone.active = false;
          this.txtJackpotCollect.string = collectNum + "/" + kingConstant.MaxCollectNum;
          this.spCollectProgress.fillRange = collectNum / kingConstant.MaxCollectNum;
        }
      },
      cleanJackpotCollect: function cleanJackpotCollect() {
        var _this6 = this;
        this.schedule(function() {
          if (0 == kingDataLogic.jackpotNum) return;
          kingDataLogic.setJackpotNum(kingDataLogic.jackpotNum - 1);
          _this6.updateJackpotCollect();
        }, .2, kingDataLogic.jackpotNum - 1);
      },
      setChoiceLineNumView: function setChoiceLineNumView(isShow) {
        if (isShow) {
          this.choiceLineNumBg.node.x = 0;
          this.spChoiceLineNumDirection.node.scaleY = -1;
        } else {
          this.choiceLineNumBg.node.x = -2e3;
          this.spChoiceLineNumDirection.node.scaleY = 1;
        }
      },
      setChoiceBetNymView: function setChoiceBetNymView(isShow) {
        if (isShow) {
          this.choiceBetNumBg.node.x = 0;
          this.spChoiceBetNumDirection.node.scaleY = -1;
        } else {
          this.choiceBetNumBg.node.x = -2e3;
          this.spChoiceBetNumDirection.node.scaleY = 1;
        }
      },
      setJackpotCollect: function setJackpotCollect(collectNum) {
        kingDataLogic.setJackpotNum(collectNum);
        this.updateJackpotCollect();
      },
      showRechargeToast: function showRechargeToast() {
        var arg = void 0;
        arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u53ec\u5524\u5e08\uff01\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7ee7\u7eed\u6e38\u620f\uff0c\u662f\u5426\u7acb\u5373\u5145\u503c\uff01",
            btnEventName: [ "toastClose", "gotoRecharge" ],
            btnTxt: [ "\u53d6\u6d88", "\u5145\u503c" ],
            isShowCloseBtn: true
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[1], this.pfToastHint, arg);
      },
      setBalance: function setBalance(num) {
        this.txtBalance.string = "number" == typeof num ? num.toFixed(2) : num;
        cc.log("\u8bbe\u7f6e\u4f59\u989d", num, +num);
        dataLogic.setUserBalance(num);
      },
      updateTotalBet: function updateTotalBet() {
        this.txtTotalBet.string = "\u603b\u62bc\u6ce8\uff1a" + kingDataLogic.totalBetNum;
      },
      resetAxisOfRolling: function resetAxisOfRolling() {
        speedDownTime = [ null, null, null, null, null ];
        var iconName = void 0;
        for (i = 0; i < 5; i++) {
          this.totalRollingTime[i] = kingConstant.TotalRollingTime;
          this.totalRollingDistance[i] = kingConstant.TotalRollingDistance;
          this.curRollingTime[i] = 0;
          this.axisOfRolling[i].y = kingConstant.RollingStartY;
          for (j = 0; j < 4; j++) {
            child = this.axisOfRolling[i].getChildByName("" + j);
            child.y = this.rollingItemDistance * j;
            if (j < 3) {
              iconName = kingConstant.IconName[kingDataLogic.lotteryIcon[2 - j][i]];
              child.getComponent(cc.Sprite).spriteFrame = this.iconAtlas.getSpriteFrame(iconName);
            }
          }
        }
      },
      easeOut: function easeOut(t, b, c, d, s) {
        if (t > d) return b + c;
        "undefined" == typeof s && (s = 1.70158);
        t = t / d - 1;
        return c * (t * t * ((s + 1) * t + s) + 1) + b;
      },
      linear: function linear(t, b, c, d) {
        if (t > d) return b + c;
        return c * t / d + b;
      },
      backEaseOut: function backEaseOut(x) {
        var y = a * x * x + b * x + c;
        return x > 3 && y > k + surpass ? k + surpass : y;
      },
      rollingStoped: function rollingStoped() {
        var _this7 = this;
        audioMgr.stopEffect(this.audioRollingId);
        this.btStart.node.x = this.switchBtnX;
        var delayTime = 0;
        var endPos = {}, jackpot = void 0, seq = void 0, jackpotNum = 0;
        if (kingDataLogic.collectState != kingConstant.CollectState.Done) {
          endPos.x = this.spCollectProgress.node.getWorldMatrix(cc.mat4()).m12;
          endPos.y = this.spCollectProgress.node.getWorldMatrix(cc.mat4()).m13;
          for (i = 0; i < kingConstant.Row; i++) for (j = 0; j < kingConstant.Columns; j++) if (kingDataLogic.lotteryIcon[i][j] == kingConstant.IconId.Jackpot) {
            jackpot = kf.getObj(constant.PoolId.EfJackpot, this.scatterEffectLayer, this.pfEfJackpot);
            jackpot.scale = 1;
            jackpot.x = this.lotteryIconNode[i][j].getWorldMatrix(cc.mat4()).m12;
            jackpot.y = this.lotteryIconNode[i][j].getWorldMatrix(cc.mat4()).m13 + 81;
            jackpot.getComponent(cc.Animation).play();
            seq = cc.sequence(cc.delayTime(1), cc.spawn(cc.moveTo(.6, endPos), cc.scaleTo(.6, .1)), cc.callFunc(function(jackpot) {
              kf.killObj(jackpot);
            }));
            jackpot.runAction(seq);
            jackpotNum++;
          }
        }
        if (jackpotNum > 0) {
          delayTime = 1600;
          if (kingDataLogic.collectState == kingConstant.CollectState.WaitStart) {
            var timeRemaining = kingDataLogic.jackpotEndTime + dataLogic.timeOff - new Date().getTime();
            timeRemaining /= 1e3;
            timeRemaining = Math.round(timeRemaining);
            kingDataLogic.setTimeRemaining(timeRemaining);
            cc.log("\u94ed\u6587\u6536\u96c6\u5269\u4f59\u65f6\u95f4", timeRemaining);
            if (timeRemaining > 0) {
              var _seq = cc.sequence(cc.delayTime(1), cc.repeat(cc.sequence(cc.scaleTo(.5, 1.2), cc.scaleTo(.5, 1)), 3));
              this.txtTime.node.runAction(_seq);
              updateCountDowmTimingFun = this.updateCountDowmTiming.bind(this);
              this.scheduleOnce(updateCountDowmTimingFun, delayTime / 1e3);
            }
          }
          if (kingDataLogic.collectState != kingConstant.CollectState.Done) {
            kingDataLogic.setJackpotNum(kingDataLogic.jackpotNum + jackpotNum);
            this.scheduleOnce(this.updateJackpotCollect, delayTime / 1e3);
          }
        }
        0 == kingDataLogic.timeRemaining && kingDataLogic.collectState == kingConstant.CollectState.Collecting && this.scheduleOnce(this.cleanJackpotCollect, delayTime / 1e3);
        this.winningArrIndex = [];
        if (kingDataLogic.eanringsNum > 0) {
          delayTime += 1e3;
          var pos = void 0, arr = [];
          var _loop = function _loop() {
            var lines = kf.getArrAllIndexByValue(kingDataLogic.lotteryLine, i);
            var _loop2 = function _loop2(_k6) {
              if (lines[_k6] + 1 > kingDataLogic.curBetLineNum) return "continue";
              _this7.line[lines[_k6]].opacity = 255;
              _this7.line[lines[_k6]].runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function() {
                _this7.line[lines[_k6]].opacity = 0;
              })));
              arr = [];
              for (j = 0; j < i; j++) {
                pos = kingConstant.ConstituteLineArrIndex[lines[_k6]][j];
                arr.push([ pos[0], pos[1] ]);
              }
              _this7.winningArrIndex.push(arr);
            };
            for (var _k6 = 0; _k6 < lines.length; _k6++) {
              var _ret2 = _loop2(_k6);
              if ("continue" === _ret2) continue;
            }
          };
          for (i = 5; i > 2; i--) _loop();
          this.scheduleOnce(this.playEarningsEffect, delayTime / 1e3);
          this.scheduleOnce(this.playAllWinIconEffect, delayTime / 1e3);
          this.isPlayLineAudio = true;
          pollingWinIconEffectFun = this.pollingWinIconEffect.bind(this, 0);
          this.scheduleOnce(pollingWinIconEffectFun, (delayTime + 3e3) / 1e3);
          var eanringsNum = kingDataLogic.eanringsNum;
          if (eanringsNum < 3 * kingDataLogic.totalBetNum) {
            cc.log("\u666e\u901a");
            delayTime += 2e3;
          } else if (eanringsNum < 5 * kingDataLogic.totalBetNum) {
            cc.log("Amazing");
            delayTime += 3e3;
          } else if (eanringsNum < 8 * kingDataLogic.totalBetNum) {
            cc.log("Big win");
            delayTime += 3500;
          } else {
            cc.log("Super win");
            delayTime += 3500;
          }
        }
        if (5 == kingDataLogic.freeNum) {
          delayTime += 10;
          this.scheduleOnce(this.playFreeGameEffect.bind(this, false), delayTime / 1e3);
          delayTime += efFreeGameTime;
          if (kingDataLogic.isAutoStart) {
            this.toggleAutoStart.notUIEvent = true;
            this.toggleAutoStart.uncheck();
            this.toggleAutoStart.notUIEvent = false;
          }
        } else 0 == kingDataLogic.freeNum && this.stopFreeGameFrameEffect();
        cc.log("\u662f\u5426\u89e6\u53d1BonusGame", kingDataLogic.isTriggerBonusGame);
        if (kingDataLogic.isTriggerBonusGame) {
          this.preloadBonusGame();
          delayTime += 10;
          this.scheduleOnce(this.playBonusGameEffect, delayTime / 1e3);
        }
        this.scheduleOnce(function() {
          _this7.setBalance(dataLogic.userBalance);
          _this7.waitStart = true;
          kingDataLogic.isAutoStart || 0 != kingDataLogic.freeNum || _this7.setBetBtnState(false);
          kingDataLogic.collectState == kingConstant.CollectState.Done && (_this7.btGetJackpot.interactable = true);
          kingDataLogic.isAutoStart || (_this7.btStart.interactable = true);
          if (!kingDataLogic.isAutoStart) {
            _this7.animStart.node.opacity = 255;
            _this7.animStart.play();
            _this7.spStart.setState(cc.Sprite.State.NORMAL);
          }
        }, delayTime / 1e3);
        if (!kingDataLogic.isTriggerBonusGame) {
          delayTime += 1e3;
          this.scheduleOnce(this.tryAutoStart, delayTime / 1e3);
        }
      },
      tryAutoStart: function tryAutoStart() {
        if (kingDataLogic.isAutoStart) {
          cc.log("===\u81ea\u52a8\u5f00\u59cb");
          this.btnEvent("", "start");
        }
      },
      pollingWinIconEffect: function pollingWinIconEffect(lineKey) {
        this.isPlayLineAudio && audioMgr.playEffect(this.audioLineWin);
        this.playWinIconByLineEffect(lineKey);
        if (lineKey < this.winningArrIndex.length - 1) lineKey++; else {
          this.isPlayLineAudio = false;
          lineKey = 0;
        }
        this.unschedule(pollingWinIconEffectFun);
        pollingWinIconEffectFun = this.pollingWinIconEffect.bind(this, lineKey);
        this.scheduleOnce(pollingWinIconEffectFun, 1.5);
      },
      playAllWinIconEffect: function playAllWinIconEffect() {
        this.setAllLotteryIconNodeMaskView(true);
        this.stopAllWinIconEffect();
        var pos = void 0, efIcon = void 0, iconName = void 0, maxHero = 0, iconId = void 0;
        var arr = this.winningArrIndex;
        for (var _k7 = 0; _k7 < kingConstant.Row; _k7++) this.efIcon[_k7] = [];
        for (i = 0; i < arr.length; i++) for (j = 0; j < arr[i].length; j++) {
          pos = arr[i][j];
          iconId = kingDataLogic.lotteryIcon[pos[0]][pos[1]];
          iconId < 8 && iconId > maxHero && (maxHero = iconId);
          if (this.efIcon[pos[0]][pos[1]] && null != this.efIcon[pos[0]][pos[1]].parent) continue;
          if (kingDataLogic.lotteryIcon[pos[0]][pos[1]] == kingConstant.IconId.Wild) {
            this.lotteryIconNode[pos[0]][pos[1]].opacity = 0;
            this.efIcon[pos[0]][pos[1]] = kf.getObj(constant.PoolId.EfWild, this.heroEffectLayer, this.pfEfWild);
          } else this.efIcon[pos[0]][pos[1]] = kf.getObj(constant.PoolId.EfHero, this.heroEffectLayer, this.pfEfHero);
          this.efIcon[pos[0]][pos[1]].x = this.lotteryIconNode[pos[0]][pos[1]].getWorldMatrix(cc.mat4()).m12;
          this.efIcon[pos[0]][pos[1]].y = this.lotteryIconNode[pos[0]][pos[1]].getWorldMatrix(cc.mat4()).m13 + 81;
          this.efIcon[pos[0]][pos[1]].getComponent(cc.Animation).play();
          this.lotteryIconNode[pos[0]][pos[1]].getChildByName("mask").opacity = 0;
        }
        audioMgr.playEffect(this.audioHero[maxHero]);
      },
      stopAllWinIconEffect: function stopAllWinIconEffect() {
        var pos = void 0;
        var arr = this.winningArrIndex;
        for (i = 0; i < arr.length; i++) for (j = 0; j < arr[i].length; j++) {
          pos = arr[i][j];
          if (null == this.efIcon[pos[0]][pos[1]] || null == this.efIcon[pos[0]][pos[1]].parent) continue;
          this.efIcon[pos[0]][pos[1]].getComponent(cc.Animation).stop();
          this.efIcon[pos[0]][pos[1]].opacity = 0;
          this.lotteryIconNode[pos[0]][pos[1]].opacity = 255;
        }
      },
      showAllIcon: function showAllIcon() {
        for (i = 0; i < kingConstant.Row; i++) for (var _k8 = 0; _k8 < this.lotteryIconNode[i].length; _k8++) this.lotteryIconNode[i][_k8] && (this.lotteryIconNode[i][_k8].opacity = 255);
      },
      playWinIconByLineEffect: function playWinIconByLineEffect(lineKey) {
        this.setAllLotteryIconNodeMaskView(true);
        this.stopAllWinIconEffect();
        var pos = void 0;
        var arr = this.winningArrIndex;
        for (j = 0; j < arr[lineKey].length; j++) {
          pos = arr[lineKey][j];
          this.efIcon[pos[0]][pos[1]].opacity = 255;
          this.efIcon[pos[0]][pos[1]].getComponent(cc.Animation).play();
          kingDataLogic.lotteryIcon[pos[0]][pos[1]] == kingConstant.IconId.Wild && (this.lotteryIconNode[pos[0]][pos[1]].opacity = 0);
          this.lotteryIconNode[pos[0]][pos[1]].getChildByName("mask").opacity = 0;
        }
      },
      stopIconEffect: function stopIconEffect() {
        for (var _k9 = 0; _k9 < kingConstant.Row; _k9++) for (i = 0; i < kingConstant.Columns; i++) if (null != this.efIcon[_k9][i] && null != this.efIcon[_k9][i].parent) {
          this.efIcon[_k9][i].getComponent(cc.Animation).stop();
          kf.killObj(this.efIcon[_k9][i]);
        }
      },
      setAllLotteryIconNodeMaskView: function setAllLotteryIconNodeMaskView(isShow) {
        var opacity = 0;
        isShow && (opacity = 127.5);
        for (var _k10 = 0; _k10 < kingConstant.Row; _k10++) for (j = 0; j < kingConstant.Columns; j++) this.lotteryIconNode[_k10][j] && (this.lotteryIconNode[_k10][j].getChildByName("mask").opacity = opacity);
      },
      randomIcon: function randomIcon(columnsKey) {
        var retryRandom = false, rand = void 0;
        do {
          retryRandom = false;
          rand = dataLogic.randomIntBySeed(0, 10);
          columnsKey % 2 != 0 && rand == kingConstant.IconId.Wild && (retryRandom = true);
          0 != columnsKey && 4 != columnsKey || rand != kingConstant.IconId.Scatter || (retryRandom = true);
        } while (retryRandom);
        return rand;
      },
      backEaseInOut: function backEaseInOut(t, b, c, d, s) {
        t > d && (t = d);
        "undefined" == typeof s && (s = .4);
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return c / 2 * ((t -= 2) * t * ((1 + (s *= 1.525)) * t + s) + 2) + b;
      },
      quadEaseOut: function quadEaseOut(t, b, c, d) {
        t > d && (t = d);
        return -c * (t /= d) * (t - 2) + b;
      },
      easeInOut: function easeInOut(t, b, c, d) {
        t > d && (t = d);
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * (--t * (t - 2) - 1) + b;
      },
      update: function update(dt) {
        if (!this.rollingSwitch) return;
        var n = void 0;
        for (i = 0; i < kingConstant.Columns; i++) {
          if (i > 0 && this.curRollingTime[i - 1] < offTime) continue;
          if (this.betError) {
            n = this.axisOfRolling[i].y - 10;
            this.axisOfRolling[i].y = n;
            continue;
          }
          n = this.backEaseInOut(this.curRollingTime[i], kingConstant.RollingStartY, -this.totalRollingDistance[i], this.totalRollingTime[i]);
          this.axisOfRolling[i].y = n;
          surplusDistance = null == clickStopRollingY ? this.totalRollingDistance[i] - -this.axisOfRolling[i].y - kingConstant.RollingStartY : -clickStopRollingY + speedDownDistance - -this.axisOfRolling[i].y;
          for (j = 0; j < this.axisOfRolling[i].children.length; j++) {
            child = this.axisOfRolling[i].getChildByName("" + j);
            worldY = child.y + this.axisOfRolling[i].y;
            if (worldY < -this.rollingItemDistance) {
              child.y += this.axisOfRolling[i].children.length * this.rollingItemDistance;
              worldY = child.y + this.axisOfRolling[i].y;
              if (surplusDistance <= 3 * this.rollingItemDistance) {
                var key = Math.abs((worldY - surplusDistance) / this.rollingItemDistance);
                key = kingConstant.Row - 1 - Math.round(key);
                if (null != kingDataLogic.lotteryIcon[key]) {
                  iconName = kingConstant.IconName[kingDataLogic.lotteryIcon[key][i]];
                  this.lotteryIconNode[key][i] = child;
                  child.getComponent(cc.Sprite).spriteFrame = this.iconAtlas.getSpriteFrame(iconName);
                }
              } else {
                iconName = kingConstant.IconName[this.randomIcon(i)];
                child.getComponent(cc.Sprite).spriteFrame = this.iconAtlas.getSpriteFrame(iconName);
              }
              break;
            }
          }
          this.curRollingTime[i] += dt;
        }
        if (this.curRollingTime[kingConstant.Columns - 1] >= this.totalRollingTime[kingConstant.Columns - 1]) {
          this.rollingSwitch = false;
          this.rollingStoped();
        }
      },
      goBackHall: function goBackHall() {
        this.loadScene(constant.SceneName.Hall);
      },
      preLoadRes: function preLoadRes() {
        for (var l = 0; l < this.sfSimulateLoads.length; l++) this.spSimulateLoad.spriteFrame = this.sfSimulateLoads[l];
      },
      preloadBonusGame: function preloadBonusGame() {
        this.loadSceneRelevantRes(constant.SceneName.BonusGame, null, false);
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  bcbmConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1c2274ciBRN+I2tWbdZyh7G", "bcbmConstant");
    "use strict";
    window.bcbmConstant = window.bcbmConstant || {};
    var n = 0;
    n = 0;
    bcbmConstant.Satge = {
      Bet: n++,
      StopBet: n++,
      OpenCard: n++,
      PieAward: n++
    };
    bcbmConstant.SatgeTxt = [];
    bcbmConstant.SatgeTxt[bcbmConstant.Satge.Bet] = "\u8bf7\u4e0b\u6ce8...";
    bcbmConstant.SatgeTxt[bcbmConstant.Satge.StopBet] = "\u505c\u6b62\u4e0b\u6ce8...";
    bcbmConstant.SatgeTxt[bcbmConstant.Satge.OpenCard] = "\u5f00\u5956\u4e2d...";
    bcbmConstant.SatgeTxt[bcbmConstant.Satge.PieAward] = "\u6d3e\u5956\u4e2d...";
    bcbmConstant.StageBeginTime = [ 0, 15, 17, 25 ];
    var _action = "DoPlay";
    bcbmConstant.PostBet = {
      action: _action,
      eventName: "bet"
    };
    bcbmConstant.PostOnLinePlayerCount = {
      action: _action,
      eventName: "getCount"
    };
    cc._RF.pop();
  }, {} ],
  bcbmDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1a150EEJctBDoZQdkHNv4sX", "bcbmDataLogic");
    "use strict";
    window.bcbmDataLogic = {
      init: function init() {
        this.betBtnConfig = [ 1, 2, 3, 4, 5 ];
        this.resetData();
        this.continuousNotBetInning = 0;
        this.isKickedOut = false;
        this.curSatge = null;
        this.otherPlayers = [];
        this.openIndex = "";
        this.lastOpenIndex = "";
        this.trend = [];
        this.latelyPlayIds = [];
        this.curRound = 0;
      },
      resetData: function resetData() {
        this.areaBetNum = [ 0, 0, 0, 0, 0, 0, 0, 0 ];
        this.areaMyBetNum = [ 0, 0, 0, 0, 0, 0, 0, 0 ];
        this.cardData = [];
        this.settlementAmount = 0;
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setOpenIndex: function setOpenIndex(openIndex) {
        this.openIndex = openIndex;
      },
      setLastOpenIndex: function setLastOpenIndex(lastOpenIndex) {
        this.lastOpenIndex = lastOpenIndex;
      },
      setTrend: function setTrend(data) {
        this.trend = kf.clone(data);
      },
      setSettlementAmount: function setSettlementAmount(num) {
        this.settlementAmount = num;
      },
      getTotalBetNum: function getTotalBetNum() {
        var total = 0;
        for (var i = 0; i < this.areaBetNum.length; i++) total += this.areaBetNum[i];
        return total;
      },
      setAreaBetNum: function setAreaBetNum(key, num) {
        this.areaBetNum[key] = num;
      },
      setAreaMyBetNum: function setAreaMyBetNum(key, num) {
        this.areaMyBetNum[key] = num;
      },
      getAreaMyTotalBetNum: function getAreaMyTotalBetNum() {
        var count = 0;
        for (var i = 0; i < this.areaMyBetNum.length; i++) count += this.areaMyBetNum[i];
        return count;
      },
      addContinuousNotBetInning: function addContinuousNotBetInning() {
        this.continuousNotBetInning++;
      },
      setContinuousNotBetInning: function setContinuousNotBetInning(num) {
        this.continuousNotBetInning = num;
      },
      setOtherPlayerInfo: function setOtherPlayerInfo(data) {
        this.otherPlayers = kf.clone(data);
      },
      setKickedOut: function setKickedOut(isKickedOut) {
        this.isKickedOut = isKickedOut;
      },
      setCurStage: function setCurStage(stage) {
        this.curSatge = stage;
      },
      getCurStage: function getCurStage(curTime) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        return time < bcbmConstant.StageBeginTime[1] ? bcbmConstant.Satge.Bet : time < bcbmConstant.StageBeginTime[2] ? bcbmConstant.Satge.StopBet : time < bcbmConstant.StageBeginTime[3] ? bcbmConstant.Satge.OpenCard : bcbmConstant.Satge.PieAward;
      },
      getDistanceNextStageTime: function getDistanceNextStageTime(curTime, curStage) {
        var time = Math.floor((curTime - dataLogic.timeOff) / 1e3) % 30;
        var nextStageBeginTime = bcbmConstant.StageBeginTime[this.getNextStage(curStage)];
        var distanceNextStageTime = nextStageBeginTime - time;
        distanceNextStageTime < 0 && (distanceNextStageTime = 30 - time);
        return distanceNextStageTime;
      },
      getNextStage: function getNextStage(curStage) {
        return (curStage + 1) % 4;
      },
      playIdDiffValue: function playIdDiffValue(playId1, playId2) {
        var v1 = Number(playId1.substr(-4));
        var v2 = Number(playId2.substr(-4));
        return v2 - v1;
      },
      pushPlayId: function pushPlayId(playId) {
        this.latelyPlayIds.length > 1 && this.latelyPlayIds.shift();
        this.latelyPlayIds.push(playId);
      },
      getCardValue: function getCardValue(cardKey) {
        if (0 == cardKey % 13) return 1;
        return cardKey % 13 + 1;
      }
    };
    bcbmDataLogic.init();
    cc._RF.pop();
  }, {} ],
  bcbmHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3c83f64NP5NPJLAQZufCGvd", "bcbmHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Bcbm);
        if (bcbmDataLogic.isKickedOut) {
          this.showKickedOut();
          bcbmDataLogic.setKickedOut(false);
        }
      },
      showKickedOut: function showKickedOut() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u8fde\u7eed5\u5c40\u672a\u4e0b\u6ce8\uff0c\u88ab\u8bf7\u79bb\u4e86\u724c\u684c",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "Bcbm/UI/5", "Bcbm/table", "Bcbm/bg" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  bcbm: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "28a9fdSVgtB0ZG6Brn+RdOi", "bcbm");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var trendItemStartX = -111;
    var trendItemSpace = 31.75;
    var trendItemY = [ 28, -4, -38 ];
    var rankingItemStartY = -38;
    var rankingItemSpace = -73;
    var playerWorldPos = cc.v2();
    var chipMoveSpeed = 8e-4;
    var bankerWorldPos = cc.v2();
    var chipRandomPos = [];
    var stopBetAnimFinished = false;
    var canvasPosOff = {};
    var otherPlayerYMin = 0;
    var otherPlayerYMax = 0;
    var gameHidePlayId = "";
    var gameHideStage = "";
    var curPlayId = "";
    var cutTimesLimitBetNum = 0;
    var isMaintaining = false;
    var curTimesHaveBet = false;
    var backCardPosY = 3, maxTableChipNum = 50;
    var betAreaPos = [ cc.v2(-316, -34), cc.v2(1, -74), cc.v2(316, 34) ];
    var chipTxtColor = [ new cc.Color(75, 179, 139), new cc.Color(73, 176, 159), new cc.Color(73, 147, 183), new cc.Color(80, 120, 185), new cc.Color(164, 111, 224) ];
    var receivedOpenCardMsg = false;
    cc.Class((_cc$Class = {
      extends: require("gameSceneBase"),
      properties: {
        reciprocal: cc.Node,
        roomNum: cc.Node,
        ranking: cc.Node,
        rankingContent: cc.Node,
        rankingArrow: cc.Node,
        betArea: [ cc.Node ],
        chipLayer: cc.Node,
        banker: cc.Node,
        txtNickname: cc.Label,
        txtBalance: cc.Label,
        txtStage: cc.Label,
        txtTotalBetAmount: [ cc.Label ],
        txtSelfBetAmount: [ cc.Label ],
        txtSettlementAmount: cc.Label,
        txtCountPlayer: cc.Label,
        spHead: cc.Sprite,
        pfRankingItem: cc.Prefab,
        pfChip: cc.Prefab,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        choiceBet: [ cc.Node ],
        animStart: cc.Animation,
        animStop: cc.Animation,
        animHeadWin: cc.Animation,
        turnCircle: [ cc.Node ],
        trendContent: cc.Node,
        carIcon: [ cc.SpriteFrame ],
        rebate: [ cc.Node ],
        lastestOpenAniPfb: cc.Prefab,
        audioWin: {
          default: null,
          type: cc.AudioClip
        },
        audioLose: {
          default: null,
          type: cc.AudioClip
        },
        audioTurnCircle: {
          default: null,
          type: cc.AudioClip
        },
        audioTurnStop: {
          default: null,
          type: cc.AudioClip
        },
        audioStartBet: {
          default: null,
          type: cc.AudioClip
        },
        audioStopBet: {
          default: null,
          type: cc.AudioClip
        },
        audioChip: {
          default: null,
          type: cc.AudioClip
        },
        audioClearingChip: {
          default: null,
          type: cc.AudioClip
        },
        audioSomeChip: {
          default: null,
          type: cc.AudioClip
        },
        audioAlarmClock: {
          default: null,
          type: cc.AudioClip
        },
        audioCarEngine: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onOpen", this.onOpen.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "reqOnLinePlayerCountCb", this.reqOnLinePlayerCountCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this2 = this;
        this.baseInit(constant.GameId.Bcbm);
        this.registerEvent();
        isMaintaining = false;
        this.setSelfUI();
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        this.ranking.x = -cc.winSize.width / 2 - 234;
        this.isShowRanking = false;
        this.curChoiceBetKey = 0;
        kf.createPool(constant.PoolId.Chip, 500, this.pfChip);
        this.chipNode = [];
        this.leisureChip = [];
        for (var i = 0; i < 8; i++) this.chipNode[i] = [];
        this.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this2.packUpRankingView();
        });
        this.circlePos = [ cc.v2(2.4, 242.5), cc.v2(72.7, 243.5), cc.v2(144, 243), cc.v2(214.5, 244), cc.v2(284.9, 232.4), cc.v2(347.7, 200.4), cc.v2(397.8, 150.5), cc.v2(429, 89.1), cc.v2(440.6, 17.4), cc.v2(429.3, -51.9), cc.v2(397.5, -113.7), cc.v2(347, -164.2), cc.v2(284.1, -194.3), cc.v2(214.2, -207.2), cc.v2(143.8, -207.2), cc.v2(72.4, -207.2), cc.v2(1.4, -207.2), cc.v2(-70, -207.2), cc.v2(-141, -207.2), cc.v2(-211, -207.2), cc.v2(-282, -197), cc.v2(-345, -164), cc.v2(-394, -114), cc.v2(-426, -52), cc.v2(-437, 16), cc.v2(-426, 87), cc.v2(-394, 151), cc.v2(-344.5, 200), cc.v2(-283, 232), cc.v2(-212, 242), cc.v2(-140, 244), cc.v2(-70, 243) ];
        var node = new cc.instantiate(this.lastestOpenAniPfb);
        node.parent = this.trendContent.getChildByName("car1");
      },
      start: function start() {
        var _this3 = this;
        otherPlayerYMin = cc.winSize.height / 2 - 150;
        otherPlayerYMax = cc.winSize.height / 2 + 150;
        canvasPosOff.x = cc.winSize.width / 2 - this.node.x;
        canvasPosOff.y = cc.winSize.height / 2 - this.node.y;
        playerWorldPos.x = this.spHead.node.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        playerWorldPos.y = this.spHead.node.getWorldMatrix(cc.mat4()).m13;
        bankerWorldPos.x = this.banker.getWorldMatrix(cc.mat4()).m12 + canvasPosOff.x;
        bankerWorldPos.y = this.banker.getWorldMatrix(cc.mat4()).m13 + canvasPosOff.y;
        this.getWorldPos(this.chipLayer);
        var pos = this.spHead.node.parent.position;
        var _loop = function _loop(i) {
          chipRandomPos[i] = {};
          chipRandomPos[i].x = _this3.betArea[i].getWorldMatrix(cc.mat4()).m12 - 85 + canvasPosOff.x;
          chipRandomPos[i].y = _this3.betArea[i].getWorldMatrix(cc.mat4()).m13 - 85 + canvasPosOff.y;
          var betNum = 0;
          var totalBet = 0;
          var areaBet = 0;
          _this3.betArea[i].on(cc.Node.EventType.TOUCH_END, function(i, pos, event) {
            this.packUpRankingView();
            betNum = bcbmDataLogic.betBtnConfig[this.curChoiceBetKey];
            totalBet = bcbmDataLogic.getAreaMyTotalBetNum().add(betNum);
            areaBet = bcbmDataLogic.areaMyBetNum[i].add(betNum);
            if (bcbmDataLogic.curSatge != bcbmConstant.Satge.Bet) {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u975e\u4e0b\u6ce8\u72b6\u6001\uff0c\u8bf7\u7a0d\u7b49~"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
              return;
            }
            if (areaBet > 100 * bcbmDataLogic.betBtnConfig[0]) {
              var _arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: "\u4e0b\u6ce8\u5931\u8d25\uff0c\u8be5\u4e0b\u6ce8\u70b9\u9650\u7ea2" + bcbmDataLogic.betBtnConfig[0] + "~" + 100 * bcbmDataLogic.betBtnConfig[0]
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg);
              return;
            }
            if (betNum > dataLogic.userBalance) {
              this.showLayerTip("\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u6ce8");
              return;
            }
            audioMgr.playEffect(this.audioChip);
            this.spHead.node.parent.stopAllActions();
            this.spHead.node.parent.runAction(cc.jumpTo(.05, pos, 10, 1));
            this.setPlayerBalance(dataLogic.userBalance.minus(betNum));
            this.bet(playerWorldPos, this.randomChipPos(i), betNum, i, true);
            this.rebate[i].opacity || (this.rebate[i].opacity = 255);
            var reqArg = {
              action: "DoPlay",
              eventName: "bet",
              betArea: i,
              betNum: betNum
            };
            var localCbArg = {
              betArea: i,
              betNum: betNum
            };
            http.post(reqArg, "betCb", localCbArg);
          }.bind(_this3, i, pos));
        };
        for (var i = 0; i < 8; i++) _loop(i);
        this.initRanking();
      },
      hideAllRebateNode: function hideAllRebateNode() {
        for (var i = 0; i < this.rebate.length; i++) this.rebate[i].opacity = 0;
      },
      choiceBetNumEvent: function choiceBetNumEvent(event, key) {
        "" != event && audioMgr.playEffect(this.audioBtn);
        this.packUpRankingView();
        key = Number(key);
        this.curChoiceBetKey = key;
      },
      bet: function bet(startPos, endPos, chipNum, betBlock, isSelf) {
        var txt = void 0;
        if (isSelf) {
          txt = this.betArea[betBlock].getChildByName("selfBetMoney").getChildByName("txt").getComponent(cc.Label);
          txt.string = Number(txt.string).add(chipNum);
          bcbmDataLogic.setAreaMyBetNum(betBlock, Number(bcbmDataLogic.areaMyBetNum[betBlock]).add(chipNum));
        }
        bcbmDataLogic.setAreaBetNum(betBlock, Number(bcbmDataLogic.areaBetNum[betBlock]).add(chipNum));
        txt = this.betArea[betBlock].getChildByName("totalBetMoney").getChildByName("txt").getComponent(cc.Label);
        txt.string = Number(txt.string).add(chipNum);
        this.chipMoveToTable(startPos, endPos, chipNum, betBlock);
      },
      chipMoveToTable: function chipMoveToTable(startPos, endPos, chipNum, betBlock) {
        var chip = this.genChip(chipNum, startPos);
        this.chipAction(startPos, endPos, chip, false, betBlock, null, true);
      },
      getWorldPos: function getWorldPos(node) {
        var pos = node.position;
        do {
          node = node.parent;
          pos.x += node.x;
          pos.y += node.y;
        } while ("Canvas" != node.name);
        return pos;
      },
      gameRecoverCb: function gameRecoverCb(msg, isInit) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          isMaintaining = true;
          constant.HttpCode.error == msg.Code && this.showMaintainingToast(msg.StrCode);
          return;
        }
        var curTime = new Date().getTime();
        var curStage = bcbmDataLogic.getCurStage(curTime);
        cc.log("\u5f53\u524d\u9636\u6bb5", curStage, msg.Data.state);
        var reReq = false;
        1 != msg.Data.state || curStage != bcbmConstant.Satge.StopBet && curStage != bcbmConstant.Satge.OpenCard && curStage != bcbmConstant.Satge.PieAward ? 2 == msg.Data.state && curStage == bcbmConstant.Satge.Bet && (reReq = true) : reReq = true;
        if (reReq) {
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", isInit);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          return;
        }
        var isOpenCard = true;
        1 != msg.Data.state && curStage != bcbmConstant.Satge.Bet || (isOpenCard = false);
        this.onGameRecover(msg.Data, isInit, curTime, curStage, isOpenCard);
      },
      betUpcomingStopHint: function betUpcomingStopHint() {
        var _this4 = this;
        this.schedule(function() {
          _this4.alarmClockAudioId = audioMgr.playEffect(_this4.audioAlarmClock);
        }, 1, 2);
      },
      countDown: function countDown(stage, time, overCb) {
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        timeTxt.string = time;
        audioMgr.stopEffect(this.alarmClockAudioId);
        this.reciprocal.stopAllActions();
        this.reciprocal.rotation = 0;
        stage == bcbmConstant.Satge.Bet && time < 4 && this.betUpcomingStopHint();
        this.callback = function() {
          stage == bcbmConstant.Satge.Bet && 4 == time && this.betUpcomingStopHint();
          time--;
          timeTxt.string = time;
          if (time <= 0) {
            audioMgr.stopEffect(this.alarmClockAudioId);
            this.reciprocal.stopAllActions();
            this.reciprocal.rotation = 0;
            time = 0;
            this.unschedule(this.callback);
            this.intoNewStage(bcbmDataLogic.getNextStage(stage));
            overCb && overCb();
          }
        };
        this.schedule(this.callback, 1);
      },
      showNotBetWarning: function showNotBetWarning() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u7ecf3\u5c40\u6ca1\u6709\u8fdb\u884c\u4e0b\u6ce8\uff0c\u8d85\u8fc75\u5c40\u5c06\u88ab\u8bf7\u51fa\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      openCardStage: function openCardStage(openIndex, timeRemaining) {
        var map = [ "\u5927\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5927\u4f17\u5927", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377\u5927", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c", "\u5954\u9a70", "\u5927\u4f17", "\u4fdd\u65f6\u6377", "\u5b9d\u9a6c" ];
        var loopTimes = 0;
        cc.log("lastOpenIndex====================", bcbmDataLogic.lastOpenIndex, openIndex);
        var index = bcbmDataLogic.lastOpenIndex || 0;
        var loopCount = this.circlePos.length - index + 1 * this.circlePos.length + (openIndex || 0);
        var count = 0;
        this.callbackNew = function() {
          var _this5 = this;
          this.turnCircle[0].position = this.circlePos[index];
          0 == loopTimes && 0 == count && audioMgr.playEffect(this.audioTurnCircle);
          count >= (loopTimes + 1) * this.circlePos.length && loopTimes++;
          index++;
          count++;
          index >= this.circlePos.length && (index = 0);
          if (count - 1 == loopCount) {
            audioMgr.playEffect(this.audioTurnStop);
            this.turnCircle[0].getChildByName("ef_ben").opacity = 255;
            this.turnCircle[0].getChildByName("ef_ben").getComponent(cc.Animation).play();
            this.scheduleOnce(function() {
              audioMgr.playEffect(_this5.audioCarEngine);
            }, 1.5);
            cc.log("setLastOpenIndex===============", bcbmDataLogic.openIndex);
            bcbmDataLogic.setLastOpenIndex(bcbmDataLogic.openIndex);
            this.unschedule(this.callbackNew);
          }
          if (5 == count && 0 == loopTimes) {
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, 1.5 / (loopCount - 8));
          }
          if (count == loopCount - 4) {
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, .2);
          } else if (count == loopCount - 3) {
            cc.log("2");
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, .4);
          } else if (count == loopCount - 2) {
            cc.log("3");
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, .6);
          } else if (count == loopCount - 1) {
            cc.log("4");
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, .8);
          } else if (count == loopCount) {
            cc.log("5");
            this.unschedule(this.callbackNew);
            this.schedule(this.callbackNew, 1);
          }
        };
        if (!timeRemaining || timeRemaining && 8 == timeRemaining) this.schedule(this.callbackNew, .36); else if (timeRemaining && timeRemaining > 4) this.schedule(this.callbackNew, .02); else if (timeRemaining && timeRemaining <= 4) {
          this.turnCircle[0].position = this.circlePos[openIndex];
          this.turnCircle[0].getChildByName("ef_ben").opacity = 255;
          this.turnCircle[0].getChildByName("ef_ben").getComponent(cc.Animation).play();
          bcbmDataLogic.setLastOpenIndex(bcbmDataLogic.openIndex);
        }
      },
      intoNewStage: function intoNewStage(stage) {
        var curTime = new Date().getTime();
        var timeRemaining = bcbmDataLogic.getDistanceNextStageTime(curTime, stage);
        this.countDown(stage, timeRemaining);
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        var anim = this.trendContent.getChildByName("car1").getChildByName("ef_benC").getComponent(cc.Animation);
        anim.setCurrentTime("1.1");
        this.trendContent.getChildByName("car1").getChildByName("ef_benC").getComponent(cc.Animation).stop();
        switch (stage) {
         case bcbmConstant.Satge.Bet:
          cc.log("ssssssssssssssssssssssssssssssssssssssss");
          curTimesHaveBet = false;
          bcbmDataLogic.resetData();
          receivedOpenCardMsg = false;
          this.txtSettlementAmount.node.opacity = 0;
          3 == bcbmDataLogic.continuousNotBetInning && this.showNotBetWarning();
          this.setPlayId(dataLogic.playId);
          stopBetAnimFinished = false;
          this.cleanBetAmount();
          this.killAllChip();
          bcbmDataLogic.curRound = Number(bcbmDataLogic.curRound) + 1;
          for (var i = 0; i < 8; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          cutTimesLimitBetNum = dataLogic.userBalance / 4;
          stopBetAnimFinished = false;
          this.hideAllRebateNode();
          this.animStart.node.opacity = 255;
          this.animStart.play();
          audioMgr.playEffect(this.audioStartBet);
          this.turnCircle[0].getChildByName("ef_ben").opacity = 0;
          this.turnCircle[0].getChildByName("ef_ben").getComponent(cc.Animation).stop();
          break;

         case bcbmConstant.Satge.StopBet:
          audioMgr.playEffect(this.audioStopBet);
          stopBetAnimFinished = false;
          this.animStop.node.opacity = 255;
          this.animStop.on("finished", this.openCard, this);
          this.animStop.play();
          break;

         case bcbmConstant.Satge.OpenCard:
          cc.log("\u5f00\u62cd\u5566LLLLLLLLLLLLLL");
          break;

         case bcbmConstant.Satge.PieAward:
          cc.log("\u6d3e\u5956\u4e2d\u5566!!!!!!!!");
          this.clearing();
          this.setPlayerBalance(dataLogic.userBalance);
          this.updateTrendUI(bcbmDataLogic.trend, true);
          if (bcbmDataLogic.continuousNotBetInning > 4) {
            bcbmDataLogic.setKickedOut(true);
            this.exitRoom();
          } else if (isMaintaining) {
            this.unscheduleAllCallbacks();
            this.showMaintainingToast();
          }
        }
        this.setSatge(stage);
      },
      cleanBetAmount: function cleanBetAmount() {
        for (var i = 0; i < 8; i++) {
          this.setBetAmount(i, true, 0);
          this.setBetAmount(i, false, 0);
        }
      },
      clearing: function clearing() {
        var _this6 = this;
        var selfWin = [], endKey = bcbmDataLogic.trend[bcbmDataLogic.trend.length - 1];
        var areaMyBetNum = kf.clone(bcbmDataLogic.areaMyBetNum);
        for (var i = 0; i < 8; i++) if (i == endKey && areaMyBetNum[endKey]) {
          selfWin[i] = areaMyBetNum[i];
          selfWin[i] = null == selfWin[i] ? 0 : selfWin[i];
        } else selfWin[i] = 0;
        var actionTime = .6, seq = void 0, delayTime = 0, chip = void 0;
        for (var _i = 0; _i < 8; _i++) if (_i != endKey) {
          while (this.chipNode[_i].length > 0) {
            chip = this.chipNode[_i].pop();
            seq = cc.sequence(cc.delayTime(1.25), cc.moveTo(actionTime, bankerWorldPos).easing(cc.easeInOut(3)), cc.callFunc(function(chip) {
              this.recycleChip(chip);
            }.bind(this, chip)));
            chip.stopAllActions();
            chip.runAction(seq);
          }
          delayTime = actionTime;
          audioMgr.playEffect(this.audioClearingChip);
        }
        this.scheduleOnce(function() {
          this.castSomeChipToTable(bcbmDataLogic.areaBetNum[endKey], endKey, bankerWorldPos, 20, true);
          audioMgr.playEffect(this.audioSomeChip);
        }.bind(this), delayTime + 1.5);
        this.scheduleOnce(this.showSettlementAmount.bind(this), delayTime + 1.75);
        delayTime += actionTime;
        this.scheduleOnce(this.award.bind(this, selfWin, endKey), delayTime + 1.35);
        bcbmDataLogic.areaBetNum[endKey] > 0 && this.betArea[endKey].getChildByName("halo").runAction(cc.sequence(cc.blink(1, 3), cc.callFunc(function() {
          _this6.betArea[endKey].getChildByName("halo").opacity = 255;
        })));
      },
      chipMoveToPlayer: function chipMoveToPlayer(startPos, endPos, chip) {
        this.chipAction(startPos, endPos, chip, true);
      },
      award: function award(selfWin, endKey) {
        var allPlayerWin = bcbmDataLogic.areaBetNum;
        var count = void 0, otherPlayerWin = 0, chip = void 0;
        if (selfWin[endKey]) {
          count = Math.ceil(selfWin[endKey] / allPlayerWin[endKey] * this.chipNode[endKey].length);
          count = count < 3 ? 3 : count;
          count = count > this.chipNode[endKey].length ? this.chipNode[endKey].length : count;
          var j = 0;
          while (j < count) {
            chip = this.chipNode[endKey].pop();
            this.chipMoveToPlayer(chip.position, playerWorldPos, chip);
            j++;
          }
        }
        otherPlayerWin = allPlayerWin[endKey] - selfWin[endKey];
        if (otherPlayerWin > 0) {
          while (this.chipNode[endKey].length > 0) {
            chip = this.chipNode[endKey].pop();
            this.chipMoveToPlayer(chip.position, this.randomOtherPos(), chip);
          }
          audioMgr.playEffect(this.audioClearingChip);
        }
        if (curTimesHaveBet) if (bcbmDataLogic.settlementAmount < 0) audioMgr.playEffect(this.audioLose); else {
          audioMgr.playEffect(this.audioClearingChip);
          audioMgr.playEffect(this.audioWin);
          this.animHeadWin.node.opacity = 255;
          this.animHeadWin.play();
        }
      },
      showSettlementAmount: function showSettlementAmount() {
        var num = bcbmDataLogic.settlementAmount;
        if (!curTimesHaveBet) return;
        0 === num && cc.error("\u7ed3\u7b97\u91d1\u989d\u9519\u8bef");
        if (num < 0) {
          this.txtSettlementAmount.font = this.loseChipNumFont;
          this.txtSettlementAmount.string = num;
        } else {
          this.txtSettlementAmount.string = "+" + num;
          this.txtSettlementAmount.font = this.winChipNumFont;
        }
        this.txtSettlementAmount.node.y = 0;
        this.txtSettlementAmount.node.opacity = 255;
        this.txtSettlementAmount.node.stopAllActions();
        this.txtSettlementAmount.node.runAction(cc.moveBy(.2, 0, 70));
      },
      openCard: function openCard() {
        cc.log("\u51c6\u5907\u6267\u884c\u5f00\u5956\u52a8\u753b,\u662f\u5426\u6536\u5230\u672c\u5c40\u7684\u5f00\u5956\u6d88\u606f", receivedOpenCardMsg);
        stopBetAnimFinished = true;
        if (receivedOpenCardMsg) this.openAllCardAction(bcbmDataLogic.openIndex); else {
          this.unscheduleAllCallbacks();
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
      },
      setSatge: function setSatge(stage) {
        bcbmDataLogic.setCurStage(stage);
        this.txtStage.string = bcbmConstant.SatgeTxt[stage];
      },
      netDisconnect: function netDisconnect() {
        this.unscheduleAllCallbacks();
      },
      onGameRecover: function onGameRecover(msg, isInit, curTime, curStage, isOpenCard) {
        bcbmDataLogic.resetData();
        isInit && bcbmDataLogic.setContinuousNotBetInning(0);
        dataLogic.setNeedRecover(true);
        var timeRemaining = bcbmDataLogic.getDistanceNextStageTime(curTime, curStage);
        this.countDown(curStage, timeRemaining);
        this.setSatge(curStage);
        dataLogic.setReqRecoverState(false);
        dataLogic.setDeskId(msg.deskId);
        dataLogic.setMsgId(msg.msgId);
        curStage == bcbmConstant.Satge.Bet || this.simulateOnLinePlayerNum(msg.count);
        bcbmDataLogic.setOtherPlayerInfo();
        this.setBetToggleConfig(msg.betConfig);
        this.setCountPlayer(msg.count);
        var trend = kf.clone(msg.trend);
        bcbmDataLogic.setTrend(trend);
        var settlementAmount = 0;
        var balance = 0;
        if (null != msg.endData) {
          settlementAmount = Number(msg.endData.split(",")[0]);
          balance = msg.endData.split(",")[1];
        } else balance = msg.balance;
        cutTimesLimitBetNum = balance / 4;
        bcbmDataLogic.setSettlementAmount(settlementAmount);
        if (isOpenCard) {
          cc.log("\u5df2\u7ecf\u5f00\u724c\u5566\u554a");
          receivedOpenCardMsg = true;
          bcbmDataLogic.pushPlayId(msg.lastPlayId);
          bcbmDataLogic.setOpenIndex(msg.openIndex);
          bcbmDataLogic.setLastOpenIndex(msg.lastOpenIndex);
          if (curStage == bcbmConstant.Satge.OpenCard) {
            this.setPlayerBalance(+balance - +settlementAmount);
            dataLogic.setUserBalance(balance);
          } else this.setPlayerBalance(balance);
        } else {
          receivedOpenCardMsg = false;
          var totalBetNum = 0;
          bcbmDataLogic.setLastOpenIndex(msg.lastOpenIndex);
          for (var i = 0; i < 8; i++) totalBetNum += msg.myBet[i];
          this.setPlayerBalance(balance.minus(totalBetNum));
        }
        this.turnCircle[0].position = this.circlePos[curStage == bcbmConstant.Satge.PieAward ? msg.openIndex : msg.lastOpenIndex];
        this.turnCircle[0].opacity = 255;
        dataLogic.setPlayId(msg.playId);
        bcbmDataLogic.pushPlayId(msg.playId);
        if (msg.trend.length < 20) {
          for (var _i2 = 0; _i2 < this.trendContent.length; _i2++) _i2 < msg.trend.length ? this.trendContent.children[_i2].active = true : this.trendContent.children[_i2].active = false;
          this.trendContent.height = 80 * msg.trend.length;
        }
        if (isOpenCard && curStage == bcbmConstant.Satge.OpenCard && timeRemaining > 4 || isOpenCard && curStage == bcbmConstant.Satge.StopBet) {
          var trendData = msg.trend.length > 20 ? msg.trend.slice(-21, -1) : msg.trend.slice(-msg.trend.length, -1);
          this.updateTrendUI(trendData);
        } else this.updateTrendUI(msg.trend, !isOpenCard);
        for (var _i3 = 0; _i3 < 8; _i3++) {
          this.setBetAmount(_i3, false, msg.allBet[_i3]);
          this.setBetAmount(_i3, true, msg.myBet[_i3]);
        }
        curTimesHaveBet = bcbmDataLogic.getAreaMyTotalBetNum() > 0;
        this.updateUI(curStage, timeRemaining);
        this.updateRanking(msg.others);
        stopBetAnimFinished = false;
      },
      updateTrendUI: function updateTrendUI(trendData) {
        var isGameOver = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        trendData.length > 20 && (trendData = trendData.slice(-20));
        var index = 0;
        this.trendContent.parent.parent.getComponent(cc.ScrollView).scrollToTop();
        this.trendContent.height = 80 * trendData.length;
        for (var i = trendData.length - 1; i >= 0; i--) {
          var node = this.trendContent.getChildByName("car" + (index + 1));
          var sp = node.getComponent(cc.Sprite);
          sp.spriteFrame = this.carIcon[trendData[i]];
          cc.log(index, trendData.length, "222222222222222222222");
          index < trendData.length && (node.active = true);
          index++;
        }
        if (trendData[trendData.length - 1] < 4) {
          this.trendContent.getChildByName("car1").getChildByName("ef_benC").getChildByName("lan").active = true;
          this.trendContent.getChildByName("car1").getChildByName("ef_benC").getChildByName("huang").active = false;
        } else {
          this.trendContent.getChildByName("car1").getChildByName("ef_benC").getChildByName("lan").active = false;
          this.trendContent.getChildByName("car1").getChildByName("ef_benC").getChildByName("huang").active = true;
        }
        isGameOver && this.trendContent.getChildByName("car1").getChildByName("ef_benC").getComponent(cc.Animation).play();
      },
      updateRanking: function updateRanking(data) {
        var item = null, showItemCount = 0;
        for (var i = 0; i < 20; i++) {
          item = this.rankingItem[i];
          if (i < data.length) {
            showItemCount++;
            item.opacity = 255;
            item.getChildByName("txtNickname").getComponent(cc.Label).string = data[i].name;
            item.getChildByName("txtBetNum").getComponent(cc.Label).string = data[i].money;
            this.setPlayerHead(data[i].avatar, item.getChildByName("head").getComponent(cc.Sprite));
          } else item.opacity = 0;
        }
        this.rankingContent.height = showItemCount * -rankingItemSpace + 5;
      },
      initRanking: function initRanking() {
        var item = null;
        this.rankingItem = [];
        for (var i = 0; i < 20; i++) {
          item = cc.instantiate(this.pfRankingItem);
          item.parent = this.rankingContent;
          item.y = i * rankingItemSpace + rankingItemStartY;
          this.rankingItem.push(item);
        }
      },
      killAllChip: function killAllChip() {
        var chip = void 0;
        for (var i = 0; i < this.chipNode.length; i++) {
          while (this.chipNode[i].length > 0) {
            chip = this.chipNode[i].pop();
            chip.stopAllActions();
            this.recycleChip(chip);
          }
          this.chipNode[i] = [];
        }
      },
      recycleChip: function recycleChip(chip) {
        chip.opacity = 0;
        chip.isUse = false;
        this.leisureChip.push(chip);
      },
      packUpRankingView: function packUpRankingView() {
        if (this.isShowRanking) {
          var endPos = {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = false;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        "setRankingView" != key && this.packUpRankingView();
        switch (key) {
         case "exitRoom":
          this.tryExitRoom();
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.Bcbm);
          break;

         case "Setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "refresh":
          location.reload();
          break;

         case "setRankingView":
          var endPos = null;
          endPos = this.isShowRanking ? {
            x: -cc.winSize.width / 2 - 234,
            y: 0
          } : {
            x: -cc.winSize.width / 2,
            y: 0
          };
          this.rankingArrow.rotation += 180;
          this.isShowRanking = !this.isShowRanking;
          this.ranking.stopAllActions();
          this.ranking.runAction(cc.moveTo(.2, endPos));
        }
      },
      updateUI: function updateUI(stage, timeRemaining) {
        var _this7 = this;
        this.killAllChip();
        this.animHeadWin.stop();
        this.animHeadWin.node.opacity = 0;
        this.txtSettlementAmount.node.opacity = 0;
        switch (stage) {
         case bcbmConstant.Satge.Bet:
          if (bcbmDataLogic.continuousNotBetInning > 4) {
            bcbmDataLogic.setKickedOut(true);
            this.exitRoom();
          }
          this.setPlayId(dataLogic.playId);
          3 == bcbmDataLogic.continuousNotBetInning && this.showNotBetWarning();
          for (var i = 0; i < 8; i++) this.betArea[i].getChildByName("halo").opacity = 0;
          this.recoverTableChip(15 - timeRemaining);
          this.turnCircle[0].getChildByName("ef_ben").opacity = 0;
          this.turnCircle[0].getChildByName("ef_ben").getComponent(cc.Animation).stop();
          break;

         case bcbmConstant.Satge.StopBet:
          cc.log("updateUI====================StopBet", timeRemaining);
          this.setPlayId(dataLogic.playId);
          this.recoverTableChip(15 - timeRemaining);
          this.updateBetAmount();
          for (var _i4 = 0; _i4 < 8; _i4++) this.betArea[_i4].getChildByName("halo").opacity = 0;
          this.scheduleOnce(function() {
            _this7.openCardStage(bcbmDataLogic.openIndex, 8);
          }, 2 - timeRemaining);
          break;

         case bcbmConstant.Satge.OpenCard:
          this.setPlayId(bcbmDataLogic.latelyPlayIds[0]);
          this.recoverTableChip();
          this.updateBetAmount();
          cc.log("========================================", timeRemaining);
          this.openCardStage(bcbmDataLogic.openIndex, timeRemaining);
          break;

         case bcbmConstant.Satge.PieAward:
          cc.log("\u65ad\u7ebf\u91cd\u8fde\u6d3e\u5956\u4e2d");
          this.setPlayId(bcbmDataLogic.latelyPlayIds[0]);
          this.recoverTableChip();
          timeRemaining > 1 ? this.clearing() : this.showSettlementAmount();
        }
      },
      recoverTableChip: function recoverTableChip() {
        var genTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 18;
        var allBet = null;
        for (var i = 0; i < 8; i++) {
          allBet = bcbmDataLogic.areaBetNum[i];
          if (allBet > 0) for (var j = 0; j < genTime; j++) this.genSomeChipToTable(i, allBet / genTime, true);
        }
      },
      genSomeChipToTable: function genSomeChipToTable(areaKey, totalChipNum) {
        var isRecover = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        var chips = this.genSomeChip(totalChipNum, isRecover);
        for (var i = 0; i < chips.length; i++) {
          chips[i].opacity = 255;
          chips[i].position = this.randomChipPos(areaKey);
          this.chipNode[areaKey].push(chips[i]);
        }
      },
      updateBetAmount: function updateBetAmount() {
        for (var i = 0; i < 8; i++) {
          this.setBetAmount(i, false, bcbmDataLogic.areaBetNum[i]);
          this.setBetAmount(i, true, bcbmDataLogic.areaMyBetNum[i]);
        }
      },
      setBetAmount: function setBetAmount(betAreaKey, isSelf, amount) {
        if (isSelf) {
          this.txtSelfBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          bcbmDataLogic.setAreaMyBetNum(betAreaKey, amount);
        } else {
          this.txtTotalBetAmount[betAreaKey].string = 0 == amount ? 0 : amount;
          bcbmDataLogic.setAreaBetNum(betAreaKey, amount);
        }
      },
      setPlayerBalance: function setPlayerBalance(balance) {
        "string" == typeof balance && (balance = Number(balance));
        this.txtBalance.string = balance.toFixed(2);
        dataLogic.setUserBalance(balance);
      },
      setBetToggleConfig: function setBetToggleConfig(config) {
        bcbmDataLogic.setBetBtnConfig(config);
        for (var i = 0; i < bcbmDataLogic.betBtnConfig.length; i++) this.choiceBet[i].getChildByName("txt").getComponent(cc.Label).string = config[i];
      },
      setCountPlayer: function setCountPlayer(num) {
        this.txtCountPlayer.string = "\u672c\u684c\u5171" + num + "\u4eba";
      },
      showMaintainingToast: function showMaintainingToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u7cfb\u7edf\u9700\u8981\u51e0\u5206\u949f\u5347\u7ea7\u4e00\u4e0b\uff0c\u8bf7\u7a0d\u7b49";
        if (this.getToast(constant.ToastType.Hint, 4)) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "exitRoom" ],
            btnTxt: [ null, "\u597d\u7684" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.Chip);
      },
      updateBalanceCb: function updateBalanceCb() {},
      syncServerTimeCb: function syncServerTimeCb() {
        var now = new Date().getTime();
        cc.log("\u670d\u52a1\u5668\u65f6\u95f4", msg.Data, now - dataLogic.timeOff);
        return;
        var toast;
        var arg;
      },
      tryExitRoom: function tryExitRoom() {
        0 == bcbmDataLogic.getAreaMyTotalBetNum() ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u7b49\u5f85\u6e38\u620f\u7ed3\u675f\u518d\u9000\u51fa", bcbmDataLogic.getAreaMyTotalBetNum());
      },
      exitRoom: function exitRoom() {
        audioMgr.stopAllEffect();
        bcbmDataLogic.setContinuousNotBetInning(0);
        this.unscheduleAllCallbacks();
        isMaintaining || http.post({
          action: "DoPlay",
          eventName: "leave"
        });
        this.goBackSelectRoom();
      },
      setSelfUI: function setSelfUI() {
        this.txtNickname.string = dataLogic.userName;
        this.setPlayerBalance(dataLogic.userBalance);
        this.setPlayerHead(dataLogic.userHeadUrl, this.spHead);
      }
    }, _defineProperty(_cc$Class, "setPlayerBalance", function setPlayerBalance(balance) {
      "string" == typeof balance && (balance = Number(balance));
      this.txtBalance.string = balance.toFixed(2);
      dataLogic.setUserBalance(balance);
    }), _defineProperty(_cc$Class, "setPlayerHead", function setPlayerHead(headUrl, sp) {
      resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
        sp.spriteFrame = res;
      }, cc.SpriteFrame);
    }), _defineProperty(_cc$Class, "setPlayId", function setPlayId(playId) {
      curPlayId = playId;
      this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
      this.setRoomNumState();
    }), _defineProperty(_cc$Class, "setRoomNumState", function setRoomNumState() {
      this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
      this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
    }), _defineProperty(_cc$Class, "gameShow", function gameShow() {
      audioMgr.stopAllEffect();
      if (bcbmDataLogic.continuousNotBetInning > 4) {
        bcbmDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      if (isMaintaining) {
        this.unscheduleAllCallbacks();
        this.showMaintainingToast();
        return;
      }
      this.unscheduleAllCallbacks();
      this.unschedule(this.callback);
      this.unschedule(this.callbackNew);
      this.animStart.stop();
      this.animStop.stop();
      this.animStart.node.opacity = 0;
      this.animStop.node.opacity = 0;
      if (this.socketIO.isConnected()) {
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb", true);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      }
      return;
    }), _defineProperty(_cc$Class, "gameHide", function gameHide() {
      this.unscheduleAllCallbacks();
      gameHidePlayId = curPlayId;
      gameHideStage = bcbmDataLogic.curSatge;
      audioMgr.stopAllEffect();
    }), _defineProperty(_cc$Class, "onOpen", function onOpen(msgData) {
      receivedOpenCardMsg = true;
      bcbmDataLogic.addContinuousNotBetInning();
      bcbmDataLogic.setOpenIndex(msgData.openIndex);
      var trend = kf.clone(msgData.trend);
      bcbmDataLogic.setTrend(trend);
      cc.log("======stopBetAnimFinished", stopBetAnimFinished);
      if (stopBetAnimFinished) {
        cc.log("onOpen\u901a\u77e5\u60a8\u5f00\u62cd\u5566");
        this.openAllCardAction(msgData.openIndex);
      }
      dataLogic.setPlayId(msgData.playId);
      bcbmDataLogic.pushPlayId(msgData.playId);
      if (dataLogic.isHide && bcbmDataLogic.continuousNotBetInning > 4) {
        bcbmDataLogic.setKickedOut(true);
        this.exitRoom();
      }
      this.updateRanking(msgData.others);
      var settlementAmount = msgData.endData.split(",")[0];
      bcbmDataLogic.setSettlementAmount(settlementAmount);
      var balance = msgData.endData.split(",")[1];
      dataLogic.setUserBalance(balance);
      this.setCountPlayer(msgData.count);
      1 == msgData.isStop ? isMaintaining = true : this.simulateOnLinePlayerNum(msgData.count);
    }), _defineProperty(_cc$Class, "openAllCardAction", function openAllCardAction(data) {
      cc.log("\u7ffb\u62cd\uff01\uff01\uff01\uff01");
      if (dataLogic.isHide) return;
      this.openCardStage(data);
    }), _defineProperty(_cc$Class, "onBet", function onBet(msgData) {
      var betNum = 0;
      for (var i = 0; i < 8; i++) {
        betNum = msgData.allBet[i] - bcbmDataLogic.areaBetNum[i];
        betNum > 0 && this.castSomeChipToTable(betNum, i, null, 20);
        this.setBetAmount(i, false, msgData.allBet[i]);
      }
      this.setCountPlayer(msgData.count);
      audioMgr.playEffect(this.audioSomeChip);
    }), _defineProperty(_cc$Class, "castSomeChipToTable", function castSomeChipToTable(totalChipNum, areaKey) {
      var startPos = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
      var maxCount = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10;
      var isEnd = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
      if (dataLogic.isHide) return;
      var chips = this.genSomeChip(totalChipNum, maxCount);
      function doLoop(_this, _loopLength) {
        for (var j = 0; j < _loopLength; j++) {
          var pos = null == startPos ? chips[j].position : startPos;
          chips[j].position = null == startPos ? _this.randomOtherPos() : startPos;
          _this.chipAction(pos, _this.randomChipPos(areaKey), chips[j], false, areaKey, j, isEnd);
        }
      }
      doLoop(this, chips.length);
    }), _defineProperty(_cc$Class, "randomFrom", function randomFrom(lowerValue, upperValue) {
      return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);
    }), _defineProperty(_cc$Class, "randomChipPos", function randomChipPos(betAreaKey) {
      var x = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].x + (7 == betAreaKey || 3 == betAreaKey ? 10 : 0 == betAreaKey || 4 == betAreaKey ? 45 : 30), chipRandomPos[betAreaKey].x + (3 == betAreaKey || 7 == betAreaKey ? 130 : 150));
      var y = dataLogic.randomIntBySeed(chipRandomPos[betAreaKey].y + (betAreaKey > 3 ? 40 : 70), chipRandomPos[betAreaKey].y + (betAreaKey > 3 ? 90 : 120));
      return cc.v2(x, y);
    }), _defineProperty(_cc$Class, "randomOtherPos", function randomOtherPos() {
      return {
        x: 0,
        y: dataLogic.randomInt(otherPlayerYMin, otherPlayerYMax)
      };
    }), _defineProperty(_cc$Class, "chipAction", function chipAction(startPos, endPos, chip, isEndKill, betAreaKey, index, notDelayAction) {
      var _this8 = this;
      if (dataLogic.isHide) {
        if (isEndKill) this.recycleChip(chip); else {
          chip.position = endPos;
          this.chipNode[betAreaKey].push(chip);
        }
        return;
      }
      var actionTime = startPos.sub(endPos).mag() * chipMoveSpeed;
      var move = cc.moveTo(actionTime, endPos).easing(cc.easeInOut(3));
      chip.stopAllActions();
      chip.rotation = 360 * Math.random();
      if (isEndKill) {
        var seq = cc.sequence(move, cc.callFunc(function() {
          _this8.recycleChip(chip);
        }));
        chip.runAction(seq);
      } else {
        this.chipNode[betAreaKey].push(chip);
        chip.runAction(cc.sequence(cc.delayTime(notDelayAction ? 0 : .1 * index), cc.callFunc(function() {
          chip.opacity = 255;
        }, this), move, cc.callFunc(function() {
          if (_this8.chipNode[betAreaKey].length >= maxTableChipNum && !notDelayAction) {
            var chip = _this8.chipNode[betAreaKey].shift();
            chip.stopAllActions();
            _this8.recycleChip(chip);
          }
        }, this)));
      }
    }), _defineProperty(_cc$Class, "genSomeChip", function genSomeChip(totalChipNum) {
      var maxCount = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10;
      var isRecover = arguments[2];
      var base = 2 * dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].ante;
      var count = Math.ceil(totalChipNum / base);
      var _maxCount = isRecover ? maxTableChipNum : maxCount;
      count = count > _maxCount ? _maxCount : count;
      var chipNum = 0, key = void 0, chips = [], pos = {
        x: 0,
        y: 0
      };
      for (var i = 0; i < count; i++) {
        key = dataLogic.randomInt(0, 4);
        chipNum = bcbmDataLogic.betBtnConfig[key];
        chips.push(this.genChip(chipNum, pos));
      }
      return chips;
    }), _defineProperty(_cc$Class, "genChip", function genChip(chipNum, pos) {
      var chip = null;
      if (0 == this.leisureChip.length) {
        chip = kf.getObj(constant.PoolId.Chip, this.chipLayer, this.pfChip);
        chip.getChildByName("bg").width = 26;
        chip.getChildByName("bg").height = 26;
      } else {
        chip = this.leisureChip.pop();
        if (chip.isUse) {
          cc.log("---------\u8fd9\u4e2a\u7b79\u7801\u5df2\u7ecf\u88ab\u7528\u4e86");
          this.genChip(chipNum, pos);
          return;
        }
        chip.opacity = 255;
      }
      var key = kf.getArrIndexByValue(bcbmDataLogic.betBtnConfig, chipNum);
      if (-1 == key) {
        cc.error("\u672a\u627e\u5230\u5bf9\u5e94\u7684\u4e0b\u6ce8\u6309\u94ae\u914d\u7f6e", chipNum);
        return;
      }
      var data = {
        chipNum: chipNum,
        iconKey: key,
        pos: pos,
        color: chipTxtColor[key]
      };
      chip.getComponent("chip").initUI(data);
      chip.opacity = 0;
      chip.isUse = true;
      return chip;
    }), _defineProperty(_cc$Class, "betCb", function betCb(msgData, localCbArg) {
      if (msgData.Code == constant.HttpCode.Succeed) {
        bcbmDataLogic.setContinuousNotBetInning(-1);
        curTimesHaveBet = true;
      } else {
        bcbmDataLogic.setAreaMyBetNum(localCbArg.betArea, Number(bcbmDataLogic.areaMyBetNum[localCbArg.betArea]).minus(localCbArg.betNum));
        this.setBetAmount(localCbArg.betArea, true, bcbmDataLogic.areaMyBetNum[localCbArg.betArea]);
        msgData.Code == constant.HttpCode.NotSufficientFunds ? this.setPlayerBalance(msgData.Data) : this.setPlayerBalance(dataLogic.userBalance.add(localCbArg.betNum));
      }
    }), _defineProperty(_cc$Class, "simulateOnLinePlayerNum", function simulateOnLinePlayerNum(num) {
      var _this9 = this;
      var updateCount = 0;
      var min = num - 10, max = num + 10;
      min < 1 && (min = 1);
      this.updateSimulateOnLinePlayerNum && this.unschedule(this.updateSimulateOnLinePlayerNum);
      this.updateSimulateOnLinePlayerNum = function() {
        if (bcbmDataLogic.curSatge == bcbmConstant.Satge.Bet) {
          _this9.unschedule(_this9.updateSimulateOnLinePlayerNum);
          return;
        }
        _this9.setCountPlayer(dataLogic.randomInt(min, max));
        updateCount++;
        if (5 == updateCount) {
          updateCount = 0;
          http.post(bcbmConstant.PostOnLinePlayerCount);
        }
      };
      this.schedule(this.updateSimulateOnLinePlayerNum, 1);
    }), _defineProperty(_cc$Class, "reqOnLinePlayerCountCb", function reqOnLinePlayerCountCb(msg) {
      msg.Code == constant.HttpCode.Succeed && this.simulateOnLinePlayerNum(msg.Data);
    }), _cc$Class));
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  bindAndCheckPhoneNum: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "ff85eSKOE5CS7cer/hUmyxq", "bindAndCheckPhoneNum");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _doneCb = null;
    var _timerId = null;
    var _normalColor = new cc.Color(209, 132, 86);
    var _disableColor = new cc.Color(160, 153, 137);
    var _isBindPhoneNum = true;
    var _postArg = {
      Action: "VerifyPhoneNum",
      PhoneNum: null,
      VerifyCode: null
    };
    var _postSendMobileCode = null;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebPhoneNum: cc.EditBox,
        ebCheckCode: cc.EditBox,
        delPhoneNumIcon: cc.Node,
        centre: cc.Node,
        hintBg: cc.Node,
        txtConfirm: cc.Label,
        txtGetCheckCode: cc.Label,
        sfGrayBtn: cc.SpriteFrame,
        sfYellowBtn: cc.SpriteFrame,
        sfDisableInputBg: cc.SpriteFrame,
        btSendSMSCheckCode: cc.Button
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "CheckShowCodeCb", this.CheckShowCodeCb.bind(this) ], [ "reqSendSMSCheckCodeCb", this.reqSendSMSCheckCodeCb.bind(this) ], [ "checkPhoneCb", this.checkPhoneCb.bind(this) ], [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _timerId = null;
        this.toastShow();
        this.registerEvent();
        _doneCb = initArg.doneCb;
        _isBindPhoneNum = initArg.isBindPhoneNum;
        _postSendMobileCode = kf.clone(constant.PostSendMobileCode);
        if (_isBindPhoneNum) {
          this.setTitleContent("\u7ed1\u5b9a\u624b\u673a\u53f7");
          _postArg.Action = "BindPhoneNum";
          _postSendMobileCode.type = constant.SendCheckCodeUesType.BindPhone;
          _postArg.type = _postSendMobileCode.type;
          if (initArg.isFirstBind) {
            this.centre.y = -17;
            this.hintBg.opacity = 255;
            initArg.hintStr && (this.hintBg.getChildByName("hint").getComponent(cc.Label).string = initArg.hintStr);
          }
        } else {
          this.setTitleContent("\u9a8c\u8bc1\u624b\u673a\u53f7");
          _postArg.Action = "VerifyPhoneNum";
          _postSendMobileCode.type = initArg.isUnbindPhoneNum ? constant.SendCheckCodeUesType.Unbind : constant.SendCheckCodeUesType.Check;
          _postArg.type = _postSendMobileCode.type;
          this.ebPhoneNum.string = dataLogic.userPhoneNum;
          this.ebPhoneNum.node.getChildByName("mask").active = true;
          this.ebPhoneNum.node.parent.color = new cc.Color(228, 225, 206);
          this.ebPhoneNum.node.parent.getComponent(cc.Sprite).spriteFrame = this.sfDisableInputBg;
        }
        this.txtSendCheckCode = this.btSendSMSCheckCode.node.getChildByName("txt").getComponent(cc.Label);
        null != initArg.totalStep && (initArg.curStep == initArg.totalStep ? this.txtConfirm.string = initArg.curStep + "/" + initArg.totalStep + " \u786e\u5b9a" : this.txtConfirm.string = initArg.curStep + "/" + initArg.totalStep + " \u4e0b\u4e00\u6b65");
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        var result = void 0;
        switch (eventName) {
         case "reqSendCheckCode":
          if (_isBindPhoneNum) {
            result = dataLogic.checkFormat(this.ebPhoneNum.string, {
              PhoneNum: true,
              name: "\u624b\u673a\u53f7"
            });
            if (result) {
              this.showLayerTip(result);
              return;
            }
          }
          _postArg.PhoneNum = this.ebPhoneNum.string;
          _postSendMobileCode.mobileNum = this.ebPhoneNum.string;
          this.reqDateAndShowLoadView({
            Action: "GetImageCode",
            CheckShowCode: 2,
            isJack: 1
          }, "CheckShowCodeCb", "bindAndCheckPhoneNum", true);
          break;

         case "confirm":
          if (_isBindPhoneNum) {
            result = dataLogic.checkFormat(this.ebPhoneNum.string, {
              PhoneNum: true,
              name: "\u624b\u673a\u53f7"
            });
            if (result) {
              this.showLayerTip(result);
              return;
            }
            _postArg.PhoneNum = this.ebPhoneNum.string;
          }
          result = dataLogic.checkFormat(this.ebCheckCode.string, {
            PhoneCheckCode: true,
            name: "\u9a8c\u8bc1\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          _postArg.VerifyCode = this.ebCheckCode.string;
          this.reqDateAndShowLoadView(_postArg, "checkPhoneCb", null, true);
          break;

         case "delPhoneNum":
          this.ebPhoneNum.string = "";
          this.delPhoneNumIcon.active = false;
        }
      },
      CheckShowCodeCb: function CheckShowCodeCb(msg, jsName) {
        if ("bindAndCheckPhoneNum" != jsName) return;
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        _postSendMobileCode.mobileNum = this.ebPhoneNum.string;
        cc.log("=-=-=-=-", _postSendMobileCode, this.ebPhoneNum.string);
        1 == msg.BackData ? this.reqCheckCode(false, "bindAndCheckPhoneNum") : this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", true, true);
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this = this;
        if ("bindAndCheckPhoneNum" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "bindAndCheckPhoneNum") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          delete _postSendMobileCode.imgCode;
          _postSendMobileCode.Ticket = ticket;
          _this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", null, true);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              delete _postSendMobileCode.Ticket;
              _postSendMobileCode.imgCode = checkCode;
              _this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", callbacks, true);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      reqSendSMSCheckCodeCb: function reqSendSMSCheckCodeCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.restrictAgainReqSendCheckCode();
          callbacks && callbacks.closeCheckCodeDialog();
        } else msg.Code == constant.HttpCode.CheckCodeError ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      checkPhoneCb: function checkPhoneCb(msg) {
        cc.log("checkPhoneCb", msg);
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          clearInterval(_timerId);
          _timerId = null;
          this.toastClose();
          if (msg.BackData) {
            dataLogic.setUserBalance(dataLogic.userBalance + Number(msg.BackData));
            dataLogic.setRegisterCashGift(msg.BackData);
            resMgr.loadSingleRes("prefab/baoWang/registerCashGift", function(res) {
              var node = cc.instantiate(res);
              node.parent = cc.find("Canvas/toastLayer/1");
              node.getComponent("registerCashGift").init("register", dataLogic.registerCashGift);
            }, cc.Prefab);
          }
          _doneCb(msg.Data, msg.StrCode);
        } else -2 == msg.Code && this.showLayerTip(msg.StrCode);
      },
      restrictAgainReqSendCheckCode: function restrictAgainReqSendCheckCode() {
        var _this2 = this;
        this.btSendSMSCheckCode.interactable = false;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfGrayBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _disableColor;
        this.txtSendCheckCode.string = "60s";
        var time = 60;
        null == _timerId && (_timerId = setInterval(function() {
          time--;
          if (0 == time) {
            clearInterval(_timerId);
            _timerId = null;
            _this2.openReqSendCheckCode();
            return;
          }
          _this2.txtSendCheckCode.string = time + "s";
        }, 1e3));
      },
      openReqSendCheckCode: function openReqSendCheckCode() {
        this.btSendSMSCheckCode.interactable = true;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfYellowBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _normalColor;
        this.txtSendCheckCode.string = "\u83b7\u53d6\u9a8c\u8bc1\u7801";
      },
      closeBeforeHandle: function closeBeforeHandle() {
        clearInterval(_timerId);
        _timerId = null;
      },
      editChangeEvent: function editChangeEvent(txt, editbox, name) {
        "phoneNum" == name && (this.delPhoneNumIcon.active = "" != txt);
      },
      editEvent: function editEvent(txt, editbox, data) {
        editbox.isFocused() || (editbox.string = "");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  bonusGame: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "33ebbcz239GcLBbLhOzcnV0", "bonusGame");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        txtMoney: cc.Label,
        animBet: [ cc.Animation ],
        animHintCheck: cc.Animation,
        animStart: cc.Animation,
        pfEfDefeat: cc.Prefab,
        pfEfVictory: cc.Prefab,
        pfEfPK: cc.Prefab,
        sfPK: [ cc.SpriteFrame ],
        saSkill: cc.SpriteAtlas,
        redCard: cc.Node,
        blueCard: cc.Node,
        mask: cc.Node,
        effectLayer: cc.Node,
        acStart: {
          default: null,
          type: cc.AudioClip
        },
        acDefeat: {
          default: null,
          type: cc.AudioClip
        },
        acLighting: {
          default: null,
          type: cc.AudioClip
        },
        acVictory: {
          default: null,
          type: cc.AudioClip
        },
        txtMultiNum: [ cc.Label ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "bonusGameBetCb", this.bonusGameBetCb.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        for (var k = 0; k < 3; k++) this.txtMultiNum[k].string = "x" + kingDataLogic.bonusGameMultiNum[k];
        dataLogic.setCurGameId(constant.GameId.King);
        this.initSceneBase();
        this.registerEvent();
        this.txtMoney.string = kingDataLogic.eanringsNum;
        this.curChoiceBetBtn = null;
        this.efDefeat = null;
        this.efVictory = null;
        this.efPk = null;
        this.spPKResult = null;
        this.redIndex = null;
        this.blueIndex = null;
        this.animHintCheck.node.active = false;
        this.intoNewTime();
      },
      start: function start() {},
      loadSceneDispos: function loadSceneDispos() {
        cc.log("\u5207\u6362\u573a\u666f\u524d\u5904\u7406");
        this.unscheduleAllCallbacks();
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed) {
          dataLogic.setUserBalance(msg.Data.balance);
          this.loadScene(constant.SceneName.BaseGame);
        } else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
        }
      },
      tryExit: function tryExit() {
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        http.post(constant.PostReqUserBalance, "updateBalanceCb");
      },
      btnBetEvent: function btnBetEvent(event, data) {
        var _this = this;
        audioMgr.playEffect(this.audioBtn);
        if (!this.animHintCheck.node.active) return;
        event.target.getChildByName("check").getComponent(cc.Animation).play();
        this.scheduleOnce(function() {
          event.target.getChildByName("check").getComponent(cc.Animation).stop();
          event.target.getChildByName("check").opacity = 255;
          _this.playPKEffect();
        }, 1);
        this.curChoiceBetBtn = event.target.getChildByName("check");
        this.animHintCheck.node.active = false;
        switch (data) {
         case "betRed":
          kingConstant.PostBonusGameBet.betSeat = 1;
          break;

         case "betDeuce":
          kingConstant.PostBonusGameBet.betSeat = 2;
          break;

         case "betBlue":
          kingConstant.PostBonusGameBet.betSeat = 3;
        }
        if (null == this.efPk) {
          this.efPk = cc.instantiate(this.pfEfPK);
          this.efPk.parent = this.effectLayer;
          this.spPKResult = this.efPk.getChildByName("bonusgame_pk_zi").getComponent(cc.Sprite);
          this.efPk.active = false;
        }
        dataLogic.setUserBalance(dataLogic.userBalance - kingDataLogic.eanringsNum);
        kingDataLogic.setEanringsNum(0);
        this.spPKResult.spriteFrame = null;
        http.post(kingConstant.PostBonusGameBet, "bonusGameBetCb");
      },
      playPKEffect: function playPKEffect() {
        var _this2 = this;
        audioMgr.playEffect(this.acLighting);
        this.mask.active = true;
        this.redCard.opacity = 0;
        this.blueCard.opacity = 0;
        this.efPk.active = true;
        var card1 = this.efPk.getChildByName("bonusgame_pk_pai1").getComponent(cc.Sprite);
        card1.spriteFrame = this.saSkill.getSpriteFrame("backCard");
        var card2 = this.efPk.getChildByName("bonusgame_pk_pai2").getComponent(cc.Sprite);
        card2.spriteFrame = this.saSkill.getSpriteFrame("backCard");
        this.efPk.getComponent(cc.Animation).on("finished", this.pkAnimFinished, this);
        this.efPk.getComponent(cc.Animation).play();
        this.scheduleOnce(function() {
          card1.spriteFrame = _this2.saSkill.getSpriteFrame("skill" + _this2.redIndex);
        }, 2.25);
        this.scheduleOnce(function() {
          card2.spriteFrame = _this2.saSkill.getSpriteFrame("skill" + _this2.blueIndex);
        }, 2.54);
      },
      pkAnimFinished: function pkAnimFinished() {
        this.txtMoney.string = kingDataLogic.eanringsNum;
        this.efPk.active = false;
        this.playPKResultEffect();
      },
      playPKResultEffect: function playPKResultEffect() {
        if (0 == kingDataLogic.eanringsNum) {
          audioMgr.playEffect(this.acDefeat);
          if (null == this.efDefeat) {
            this.efDefeat = cc.instantiate(this.pfEfDefeat);
            this.efDefeat.parent = this.effectLayer;
          }
          var anim = this.efDefeat.getComponent(cc.Animation);
          anim.on("finished", this.tryExit.bind(this));
          anim.play();
        } else {
          audioMgr.playEffect(this.acVictory);
          if (null == this.efVictory) {
            this.efVictory = cc.instantiate(this.pfEfVictory);
            this.efVictory.parent = this.effectLayer;
          } else this.efVictory.active = true;
          var txt = this.efVictory.getChildByName("txt").getComponent(cc.Label);
          kingDataLogic.eanringsNum > 0 && (txt.node.opacity = 255);
          txt.string = "0.00";
          var _anim = this.efVictory.getComponent(cc.Animation);
          _anim.on("finished", this.intoNewTime, this);
          _anim.play();
          var i = 0, jumpCount = 10, interval = .05;
          this.schedule(function() {
            i++;
            txt.string = (kingDataLogic.eanringsNum * (i / jumpCount)).toFixed(2);
          }, interval, jumpCount - 1);
        }
      },
      intoNewTime: function intoNewTime() {
        var _this3 = this;
        audioMgr.playEffect(this.acStart);
        if (this.curChoiceBetBtn) {
          this.curChoiceBetBtn.opacity = 0;
          this.efVictory.active = false;
        }
        this.blueCard.opacity = 0;
        this.redCard.opacity = 0;
        this.animStart.on("finished", function() {
          _this3.redCard.opacity = 255;
          var endPos = kf.clone(_this3.redCard.position);
          _this3.redCard.position = cc.v2(0, 268);
          _this3.redCard.scale = .5;
          _this3.redCard.runAction(cc.spawn(cc.moveTo(.3, endPos), cc.scaleTo(.3, 1)));
          _this3.blueCard.opacity = 255;
          endPos = kf.clone(_this3.blueCard.position);
          _this3.blueCard.position = cc.v2(0, 268);
          _this3.blueCard.scale = .5;
          _this3.blueCard.runAction(cc.spawn(cc.moveTo(.3, endPos), cc.scaleTo(.3, 1)));
          _this3.mask.active = false;
          _this3.animHintCheck.node.active = true;
        });
        this.animStart.play();
      },
      btnEvent: function btnEvent(event, data) {
        audioMgr.playEffect(this.audioBtn);
        cc.log("btnEvent", data);
        switch (data) {
         case "setting":
         case "help":
         case "recharge":
          break;

         case "exit":
          "" != event && http.post(kingConstant.PostExitBonusGame, "exitBonusGameCb");
          this.tryExit();
          break;

         default:
          cc.warn("\u672a\u77e5\u7684\u4e8b\u4ef6\u6570\u636e:", data);
        }
      },
      bonusGameBetCb: function bonusGameBetCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed) {
          this.mask.active = false;
          this.blueCard.opacity = 255;
          this.redCard.opacity = 255;
          this.efPk.getComponent(cc.Animation).stop();
          this.efPk.active = false;
          this.animHintCheck.node.active = true;
          this.curChoiceBetBtn.getComponent(cc.Animation).stop();
          this.curChoiceBetBtn.opacity = 0;
          dataLogic.setUserBalance(dataLogic.userBalance + kingDataLogic.eanringsNum);
          this.unscheduleAllCallbacks();
          var arg = {
            type: constant.ToastType.RequestError,
            extend: {
              hintStr: msg.StrCode
            }
          };
          kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
          return;
        }
        var data = msg.Data;
        this.redIndex = data.redIndex;
        this.blueIndex = data.blueIndex;
        kingDataLogic.setEanringsNum(data.winNum);
        data.winNum > 0 && dataLogic.setUserBalance(dataLogic.userBalance + Number(data.winNum));
        this.spPKResult.spriteFrame = this.sfPK[data.winSeat - 1];
      },
      update: function update(dt) {}
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  buttonScaler: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "42a84WMJolI5rjhREU32oxs", "buttonScaler");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        pressedScaleNum: 0,
        pressedDuration: 0
      },
      touchStart: function touchStart() {
        this.node.stopAllActions();
        this.node.runAction(cc.scaleTo(this.pressedDuration, this.pressedScaleNum));
      },
      touchEnd: function touchEnd() {
        this.node.stopAllActions();
        this.node.runAction(cc.scaleTo(this.pressedDuration, 1));
      },
      touchCancel: function touchCancel() {
        this.node.stopAllActions();
        this.node.runAction(cc.scaleTo(this.pressedDuration, 1));
      },
      onLoad: function onLoad() {
        this.node.on("touchstart", this.touchStart, this);
        this.node.on("touchend", this.touchEnd, this);
        this.node.on("touchcancel", this.touchCancel, this);
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {} ],
  callDiceRecordItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "cb2c8SW6GVNRI2NNWtqgr/s", "callDiceRecordItem");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        bg: cc.Node,
        userName: cc.Label,
        betNum: cc.Label,
        dice: cc.Node,
        diceAtlas: cc.SpriteAtlas,
        recordItemBg: [ cc.SpriteFrame ]
      },
      onLoad: function onLoad() {},
      init: function init(data, index) {
        var itemArr = data.split(",");
        this.userName.string = itemArr[0];
        this.betNum.string = itemArr[1] + "\u4e2a";
        this.userName.node.color = index % 2 == 0 ? new cc.Color(0, 128, 0) : new cc.Color(145, 90, 48);
        this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame = 0 == index ? this.recordItemBg[0] : this.recordItemBg[1];
        this.dice.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, itemArr[2]);
      }
    });
    cc._RF.pop();
  }, {} ],
  callDiceRecord: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "291c1IhjttL5L2ZprO4Zv7Y", "callDiceRecord");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        recordMain: cc.Node,
        nullRecord: cc.Label,
        itemPf: cc.Prefab,
        view: cc.Node,
        content: cc.Node,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        loadIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "syncRecordCb", this.syncRecordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      loadResource: function loadResource(sceneName) {
        var _this = this;
        if (dataLogic.isToastLoad) this.toastShow(); else {
          var arg = {
            type: constant.ToastType.Loading
          };
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var preloadRes = constant.GameRes[sceneName];
          var i = 0, data = void 0, time = new Date().getTime();
          var loadR = function loadR() {
            if (i < preloadRes.length) {
              data = preloadRes[i];
              cc.loader.loadRes(data.path, data.resType, function(err, res) {
                if (err) {
                  cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
                  return;
                }
                cc.log("\u52a0\u8f7d\u8d44\u6e90", data.path, new Date().getTime() - time);
                time = new Date().getTime();
                ++i;
                loadR();
              });
            } else {
              cc.log("\u52a0\u8f7d\u573a\u666f", new Date().getTime() - time);
              time = new Date().getTime();
              kf.killObj(load);
              _this.toastShow();
              dataLogic.isToastLoad = true;
            }
          };
          loadR();
        }
      },
      toastShow: function toastShow() {},
      reuse: function reuse() {
        this.registerEvent();
        this.initCount = 10;
        this.content.y = this.view.height / 2;
        this.initRecordItem(this.initCount);
        this.gameTypeid = constant.GameId.Dice;
        this.loadResource(constant.ToastName.InfoToast);
      },
      syncRecordCb: function syncRecordCb(msg) {
        if (1 == msg.Code) {
          var msgData = [ {
            userName: "1",
            betNum: "5,6"
          }, {
            userName: "2",
            betNum: "2,3"
          }, {
            userName: "3",
            betNum: "3,4"
          }, {
            userName: "4",
            betNum: "4,5"
          }, {
            userName: "5",
            betNum: "5,6"
          } ];
          msg.Data = msgData;
          this.showRecordItem(msg.Data);
        }
      },
      initRecordItem: function initRecordItem(initCount) {
        for (var i = 0; i < initCount; i++) {
          var item = cc.instantiate(this.itemPf);
          item.parent = this.content;
          item.tag = i;
          item.opacity = 0;
          item.y = -(item.height / 2 + item.height * i);
        }
      },
      showRecordItem: function showRecordItem(data) {
        var item = void 0;
        for (var i = data.length; i < this.initCount; i++) {
          item = this.content.getChildByTag(i);
          item.opacity = 0;
        }
        if (data.length > this.initCount) data.length = this.initCount; else if (0 == data.length) {
          this.nullRecord.node.active = true;
          return;
        }
        if (0 != data.length) {
          this.nullRecord.node.active = false;
          this.content.height = data.length * this.content.getChildByTag(0).height;
        }
        for (var _i = 0; _i < data.length; _i++) {
          item = this.content.getChildByTag(_i);
          item.opacity = 255;
          item.getComponent("callDiceRecordItem").init(data[_i]);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  cattleConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "dfe665jM6tOf47+90DduVMT", "cattleConstant");
    "use strict";
    window.cConstant = window.cConstant || {};
    cConstant.maxPlayerNum = 4;
    cConstant.CardType = {
      niu_0: 0,
      niu_niu: 10,
      niu_silver: 11,
      niu_gold: 12,
      niu_bomb: 13,
      niu_small: 14
    };
    cConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    cConstant.PostMatching = {
      action: "JoinRoom",
      roomId: "011"
    };
    cConstant.SeeThreePostMatching = {
      action: "JoinRoom",
      roomId: "031"
    };
    cConstant.TongBiPostMatching = {
      action: "JoinRoom",
      roomId: "041"
    };
    var _action = "DoPlay";
    cConstant.PostVillage = {
      action: _action,
      eventName: "village",
      villageNum: -1
    };
    cConstant.PostBet = {
      action: _action,
      eventName: "bet",
      betNum: -1
    };
    cConstant.OpenCards = {
      action: _action,
      eventName: "openCards"
    };
    cc._RF.pop();
  }, {} ],
  cattleDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4dcf9ab2WVAMr9/ZSMoR94T", "cattleDataLogic");
    "use strict";
    window.cDataLogic = {
      init: function init() {
        this.selfSeatId = 0;
        this.qzBtnConfig = [];
        this.betBtnConfig = [];
        this.playerState = [];
        this.roomId = "011";
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setVillageMul: function setVillageMul(data) {
        this.qzBtnConfig = kf.clone(data);
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        this.playerState[UISeatId] = state;
        console.log("this.playerState", this.playerState);
      },
      setCurBetNum: function setCurBetNum(num) {
        this.curBetNum = num;
      },
      getViewSeat: function getViewSeat(serverSeatId) {
        cc.log("this.seatTable", this.seatTable);
        for (var i = 0; i < this.seatTable.length; i++) if (this.seatTable[i] == serverSeatId) return i;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      getCardValue: function getCardValue(cardKey) {
        return cardKey % 13 + 1;
      },
      getCardCorol: function getCardCorol(cardKey) {
        return Math.floor(cardKey / 13);
      },
      getCardValueAndColor: function getCardValueAndColor(cardKey) {
        var value = this.getCardValue(cardKey);
        var type = this.getCardCorol(cardKey);
        var order = void 0;
        order = [ 11, 12, 13 ].indexOf(value) >= 0 ? 10 : value;
        return {
          value: value,
          order: order,
          type: type,
          key: cardKey
        };
      },
      sortCard: function sortCard(pokers) {
        this.order(pokers);
        var cards = pokers, lave = 0, a = void 0, b = void 0;
        for (var i = 0; i < pokers.length; i++) {
          lave += pokers[i].order;
          lave %= 10;
        }
        for (var j = 0; j < pokers.length; j++) for (var k = Number(j) + 1; k < pokers.length; k++) {
          var total = (pokers[j]["order"] + pokers[k]["order"]) % 10;
          if (total == lave) {
            a = j;
            b = k;
          }
        }
        a && b && (cards = this.moveArr(pokers, a, b));
        return cards;
      },
      moveArr: function moveArr(arr, a, b) {
        var newArr = [];
        for (var i = 0; i < arr.length; i++) i != Number(a) && i != Number(b) && newArr.push(arr[i]);
        newArr.push(arr[a], arr[b]);
        return newArr;
      },
      getSFByImgName: function getSFByImgName(spriteAtlas, imgName) {
        return spriteAtlas.getSpriteFrame(imgName);
      },
      isNiu: function isNiu(pokers) {
        this.order(pokers);
        if (this.is_small_niu(pokers)) return cConstant.CardType.niu_small;
        if (this.is_bomb(pokers)) return cConstant.CardType.niu_bomb;
        if (this.is_gold_niu(pokers)) return cConstant.CardType.niu_gold;
        if (this.is_silver_niu(pokers)) return cConstant.CardType.niu_silver;
        var niu = this.getNiuByCards(pokers);
        return 0 == niu ? cConstant.CardType.niu_0 : 10 == niu ? cConstant.CardType.niu_niu : niu;
      },
      is_small_niu: function is_small_niu(pokers) {
        var sum = 0;
        for (var i = 0; i < pokers.length; i++) {
          if (pokers[i].order >= 5) return false;
          sum += pokers[i].order;
        }
        return sum <= 10;
      },
      is_bomb: function is_bomb(pokers) {
        if (pokers[0].value == pokers[3].value) return true;
        if (pokers[1].value == pokers[4].value) {
          pokers.push(pokers.splice(0, 1)[0]);
          return true;
        }
        return false;
      },
      is_gold_niu: function is_gold_niu(pokers) {
        return pokers[4].value > 10;
      },
      is_silver_niu: function is_silver_niu(pokers) {
        return 10 == pokers[4].value && pokers[3].value > 10;
      },
      getNiuByCards: function getNiuByCards(pokers) {
        var lave = 0;
        for (var i = 0; i < pokers.length; i++) {
          lave += pokers[i].order;
          lave %= 10;
        }
        for (var j = 0; j < pokers.length; j++) for (var k = Number(j) + 1; k < pokers.length; k++) if ((pokers[j].order + pokers[k].order) % 10 == lave) {
          if (0 == lave) {
            pokers.push(pokers.splice(j, 1)[0]);
            return 10;
          }
          return lave;
        }
        return 0;
      },
      order: function order(pokers) {
        pokers && pokers.length > 1 && pokers.sort(function(a, b) {
          if (a.order === b.order) return b.value === a.value ? b.type - a.type : b.value - a.value;
          return b.order - a.order;
        });
        return pokers;
      }
    };
    cDataLogic.init();
    cc._RF.pop();
  }, {} ],
  cattleHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "8c7a3wSzHZBzbco2tklD5Dt", "cattleHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Cattle);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "cattle/bg", "cattle/table", "card", "cattle/cow", "cattle/effect/cow/cattle_paixing_di1", "cattle/ui/zhuang", "cattle/effect/start/cattle_start_di_00008" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  cattleScene: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c62b4Rt9KxOSIifuxIbFmCp", "cattleScene");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        cardTypeView: cc.Node,
        betNum: cc.Node,
        roomNum: cc.Node,
        cardBoxP: cc.Node,
        cardBox: [ cc.Node ],
        backCardPf: cc.Prefab,
        dispenseCardNode: cc.Node,
        openCardBox: cc.Node,
        pokersSf: cc.SpriteFrame,
        pinPai: cc.Node,
        pinPaiLabel: [ cc.Label ],
        pinWarnErr: cc.Node,
        haveNiu: cc.Node,
        nullNiu: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        villageMultiple: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        grab: cc.Node,
        grabBtn: [ cc.Button ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        villageIcon: cc.Node,
        villageBgBox: cc.Node,
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        gameStartAnim: cc.Node,
        tongChiAnim: cc.Node,
        tongPeiAnim: cc.Node,
        winAnim: cc.Node,
        isCow: [ cc.Node ],
        cowAnimPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        isNiuAtlas: cc.SpriteAtlas,
        cowBgAudio: {
          default: null,
          type: cc.AudioClip
        },
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        femaleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        pinError: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        clickPoker: {
          default: null,
          type: cc.AudioClip
        },
        upturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onVillage", this.onVillage.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "village", this.village.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "onJoin", this.socketJoinMsg.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Cattle);
        dataLogic.setLimitPlayerNum(4);
        this.registerEvent();
        this.backCard = [];
        this.clearOtherPlayer();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        this.clickBind();
        var isCheck = cc.sys.localStorage.getItem("game_cattleAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        for (var i = 0; i < 20; i++) {
          this.backCard[i] = cc.instantiate(this.backCardPf);
          this.backCard[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.backCard[i].parent = this.dispenseCardNode;
          this.backCard[i].opacity = 0;
        }
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(constant.GameId.Cattle);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + selRoomKey);
        this.setBetNumState();
        var playerPos = [ {
          x: -23,
          y: -165
        }, {
          x: 155,
          y: 78
        }, {
          x: 228,
          y: 92
        }, {
          x: -155,
          y: 74
        } ];
        for (var _i = 0; _i < this.player.length; _i++) {
          this.player[_i].playerPos = playerPos[_i];
          this.bindLongTouchEvent(this.player[_i]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.roomNum.x + this.roomNum.width + 20);
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.pinWarnErr.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.villageBgBox.stopAllActions();
        var len = void 0, node = void 0;
        for (var i = 0; i < this.pokers.length; i++) {
          len = this.pokers[i].childrenCount;
          for (var j = 0; j < len; j++) {
            node = this.pokers[i].children[j];
            node.stopAllActions();
            i != constant.SelfUISeatId && (node.x = -100);
          }
          this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
        }
        for (var _j = 0; _j < 20; _j++) this.backCard[_j].opacity = 0;
      },
      gameShow: function gameShow() {
        var UISeatId = void 0;
        cc.log("this.progress", this.progress);
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        var seatId = void 0;
        if (this.progress >= 2) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.getVillage(this.confirmVillage);
          2 == this.progress && this.showVillageCallFun(UISeatId);
          if (this.progress >= 3) {
            for (var i = 0; i < this.pokers.length; i++) {
              seatId = dataLogic.getSeatIdByUISeatId(i);
              if (!this.player[i].active || dataLogic.isOnlooker(seatId) || 0 == this.openCardsArr[seatId].length) continue;
              this.initCards(i);
            }
            for (var k = 0; k < this.openCardsArr.length; k++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(k);
              if (this.openCardsArr[k].length > 0) {
                k == constant.SelfUISeatId && (this.openCardBox.active = false);
                for (var j = 0; j < this.pokers[UISeatId].childrenCount; j++) this.pokers[UISeatId].children[j].x = 50 * (j - 2);
                this.setPlayerHandCard(UISeatId, this.openCardsArr[k]);
                var niuNum = this.showPokers(UISeatId, this.openCardsArr[k]);
                this.isCow[UISeatId].active = true;
                this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
                this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
              } else if (dataLogic.isFriendRoom) ; else if (k == constant.SelfUISeatId) {
                this.pokers[k].active = false;
                this.openCardBox.active = true;
                var _seatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
                this.showMyPorkers(this.onBetData, _seatId);
              }
            }
            if (this.progress > 3) {
              this.reciprocal.active = false;
              if (this.isResultAnim) if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
                this.matchBtn.active = true;
                this.autoMatch.active = true;
              }
              return;
            }
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          if (!dataLogic.isOnlooker()) {
            if (1 == this.progress && newDate > 0) {
              this.isVillage || (this.grab.active = true);
              this.wait.active = true;
            }
            if (2 == this.progress && newDate > 0) {
              this.isBet || (this.multiple.active = true);
              this.wait.active = true;
            }
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      initCards: function initCards(UISeatId) {
        this.pokers[UISeatId].active = true;
        for (var l = 0; l < this.pokers[UISeatId].childrenCount; l++) {
          this.pokers[UISeatId].children[l].active = true;
          this.pokers[UISeatId].children[l].x = 50 * (l - 2);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.initMatchingView(true);
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        cc.log("\u5339\u914ding");
        dataLogic.setNeedRecover(true);
        this.clearOtherPlayer();
        this.total = 0;
        var roomKey = dataLogic.curRoomKey;
        cConstant.PostMatching.roomId = constant.GameId.Cattle + roomKey;
        http.post(cConstant.PostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        if (-4 == msg.Code) this.initMatchingView(false); else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        cc.log("show", show);
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.matchingToastLayer.active = false;
          this.efMatchingLoad.getComponent(cc.Animation).stop();
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          cc.log("====\u5339\u914d\u56de\u8c03", this.matchBtn.active);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        this.setMatchingToastUI(true);
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setDeskId(data.Data.deskId);
        }
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.setMatchingToastView(false);
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
          constant.HttpCode.GameOver == msg.Code && dataLogic.setReqRecoverState(false);
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
        if (0 == msg.state) {
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerInfo(msg.playerInfo);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            this.initMatchingView(true, true);
            this.btMatching.node.active = false;
          }
          return;
        }
        dataLogic.matching();
        this.setMatchingToastView(false);
        var playerInfo = kf.clone(msg.playerInfo), UISeatId = void 0;
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        this.playerInfo = playerInfo;
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        this.setAllPlayerInfo(playerInfo, msg.state, remainingTime, msg);
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:" + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        this.confirmVillage = msg.isVillage;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        cDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        this.updateTips();
      },
      playerLeave: function playerLeave(seatId) {
        cc.log("\u6e05\u7406\u73a9\u5bb6UI");
        if (seatId == this.confirmVillage) {
          this.villageIcon.y = 1e4;
          this.villageBgBox.y = 1e4;
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        this.hidePlayer(UISeatId);
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId) {
        this.player[UISeatId].active = true;
        this.player[UISeatId].userId = info.userId;
        this.player[UISeatId].getChildByName("bg").active = true;
        UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = info.nickName);
        this.setPlayerBalance(UISeatId, info.balance);
        this.balanceArr = this.balanceArr.concat(info.balance);
        var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(info.headUrl, avatarSp);
      },
      setAllPlayerInfo: function setAllPlayerInfo(playerInfo) {
        var state = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
        var remainingTime = arguments[2];
        var msg = arguments[3];
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(playerInfo);
        playerInfo = dataLogic.playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          cc.log("UISeatId---", UISeatId, playerInfo[i]);
          if (null == playerInfo[i].headUrl) continue;
          this.setPlayerInfo(playerInfo[i], UISeatId);
          cc.log("dataLogic.isOnlooker", i, dataLogic.isOnlooker(i));
          if (0 == state || dataLogic.isOnlooker(i)) continue;
          dataLogic.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Gaming);
          if (1 == state) if (-1 == playerInfo[i].state) {
            if (UISeatId == constant.SelfUISeatId) {
              this.isVillage = false;
              this.grab.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
              cDataLogic.setVillageMul(msg.robMultiples[i]);
              this.initQzMultipleBtn();
            }
          } else {
            this.isVillage = true;
            0 == playerInfo[i].state ? this.villageMultiple[UISeatId].string = "\u4e0d\u62a2" : this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
          }
          if (state >= 2) if (i == msg.isVillage) {
            this.multipleTxt[UISeatId].string = "";
            this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
            if (UISeatId == constant.SelfUISeatId && 2 == msg.state) {
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
            }
          } else if (playerInfo[i].betMultiple < 0 && UISeatId == cDataLogic.selfSeatId) {
            if (2 == state) {
              dataLogic.setRoomConfig("betConfig", msg.multiples[i]);
              this.betMultipleBtn();
              this.isBet = false;
              this.multiple.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
            }
          } else if (playerInfo[i].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d";
          }
          if (3 == state) {
            var cards = msg.cards[i];
            cc.log("remainingTime--", remainingTime);
            if (remainingTime > 0) if (UISeatId == constant.SelfUISeatId) if (playerInfo[i].isComplete) {
              this.openCardBox.active = false;
              this.isOpenCard = true;
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.showMyPorkers(msg, i);
              this.isOpenCard = false;
              this.openCardBox.active = true;
              this.pokers[UISeatId].active = false;
            } else if (playerInfo[i].isComplete) {
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else this.setSendCard(UISeatId, msg); else {
              if (playerInfo[i].isComplete) {
                this.upturnCards(i, cards, true);
                this.isOpenState[UISeatId] = true;
              }
              this.openCardBox.active = false;
              this.pokers[UISeatId].active = true;
            }
          }
        }
        this.initAllPlayerReadyStateUI();
      },
      setSendCard: function setSendCard(UISeatId, msg) {
        var endPos = this.getHandCardPos(UISeatId);
        for (var j = 0; j < 5; j++) {
          var key = 5 * UISeatId + j;
          this.backCard[key].opacity = 255;
          if (UISeatId === constant.SelfUISeatId) {
            this.showMyPorkers(msg);
            this.backCard[key].scale = .92;
            this.backCard[key].x = endPos.x + 129 * j * .9;
            this.backCard[key].y = endPos.y;
          } else {
            this.backCard[key].scale = .72;
            this.backCard[key].x = endPos.x + 50 * j * .72;
            this.backCard[key].y = endPos.y;
          }
        }
      },
      socketJoinMsg: function socketJoinMsg(msg) {
        this.btCancelMatching.node.active = true;
        this.matchingToastLayer.stopAllActions();
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        dataLogic.matching();
        if (dataLogic.isFriendRoom) {
          this.gameStartCommonHandle();
          this.updateTips();
          this.clearOtherPlayer();
        }
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        dataLogic.setPlayerInfo(msgData.playerInfo);
        var playerInfo = dataLogic.playerInfo, UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[i].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[i].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[i].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[i].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[i].headUrl, avatarSp);
          if (UISeatId == constant.SelfUISeatId) {
            balance = playerInfo[i].balance;
            cDataLogic.setVillageMul(msgData.robMultiples[i]);
            this.initQzMultipleBtn();
          }
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        this.scheduleOnce(function() {
          _this.grab.active = true;
          _this.wait.active = true;
          _this.countDown(msgData.endTime, 1);
        }, 1.5);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        var self = this;
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.winTxt.stopAllActions();
        this.unscheduleAllCallbacks();
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.balanceArr = [];
        this.isVillageNum = 1;
        this.isBetNum = 2;
        this.isVillage = false;
        this.isBet = false;
        this.isOpenCard = false;
        this.send = false;
        this.isResultAnim = false;
        this.villageBgBox.x = 1e4;
        this.villageBgBox.y = 1e4;
        this.villageIcon.x = 1e4;
        this.villageIcon.y = 1e4;
        this.openPokers = [];
        this.openCardBox.active = false;
        this.grab.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.winTxt.opacity = 0;
        for (var h = 0; h < this.pinPaiLabel.length; h++) this.pinPaiLabel[h].string = "";
        for (var l = 0; l < this.grabBtn.length; l++) this.grabBtn[l].node.active = false;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var i = 0; i < this.player.length; i++) this.hidePlayer(i);
      },
      hidePlayer: function hidePlayer(UISeatId) {
        this.multipleTxt[UISeatId].string = "";
        this.villageMultiple[UISeatId].string = "";
        this.player[UISeatId].getChildByName("pokers").active = false;
        this.getBetTxt[UISeatId].string = "";
        if (0 != UISeatId) {
          this.player[UISeatId].active = false;
          this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = "";
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = "";
        }
        for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
        for (var j = 0; j < 5; j++) {
          this.pokers[UISeatId].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          UISeatId != constant.SelfUISeatId && (this.pokers[UISeatId].children[j].x = -100);
        }
        this.isCow[UISeatId].active = false;
        this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[UISeatId].children[1] && this.isCow[UISeatId].children[1].destroy();
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.openCardBox.active = false;
          this.grab.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.grab.active = false;
            this.multiple.active = false;
            cc.log("\u81ea\u5df1\u662f\u5426\u65c1\u89c2", dataLogic.isOnlooker());
            if (dataLogic.isOnlooker()) return;
            switch (type) {
             case 1:
              this.grab.active = false;
              this.isVillage || this.scheduleOnce(function() {
                cc.log("\u62a2\u5e84");
                _this2.postGrabVillage(0);
              }, .1 * mySeatId);
              break;

             case 2:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                cc.log("\u4e0b\u6ce8");
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 3:
              for (var i = 0; i < this.pokers.length; i++) {
                var seatId = dataLogic.getSeatIdByUISeatId(i);
                if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
                this.pokers[i].active || (this.pokers[i].active = true);
              }
              this.openCardBox.active = false;
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                cc.log("\u644a\u724c");
                _this2.openTheCard();
              }, .3 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      initQzMultipleBtn: function initQzMultipleBtn() {
        var multiple = cDataLogic.qzBtnConfig;
        cc.log("multiple", multiple);
        this.grabBtn[0].node.active = true;
        for (var i = 0; i < multiple.length; i++) if (i < 4 && multiple[i] > 0) {
          this.grabBtn[Number(i) + 1].node.active = true;
          this.grabBtn[Number(i) + 1].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.grabBtn[Number(i) + 1].node.x = (Number(i) + 1) * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var i = 0; i < multiple.length; i++) if (i < 5 && multiple[i] > 0) {
          this.multipleBtn[i].node.active = true;
          this.multipleBtn[i].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.multipleBtn[i].node.x = i * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      grabVillage: function grabVillage(event, key) {
        this.grab.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postGrabVillage(key);
      },
      postGrabVillage: function postGrabVillage(key) {
        cConstant.PostVillage.villageNum = 0 == key ? key : cDataLogic.qzBtnConfig[key - 1];
        http.post(cConstant.PostVillage, "village");
        this.isVillage = true;
        this.grab.active = false;
        this.isVillageNum < this.playerInfo.length ? this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u62a2\u5e84" : this.wait.active = false;
      },
      village: function village(msgData) {
        if (0 == msgData.Code) return;
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      onVillage: function onVillage(msgData) {
        var _this3 = this;
        this.isVillageNum++;
        var lastVillage = msgData.seatId.toString().split(","), multiple = void 0, UISeatId = void 0;
        multiple = 0 == msgData.villageNum ? "\u4e0d\u62a2" : "\u62a2" + msgData.villageNum + "\u500d";
        for (var i = 0; i < lastVillage.length; i++) if ("" != lastVillage[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastVillage[i]);
          this.villageMultiple[UISeatId].string = multiple;
          this._village.push({
            seatId: lastVillage[i],
            villageNum: msgData.villageNum
          });
        }
        if (void 0 != msgData.confirmVillage) {
          this.progress = 2;
          this.reciprocal.active = false;
          this.grab.active = false;
          this.wait.active = false;
          var seatId = dataLogic.getSeatIdByUISeatId(cDataLogic.selfSeatId);
          if (seatId != msgData.confirmVillage) {
            dataLogic.setRoomConfig("betConfig", msgData.multiples[seatId]);
            this.betMultipleBtn();
          }
          this.confirmVillage = msgData.confirmVillage;
          this.endTime = msgData.endTime;
          UISeatId = dataLogic.getUISeatIdBySeatId(msgData.confirmVillage);
          this.max = msgData.dealerMultiple;
          this.unschedule(this.callback);
          dataLogic.isHide ? this.showVillage() : this.node.runAction(cc.sequence(cc.delayTime(.6), cc.callFunc(function() {
            var delay = _this3.selVillage(msgData.confirmVillage);
            _this3.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(function() {
              this.showVillage();
              audioMgr.playEffect(this.selVillageOver);
            }, _this3)));
          }, this)));
        }
      },
      showVillage: function showVillage() {
        var _this4 = this;
        cc.log("max22", this.max);
        var UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
        this.villageMultiple[UISeatId].string = "\u62a2" + this.max + "\u500d";
        this.getVillage(this.confirmVillage);
        var callFunc = cc.callFunc(function() {
          _this4.showVillageCallFun(UISeatId);
        }, this);
        dataLogic.isHide ? this.showVillageCallFun(UISeatId) : this.node.runAction(cc.sequence(cc.delayTime(.8), callFunc));
      },
      showVillageCallFun: function showVillageCallFun(UISeatId) {
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
        if (!dataLogic.isOnlooker()) {
          this.wait.active = true;
          if (UISeatId != constant.SelfUISeatId) if (this.isBet) this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8"; else {
            this.multiple.active = true;
            this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
          } else this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
        }
        this.countDown(this.endTime, 2);
        cc.log("run callFunc");
      },
      selVillage: function selVillage(confirmVillage) {
        var _this5 = this;
        var len = void 0, UISeatId = void 0, time = .15, num = 4, delay = void 0, delay1 = void 0;
        var newVillage = [];
        var max = Math.max.apply(Math, this._village.map(function(o) {
          return o.villageNum;
        }));
        for (var i = 0; i < this._village.length; i++) {
          this._village[i].villageNum == max && newVillage.push(Number(this._village[i].seatId));
          newVillage.sort(function(a, b) {
            return a - b;
          });
        }
        var aArr = [], aArr1 = [];
        for (var k = 0; k < newVillage.length; k++) newVillage[k] <= confirmVillage ? aArr.push(newVillage[k]) : aArr1.push(newVillage[k]);
        newVillage = aArr1.concat(aArr);
        len = newVillage.length;
        if (len > 1) {
          var _loop = function _loop(j) {
            delay = cc.delayTime(time * len);
            delay1 = cc.delayTime(j * time);
            UISeatId = dataLogic.getUISeatIdBySeatId(newVillage[j]);
            var pos = _this5.player[UISeatId].position;
            var callFun = cc.callFunc(function() {
              _this5.selTheVillage(pos, delay, num);
            }, _this5);
            _this5.node.runAction(cc.sequence(delay1, callFun));
          };
          for (var j = 0; j < newVillage.length; j++) _loop(j);
          return time * len * num;
        }
        return 0;
      },
      selTheVillage: function selTheVillage(pos, delay, num) {
        var sequence = void 0, repeat = void 0;
        var AudioCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.selVillageAudio);
        }, this);
        sequence = cc.sequence(AudioCallFun, cc.moveTo(0, pos.x, pos.y), delay);
        repeat = cc.repeat(sequence, num);
        this.villageBgBox.runAction(repeat);
      },
      getVillage: function getVillage(confirmVillage) {
        this.confirmVillage = confirmVillage;
        var UISeatId = dataLogic.getUISeatIdBySeatId(confirmVillage);
        this.villageBgBox.x = this.player[UISeatId].x;
        this.villageBgBox.y = this.player[UISeatId].y;
        if (1 == UISeatId) {
          this.villageIcon.x = this.player[UISeatId].x + 54;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        } else {
          this.villageIcon.x = this.player[UISeatId].x - 53;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        }
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        cConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(cConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.playerInfo.length > 2 && this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this6 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        for (var i = 0; i < lastBet.length; i++) if ("" != lastBet[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[i]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + msgData.betNum + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          var showPokerTime = this.dispenseCardAction();
          cc.log("showPokerTime", showPokerTime);
          this.progress = 3;
          var seatId = dataLogic.getSeatIdByUISeatId(cDataLogic.selfSeatId);
          this.endTime = msgData.endTime;
          this.onBetData = msgData;
          if (dataLogic.isHide) {
            this.showMyPorkers(msgData, seatId);
            for (var j = 0; j < this.pokers.length; j++) {
              seatId = dataLogic.getSeatIdByUISeatId(j);
              if (!this.player[j].active || dataLogic.isOnlooker(seatId)) continue;
              if (j != constant.SelfUISeatId) {
                this.pokers[j].active = true;
                for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x += 50 * k;
              }
            }
          } else this.node.runAction(cc.sequence(cc.delayTime(showPokerTime), cc.callFunc(function() {
            _this6.showMyPorkers(msgData, seatId);
            _this6.countDown(msgData.endTime, 3);
          }, this)));
        }
      },
      initPokers: function initPokers() {
        for (var i = 0; i < this.cardBox.length; i++) this.cardBox[i].x = -258;
        for (var j = 0; j < this.pokers.length; j++) {
          if (!this.player[j].active) continue;
          if (j != constant.SelfUISeatId) for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x = -100;
        }
      },
      showMyPorkers: function showMyPorkers(msgData, seatId) {
        if (dataLogic.isOnlooker()) return;
        this.openCardBox.active = true;
        this.pokersData = [], this.myInitPokersData = [];
        for (var i = 0; i < this.cardBox.length; i++) {
          this.cardBox[i].y = 0;
          this.cardBox[i].getComponent(cc.Sprite).spriteFrame = cDataLogic.getSFByImgName(this.cardAtlas, msgData.cards[seatId][i]);
          this.pokersData.push(cDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
          this.myInitPokersData.push(cDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
        }
        this.myNiuNum = cDataLogic.isNiu(kf.clone(this.myInitPokersData));
        this.hidePoker(constant.SelfUISeatId);
      },
      hidePoker: function hidePoker(UISeatId) {
        for (var i = 0; i < 5; i++) this.backCard[5 * UISeatId + i].opacity = 0;
      },
      dispenseCardAction: function dispenseCardAction() {
        if (dataLogic.isHide) return;
        this.send = true;
        var startPos = cc.v2(0, 0), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0;
        var seatId = void 0;
        for (var i = 0; i < 4; i++) {
          seatId = dataLogic.getSeatIdByUISeatId(i);
          if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
          basecDelay += .1;
          for (var j = 0; j < 5; j++) {
            key = 5 * i + j;
            delay = cc.delayTime(.1 * j + basecDelay);
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .55;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(i);
            move = cc.moveTo(actionTime, endPos);
            if (i === constant.SelfUISeatId) {
              scale = cc.scaleTo(actionTime, .92);
              cardMove = cc.moveTo(.15, endPos.x + 129 * j * .9, endPos.y);
            } else {
              scale = cc.scaleTo(actionTime, .72);
              cardMove = cc.moveTo(.15, endPos.x + 50 * j * .72, endPos.y);
            }
            var fpCallFun = cc.callFunc(function() {
              audioMgr.playEffect(this.sendCard);
            }, this);
            spawn = cc.spawn(move, scale, fpCallFun);
            sequence = cc.sequence(delay, spawn, cardMove);
            this.backCard[key].runAction(sequence);
          }
          showPokerTime = basecDelay + .85;
        }
        return showPokerTime;
      },
      moveCard: function moveCard(i, j) {
        cc.log("i---", i, "j---", j);
        i === constant.SelfUISeatId ? this.cardBox[j].runAction(cc.moveBy(.15, 129 * j, 0)) : this.pokers[i].children[j].runAction(cc.moveBy(.15, 50 * j, 0));
      },
      getHandCardPos: function getHandCardPos(UISeatId) {
        var pos = cc.v2(0, 0);
        pos.x = 0 == UISeatId ? this.player[UISeatId].x + 150 : 1 == UISeatId ? this.player[UISeatId].x - 275 : this.player[UISeatId].x + 130;
        pos.y = this.player[UISeatId].y;
        return pos;
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this7 = this;
        var cards = void 0, UISeatId = void 0, txt = "", endAudio = void 0, lastArr = [], win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          this.upturnCards(msgData.seatId, cards);
        }
        if (1 == msgData.isEnd) {
          this.endData = msgData.endData;
          this.progress = 4;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          this.openCardBox.active = false;
          var max = Math.max.apply(null, msgData.endData);
          var min = Math.min.apply(null, msgData.endData);
          var isMeMax = 0;
          var isMeMin = 0;
          var newEndData = [];
          for (var _j2 = 0; _j2 < msgData.endData.length; _j2++) {
            var _playerInfo = dataLogic.playerInfo[_j2];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[_j2]) / 100;
            msgData.endData[_j2] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[_j2]) / 100);
            _playerInfo.gameTimes += 1;
            this.player[_j2]._playerInfo = _playerInfo;
            newEndData[_j2] = Math.abs(msgData.endData[_j2]);
            msgData.endData[_j2] >= 0 && isMeMax++;
            msgData.endData[_j2] <= 0 && isMeMin++;
          }
          var absMax = Math.max.apply(null, newEndData);
          cc.log("isMeMin", isMeMin, "isMeMax", isMeMax);
          for (var i = 0; i < msgData.endData.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            if (UISeatId == constant.SelfUISeatId) if (msgData.endData[i] > 0) {
              if (this.confirmVillage == i && msgData.endData[i] == max && absMax == max && 1 == isMeMax) if (msgData.endData.length < 3) {
                txt = 1;
                cc.log("\u4e24\u4eba\u5bf9\u5c40\u52dd\u5229");
                endAudio = this.winGold;
              } else {
                txt = 0;
                cc.log("\u901a\u5403");
                endAudio = this.allWin;
              } else {
                txt = 1;
                cc.log("\u52dd\u5229");
                endAudio = this.winGold;
              }
              win = false;
            } else {
              if (this.confirmVillage == i && msgData.endData[i] < 0 && msgData.endData[i] == min && 1 == isMeMin) {
                if (msgData.endData.length >= 3 && Math.abs(min) == absMax) {
                  txt = 2;
                  cc.log("\u901a\u8d54");
                }
              } else cc.log("\u5931\u8d25");
              endAudio = this.lose;
              win = true;
            }
          }
          time = dataLogic.isHide ? 0 : lastArr.length + .5;
          cc.log("time======", time);
          var scrollNumCallFunc = cc.callFunc(function() {
            for (var _i2 = 0; _i2 < msgData.endData.length; _i2++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i2);
              if (msgData.endData[_i2] >= 0) {
                _this7.getBetTxt[UISeatId].font = _this7.winChipNumFont;
                _this7.scrollNum(msgData.endData[_i2].toFixed(2), UISeatId);
              } else {
                _this7.getBetTxt[UISeatId].font = _this7.loseChipNumFont;
                var _endData = msgData.endData[_i2].toFixed(2);
                _this7.getBetTxt[UISeatId].string = _endData;
              }
            }
          }, this);
          var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc);
          this.winTxt.runAction(sequence);
          sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
          this.winTxt.runAction(sequence);
          this.resultAnim(txt, time, endAudio, win, dataLogic.isHide);
          dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
          this.gamingPlayerToUnready();
          this.updateTips();
        }
      },
      updateUserBalance: function updateUserBalance() {
        for (var i = 0; i < this.endData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = Math.abs(balance).toFixed(2);
          UISeatId == constant.SelfUISeatId && dataLogic.setUserBalance(balance);
        }
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this8 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this8.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
          _this8.updateUserBalance();
        }, this)));
      },
      resultAnim: function resultAnim(type, time, endAudio, win, hide) {
        var delayTime = cc.delayTime(3);
        var showAnimCallFun = cc.callFunc(function() {
          switch (type) {
           case 0:
            this.tongChiAnim.active = true;
            this.tongChiAnim.getComponent(cc.Animation).play();
            break;

           case 1:
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
            break;

           case 2:
            this.tongPeiAnim.active = true;
            this.tongPeiAnim.getComponent(cc.Animation).play();
          }
          audioMgr.playEffect(endAudio);
          win || audioMgr.playEffect(this.scrollNumber);
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.tongChiAnim.active = false;
          this.tongPeiAnim.active = false;
          this.winAnim.active = false;
          this.isResultAnim = true;
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(.3), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr, isOpen) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        if (this.isUserOpenPokers(UISeatId)) return false;
        this.openPokers.push(UISeatId);
        var niuNum = this.showPokers(UISeatId, cards);
        var hideCardsCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.upturnPoker);
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          var pokers = this.pokers[UISeatId].children;
          if (UISeatId == constant.SelfUISeatId) for (var i = 0; i < pokers.length; i++) pokers[i].runAction(cc.moveBy(.1, 50 * -i, 0)); else {
            for (var _i3 = 0; _i3 < pokers.length; _i3++) pokers[_i3].x = -100;
            for (var _i4 = 0; _i4 < 5; _i4++) this.backCard[5 * UISeatId + 1 * _i4].runAction(cc.sequence(cc.moveBy(5, 50 * -_i4, 0), cc.fadeOut(.1, 0)));
          }
          this.showCardsCallFun(UISeatId, niuNum, cards);
        }, this);
        cc.log("\u725b", niuNum);
        if (!dataLogic.isHide || isOpen) this.node.runAction(cc.sequence(cc.delayTime(1 * index), hideCardsCallFun)); else {
          this.pokers[UISeatId].active = true;
          this.setPlayerHandCard(UISeatId, cards);
          this.isCow[UISeatId].active = true;
          this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
          this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
        }
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, niuNum, cards) {
        var showCardsCallFun = cc.callFunc(function() {
          this.setPlayerHandCard(UISeatId, cards);
          var pokers = this.pokers[UISeatId].children;
          for (var j = 0; j < pokers.length; j++) pokers[j].runAction(cc.moveBy(.25, 50 * j, 0));
          this.cowA(UISeatId, niuNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleCowAudio[niuNum]) : audioMgr.playEffect(this.femaleCowAudio[niuNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      cowA: function cowA(UISeatId, niuNum) {
        var cowAnim = cc.instantiate(this.cowAnimPf);
        cowAnim.parent = this.isCow[UISeatId];
        this.isCow[UISeatId].active = true;
        var cowPic = cDataLogic.getSFByImgName(this.isNiuAtlas, niuNum);
        if (0 == niuNum) {
          cowAnim.children[2].active = true;
          cowAnim.children[2].getComponent(cc.Animation).play();
        } else if (niuNum > 0 && niuNum < 10) {
          cowAnim.children[0].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[0].active = true;
          cowAnim.children[0].getComponent(cc.Animation).play();
        } else {
          cowAnim.children[1].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[1].active = true;
          cowAnim.children[1].getComponent(cc.Animation).play();
        }
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var pokers = [];
        for (var j = 0; j < cards.length; j++) pokers.push(cDataLogic.getCardValueAndColor(cards[j]));
        pokers = cDataLogic.sortCard(pokers);
        for (var i = 0; i < pokers.length; i++) this.pokers[UISeatId].getChildByName("pokers" + i).getComponent(cc.Sprite).spriteFrame = cDataLogic.getSFByImgName(this.cardAtlas, pokers[i].key);
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var i = 0; i < cards.length; i++) playerPokersData.push(cDataLogic.getCardValueAndColor(cards[i]));
        UISeatId == constant.SelfUISeatId && (this.openCardBox.active = false);
        return cDataLogic.isNiu(playerPokersData);
      },
      clickBind: function clickBind() {
        var _this9 = this;
        this.cardTypeView.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this9.cardTypeView.active = false;
        });
        var _loop2 = function _loop2(i) {
          _this9.cardBox[i].on(cc.Node.EventType.TOUCH_END, function() {
            audioMgr.playEffect(_this9.clickPoker);
            if (0 == _this9.cardBox[i].y) {
              if (_this9.pinPokers.length < 3) {
                _this9.cardBox[i].y = 20;
                _this9.pinPokers.push(_this9.myInitPokersData[i]);
              }
            } else {
              _this9.cardBox[i].y = 0;
              for (var j = 0; j < _this9.pinPokers.length; j++) _this9.pinPokers[j] == _this9.myInitPokersData[i] && _this9.pinPokers.splice(j, 1);
            }
            _this9.countPinPokers(_this9.pinPokers);
          });
        };
        for (var i = 0; i < this.cardBox.length; i++) _loop2(i);
      },
      countPinPokers: function countPinPokers(pinPokers) {
        this.total = 0;
        for (var j = 0; j < this.pinPaiLabel.length; j++) this.pinPaiLabel[j].string = "";
        for (var i = 0; i < pinPokers.length; i++) {
          this.pinPaiLabel[i].string = pinPokers[i].order;
          this.total = this.total + pinPokers[i].order;
          this.pinPaiLabel[3].string = this.total;
        }
      },
      openTheCard: function openTheCard() {
        if (dataLogic.isOnlooker()) return;
        this.openCardBox.active = false;
        http.post(cConstant.OpenCards, "openCards");
        this.isOpenCard = true;
      },
      isHaveNiu: function isHaveNiu(pokers, type) {
        var lave = this.total % 10;
        cc.log("---isHaveNiu", pokers, "type", type, "lave", lave);
        if (0 == pokers.length) if (0 == cDataLogic.isNiu(this.pokersData) && 0 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else if (0 != cDataLogic.isNiu(this.pokersData) && 1 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else {
          audioMgr.playEffect(this.pinError);
          this.showPinWarn(0);
        } else if (3 == pokers.length) if (0 == lave) if (0 == type) {
          audioMgr.playEffect(this.pinError);
          cc.log("\u62fc\u724c\u6709\u8bef!");
          this.showPinWarn(0);
        } else {
          cc.log("\u6210\u529f!");
          this.openTheCard();
          this.openCardBox.active = false;
        } else if (0 == this.myNiuNum && 0 == type) {
          cc.log("\u6210\u529f!");
          this.openTheCard();
          this.openCardBox.active = false;
        } else {
          audioMgr.playEffect(this.pinError);
          cc.log("\u9519\u8bef!");
          this.showPinWarn(0);
        } else if (0 == cDataLogic.isNiu(this.pokersData) && 0 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else {
          audioMgr.playEffect(this.pinError);
          cc.log("\u9519\u8bef\uff0c\u724c\u6570\u4e0d\u5bf9!");
          this.showPinWarn(0);
        }
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
      },
      showPinWarn: function showPinWarn(type) {
        var _this10 = this;
        this.pinWarnErr.active = false;
        0 == type && (this.pinWarnErr.active = true);
        this.scheduleOnce(function() {
          _this10.pinWarnErr.active = false;
        }, 1);
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "cardType":
          this.cardTypeView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.Cattle);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "haveNiu":
          this.isHaveNiu(this.pinPokers, 1);
          break;

         case "noNiu":
          this.isHaveNiu(this.pinPokers, 0);
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("game_cattleAutoMatch", isCheck);
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  checkBankCard: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e57e6kL/f1FdrKDGehKOUHh", "checkBankCard");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _doneCb = null;
    var _GetInitDate = {
      Action: "GetInitData",
      Requirement: JSON.stringify([ "UserFirstCardInfo" ])
    };
    var _VerifyBankCard = {
      Action: "VerifyBankCard",
      BankNum: null,
      RealName: null
    };
    var _item = null;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebName: cc.EditBox,
        ebBankCardId: cc.EditBox,
        dimCardId: cc.Label,
        dimName: cc.Label
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqFirstCardCb", this.reqFirstCardCb.bind(this) ], [ "checkBankCardCb", this.checkBankCardCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.node.active = false;
        this.toastShow();
        this.registerEvent();
        _doneCb = initArg.doneCb;
        this.reqDateAndShowLoadView(_GetInitDate, "reqFirstCardCb");
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "confirm":
          var result = dataLogic.checkFormat(this.ebBankCardId.string, {
            BankNum: true,
            name: "\u5361\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebName.string, {
            RealName: true,
            name: "\u6237\u540d"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          _VerifyBankCard.BankNum = this.ebBankCardId.string;
          _VerifyBankCard.RealName = this.ebName.string;
          this.reqDateAndShowLoadView(_VerifyBankCard, "checkBankCardCb", null, true);
        }
      },
      reqFirstCardCb: function reqFirstCardCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.node.active = true;
          this.dimCardId.string = msg.BackData.UserFirstCardInfo.CardNum;
          this.dimName.string = msg.BackData.UserFirstCardInfo.RealName;
        }
      },
      checkBankCardCb: function checkBankCardCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          _doneCb();
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  checkCode: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5caa60GLuhNg6UKs8KXXoI3", "checkCode");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _confirmCb = null;
    var _callbacks = {};
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebCheckCode: cc.EditBox,
        spCheckCode: cc.Sprite,
        arrow: cc.Node,
        delCheckCodeIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        var _this = this;
        this.toastShow();
        this.registerEvent();
        cc.log("-------initArg", initArg);
        this.setCheckCode(initArg.checkCode);
        _confirmCb = initArg.confirmCb;
        this.spCheckCode.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this.btnEvent("", "refreshCheckCode");
        });
        _callbacks = {
          reqCheckCode: function reqCheckCode(str) {
            _this.btnEvent(null, "delCheckCode");
            _this.showLayerTip(str);
            _this.reqCheckCode();
          },
          closeCheckCodeDialog: this.toastClose.bind(this)
        };
        constant.PostSendMobileCode.mobileNum = initArg.phoneNum;
        constant.PostSendMobileCode.type = initArg.type;
      },
      btnEvent: function btnEvent(event, eventName) {
        event && audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "reqSendSMSCheckCode":
          var result = dataLogic.checkFormat(this.ebCheckCode.string, {
            ImgCode: true,
            name: "\u9a8c\u8bc1\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          this.showLoadView(true);
          _confirmCb(this.ebCheckCode.string, _callbacks);
          break;

         case "refreshCheckCode":
          this.reqCheckCode();
          break;

         case "delCheckCode":
          this.ebCheckCode.string = "";
          this.delCheckCodeIcon.active = false;
        }
      },
      reqCheckCode: function reqCheckCode() {
        this.hideLoadView();
        this.arrow.runAction(cc.rotateBy(1, 360));
        this.reqData({
          Action: "GetImageCode",
          isJack: 1
        }, "reqCheckCodeCb");
      },
      setCheckCode: function setCheckCode(code) {
        var arr = code.split("\r");
        kf.setSpriteFrameByBase64(arr, this.spCheckCode);
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg) {
        this.hideLoadView();
        msg.Code == constant.HttpCode.Succeed && this.setCheckCode(msg.BackData);
      },
      editChangeEvent: function editChangeEvent(txt, editbox, name) {
        switch (name) {
         case "checkCode":
          this.delCheckCodeIcon.active = "" != txt;
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  chip: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "bca65CkWjVDHJKe7tboQw8Y", "chip");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        txt: cc.Label,
        iconSF: [ cc.SpriteFrame ],
        chipSp: cc.Sprite,
        moveSpeed: 5e-4
      },
      init: function init(data) {
        var dotIndex = data.chipNum.toString().indexOf(".");
        data.isDesperate || -1 != dotIndex ? this.txt.string = "" : this.txt.string = data.chipNum;
        if (data.chipNum < 100) {
          this.chipSp.spriteFrame = this.iconSF[0];
          this.txt.node.color = new cc.Color(18, 43, 150);
        } else {
          this.chipSp.spriteFrame = this.iconSF[1];
          this.txt.node.color = new cc.Color(212, 86, 2);
        }
        this.node.position = data.pos;
        this.node.rotation = 0;
      },
      castAction: function castAction(endPos) {
        var actionTime = 5e-4 * this.node.position.add(endPos).mag();
        var rotate = cc.rotateTo(actionTime, 1e3 * actionTime);
        var move = cc.moveTo(actionTime, endPos);
        var spawn = cc.spawn(rotate, move);
        this.node.stopAllActions();
        this.node.runAction(spawn);
      },
      initUI: function initUI(data) {
        this.node.position = data.pos;
        this.txt.string = data.chipNum;
        this.chipSp.spriteFrame = this.iconSF[data.iconKey];
        this.node.rotation = 0;
      }
    });
    cc._RF.pop();
  }, {} ],
  clientEvent: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5ac1dTOv2tMO4cX8kGC955h", "clientEvent");
    "use strict";
    window["basic"] = window["basic"] || {};
    window["basic"]["clientEvent"] = function() {
      var eventListener = kf.require("basic.eventListener");
      var clientEvent = {};
      var _EVENT_TYPE = [ "gameHide", "gameShow" ];
      clientEvent.addEventType = function(list) {
        var len = this.len;
        for (var i = 0; i < list.length; i++) {
          var v = list[i];
          this.EVENT_TYPE[v] = i + len;
          this.len++;
        }
      };
      clientEvent.init = function() {
        this.eventListener = eventListener.create("multi");
        this.EVENT_TYPE = {};
        this.len = 1;
        this.addEventType(_EVENT_TYPE);
      };
      clientEvent.registerEvent = function(eventName, handler) {
        if ("string" !== typeof eventName) return;
        eventName = clientEvent.EVENT_TYPE[eventName];
        this.eventListener.register(eventName, handler);
      };
      clientEvent.on = clientEvent.registerEvent;
      clientEvent.unregisterEvent = function(eventName, handler) {
        if ("string" !== typeof eventName) return;
        eventName = clientEvent.EVENT_TYPE[eventName];
        this.eventListener.unregister(eventName, handler);
      };
      clientEvent.unregisterAllEvent = function() {
        this.eventListener.unregisterAll();
      };
      clientEvent.off = clientEvent.unregisterEvent;
      clientEvent.dispatchEvent = function(eventName) {
        if ("string" !== typeof eventName) return;
        var eventIndex = clientEvent.EVENT_TYPE[eventName];
        if (!eventIndex) {
          cc.error("please add " + eventName + " event into clientEvent.js");
          return;
        }
        var newArgs = Array.prototype.slice.call(arguments);
        newArgs[0] = eventIndex;
        this.eventListener.dispatch.apply(this.eventListener, newArgs);
      };
      clientEvent.bindEventListener = function(name) {
        this.eventListener = eventListener.create("multi");
      };
      return clientEvent;
    };
    cc._RF.pop();
  }, {} ],
  closePop: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "51d3exsu3NJRoc08ziIVrcj", "closePop");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        settingPanel: {
          default: null,
          type: cc.Node
        }
      },
      onLoad: function onLoad() {
        this.node.on("touchstart", function() {}, this);
      }
    });
    cc._RF.pop();
  }, {} ],
  constant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "cba47alFf5Jt6OOpjPaTwtU", "constant");
    "use strict";
    window.constant = window.constant || {};
    constant.MaxGameResNum = 1;
    constant.SelfUISeatId = 0;
    constant.IsEnd = 1;
    constant.loadResTimeLimit = 1e4;
    constant.httpTimeout = 1e4;
    cc.sys.isNative || "7456" == window.location.port || "7070" == window.location.port ? constant.imgServer = "http://13.94.25.111:8080" : constant.imgServer = "";
    constant.imgPath = "/Images/Common/";
    constant.SceneName = {
      Login: "login",
      Hall: "hall",
      Bank: "bank",
      OfferPk: "offerPK",
      Spread: "spread",
      GoldenFraud: "goldenFraud",
      GoldenFraudHall: "goldenFraudHall",
      Cattle: "cattle",
      CattleHall: "cattleHall",
      Dzpk: "dzpk",
      DzpkHall: "dzpkHall",
      Dice: "dice",
      DiceHall: "diceHall",
      SeeThreeCattle: "seeThreeCattle",
      SeeThreeCattleHall: "seeThreeCattleHall",
      SeeFourCattle: "seeThreeCattle",
      SeeFourCattleHall: "seeThreeCattleHall",
      TongBiCattle: "tongBiCattle",
      TongBiCattleHall: "tongBiCattleHall",
      SanGong: "sanGong",
      SanGongHall: "sanGongHall",
      BaseGame: "baseGame",
      BonusGame: "bonusGame",
      FastZJHHall: "fastZJHHall",
      FastZJH: "fastZJH",
      PaiGowHall: "paiGowHall",
      PaiGow: "paiGow",
      ErBaGangHall: "erBaGangHall",
      ErBaGang: "erBaGang",
      BRCattleHall: "BRCattleHall",
      BRCattle: "BRCattle",
      LandlordsHall: "landlordsHall",
      Landlords: "landlords",
      LongHuHall: "longHuHall",
      LongHu: "longHu",
      TenfoldBRCattleHall: "BRCattleHall",
      TenfoldBRCattle: "BRCattle",
      BaiJiaLeHall: "bjlHall",
      BaiJiaLe: "bjl",
      BcbmHall: "bcbmHall",
      Bcbm: "bcbm",
      GiftMoneyHall: "giftMoneyHall",
      GiftMoney: "giftMoney"
    };
    constant.ToastName = {
      InfoToast: "infoToast"
    };
    constant.GameId = {
      Login: "-5",
      Spread: "-4",
      OfferPk: "-3",
      Bank: "-2",
      Hall: "-1",
      GoldenFraud: "00",
      Cattle: "01",
      Dzpk: "02",
      SeeThreeCattle: "03",
      TongBiCattle: "04",
      King: "05",
      SanGong: "06",
      Dice: "07",
      PaiGow: "08",
      FastZJH: "09",
      ErBaGang: "10",
      BRCattle: "11",
      LongHu: "12",
      Landlords: "14",
      BaiJiaLe: "15",
      SeeFourCattle: "16",
      Bcbm: "17",
      TenfoldBRCattle: "21",
      GiftMoney: "24"
    };
    constant.GameNickName = {};
    constant.GameNickName[constant.GameId.GoldenFraud] = "\u70b8\u91d1\u82b1";
    constant.GameNickName[constant.GameId.Cattle] = "\u62a2\u5e84\u725b\u725b";
    constant.GameNickName[constant.GameId.Dzpk] = "\u5fb7\u5dde\u6251\u514b";
    constant.GameNickName[constant.GameId.SeeThreeCattle] = "\u770b\u4e09\u5f20\u62a2\u5e84\u725b\u725b";
    constant.GameNickName[constant.GameId.SeeFourCattle] = "\u770b\u56db\u5f20\u62a2\u5e84\u725b\u725b";
    constant.GameNickName[constant.GameId.TongBiCattle] = "\u901a\u6bd4\u725b\u725b";
    constant.GameNickName[constant.GameId.King] = "\u738b\u8005\u8363\u8000";
    constant.GameNickName[constant.GameId.SanGong] = "\u4e09\u516c";
    constant.GameNickName[constant.GameId.Dice] = "\u5927\u8bdd\u9ab0";
    constant.GameNickName[constant.GameId.PaiGow] = "\u62a2\u5e84\u724c\u4e5d";
    constant.GameNickName[constant.GameId.FastZJH] = "\u6781\u901f\u70b8\u91d1\u82b1";
    constant.GameNickName[constant.GameId.ErBaGang] = "\u4e8c\u516b\u6760";
    constant.GameNickName[constant.GameId.BRCattle] = "\u767e\u4eba\u725b\u725b";
    constant.GameNickName[constant.GameId.Landlords] = "\u6597\u5730\u4e3b";
    constant.GameNickName[constant.GameId.BaiJiaLe] = "\u767e\u5bb6\u4e50";
    constant.GameNickName[constant.GameId.LongHu] = "\u9f99\u864e\u6597";
    constant.GameNickName[constant.GameId.TenfoldBRCattle] = "\u5341\u500d\u767e\u4eba\u725b\u725b";
    constant.GameNickName[constant.GameId.Bcbm] = "\u5954\u9a70\u5b9d\u9a6c";
    constant.GameNickName[constant.GameId.GiftMoney] = "\u7ea2\u5305\u626b\u96f7";
    constant.GameNickName["aboutUs"] = "\u5173\u4e8e\u6211\u4eec";
    constant.RegisterCashGiftRes = [ {
      path: "baoWang/registerCashGift",
      resType: "dir"
    }, {
      path: "prefab/baoWang/registerCashGift",
      resType: cc.Prefab
    }, {
      path: "audio/registerCashGift",
      resType: cc.AudioClip
    } ];
    constant.HintRegisterRes = [ {
      path: "baoWang/hintRegister",
      resType: "dir"
    } ];
    constant.initActivityRes = [ {
      path: "baoWang/activityCenter",
      resType: "dir"
    } ];
    constant.GameRes = {};
    constant.GameRes[constant.GameId.Hall] = [ {
      path: "prefab/baoWang/mailDetails",
      resType: cc.Prefab,
      useScene: constant.SceneName.Hall,
      notRelease: true
    }, {
      path: "hall/cj",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Hall,
      notRelease: true
    }, {
      path: "hall/UI",
      resType: "dir",
      useScene: constant.SceneName.Hall,
      notRelease: true
    }, {
      path: "hall/miniGameCard",
      resType: "dir",
      useScene: constant.SceneName.Hall,
      notRelease: true
    }, {
      path: "font/winChipNum_0",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Hall,
      notRelease: true
    }, {
      path: "font/winChipNum",
      resType: cc.Font,
      useScene: constant.SceneName.Hall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.Bank] = [ {
      path: "baoWang/spreadAndBankBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bank,
      notRelease: true
    }, {
      path: "baoWang/leftTabBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bank,
      notRelease: true
    }, {
      path: "baoWang/check",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bank,
      notRelease: true
    }, {
      path: "baoWang/uncheck",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bank,
      notRelease: true
    }, {
      path: "baoWang/bank",
      resType: "dir",
      useScene: constant.SceneName.Bank,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.OfferPk] = [ {
      path: "baoWang/spreadAndBankBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.OfferPk,
      notRelease: true
    }, {
      path: "friendRoom",
      resType: "dir",
      useScene: constant.SceneName.OfferPk,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.Spread] = [ {
      path: "baoWang/spreadAndBankBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Spread,
      notRelease: true
    }, {
      path: "baoWang/leftTabBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Spread,
      notRelease: true
    }, {
      path: "baoWang/check",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Spread,
      notRelease: true
    }, {
      path: "baoWang/uncheck",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Spread,
      notRelease: true
    }, {
      path: "baoWang/spread",
      resType: "dir",
      useScene: constant.SceneName.Spread,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.Login] = [ {
      path: "207cd138-1633-4f23-bbe8-2fea8a361484",
      resType: ""
    }, {
      path: "common/UI/toast",
      resType: "dir",
      useScene: constant.SceneName.Login,
      notRelease: true
    }, {
      path: "login/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Login
    }, {
      path: "login/UI",
      resType: "dir",
      useScene: constant.SceneName.Login
    } ];
    constant.GameRes[constant.GameId.Cattle] = [ {
      path: "5659f76c-fff6-4ec1-aba4-7c47549dd192",
      resType: cc.Prefab
    }, {
      path: "b40fc92b-cc16-4c46-9b3f-227ed11bb638",
      resType: ""
    }, {
      path: "86f80a72-0625-459b-bcc0-1f2b8a76dce7",
      resType: ""
    }, {
      path: "3c755ccf-d066-4ef3-9abc-805c4ec20067",
      resType: ""
    }, {
      path: "2dd13281-66c6-43a0-9f9d-4edad35542a1",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "cattle/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Cattle
    }, {
      path: "cattle/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Cattle
    }, {
      path: "cattle/cow",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Cattle,
      notRelease: true
    }, {
      path: "cattle/cardType",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Cattle
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      notRelease: true
    }, {
      path: "cattle/effect/cow",
      resType: "dir",
      useScene: constant.SceneName.Cattle
    }, {
      path: "cattle/effect/start",
      resType: "dir",
      useScene: constant.SceneName.Cattle
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.Cattle,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.Cattle
    }, {
      path: "common/effect/ef_tongchi",
      resType: "dir",
      useScene: constant.SceneName.Cattle,
      notRelease: true
    }, {
      path: "common/effect/ef_tongpei",
      resType: "dir",
      useScene: constant.SceneName.Cattle
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.Cattle,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.CattleHall,
      notRelease: true
    }, {
      path: "cattle/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.CattleHall
    }, {
      path: "selectRoom/cattle/qznn",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.CattleHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.CattleHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.CattleHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.CattleHall,
      notRelease: true
    } ];
    var _BRCattleRes = [ {
      path: "5659f76c-fff6-4ec1-aba4-7c47549dd192",
      resType: cc.Prefab
    }, {
      path: "5a192441-8ecb-4e89-9a21-5ed2af57a5db",
      resType: cc.Prefab
    }, {
      path: "e79ad72b-8d6f-44c2-8c4b-8aa994a7ef25",
      resType: cc.Prefab
    }, {
      path: "0c553360-540a-482b-8924-9327d35e7a0a",
      resType: cc.Prefab
    }, {
      path: "1f76a94c-49f0-4edc-8bcc-27e3cdc1301f",
      resType: cc.Prefab
    }, {
      path: "90c20d72-af74-4293-b56e-1370aed6f950",
      resType: cc.Prefab
    }, {
      path: "31865f22-27b6-4639-80a7-475b3915df56",
      resType: ""
    }, {
      path: "360fa939-f5e5-43bd-bb8d-6ec4687c9e97",
      resType: ""
    }, {
      path: "b40fc92b-cc16-4c46-9b3f-227ed11bb638",
      resType: ""
    }, {
      path: "86f80a72-0625-459b-bcc0-1f2b8a76dce7",
      resType: ""
    }, {
      path: "3c755ccf-d066-4ef3-9abc-805c4ec20067",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BRCattle,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BRCattle,
      notRelease: true
    }, {
      path: "BRCattle/miniPng",
      resType: "dir",
      useScene: constant.SceneName.BRCattle
    }, {
      path: "cattle/effect/cow",
      resType: "dir",
      useScene: constant.SceneName.BRCattle
    }, {
      path: "cattle/cow",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BRCattle,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BRCattleHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.BRCattleHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BRCattleHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BRCattleHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.BRCattle] = _BRCattleRes.concat([ {
      path: "BRCattle/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattle
    }, {
      path: "BRCattle/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattle
    }, {
      path: "selectRoom/BRCattle/gameName",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattleHall
    }, {
      path: "selectRoom/BRCattle/brnn_room",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattleHall
    } ]);
    constant.GameRes[constant.GameId.TenfoldBRCattle] = _BRCattleRes.concat([ {
      path: "tenfoldBRCattle/BG",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattle
    }, {
      path: "tenfoldBRCattle/tenfoldTable",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattle
    }, {
      path: "tenfoldBRCattle",
      resType: "dir",
      useScene: constant.SceneName.BRCattle
    }, {
      path: "selectRoom/tenfoldBRCattle/gameName",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattleHall
    }, {
      path: "selectRoom/tenfoldBRCattle/hall",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BRCattleHall
    } ]);
    constant.GameRes[constant.GameId.Landlords] = [ {
      path: "ed78e5c9-e6f3-4e10-86cc-dc7163895947",
      resType: ""
    }, {
      path: "7b239501-51b9-4c96-90ee-1a7d0ad02714",
      resType: ""
    }, {
      path: "33762d1a-dcdf-4c4d-9a2d-2a5798e2908a",
      resType: ""
    }, {
      path: "47a295c9-c04c-41ab-8afe-c22564ae2081",
      resType: ""
    }, {
      path: "5de67a6d-b287-40cb-b886-4a563cbce355",
      resType: ""
    }, {
      path: "ec2deb69-d638-4718-97b6-49ef40a0d828",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.Landlords,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.Landlords,
      notRelease: true
    }, {
      path: "landlords/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Landlords
    }, {
      path: "landlords/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Landlords
    }, {
      path: "landlords/gameUI",
      resType: "dir",
      useScene: constant.SceneName.Landlords
    }, {
      path: "landlords/effect/chunTian",
      resType: "dir"
    }, {
      path: "landlords/effect/kingBomb",
      resType: "dir",
      useScene: constant.SceneName.Landlords,
      noneUndoneGameDelayLoad: true
    }, {
      path: "landlords/effect/pdk_feiji",
      resType: "dir",
      useScene: constant.SceneName.Landlords,
      noneUndoneGameDelayLoad: true
    }, {
      path: "landlords/effect/pdk_zhadan",
      resType: "dir",
      useScene: constant.SceneName.Landlords,
      noneUndoneGameDelayLoad: true
    }, {
      path: "landlords/effect/shunZi",
      resType: "dir"
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.LandlordsHall,
      notRelease: true
    }, {
      path: "selectRoom/landlords",
      resType: "dir",
      useScene: constant.SceneName.LandlordsHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.LandlordsHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.LandlordsHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.LandlordsHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.LongHu] = [ {
      path: "5a192441-8ecb-4e89-9a21-5ed2af57a5db",
      resType: cc.Prefab
    }, {
      path: "1f76a94c-49f0-4edc-8bcc-27e3cdc1301f",
      resType: cc.Prefab
    }, {
      path: "242c7912-7b41-4222-b8f6-a6b42cd1eb30",
      resType: cc.Prefab
    }, {
      path: "b71e632a-6dbb-4e6d-ad93-20de1f8bd171",
      resType: cc.Prefab
    }, {
      path: "475cbf3a-e2e5-443c-b961-d5a5c1cde1fd",
      resType: cc.Prefab
    }, {
      path: "16cf201b-3941-4712-9477-ce7571faeeb1",
      resType: cc.Prefab
    }, {
      path: "31865f22-27b6-4639-80a7-475b3915df56",
      resType: ""
    }, {
      path: "360fa939-f5e5-43bd-bb8d-6ec4687c9e97",
      resType: ""
    }, {
      path: "62b865ec-1fd1-4506-afd8-3652320d8610",
      resType: ""
    }, {
      path: "7a34e323-7a9a-448c-8f70-4fd8cd61b543",
      resType: ""
    }, {
      path: "21565259-705c-4ce5-b499-260b3479ac07",
      resType: ""
    }, {
      path: "c46d7fa3-e38e-439e-85e1-21b7b5e0522c",
      resType: ""
    }, {
      path: "70d5293e-3bed-444c-9c85-289e7cc3a35d",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.LongHu,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.LongHu,
      notRelease: true
    }, {
      path: "LongHu",
      resType: "dir",
      useScene: constant.SceneName.LongHu
    }, {
      path: "BRCattle/miniPng",
      resType: "dir",
      useScene: constant.SceneName.LongHu
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.LongHuHall,
      notRelease: true
    }, {
      path: "selectRoom/LongHu",
      resType: "dir",
      useScene: constant.SceneName.LongHuHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.LongHuHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.LongHuHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.LongHuHall,
      notRelease: true
    }, {
      path: "LongHu/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.LongHu
    }, {
      path: "LongHu/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.LongHu
    } ];
    var seeCardCattleRes = [ {
      path: "5659f76c-fff6-4ec1-aba4-7c47549dd192",
      resType: cc.Prefab
    }, {
      path: "b40fc92b-cc16-4c46-9b3f-227ed11bb638",
      resType: ""
    }, {
      path: "86f80a72-0625-459b-bcc0-1f2b8a76dce7",
      resType: ""
    }, {
      path: "3c755ccf-d066-4ef3-9abc-805c4ec20067",
      resType: ""
    }, {
      path: "2dd13281-66c6-43a0-9f9d-4edad35542a1",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "cattle/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "cattle/cow",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SeeThreeCattle,
      notRelease: true
    }, {
      path: "cattle/cardType",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SeeThreeCattle,
      notRelease: true
    }, {
      path: "cattle/effect/cow",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "cattle/effec/start",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "common/effect/ef_tongchi",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle,
      notRelease: true
    }, {
      path: "common/effect/ef_tongpei",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattle,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattleHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattleHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SeeThreeCattleHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.SeeThreeCattleHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.SeeThreeCattle] = seeCardCattleRes.concat([ {
      path: "cattle/seeThreeCattle/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "cattle/seeThreeCattle/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattleHall
    }, {
      path: "selectRoom/cattle/seeThreeCattle",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattleHall
    } ]);
    constant.GameRes[constant.GameId.SeeFourCattle] = seeCardCattleRes.concat([ {
      path: "cattle/seeFourCattle/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattle
    }, {
      path: "selectRoom/cattle/seeFourCattleHallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattleHall
    }, {
      path: "selectRoom/cattle/seeFourCattle",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SeeThreeCattleHall
    } ]);
    constant.GameRes[constant.GameId.TongBiCattle] = [ {
      path: "5659f76c-fff6-4ec1-aba4-7c47549dd192",
      resType: cc.Prefab
    }, {
      path: "b40fc92b-cc16-4c46-9b3f-227ed11bb638",
      resType: ""
    }, {
      path: "86f80a72-0625-459b-bcc0-1f2b8a76dce7",
      resType: ""
    }, {
      path: "3c755ccf-d066-4ef3-9abc-805c4ec20067",
      resType: ""
    }, {
      path: "2dd13281-66c6-43a0-9f9d-4edad35542a1",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "cattle/tongBi/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "common/UI/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "cattle/cow",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.TongBiCattle,
      notRelease: true
    }, {
      path: "cattle/cardType",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.TongBiCattle,
      notRelease: true
    }, {
      path: "cattle/effect/cow",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "cattle/effect/start",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattle,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattle
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattle,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattleHall,
      notRelease: true
    }, {
      path: "cattle/tongBi/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.TongBiCattleHall
    }, {
      path: "selectRoom/cattle/tongBiCattle",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.TongBiCattleHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattleHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.TongBiCattleHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.TongBiCattleHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.Dzpk] = [ {
      path: "880aaa2a-e4b9-4fdc-a6ad-92c3d6454dba",
      resType: cc.Prefab
    }, {
      path: "7b7817f4-7e60-4080-9f1d-a73def939286",
      resType: cc.Prefab
    }, {
      path: "9c15cbf5-55a9-4df0-a583-ae5861d4a3a6",
      resType: cc.Prefab
    }, {
      path: "8e535132-41bd-4a67-ac18-57992b3532c4",
      resType: cc.Prefab
    }, {
      path: "071cc911-4dbf-408f-a04b-fb02e1813eb6",
      resType: cc.Prefab
    }, {
      path: "98aac6a0-b57c-40c8-b706-3176ddd5503cs",
      resType: cc.Prefab
    }, {
      path: "013df03a-1d06-4ec5-ba42-246c92f7a144",
      resType: ""
    }, {
      path: "a503816e-dca3-4f19-8462-64d1b8eb9df4",
      resType: ""
    }, {
      path: "c80b80a6-0ce5-453b-83a4-57b994aecd71",
      resType: ""
    }, {
      path: "5736cc90-af63-45c7-b8fe-aa845aecc9a7",
      resType: ""
    }, {
      path: "11abf6f0-3797-47b2-9292-d5ac8226eee7",
      resType: ""
    }, {
      path: "e5fec7f9-9005-4c2b-8ff0-9b1d0da9bd84",
      resType: ""
    }, {
      path: "dea35e87-bea3-49fe-9145-56e4e12ee4cf",
      resType: ""
    }, {
      path: "a6b5b3b1-f5ca-4684-9ecd-0cd9c33e1bf2",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "goldenFraud/effect/playerWin",
      resType: "dir",
      useScene: constant.SceneName.Dzpk
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Dzpk,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.Dzpk,
      notRelease: true
    }, {
      path: "dzpk/UI",
      resType: "dir",
      useScene: constant.SceneName.Dzpk
    }, {
      path: "dzpk/roomBgNew",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Dzpk
    }, {
      path: "dzpk/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Dzpk
    }, {
      path: "dzpk/Effect",
      resType: "dir",
      useScene: constant.SceneName.Dzpk
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.Dzpk,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.DzpkHall,
      notRelease: true
    }, {
      path: "selectRoom/dzpk",
      resType: "dir",
      useScene: constant.SceneName.DzpkHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.DzpkHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.DzpkHall,
      notRelease: true
    }, {
      path: "dzpk/UI",
      resType: "dir",
      useScene: constant.SceneName.DzpkHall
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.DzpkHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.GoldenFraud] = [ {
      path: "6ce7f98e-c1f8-4894-9cd8-93f0e01f86cb",
      resType: cc.Prefab
    }, {
      path: "e5fec7f9-9005-4c2b-8ff0-9b1d0da9bd84",
      resType: ""
    }, {
      path: "dea35e87-bea3-49fe-9145-56e4e12ee4cf",
      resType: ""
    }, {
      path: "a6b5b3b1-f5ca-4684-9ecd-0cd9c33e1bf2",
      resType: ""
    }, {
      path: "d8c3af00-0b8f-4f4e-bb0e-87540c6a2155",
      resType: ""
    }, {
      path: "601a461f-54c9-4b05-84c5-e6bc91b330c9",
      resType: ""
    }, {
      path: "fba665ee-f1d1-4865-a946-5d71109bcc3d",
      resType: ""
    }, {
      path: "7214d27b-5a70-4849-aed1-77a608552b84",
      resType: ""
    }, {
      path: "6dde678b-cf7d-4780-8489-a4066f103420",
      resType: ""
    }, {
      path: "fba665ee-f1d1-4865-a946-5d71109bcc3d",
      resType: ""
    }, {
      path: "3abef5db-b8f5-4fbb-a239-2aea70b9c73d",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "goldenFraud/effect/PK",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      noneUndoneGameDelayLoad: true
    }, {
      path: "goldenFraud/effect/desperate",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      noneUndoneGameDelayLoad: true
    }, {
      path: "goldenFraud/effect/autoFollow",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud
    }, {
      path: "goldenFraud/effect/juesheng",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      noneUndoneGameDelayLoad: true
    }, {
      path: "goldenFraud/effect/playerWin",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud
    }, {
      path: "goldenFraud/UI",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud
    }, {
      path: "goldenFraud/gameBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.GoldenFraud
    }, {
      path: "common/UI/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.GoldenFraud
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      notRelease: true
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.GoldenFraud,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraud,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraudHall,
      notRelease: true
    }, {
      path: "selectRoom/goldenFraud",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraudHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraudHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.GoldenFraudHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.GoldenFraudHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.SanGong] = [ {
      path: "94899643-dd0b-43c7-8d3a-0c25203405fe",
      resType: cc.Prefab
    }, {
      path: "b40fc92b-cc16-4c46-9b3f-227ed11bb638",
      resType: ""
    }, {
      path: "86f80a72-0625-459b-bcc0-1f2b8a76dce7",
      resType: ""
    }, {
      path: "3c755ccf-d066-4ef3-9abc-805c4ec20067",
      resType: ""
    }, {
      path: "da164a90-c4d1-4801-9883-fa80e30ecdab",
      resType: ""
    }, {
      path: "13967b0f-2687-4a96-a892-3b09a7a7de1e",
      resType: ""
    }, {
      path: "2dd13281-66c6-43a0-9f9d-4edad35542a1",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "sanGong/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SanGong
    }, {
      path: "sanGong/effect",
      resType: "dir",
      useScene: constant.SceneName.SanGong
    }, {
      path: "sanGong/sanGong",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SanGong,
      notRelease: true
    }, {
      path: "cattle/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SanGong
    }, {
      path: "cattle/effect/start",
      resType: "dir",
      useScene: constant.SceneName.SanGong
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SanGong,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.SanGong,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.SanGong
    }, {
      path: "common/effect/ef_tongchi",
      resType: "dir",
      useScene: constant.SceneName.SanGong,
      notRelease: true
    }, {
      path: "common/effect/ef_tongpei",
      resType: "dir",
      useScene: constant.SceneName.SanGong
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.SanGong,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.SanGongHall,
      notRelease: true
    }, {
      path: "sanGong/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SanGongHall
    }, {
      path: "selectRoom/sanGong",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.SanGongHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.SanGongHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.SanGongHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.SanGongHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.King] = [ {
      path: "880c7ffb-85b6-4a32-88c3-70548f87a6da",
      resType: cc.Prefab
    }, {
      path: "b57c0b88-d984-405f-8608-0c3c45709db8",
      resType: cc.Prefab
    }, {
      path: "2b35cfdb-7a30-49a8-9f0d-ab0680592e03",
      resType: cc.Prefab
    }, {
      path: "74b32077-2655-4623-9170-493721013d76",
      resType: cc.Prefab
    }, {
      path: "c399c102-fbec-4ccc-823a-96928a19f016",
      resType: cc.Prefab
    }, {
      path: "037259b9-2d5c-43dd-be90-2c33543895a0",
      resType: cc.Prefab
    }, {
      path: "094ccdf3-bc8f-441f-bbed-7dcd74d04da8",
      resType: cc.Prefab
    }, {
      path: "c9ed8df4-97b9-4bd4-906c-ee60ec9e2b07",
      resType: cc.Prefab
    }, {
      path: "268369bc-1f51-43e7-8a41-cd8081da1bbc",
      resType: cc.Prefab
    }, {
      path: "f9c23a4d-3c37-413f-b67c-3825a07f2fa2",
      resType: cc.Prefab
    }, {
      path: "461be447-ec69-47e8-8c6b-63dbde3fbdd1",
      resType: cc.Prefab
    }, {
      path: "e81595c5-3845-4115-bb4b-6af625d7e07a",
      resType: cc.Prefab
    }, {
      path: "046baca5-3173-42a6-bcac-97d03f281965",
      resType: cc.Prefab
    }, {
      path: "99946f4d-5638-4d22-96e9-06c572981f06",
      resType: cc.Prefab
    }, {
      path: "6721d316-6038-4d42-af9c-b5ab96c16c13",
      resType: cc.Prefab
    }, {
      path: "68481bd6-8792-4373-b000-960055dc4b37",
      resType: cc.Prefab
    }, {
      path: "a406116a-1431-4adc-ab0d-2ddd112df7ed",
      resType: cc.Prefab
    }, {
      path: "248c6c05-8f85-4262-8bf2-46866ba90266",
      resType: cc.Prefab
    }, {
      path: "8d8c7274-b253-4504-915e-cedb5464b862",
      resType: cc.Prefab
    }, {
      path: "7df86f22-8f0f-4715-a39d-9fe207b3c2f7",
      resType: cc.Prefab
    }, {
      path: "bffb3da2-ad86-4b5c-b0f9-eb4c36312a91",
      resType: cc.Prefab
    }, {
      path: "de321083-9c28-40e0-be3e-4344fb9dae81",
      resType: cc.Prefab
    }, {
      path: "ec4d22e2-1dd6-41d8-a045-cab82932cf96",
      resType: cc.Prefab
    }, {
      path: "f16fc206-0e6c-44a9-8982-3fa7b009b598",
      resType: cc.Prefab
    }, {
      path: "bc4159e3-ded6-41e5-bbe7-2b04cb87767b",
      resType: cc.Prefab
    }, {
      path: "c92ac0fe-f79a-403b-a3ea-467ae7a59cf3",
      resType: cc.Prefab
    }, {
      path: "78515f16-fc10-432c-859f-05d6c38a7a53",
      resType: cc.Prefab
    }, {
      path: "eebabf1f-9766-4d04-b13b-e856c72cbb11",
      resType: cc.Prefab
    }, {
      path: "c4ac2346-4260-49a6-8201-29c9f4bb7ae0",
      resType: ""
    }, {
      path: "297dd3eb-a9bf-4ae5-9c69-c46a850d7bb4",
      resType: ""
    }, {
      path: "86723675-a4c9-434f-8ec8-63e166fb08ba",
      resType: ""
    }, {
      path: "de8780be-7509-4953-9831-ad7bc7767b21",
      resType: ""
    }, {
      path: "479bed07-414b-4655-94ec-be96861e131f",
      resType: ""
    }, {
      path: "66120ceb-25d1-47f4-87df-c6e0ebe06131",
      resType: ""
    }, {
      path: "db3ba275-2d0b-4766-9e25-0f0d80615027",
      resType: ""
    }, {
      path: "52bf20ca-7758-4e05-afb5-bb46e056fbdc",
      resType: ""
    }, {
      path: "9e6e57b1-6862-42ba-81c5-4447a070f6c7",
      resType: ""
    }, {
      path: "8236036f-528e-415e-9463-df43a977f8ca",
      resType: ""
    }, {
      path: "e2f2eb03-8be4-4153-8032-95e65dffc40c",
      resType: ""
    }, {
      path: "ab0b3bb4-7cf5-4a20-a3bf-0101aceac1b0",
      resType: ""
    }, {
      path: "f6b7a877-bddb-4641-8f8b-aaea5bcdc9f0",
      resType: ""
    }, {
      path: "e787b3cb-db91-4502-a056-2289c402a12c",
      resType: ""
    }, {
      path: "04ee385c-8282-4a0a-9a0e-00589b1e423b",
      resType: ""
    }, {
      path: "d8c35c4f-aaaf-4e85-80c0-0fa0b651f53f",
      resType: ""
    }, {
      path: "e3a0702d-01e8-406a-9943-2595891fe9d9",
      resType: ""
    }, {
      path: "88b4dc2d-687a-4549-bfa6-c77b036108ac",
      resType: ""
    }, {
      path: "2dd41e23-29a0-4818-8315-0b2afe7a7ce3",
      resType: ""
    }, {
      path: "91b7bca9-f524-439c-883b-a44bad466294",
      resType: ""
    }, {
      path: "bdb2a1fa-b1a9-4f08-98fb-05effe1bca7f",
      resType: ""
    }, {
      path: "e064fae6-2434-4a7d-bd48-0a3c762f94e0",
      resType: ""
    }, {
      path: "feb9deef-533f-4da5-b732-7a38710ee91d",
      resType: ""
    }, {
      path: "09bf8697-5e99-468c-b691-fd7f1672e111",
      resType: ""
    }, {
      path: "6f05fb6b-cb7a-4a69-b4d9-28e45fc18cfd",
      resType: ""
    }, {
      path: "king/baseGame/icon",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BaseGame,
      notRelease: true
    }, {
      path: "king/common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "king/common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BaseGame
    }, {
      path: "king/baseGame/UI",
      resType: "dir",
      useScene: constant.SceneName.BaseGame
    }, {
      path: "king/baseGame/maxIcon",
      resType: "dir",
      useScene: constant.SceneName.BaseGame
    }, {
      path: "king/baseGame/effect/eanrings",
      resType: "dir"
    }, {
      path: "king/baseGame/effect/other",
      resType: "dir"
    }, {
      path: "king/baseGame/effect/freeGameFrame",
      resType: "dir"
    }, {
      path: "king/baseGame/effect/startBtn",
      resType: "dir",
      useScene: constant.SceneName.BaseGame
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BaseGame
    }, {
      path: "king/bonusGame/UI",
      resType: "dir",
      useScene: constant.SceneName.BonusGame
    }, {
      path: "king/bonusGame/effect",
      resType: "dir",
      useScene: constant.SceneName.BonusGame
    }, {
      path: "king/bonusGame/skill",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BonusGame,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.FastZJH] = [ {
      path: "a6b5b3b1-f5ca-4684-9ecd-0cd9c33e1bf2",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "common/effect/effect_start",
      resType: "dir",
      useScene: constant.SceneName.FastZJH
    }, {
      path: "goldenFraud/UI",
      resType: "dir",
      useScene: constant.SceneName.FastZJH
    }, {
      path: "goldenFraud/effect/playerWin",
      resType: "dir",
      useScene: constant.SceneName.FastZJH
    }, {
      path: "jszjh/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.FastZJH
    }, {
      path: "common/UI/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.FastZJH
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.FastZJH,
      notRelease: true
    }, {
      path: "card",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.FastZJH,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.FastZJH,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.FastZJHHall,
      notRelease: true
    }, {
      path: "selectRoom/jszjh",
      resType: "dir",
      useScene: constant.SceneName.FastZJHHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.FastZJHHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.FastZJHHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.FastZJHHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.PaiGow] = [ {
      path: "2eb2c862-ebff-4b08-bbe2-afd67a933383",
      resType: cc.Prefab
    }, {
      path: "57c1fb42-ed78-4719-9264-f9530e2e2177",
      resType: cc.Prefab
    }, {
      path: "423c52df-9613-422e-b178-9822ef53de6f",
      resType: cc.Prefab
    }, {
      path: "33c8042e-77fe-4516-8cc4-ba3bd7d652a3",
      resType: ""
    }, {
      path: "13e74be8-f58b-44a5-9b19-844c41d80ca5",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "paiGow/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.PaiGow
    }, {
      path: "common/effect/effect_start",
      resType: "dir",
      useScene: constant.SceneName.PaiGow
    }, {
      path: "common/UI/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.PaiGow
    }, {
      path: "paiGow/cards",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.PaiGow,
      notRelease: true
    }, {
      path: "paiGow/effect",
      resType: "dir",
      useScene: constant.SceneName.PaiGow
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.PaiGow,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.PaiGow
    }, {
      path: "common/effect/ef_tongchi",
      resType: "dir",
      useScene: constant.SceneName.PaiGow,
      notRelease: true
    }, {
      path: "common/effect/ef_tongpei",
      resType: "dir",
      useScene: constant.SceneName.PaiGow
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.PaiGow,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.PaiGowHall,
      notRelease: true
    }, {
      path: "paiGow/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.PaiGowHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.PaiGowHall,
      notRelease: true
    }, {
      path: "selectRoom/qzpj",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.PaiGowHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.PaiGowHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.PaiGowHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.Dice] = [ {
      path: "8abdac64-a3f9-45c8-9494-8dbcab3ea711",
      resType: cc.Prefab
    }, {
      path: "1712f76b-eb14-4369-8820-fea3626b6673",
      resType: cc.Prefab
    }, {
      path: "fc89ac43-36cc-48a4-afad-cf53d23cdf8f",
      resType: cc.Prefab
    }, {
      path: "a373888b-0034-4665-882d-27e2393bb443",
      resType: cc.Prefab
    }, {
      path: "0963a2a4-12ff-4168-81ed-e95d09b74186",
      resType: ""
    }, {
      path: "802c4267-d0a8-4052-b5f3-b4337fbf9e89",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "dice/UI",
      resType: "dir",
      useScene: constant.SceneName.Dice
    }, {
      path: "dice/Effect/effect",
      resType: "dir",
      useScene: constant.SceneName.Dice
    }, {
      path: "dice/gameBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Dice
    }, {
      path: "dice/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Dice
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "dice2",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "dice",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "dice3",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "diceBetState",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.DiceHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.DiceHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.Dice,
      notRelease: true
    }, {
      path: "selectRoom/dice",
      resType: "dir",
      useScene: constant.SceneName.DiceHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.DiceHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.DiceHall,
      notRelease: true
    } ];
    constant.GameRes[constant.GameId.ErBaGang] = [ {
      path: "85bdf0f4-9c46-4ef2-9286-e4c641433340",
      resType: cc.Prefab
    }, {
      path: "423c52df-9613-422e-b178-9822ef53de6f",
      resType: cc.Prefab
    }, {
      path: "13e74be8-f58b-44a5-9b19-844c41d80ca5",
      resType: ""
    }, {
      path: "common/UI/delayLoad",
      resType: "dir",
      notRelease: true
    }, {
      path: "erBaGang/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "common/effect/effect_start",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "common/UI/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "erBaGang/mjCard",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.ErBaGang,
      notRelease: true
    }, {
      path: "paiGow/effect",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang,
      notRelease: true
    }, {
      path: "common/effect/ef_shengli",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "common/effect/ef_tongchi",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang,
      notRelease: true
    }, {
      path: "common/effect/ef_tongpei",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.ErBaGang
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.ErBaGangHall,
      notRelease: true
    }, {
      path: "erBaGang/hallBg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.ErBaGangHall
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.ErBaGangHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.ErBaGangHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.ErBaGangHall
    } ];
    constant.GameRes[constant.GameId.Bcbm] = [ {
      path: "5a192441-8ecb-4e89-9a21-5ed2af57a5db",
      resType: cc.Prefab
    }, {
      path: "1f76a94c-49f0-4edc-8bcc-27e3cdc1301f",
      resType: cc.Prefab
    }, {
      path: "84e764f3-5410-4e72-85b8-181be118b19c",
      resType: cc.Prefab
    }, {
      path: "31865f22-27b6-4639-80a7-475b3915df56",
      resType: ""
    }, {
      path: "360fa939-f5e5-43bd-bb8d-6ec4687c9e97",
      resType: ""
    }, {
      path: "62b865ec-1fd1-4506-afd8-3652320d8610",
      resType: ""
    }, {
      path: "7b769a94-7468-4a8c-a527-1f9b6c58963d",
      resType: ""
    }, {
      path: "fcafc389-e13c-42fa-b231-bddd62b95f1a",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.Bcbm,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.Bcbm,
      notRelease: true
    }, {
      path: "Bcbm",
      resType: "dir",
      useScene: constant.SceneName.Bcbm,
      notRelease: true
    }, {
      path: "BRCattle/miniPng",
      resType: "dir",
      useScene: constant.SceneName.Bcbm
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BcbmHall,
      notRelease: true
    }, {
      path: "selectRoom/Bcbm",
      resType: "dir",
      useScene: constant.SceneName.BcbmHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.BcbmHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BcbmHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BcbmHall,
      notRelease: true
    }, {
      path: "Bcbm/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bcbm
    }, {
      path: "Bcbm/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.Bcbm
    } ];
    constant.GameRes[constant.GameId.GiftMoney] = [ {
      path: "3530d020-d5d2-44cc-9543-b9833f3a1da1",
      resType: ""
    }, {
      path: "418e9f46-5d1d-4c8d-b772-36fca9cd0e4e",
      resType: ""
    }, {
      path: "c7d8ee40-be71-4cf1-a1e2-6af1bc26170f",
      resType: ""
    }, {
      path: "bebd88c9-25ef-468f-beeb-eeb974649237",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.GiftMoney,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.GiftMoney,
      notRelease: true
    }, {
      path: "giftMoney/Effect",
      resType: "dir",
      useScene: constant.SceneName.GiftMoney
    }, {
      path: "giftMoney/UI",
      resType: "dir",
      useScene: constant.SceneName.GiftMoney
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.GiftMoneyHall,
      notRelease: true
    }, {
      path: "selectRoom/giftMoney",
      resType: "dir",
      useScene: constant.SceneName.GiftMoneyHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.GiftMoneyHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.GiftMoneyHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.GiftMoneyHall,
      notRelease: true
    }, {
      path: "giftMoney/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.GiftMoney
    } ];
    constant.GameRes[constant.GameId.BaiJiaLe] = [ {
      path: "5a192441-8ecb-4e89-9a21-5ed2af57a5db",
      resType: cc.Prefab
    }, {
      path: "1f76a94c-49f0-4edc-8bcc-27e3cdc1301f",
      resType: cc.Prefab
    }, {
      path: "76e16efc-5774-421c-a8c0-57b5be4b717a",
      resType: cc.Prefab
    }, {
      path: "31865f22-27b6-4639-80a7-475b3915df56",
      resType: ""
    }, {
      path: "360fa939-f5e5-43bd-bb8d-6ec4687c9e97",
      resType: ""
    }, {
      path: "62b865ec-1fd1-4506-afd8-3652320d8610",
      resType: ""
    }, {
      path: "7b769a94-7468-4a8c-a527-1f9b6c58963d",
      resType: ""
    }, {
      path: "eba45310-cf35-46d6-93a5-a6f36db3e3f0",
      resType: ""
    }, {
      path: "21565259-705c-4ce5-b499-260b3479ac07",
      resType: ""
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe,
      notRelease: true
    }, {
      path: "BaiJiaLe",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe
    }, {
      path: "BRCattle/miniPng",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe
    }, {
      path: "LongHu/effect/he",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe
    }, {
      path: "LongHu/UI",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLe
    }, {
      path: "common/UI/preLoad",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLeHall,
      notRelease: true
    }, {
      path: "selectRoom/BaiJiaLe",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLeHall,
      notRelease: true
    }, {
      path: "selectRoom/effect",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLeHall,
      notRelease: true
    }, {
      path: "selectRoom/xuanfang",
      resType: cc.SpriteAtlas,
      useScene: constant.SceneName.BaiJiaLeHall,
      notRelease: true
    }, {
      path: "font",
      resType: "dir",
      useScene: constant.SceneName.BaiJiaLeHall,
      notRelease: true
    }, {
      path: "BaiJiaLe/bg",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BaiJiaLe
    }, {
      path: "BaiJiaLe/table",
      resType: cc.SpriteFrame,
      useScene: constant.SceneName.BaiJiaLe
    } ];
    constant.GameRes[constant.ToastName.InfoToast] = [ {
      path: "common/UI/delayLoad",
      resType: "dir"
    } ];
    var n = 0;
    constant.PoolId = {
      Help: n++,
      KingHelp: n++,
      Record: n++,
      Hint: n++,
      Setting: n++,
      Notice: n++,
      ToastLoading: n++,
      ToastRequestError: n++,
      ToastInGameDisconnect: n++,
      ToastHint: n++,
      RoomCard: n++,
      WebView: n++,
      Chip: n++,
      BackCard: n++,
      Card: n++,
      SetCarryChipNumPanel: n++,
      CallDiceRecord: n++,
      Amazing: n++,
      BigWin: n++,
      CommonWin: n++,
      SuperwWin: n++,
      EfFreeGame: n++,
      EfBonusGame: n++,
      EfJackpot: n++,
      EfHero: n++,
      EfScatter: n++,
      EfWild: n++,
      EfGetJackpot: n++,
      GameState: n++,
      GameCard: n++,
      gameRecord: n++,
      diceBetNumBtn: n++,
      paiGowCardType: n++,
      DialogComonLayer: n++,
      rankingItem: n++,
      layerMsg: n++,
      rechargeWay: n++,
      moneyToggle: n++,
      userAvatar: n++,
      payToggle: n++,
      activityToggle: n++,
      tableTd: n++,
      reportItem: n++,
      playerCard: n++,
      pkRule: n++,
      activityCenter: n++
    };
    n = 0;
    constant.HttpTimeoutDispose = {
      RetryEndStop: n++,
      RepetitionRetry: n++,
      RetryEndRefresh: n++
    };
    n = 0;
    constant.ToastType = {
      Loading: n++,
      RequestError: n++,
      InGameDisconnect: n++,
      OutsideGameDisconnect: n++,
      Recharge: n++,
      UndoneGame: n++,
      LoadTimeout: n++,
      SystemError: n++,
      Hint: n++,
      ConnectTimeout: n++,
      LoadingWaitStart: n++
    };
    n = 0;
    constant.ToastPriority = {
      SettingToast: n,
      ExitToast: n++,
      LoadingToast: n++,
      LogoutToast: n++,
      NetToast: n++
    };
    constant.PostReqUserBalance = {
      action: "GetUserBalance",
      gameTypeId: null
    };
    constant.PostSyncUserBalance = {
      action: "GetUserBalance",
      gameTypeId: null,
      reqExtendArg: {
        timeoutRefresh: false,
        reRequested: false
      }
    };
    constant.PostSyncServerTime = {
      action: "GetServerTime",
      isJack: 1,
      reqExtendArg: {
        timeoutRefresh: false,
        reRequested: false
      }
    };
    constant.PostCheckForMatch = {
      action: "CheckForMatch",
      reqExtendArg: {
        timeoutRefresh: false,
        reRequested: false
      }
    };
    var _action = "DoPlay";
    constant.PostRecover = {
      action: _action,
      eventName: "recover"
    };
    constant.PostCancelMatching = {
      action: _action,
      eventName: "leave"
    };
    constant.PostReqGameList = {
      action: "GetGameList",
      reqExtendArg: {
        timeoutRefresh: false,
        reRequested: false
      }
    };
    constant.PostJoinFriendRoom = {
      action: "JoinRoom",
      roomId: "",
      roomNum: 0,
      reqExtendArg: {
        timeoutRefresh: true
      }
    };
    constant.PostFriendRoomList = {
      Action: "GetGameList",
      type: 1
    };
    constant.PostReady = {
      Action: _action,
      eventName: "ready",
      isLightHint: true,
      reqExtendArg: {
        timeoutRefresh: true
      }
    };
    constant.SendCheckCodeUesType = {
      Register: 1,
      Login: 2,
      BindPhone: 3,
      Unbind: 4,
      Check: 5,
      ResetPassword: 6,
      Transfer: 7
    };
    constant.PostSendMobileCode = {
      Action: "SendMobileCode",
      type: constant.SendCheckCodeUesType.Register,
      mobileNum: 0,
      imgCode: 0
    };
    constant.HttpCode = {
      NotSufficientFunds: -3,
      GameOver: -4,
      Succeed: 1,
      CheckCodeError: -2,
      error: -1,
      SystemNotice: -7,
      LoginOut: 0,
      Timeout: -1e3,
      Disconnect: -11,
      JumpToGoogle: -10,
      NotCommand: 500
    };
    n = 0;
    constant.GameState = {
      Disable: n++,
      Able: n++,
      Commend: n++,
      New: n++,
      Hot: n++,
      Wait: n++
    };
    n = 0;
    constant.FriendRoomPlayerState = {
      Unready: n++,
      Readied: n++,
      Gaming: n++
    };
    cc._RF.pop();
  }, {} ],
  createRoomItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "f6eacKQZU9NaLld8V9Tb0uZ", "createRoomItem");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        txtRoomName: cc.Label,
        txtBet: cc.Label,
        txtAdmittance: cc.Label,
        txtAntes: cc.Label,
        txtPeopleNum: cc.Label,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      baseRegisterEvent: function baseRegisterEvent() {
        this.registerHandler = [];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(msg, index, sceneName) {
        var _this = this;
        var picKey = index % 6;
        sceneName == constant.SceneName.DzpkHall ? this.antesTxt.string = "\u76f2\u6ce8" : sceneName == constant.SceneName.BRCattleHall ? this.antesTxt.string = "\u9650\u7ea2" : this.antesTxt.string = "\u5e95\u6ce8";
        this.roomName.string = msg.roomName;
        if (sceneName == constant.SceneName.BRCattleHall || sceneName == constant.SceneName.BaiJiaLeHall || sceneName == constant.SceneName.BcbmHall) {
          this.bet.string = msg.ante + "~" + 100 * msg.ante;
          this.bet.fontSize = 30;
        } else {
          this.bet.fontSize = 44;
          this.bet.string = msg.ante;
        }
        this.roomKey = Number(dataLogic.selectRoomConfig[index].roomId[2]);
        this.selRoomAnim.runAction(cc.sequence(cc.delayTime(1 * index + .45), cc.callFunc(function() {
          _this.selRoomAnim.getComponent(cc.Animation).play();
        }, this)));
        if (1 != msg.roomState) {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.selRoomAtlas.getSpriteFrame("1");
          this.admittance.string = "\u7ef4\u62a4\u4e2d";
          this.bg.getComponent(cc.Button).interactable = false;
        } else {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.selRoomAtlas.getSpriteFrame("" + picKey);
          this.admittance.string = "\u51c6\u5165\uff1a" + msg.joinAmount;
          this.bg.getComponent(cc.Button).interactable = true;
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("this.roomKey", this.roomKey);
        clientEvent.dispatchEvent("btnIntoGameEvent", this.roomKey);
      }
    });
    cc._RF.pop();
  }, {} ],
  createRoom: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "ca52dosUgdFyqFtJEK9axic", "createRoom");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _alterBalanceCb = null;
    var _createRoomSucceedCb = null;
    var _createRoomItemSpacing = 120;
    var _item = void 0, _createRoomItemTopSpacing = 2;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        pfToggle: cc.Prefab,
        leftSide: cc.Node,
        scrollContent: cc.Node,
        scrollView: cc.ScrollView,
        rightContent: cc.Node,
        pfCreateRoomItem: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqFriendRoomListCb", this.reqFriendRoomListCb.bind(this) ], [ "reqCreateRoomCb", this.reqCreateRoomCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        var _this = this;
        this.toastShow();
        this.registerEvent();
        _alterBalanceCb = initArg.alterBalanceCb;
        _createRoomSucceedCb = initArg.createRoomSucceedCb;
        var bt = void 0;
        for (var i = 0; i < 4; i++) {
          _item = cc.instantiate(this.pfCreateRoomItem);
          _item.parent = this.rightContent;
          _item.y = -i * _createRoomItemSpacing - _createRoomItemTopSpacing;
          bt = _item.getChildByName("btCreate").getComponent(cc.Button);
          bt.clickEvents[0].target = this.node;
          bt.clickEvents[0].component = "createRoom";
          bt.clickEvents[0].handler = "btCreateRoomEvent";
          _item.active = false;
        }
        0 == dataLogic.friendRoomList.length ? this.reqDateAndShowLoadView(constant.PostFriendRoomList, "reqFriendRoomListCb") : this.scheduleOnce(function() {
          _this.initLeftTab();
          _this.updateCreateRoomItem(dataLogic.friendRoomList[0].gameTypeId);
        }, 0);
      },
      initLeftTab: function initLeftTab() {
        var checkEventHandler = void 0, gameId = void 0, index = 0;
        for (var i = 0; i < dataLogic.friendRoomList.length; i++) {
          gameId = dataLogic.friendRoomList[i].gameTypeId;
          _item = cc.instantiate(this.pfToggle);
          _item.parent = this.leftSide;
          checkEventHandler = new cc.Component.EventHandler();
          checkEventHandler.target = this.node;
          checkEventHandler.component = "createRoom";
          checkEventHandler.handler = "toggleEvent";
          checkEventHandler.customEventData = gameId;
          var toggleComponent = _item.getComponent(cc.Toggle);
          _item.y = index * (5 - _item.height) - _item.height / 2 - 3;
          _item.getChildByName("txt").getComponent(cc.Label).string = constant.GameNickName[gameId];
          toggleComponent.checkEvents[0] = checkEventHandler;
          if (_item.getComponent(cc.Toggle).isChecked) {
            _item.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
            _item.getChildByName("txt").color = new cc.Color(255, 255, 255);
          } else _item.getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
          index++;
        }
        this.leftSide.parent.height = this.leftSide.height = index * (this.leftSide.children[0].height - 3) - 14;
      },
      reqCreateRoomCb: function reqCreateRoomCb(msg, roomId) {
        this.hideLoadView();
        if (msg.Code != constant.HttpCode.Succeed) {
          if (constant.HttpCode.NotSufficientFunds == msg.Code) {
            this.showLayerTip(msg.StrCode);
            _alterBalanceCb(msg.Data);
          }
          return;
        }
        dataLogic.setRoomNum(msg.Data.roomNum);
        dataLogic.setNeedRecover(true);
        dataLogic.setReqRecoverState(true);
        dataLogic.setDeskId(msg.Data.deskId);
        dataLogic.setRoomType(true);
        var gameId = roomId.substr(0, 2);
        var key = kf.getObjIndexByValue(dataLogic.friendRoomList, gameId, "gameTypeId");
        dataLogic.setSelectRoomConfig(dataLogic.friendRoomList[key].gameRoom);
        var sceneName = dataLogic.getGameSceneNameByGameId(gameId);
        dataLogic.setCurRoomKey(roomId.substr(2, 1));
        dataLogic.setRoomConfig("roomId", roomId);
        this.toastClose();
        _createRoomSucceedCb(sceneName, gameId);
      },
      reqFriendRoomListCb: function reqFriendRoomListCb(msg) {
        this.hideLoadView();
        if (msg.Code != constant.HttpCode.Succeed) return;
        dataLogic.setFriendRoomList(msg.Data);
        this.initLeftTab();
        this.updateCreateRoomItem(dataLogic.friendRoomList[0].gameTypeId);
      },
      btCreateRoomEvent: function btCreateRoomEvent(event, roomId) {
        audioMgr.playEffect(this.clickAudio);
        var gameId = roomId.substr(0, 2);
        var localVersion = hotUpdateMgr.getLocalSubModuleVersion(gameId);
        var version = hotUpdateMgr.getSubModuleVersion(gameId);
        if (kf.compareVersion(localVersion, version) < 0) {
          var hintStr = "1.0" == localVersion ? "\u60a8\u672a\u4e0b\u8f7d\u8be5\u6e38\u620f\uff0c\u8bf7\u5148\u524d\u5f80\u5927\u5385\u4e0b\u8f7d\u6e38\u620f\u540e\u518d\u64cd\u4f5c\u54e6\uff01" : "\u8be5\u6e38\u620f\u6709\u66f4\u65b0\u5305\uff0c\u8bf7\u5148\u524d\u5f80\u5927\u5385\u66f4\u65b0\u6e38\u620f\u540e\u518d\u64cd\u4f5c\u54e6\uff01";
          clientEvent.dispatchEvent("showLayerToast", {
            contentTxt: hintStr,
            btnTxt: [ null, "\u786e\u5b9a" ],
            btnEventName: [ null, "toastClose" ]
          }, 1);
          return;
        }
        constant.PostJoinFriendRoom.roomNum = 1;
        constant.PostJoinFriendRoom.roomId = roomId;
        if (roomId.substr(0, 2) == constant.GameId.Dzpk) {
          var key = roomId.replace("02", "");
          var balance = dataLogic.userBalance;
          constant.PostJoinFriendRoom.bringCoin = dataLogic.userBalance > dataLogic.carryChipNumData[key - 1] ? dataLogic.carryChipNumData[key - 1] : balance;
        }
        this.reqDateAndShowLoadView(constant.PostJoinFriendRoom, "reqCreateRoomCb", roomId, true);
      },
      toggleEvent: function toggleEvent(event, gameId) {
        audioMgr.playEffect(this.clickAudio);
        this.scrollView.stopAutoScroll();
        this.rightContent.y = 0;
        for (var i = 0; i < this.leftSide.children.length; i++) {
          this.leftSide.children[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
          this.leftSide.children[i].getChildByName("txt").color = new cc.Color(138, 69, 58);
        }
        event.target.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        event.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
        this.updateCreateRoomItem(gameId);
      },
      hideAllCreateRoomItem: function hideAllCreateRoomItem() {
        for (var i = 0; i < this.rightContent.children.length; i++) this.rightContent.children[i].active = false;
      },
      updateCreateRoomItem: function updateCreateRoomItem(gameId) {
        this.hideAllCreateRoomItem();
        var key = kf.getObjIndexByValue(dataLogic.friendRoomList, gameId, "gameTypeId");
        var list = dataLogic.friendRoomList[key].gameRoom, btn = void 0;
        for (var i = 0; i < list.length; i++) {
          _item = this.rightContent.children[i];
          if (!_item) {
            _item = cc.instantiate(this.pfCreateRoomItem);
            _item.parent = this.rightContent;
            _item.y = -i * _createRoomItemSpacing - _createRoomItemTopSpacing;
            btn = _item.getChildByName("btCreate").getComponent(cc.Button);
            btn.clickEvents[0].target = this.node;
            btn.clickEvents[0].component = "createRoom";
            btn.clickEvents[0].handler = "btCreateRoomEvent";
          }
          _item.active = true;
          _item.getChildByName("roomName").getComponent(cc.Label).string = list[i].roomName;
          gameId == constant.GameId.Dzpk ? _item.getChildByName("antes").getComponent(cc.Label).string = "\u76f2\u6ce8" : _item.getChildByName("antes").getComponent(cc.Label).string = "\u5e95\u6ce8";
          _item.getChildByName("bet").getComponent(cc.Label).string = list[i].ante;
          _item.getChildByName("admittanceNum").getComponent(cc.Label).string = list[i].joinAmount;
          _item.getChildByName("peopleNum").getComponent(cc.Label).string = dataLogic.friendRoomList[key].gamePlayerNum;
          btn = _item.getChildByName("btCreate").getComponent(cc.Button);
          btn.clickEvents[0].customEventData = list[i].roomId;
          if (gameId == constant.GameId.Dzpk) {
            dataLogic.carryChipNumRange = [];
            dataLogic.carryChipNumData = [];
            var gameRoomConfig = dataLogic.friendRoomList[key].gameRoom;
            for (var j = 0; j < gameRoomConfig.length; j++) {
              var arr = [ gameRoomConfig[j].joinAmount, 20 * gameRoomConfig[j].joinAmount ];
              dataLogic.carryChipNumRange.push(arr);
              dataLogic.carryChipNumData.push(10 * gameRoomConfig[j].joinAmount);
            }
          }
        }
        this.rightContent.height = _createRoomItemSpacing * list.length - 7;
        4 == list.length ? this.rightContent.y = -23 : this.rightContent.y = 0;
        cc.log(this.rightContent.y);
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  dataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b0eeaYGPsFIir2+RpTMW9BP", "dataLogic");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    window._Tool = {
      Date: {
        DAY_TIME: 864e5,
        GMT_DIF: -288e5,
        LOCAL_DIF: 60 * new Date().getTimezoneOffset() * 1e3,
        getTime: function getTime() {
          return new Date().getTime() - dataLogic.timeOff;
        },
        getGMTTime: function getGMTTime() {
          return this.getTime() - this.GMT_DIF;
        },
        getGMTYear: function getGMTYear() {
          return new Date(this.getGMTTime()).getUTCFullYear();
        },
        getGMTDate: function getGMTDate() {
          return new Date(this.getGMTTime()).getUTCDate();
        },
        getGMTHours: function getGMTHours() {
          return new Date(this.getGMTTime()).getUTCHours();
        },
        getGMTMinutes: function getGMTMinutes() {
          return new Date(this.getGMTTime()).getUTCMinutes();
        },
        getGMTSeconds: function getGMTSeconds() {
          return new Date(this.getGMTTime()).getUTCSeconds();
        },
        getGMTMonth: function getGMTMonth() {
          return new Date(this.getGMTTime()).getUTCMonth();
        },
        parse: function parse(dtStr) {
          return Date.parse(dtStr.replace(/-/g, "/")) - this.LOCAL_DIF;
        },
        getTimeDay: function getTimeDay(time) {
          return Math.floor(time / this.DAY_TIME);
        },
        getTodayTime: function getTodayTime(time) {
          return time % this.DAY_TIME;
        },
        getDayTime: function getDayTime(day) {
          return day * this.DAY_TIME;
        }
      }
    };
    function VaConfig(type, typeVal, errMsg, name, tag) {
      this.type = type, this.typeVal = typeVal, this.errMsg = errMsg, this.name = name, 
      this.tag = tag;
    }
    var eazyNew = function eazyNew(type, typeVal) {
      return new VaConfig(type, typeVal, "", "name", "tag");
    };
    var regNew = function regNew(typeVal, errMsg) {
      return new VaConfig("reg", typeVal, errMsg, "name", "tag");
    };
    var regList = {
      ImgCode: /^[0-9a-zA-Z]{4}$/,
      InvitationCode: /^[0-9a-zA-Z]{12}$/,
      SmsCode: /^\d{4,8}$/,
      MailCode: /^\d{4}$/,
      UserName: /^[\w|\d]{4,16}$/,
      Password: /^[\w!@#$%^&*.]{6,16}$/,
      Mobile: /^1[3|4|5|7|8]\d{9}$/,
      PhoneNum: /^\d{11}/,
      PhoneCheckCode: /^\d{6}/,
      RealName: /^[\u4e00-\u9fa5|\xb7|\w]{2,16}$/,
      BankNum: /^\d{10,20}$/,
      Money: /^([1-9]\d*|[0-9]\d*\.\d{1,2}|0)$/,
      Int: /^([1-9]\d*|0)$/,
      Answer: /^\S+$/,
      Mail: /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,
      IdNo: /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,
      NickName: /^[\S]{1,16}$/
    };
    function getErrStr(name, checkResult) {
      var type = checkResult[0], ext = checkResult[1] || [];
      var ERR_MSG = {
        nonvoid: name + "\u4e0d\u80fd\u4e3a\u7a7a",
        reg: name + "\u683c\u5f0f\u9519\u8bef",
        limit: name + "\u5fc5\u987b\u5728" + ext[0] + "\u4e0e" + ext[1] + "\u4e4b\u95f4",
        equal: "\u4e24\u6b21" + ext + "\u4e0d\u76f8\u540c",
        unique: name + "\u91cd\u590d"
      };
      return ERR_MSG[type];
    }
    function uConcat(arr1, arr2) {
      var comb = arr1.concat(arr2), unique = {}, result = [];
      for (var i = 0; i < comb.length; i++) {
        var type = comb[i].type;
        if (unique[type]) {
          var index = unique[type].index;
          unique[type] = comb[i];
          unique[type].index = index;
        } else {
          unique[type] = comb[i];
          unique[type].index = i;
        }
      }
      for (var i = 0; i < 100; i++) for (var item in unique) if (unique[item].index === i) {
        delete unique[item].index;
        result.push(unique[item]);
      }
      return result;
    }
    function check(v, conditions) {
      var res = 0;
      v && (v = v.trim());
      var cfg = {
        nonvoid: function nonvoid(v, bool) {
          return bool ? v.trim() ? 0 : [ "nonvoid" ] : v.trim() ? 0 : 1;
        },
        reg: function reg(v, _reg) {
          return _reg.test(v) ? 0 : [ "reg" ];
        },
        limit: function limit(v, interval) {
          return +v >= interval[0] && +v <= interval[1] ? 0 : [ "limit", interval ];
        }
      };
      cc.log("conditions", conditions);
      for (var i = 0; i < conditions.length; i++) {
        var condi = conditions[i], type = condi.type, typeVal = condi.typeVal;
        res = cfg[type](v, typeVal);
        if (res) {
          res = condi.errMsg || res;
          break;
        }
      }
      return 1 == res ? 0 : res;
    }
    var _EVENT_TYPE = [ "loadScene", "onGameStart", "onSeeCard", "onFold", "onBet", "onPass", "onCompareCard", "onPlayerOperation", "onGameRecover", "gameRecoverCb", "checkRecoverCb", "tryIntoRoomCb", "onGameEnd", "seeCardCb", "foldCb", "betCb", "passCb", "compareCardCb", "reqUserBalanceCb", "syncUserBalanceCb", "getUserBalanceCb", "updateBalanceCb", "syncBetBtnConfig", "socketMsg", "onJoin", "matchingCb", "cancelMatchingCb", "syncServerTimeCb", "reqServerTimeCb", "calibrationServerTimeCb", "onVillage", "onOpenCards", "village", "openCards", "socketDisconnect", "socketTimeout", "exitRoom", "loginCb", "reconnect", "httpCbRepeater", "intoNextScene", "getAboutCb", "syncRecordCb", "GetUserBalanceCb", "updateHallBalance", "onLeave", "reqSelectRoomConfigCb", "intoGameRoom", "toastType", "killAllToast", "killToast", "btnIntoGameEvent", "showNotice", "checkGameStateCb", "getJackpotCb", "bonusGameBetCb", "exitBonusGameCb", "openCb", "onOpenDice", "onStartGuess", "guessCb", "onGuess", "toastHintBtnHandle", "stopGameCb", "openCardCb", "onGameOver", "reqGameListCb", "tryIntoGame", "showLoadTimeoutToast", "onOpen", "cancelRefreshToastShow", "reqCheckCodeCb", "getLettersCb", "getRankingListCb", "getLetterContentCb", "getNoticeDetailCb", "getGradeListCb", "getNoticeDetailCb", "getAllAnnouncementsCb", "operationLettersCb", "getGradeDataCb", "getGradeScoreCb", "reqUnreadLetterNumCb", "checkOriginalPassword", "setNewPasswordCb", "getGradeScoreCb", "updataPersonalInfoCb", "getSecurityCentreDataCb", "showLayerToast", "getRechargeWayCb", "getSafeQuestionListCb", "setSafeQuestionCb", "checkSafeQuestionCb", "registerCb", "CheckShowCodeCb", "checkUserExistCb", "customCallBack", "getRechargeCb", "setBankCardCb", "reqBankModuleDataCb", "reqFirstCardCb", "checkBankCardCb", "withdrawCb", "getInitDataCb", "reqBankCardDetailCb", "reqTradingTypeCb", "reqTradingRecordCb", "balanceExchangeCb", "transferCb", "getActivityCb", "getActiviInfoCb", "getUserAwardInfoCb", "getActivityBonusCb", "getLoginOutCb", "getSpreadCodeCb", "getAgentReportCb", "getReportInfoCb", "tryJoinPKRoomCb", "getAchievementCb", "setAchievementCb", "reqFriendRoomListCb", "reqCreateRoomCb", "onReady", "readyCb", "onRemind", "onRemove", "leaveGameCb", "reqRoomIdCb", "getUserInfoCardCb", "showLayerTip", "reqSendSMSCheckCodeCb", "checkPhoneCb", "getAchievementActivityDataCb", "getAchievementAwardCb", "getAppDataCb", "visitorRegisterCb", "visitorLoginCb", "onLandlord", "onPlayCards", "onPass", "onAutoPlay", "showCardCb", "onGameEnds", "callScoreCb", "getLettersByJudgeIsPop", "getGiftAwardCb", "getActivityCb_panel", "cancelAutoPlayCb", "autoPlayCb", "reqOnLinePlayerCountCb", "getSignInConfigCb", "signInCb", "onPush", "onGrab", "onSettle", "onNoAlive", "onExit", "onCurrent", "reqMainModuleVersionCb", "leaveGameRoomCb" ];
    var _seed = 0;
    var _curSceneName = null;
    var _intervalSendId = null;
    var _intervalCalibrationServerTimeId = null;
    var _reqServerTimeDuration = 99999;
    window.dataLogic = {
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "syncServerTimeCb", this.syncServerTimeCb.bind(this) ], [ "reqServerTimeCb", this.reqServerTimeCb.bind(this) ], [ "getInitDataCb", this.getInitDataCb.bind(this) ], [ "reqSelectRoomConfigCb", this.reqSelectRoomConfigCb.bind(this) ], [ "reqUserBalanceCb", this.reqUserBalanceCb.bind(this) ], [ "reqGameListCb", this.reqGameListCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init() {
        clientEvent.addEventType(_EVENT_TYPE);
        this.socketIO = kf.require("util.socketIO");
        this.registerEvent();
        this.limitPlayerNum = 7;
        this.selfSeatId = 0;
        this.msgList = [];
        this.playerInfo = [ {
          InvUserState: null
        } ];
        this.playerInfo = [];
        this.userName = "";
        this.userId = "";
        this.userBalance = 0;
        this.userSex = 1;
        this.userPhoneNum = "";
        this.hasPwd = "";
        this.timeOff = 0;
        this.timerTotalTime = 0;
        this.timerEndTimestamp = 0;
        this.reqStartTime = 0;
        this.isHide = false;
        this.doneTimeSync = false;
        this.IOState = false;
        this.doneLogin = false;
        this.doneGameListSyne = false;
        this.doneSelectRoomConfigSync = false;
        this.isCheckRecover = false;
        this.roomConfig = {
          betConfig: null,
          deskId: null,
          roomId: null
        };
        this.needRecover = false;
        this.isPlaying = false;
        this.userHeadUrl = "";
        this.selectRoomConfig = [];
        this.isToastLoad = false;
        this.curGameId = "";
        this.curRoomKey = "";
        this.isFriendRoom = false;
        this.roomNum = null;
        this.isUnreadyKickedOut = false;
        this.isNotSufficientFundKickedOut = false;
        this.playerCount = 0;
        this.needHintCreateSucceed = false;
        this.friendRoomList = [];
        this.playedGameIdList = [];
        this.msgId = -1;
        this.carryChipNumRange = [];
        this.carryChipNumData = [];
        this.autoFreshChipNum = 0;
        this.reqRecovering = false;
        this.fristScene = null;
        this.gameList = [ {
          gameTypeId: null,
          state: null
        } ];
        this.gradeList = [];
        this.isLocalDebug = true;
        (cc.sys.isNative || "7456" != window.location.port) && (this.isLocalDebug = false);
        this.gameListVersion = "";
        this.selectRoomConfigVersion = "";
        this.loadSceneTimeout = false;
        this.playId = "";
        this.notices = [ "11111111", "22222222222", "333333333" ];
        this.isLoadedPrefab = {};
        this.checkUnreadTime_ms = 0;
        this.hasSecret = false;
        this.hasSafePassword = false;
        this.isTransfer = false;
        this.storeObj = {};
        this.CacheArr = [ "GradeList", "DailyRewardConfig", "SysActivity", "OtherActivity", "Announcements", "SiteConfig", "GetGameList", "IndexCarousel", "NewMessage", "GameList", "GetAppData", "GetFirstRecharge" ];
        this.CacheData = cc.sys.localStorage.getItem("CacheData");
        this.CacheData = this.CacheData ? JSON.parse(this.CacheData) : {};
        this.inviteCodeType = 0;
        this.serviceAddr = "";
        this.isNewRegister = false;
        this.hasUndoneGame = false;
        this.registerCashGift = 0;
        this.isHasPopedActivityPanel = false;
        this.needPopDialogIDArr = [];
        this.needPopActivityID = null;
        this.popsObjSwitchObj = {
          globalNotice: false,
          personalNotice: false,
          activity: false
        };
        this.msgList = [];
        this.regGift = 0;
        this.firstRechargeGiftState = false;
        this.rechargeState = false;
        this.signInState = true;
      },
      setSignInState: function setSignInState(state) {
        this.signInState = state;
      },
      setFirstRechargeGiftState: function setFirstRechargeGiftState(state) {
        this.firstRechargeGiftState = state;
      },
      setRechargeState: function setRechargeState(state) {
        this.rechargeState = state;
      },
      setRegisterCashGift: function setRegisterCashGift(num) {
        this.registerCashGift = num;
      },
      setInviteCodeType: function setInviteCodeType(type) {
        this.inviteCodeType = type;
      },
      setIsNewRegister: function setIsNewRegister(state) {
        this.isNewRegister = state;
      },
      setServiceAddr: function setServiceAddr(addr) {
        this.serviceAddr = addr;
      },
      gameShow: function gameShow(hideTime) {
        cc.log("===============\u8fdb\u5165\u524d\u53f0================", new Date().getSeconds(), "\u5728\u540e\u53f0\u505c\u7559\u65f6\u95f4", hideTime);
        this.isHide = false;
        this.hideTime = hideTime;
      },
      gameHide: function gameHide() {
        cc.log("==================\u8fdb\u5165\u540e\u53f0===============", new Date().getSeconds());
        this.isHide = true;
      },
      setRoomType: function setRoomType(isFriend) {
        this.isFriendRoom = isFriend;
      },
      setRoomNum: function setRoomNum(id) {
        this.roomNum = id;
      },
      openWindow: function openWindow(url) {
        cc.log("_App", _App, "\u6253\u5f00\u65b0\u7a97\u53e3", url);
        if (cc.sys.isNative) jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "openUrlByBrowse", "(Ljava/lang/String;)V", url); else {
          var e = document.createElement("a");
          if (_App) {
            if (-1 != url.indexOf("?")) {
              var ts = url.split("?");
              e.href = ts.length > 1 ? ts[0] + "?xapp-target=browser&" + ts[1] : ts[0] + "?xapp-target=browser";
            } else e.href = url + "?xapp-target=browser";
            e.click();
          } else window.open(url);
        }
      },
      setLoadedPrefab: function setLoadedPrefab(prefabName) {
        this.isLoadedPrefab[prefabName] = true;
      },
      setLoadSceneTimeout: function setLoadSceneTimeout(state) {
        this.loadSceneTimeout = state;
      },
      setFristScene: function setFristScene(sceneName) {
        this.fristScene = sceneName;
      },
      setMsgId: function setMsgId(msgId) {
        this.msgId = Number(msgId);
      },
      addPlayedGameIdList: function addPlayedGameIdList(gameId) {
        var index = kf.getArrIndexByValue(this.playedGameIdList, gameId);
        if (-1 == index) this.playedGameIdList.push(gameId); else if (index != this.playedGameIdList.length - 1) {
          this.playedGameIdList.splice(index, 1);
          this.playedGameIdList.push(gameId);
        }
      },
      delPlayedGameIdList: function delPlayedGameIdList(index) {
        this.playedGameIdList.splice(index, 1);
      },
      setTimerData: function setTimerData(timerEndTimestamp) {
        cc.log("\u670d\u52a1\u5668\u7ed3\u675f\u65f6\u95f4\u6233", timerEndTimestamp);
        this.timerEndTimestamp = timerEndTimestamp + this.timeOff;
        this.timerTotalTime = timerEndTimestamp + this.timeOff - new Date().getTime();
        if (this.timerTotalTime < 0) {
          cc.error("\u65f6\u5dee\u51fa\u73b0\u95ee\u9898\uff0c\u5012\u8ba1\u65f6\u7ed3\u675f\u65f6\u95f4\uff1a\n \u670d\u52a1\u5668\u7ed3\u675f\u65f6\u95f4\u6233\uff1a", timerEndTimestamp, "\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff1a", new Date().getTime() - this.timeOff);
          cc.log("\u7ed3\u675f\u65f6\u95f4\u6bd4\u5f53\u524d\u65f6\u95f4\u5c11\u4e86", timerEndTimestamp - (new Date().getTime() - this.timeOff));
          return false;
        }
        this.timerTotalTime /= 1e3;
        this.timerTotalTime = Math.floor(this.timerTotalTime);
        return this.timerTotalTime;
      },
      getSecondTimeFomate: function getSecondTimeFomate(time) {
        var m = parseInt(time / 60);
        1 == m.toString().length && (m = "0" + m);
        var s = time % 60;
        1 == s.toString().length && (s = "0" + s);
        return m + ":" + s;
      },
      setReqRecoverState: function setReqRecoverState(isRecovering) {
        this.reqRecovering = isRecovering;
      },
      setDeskId: function setDeskId(deskId) {
        this.roomConfig.deskId = -1 == deskId ? null : deskId;
      },
      setPlayId: function setPlayId(playId) {
        this.playId = playId;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      setBetConfig: function setBetConfig(config) {
        this.betConfig = kf.clone(config);
      },
      setRoomConfig: function setRoomConfig(configName, config) {
        this.roomConfig[configName] = kf.clone(config);
      },
      leaveTable: function leaveTable() {
        this.setNeedRecover(false);
        this.playerInfo = [];
        if (null === this.roomConfig.deskId) return;
        this.roomConfig.deskId = null;
        this.socketJionSucceed = false;
      },
      socketIOConnectCb: function socketIOConnectCb() {
        if (-1 === this.roomConfig.deskId) return;
        this.socketIO.emit("join", {
          deskId: this.roomConfig.deskId,
          seatId: this.selfSeatId
        });
      },
      popMsgList: function popMsgList() {
        return this.msgList.shift();
      },
      pushMsgList: function pushMsgList(msg) {
        this.msgList.push(msg);
      },
      clearMsgList: function clearMsgList() {
        this.msgList = [];
      },
      runNextMsg: function runNextMsg() {
        if (0 == this.msgList.length) return false;
        var msg = this.popMsgList();
        clientEvent.dispatchEvent(msg.eventName, msg);
        return true;
      },
      setLimitPlayerNum: function setLimitPlayerNum(num) {
        this.limitPlayerNum = num || 7;
      },
      setCurGameId: function setCurGameId(id) {
        this.curGameId = id;
      },
      setCurRoomKey: function setCurRoomKey(key) {
        this.curRoomKey = Number(key);
      },
      getGameIdBySceneName: function getGameIdBySceneName(sceneName) {
        var n = void 0, gameId = void 0;
        for (var key in constant.GameId) {
          gameId = constant.GameId[key];
          n = this.getGameSceneNameByGameId(gameId);
          if (n == sceneName) return gameId;
          n = this.getSelectRoomSceneNameByGameId(gameId);
          if (n == sceneName) return gameId;
        }
        return "-1";
      },
      getGameSceneNameByGameId: function getGameSceneNameByGameId(gameId) {
        for (var key in constant.GameId) if (gameId == constant.GameId[key]) return constant.SceneName[key];
        cc.log("\u672a\u627e\u5230\u5bf9\u5e94\u7684\u6e38\u620f\u573a\u666f\u540d, gameId:", gameId);
      },
      getSelectRoomSceneNameByGameId: function getSelectRoomSceneNameByGameId(gameId) {
        return this.getGameSceneNameByGameId(gameId) + "Hall";
      },
      setNeedRecover: function setNeedRecover(bool) {
        cc.log("\u8bbe\u7f6e\u662f\u5426\u9700\u8981\u6062\u590d\u6570\u636e", bool);
        this.needRecover = bool;
      },
      setUndoneGame: function setUndoneGame(bool) {
        this.hasUndoneGame = bool;
      },
      syncServerTime: function syncServerTime(timeoutDispose, timeLimit) {
        this.reqStartTime = new Date().getTime();
        this.doneTimeSync = false;
        timeoutDispose == constant.HttpTimeoutDispose.RepetitionRetry ? this.reqServerTimeResidueTime = 0 : this.reqServerTimeResidueTime = timeLimit;
        http.post(constant.PostSyncServerTime, "syncServerTimeCb");
      },
      reqServerTime: function reqServerTime() {
        this.reqStartTime = new Date().getTime();
        http.post(constant.PostSyncServerTime, "reqServerTimeCb");
      },
      reqServerTimeCb: function reqServerTimeCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed) {
          cc.error("\u8bf7\u6c42\u9519\u8bef", msg);
          return;
        }
        this.checkGameListVersion(msg.BackData);
        this.doneTimeSync = true;
        var now = new Date().getTime();
        var reqTime = now - this.reqStartTime;
        cc.log("\u4e0a\u6b21\u8bf7\u6c42\u670d\u52a1\u5668\u65f6\u95f4\u8017\u65f6", _reqServerTimeDuration, "\u8fd9\u6b21\u8bf7\u6c42\u670d\u52a1\u5668\u65f6\u95f4\u8017\u65f6", reqTime);
        if (_reqServerTimeDuration > reqTime) {
          _reqServerTimeDuration = reqTime;
          this.timeOff = new Date().getTime() - (msg.Data + reqTime / 2);
          cc.log("\u65b0\u65f6\u5dee", this.timeOff);
          clientEvent.dispatchEvent("intoNextScene");
        }
      },
      reqSelectRoomConfig: function reqSelectRoomConfig(gameId, nextSceneInfo) {
        this.doneSelectRoomConfigSync = false;
        http.post({
          action: "GetGameRoom",
          gameTypeId: gameId
        }, "reqSelectRoomConfigCb", nextSceneInfo);
      },
      reqSelectRoomConfigCb: function reqSelectRoomConfigCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed) {
          this.doneSelectRoomConfigSync = true;
          this.setSelectRoomConfig(msg.Data);
        }
      },
      setSelectRoomConfig: function setSelectRoomConfig(data) {
        this.selectRoomConfig = kf.clone(data);
        this.doneSelectRoomConfigSync = true;
        if (-1 != this.selectRoomConfig[0].roomId.indexOf("02")) {
          this.carryChipNumRange = [];
          this.carryChipNumData = [];
          for (var i = 0; i < this.selectRoomConfig.length; i++) {
            var arr = [ this.selectRoomConfig[i].joinAmount, 20 * this.selectRoomConfig[i].joinAmount ];
            this.carryChipNumRange.push(arr);
            this.carryChipNumData.push(10 * this.selectRoomConfig[i].joinAmount);
          }
        }
      },
      setGameList: function setGameList(data) {
        this.doneGameListSyne = true;
        this.gameList = kf.clone(data);
      },
      loadNativeAvatar: function loadNativeAvatar(avatarUrl, avatarNode) {
        resMgr.loadSingleRes("baoWang" + avatarUrl.replace(".jpg", ""), function(res) {
          avatarNode.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setNoticeContent: function setNoticeContent(notices) {
        this.notices = null == notices ? [] : kf.clone(notices);
        var i = 0;
        while (i < this.notices.length) "" == this.notices[i] ? this.notices.splice(i, 1) : i++;
      },
      syncServerTimeCb: function syncServerTimeCb(msg, cbArg) {
        var now = new Date().getTime();
        var reqTime = now - this.reqStartTime;
        this.reqServerTimeResidueTime -= reqTime;
        if (this.reqServerTimeResidueTime <= 0) {
          if (cbArg.timeoutDispose == constant.HttpTimeoutDispose.RetryEndStop) return;
          if (cbArg.timeoutDispose == constant.HttpTimeoutDispose.RetryEndRefresh) {
            cc.log("\u8bf7\u6c42\u670d\u52a1\u5668\u65f6\u95f4\u8d85\u65f6");
            clientEvent.dispatchEvent("showRefreshToast");
            return;
          }
        }
        if (reqTime > 1e3) {
          this.reqStartTime = now;
          this.reqServerTime(cbArg.timeoutDispose, this.reqServerTimeResidueTime);
          return;
        }
        if (msg.Code != constant.HttpCode.Succeed) {
          cc.error("\u8bf7\u6c42\u9519\u8bef", msg);
          return;
        }
        this.timeOff = new Date().getTime() - (msg.Data + reqTime / 2);
        cc.log("\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u7684\u65f6\u5dee:", this.timeOff);
        this.doneTimeSync = true;
        clientEvent.dispatchEvent("intoNextScene");
      },
      setCheckRecoverState: function setCheckRecoverState(state) {
        this.isCheckRecover = state;
      },
      setLoginState: function setLoginState(state) {
        this.doneLogin = state;
      },
      setIOState: function setIOState(state) {
        this.IOState = state;
      },
      loginOut: function loginOut() {
        this.clearIntervalSend();
        this.userName = "";
        this.userHeadUrl = "";
        this.userGrade = "";
        this.userBalance = "";
        this.doneLogin = false;
      },
      setCurFocusEditBox: function setCurFocusEditBox(eb) {
        dataLogic.curFocusEditBox = eb;
      },
      delCurFocusEditBox: function delCurFocusEditBox() {
        delete dataLogic.curFocusEditBox;
      },
      setUserInfo: function setUserInfo(data) {
        this.userName = data.userName;
        this.userId = data.userId;
        this.userBalance = data.balance;
        this.userHeadUrl = data.headUrl;
        this.userSex = data.sex;
        this.userGrade = data.grade;
        this.feeRate = data.feeRate;
        this.account = data.account;
        this.setUserPhoneNum(data.phoneNum);
        this.hasPwd = data.isPwd;
        this.hasSafePassword = data.isSafePwd;
      },
      setUserPhoneNum: function setUserPhoneNum(num) {
        this.userPhoneNum = num;
        num && cc.sys.localStorage.setItem("hasOfficialAccount", 1);
      },
      setHasPwd: function setHasPwd(has) {
        this.hasPwd = has;
      },
      setGradeListData: function setGradeListData(data) {
        this.gradeList = data;
      },
      getSex: function getSex(UISeatId) {
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        var sex = null == this.playerInfo[seatId].sex ? 0 : this.playerInfo[seatId].sex - 1;
        return sex;
      },
      reqUserBalance: function reqUserBalance() {
        http.post(constant.PostSyncUserBalance, "reqUserBalanceCb", {});
      },
      syncUserBalanceCb: function syncUserBalanceCb() {},
      reqUserBalanceCb: function reqUserBalanceCb(msg) {
        msg.Code == constant.HttpCode.Succeed && (this.userBalance = msg.Data.balance);
      },
      setUserBalance: function setUserBalance(balance) {
        this.userBalance = balance;
      },
      playerLeave: function playerLeave(seatId) {
        this.playerInfo[seatId] = {};
        this.playerCount--;
      },
      playerJoin: function playerJoin(data, seatId) {
        this.playerInfo[seatId] = data;
        this.playerInfo[seatId].seatId = seatId;
        this.playerCount++;
      },
      setPlayerInfo: function setPlayerInfo(data) {
        this.playerInfo = [];
        this.playerInfo = kf.clone(data);
        this.playerCount = 0;
        for (var i = 0; i < this.playerInfo.length; i++) if (this.playerInfo[i].headUrl) {
          this.playerInfo[i].seatId = i;
          this.playerInfo[i].userId == this.userId && (this.selfSeatId = i);
          this.playerCount++;
        }
      },
      setPlayState: function setPlayState(isPlaying) {
        this.isPlaying = isPlaying;
      },
      setCurSceneName: function setCurSceneName(name) {
        _curSceneName = name;
      },
      getCurSceneName: function getCurSceneName() {
        return _curSceneName;
      },
      matching: function matching() {
        clientEvent.dispatchEvent("cancelRefreshToastShow");
        this.isPlaying = true;
      },
      gameEnd: function gameEnd() {
        this.isPlaying = false;
        this.setNeedRecover(false);
        this.roomConfig.deskId = null;
        this.msgId = -1;
      },
      getDistance: function getDistance(pos1, pos2) {
        var v = cc.v2(pos1.x - pos2.x, pos1.y - pos2.y);
        return Math.sqrt(v.x * v.x + v.y * v.y);
      },
      getJoinAmountByRoomId: function getJoinAmountByRoomId(roomId) {
        var list = this.selectRoomConfig;
        for (var i = 0; i < list.length; i++) if (list[i].roomId == roomId) return list[i].joinAmount;
        cc.log("\u627e\u4e0d\u5230roomId", roomId, this.selectRoomConfig);
      },
      getAnteByRoomId: function getAnteByRoomId(roomId) {
        var list = this.selectRoomConfig;
        for (var i = 0; i < list.length; i++) if (list[i].roomId == roomId) return Number(list[i].ante);
        cc.log("\u627e\u4e0d\u5230roomId", roomId);
      },
      setSelfSeatId: function setSelfSeatId(seatId) {
        this.selfSeatId = seatId;
      },
      getUISeatIdBySeatId: function getUISeatIdBySeatId(seatId) {
        if (null == seatId) {
          cc.warn("seatId\u53c2\u6570\u672a\u7a7a", seatId);
          return null;
        }
        return (seatId - this.selfSeatId + this.limitPlayerNum) % this.limitPlayerNum;
      },
      getSeatIdByUISeatId: function getSeatIdByUISeatId(UISeatId) {
        return (this.selfSeatId + Number(UISeatId)) % this.limitPlayerNum;
      },
      getCardValue: function getCardValue(cardKey) {
        if (0 == cardKey % 13) return 14;
        return cardKey % 13 + 1;
      },
      getCardCorol: function getCardCorol(cardKey) {
        return Math.floor(cardKey / 13);
      },
      getCardValueAndColor: function getCardValueAndColor(cardKey) {
        var v = this.getCardValue(cardKey);
        var color = this.getCardCorol(cardKey);
        return [ v, color ];
      },
      getCardKey: function getCardKey(card) {
        if (14 == card[0]) return 13 * card[1];
        return 13 * card[1] + card[0];
      },
      setSecretState: function setSecretState(state) {
        this.hasSecret = state;
      },
      setSafePasswordState: function setSafePasswordState(state) {
        this.hasSafePassword = state;
      },
      setTransferFunc: function setTransferFunc(state) {
        this.isTransfer = state;
      },
      getIntervalSendId: function getIntervalSendId() {
        return _intervalSendId;
      },
      intervalSendNewMsg: function intervalSendNewMsg() {
        null == _intervalSendId && (_intervalSendId = setInterval(function() {
          http.post({
            Action: "NewMessage",
            Heartbeat: 1,
            reqExtendArg: {
              timeoutRefresh: false,
              timeout: 0,
              reRequested: false,
              allowAbort: true
            }
          });
        }, 9e4));
      },
      clearIntervalSend: function clearIntervalSend() {
        if (null != _intervalSendId) {
          clearInterval(_intervalSendId);
          _intervalSendId = null;
        }
      },
      checkGameListVersion: function checkGameListVersion(version) {
        null != dataLogic.CacheData["GetGameList"] && version == dataLogic.CacheData["GetGameList"] || http.post({
          action: "GetInitData",
          Requirement: JSON.stringify([ "GetGameList" ])
        }, "reqGameListCb");
      },
      reqGameListCb: function reqGameListCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed) {
          this.setFriendRoomList(msg.BackData.GetGameList.yzGameList);
          this.setGameList(msg.BackData.GetGameList.dtGameList);
        }
      },
      getInitDataCb: function getInitDataCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed && msg.BackData && msg.BackData.GetGameList) {
          dataLogic.setFriendRoomList(msg.BackData.GetGameList.yzGameList);
          dataLogic.setGameList(msg.BackData.GetGameList.dtGameList);
        }
      },
      setFriendRoomList: function setFriendRoomList(data) {
        this.friendRoomList = kf.clone(data);
      },
      setFriendRoomPlayerState: function setFriendRoomPlayerState(seatId, readyState) {
        this.playerInfo[seatId].readyState = readyState;
        this.playerInfo[seatId].InvUserState = readyState;
      },
      clearPlayerInfo: function clearPlayerInfo(seatId) {
        this.playerInfo[seatId] = {};
      },
      setUnreadyKickOutState: function setUnreadyKickOutState(isKickedOut) {
        this.isUnreadyKickedOut = isKickedOut;
      },
      setNotSufficientFundKickOutState: function setNotSufficientFundKickOutState(isKickedOut) {
        this.isNotSufficientFundKickedOut = isKickedOut;
      },
      setNotSufficientFundHintStr: function setNotSufficientFundHintStr(hintStr) {
        this.notSufficientFundHintStr = hintStr;
      },
      isOnlooker: function isOnlooker() {
        var seatId = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.selfSeatId;
        return !(!this.isFriendRoom || !this.isPlaying) && constant.FriendRoomPlayerState.Gaming != this.playerInfo[seatId].InvUserState;
      },
      getReadiedCount: function getReadiedCount() {
        cc.log("this.playerInfo", this.playerInfo);
        var n = 0;
        for (var i = 0; i < this.playerInfo.length; i++) this.playerInfo[i].InvUserState == constant.FriendRoomPlayerState.Readied && n++;
        return n;
      },
      setNeedHintCreateSucceed: function setNeedHintCreateSucceed(isNeed) {
        this.needHintCreateSucceed = isNeed;
      },
      setSeed: function setSeed(seed) {
        "number" != typeof seed && cc.error("\u53c2\u6570seed\u5fc5\u987b\u662f\u6570\u503c\u7c7b\u578b", seed, "undefined" === typeof seed ? "undefined" : _typeof(seed));
        _seed = seed;
      },
      randomIntBySeed: function randomIntBySeed(min, max) {
        var v = this._randomBySeed(min, max + 1);
        return Math.floor(v);
      },
      randomInt: function randomInt(min, max) {
        var v = Math.random() * (max - min) + min;
        return Math.round(v);
      },
      _randomBySeed: function _randomBySeed(min, max) {
        if (null == max || null == min || max < min) {
          cc.error("\u53c2\u6570\u9519\u8bef,min:", min, " max:", max);
          return;
        }
        _seed = (9301 * _seed + 49297) % 233280;
        var rnd = _seed / 233280;
        return min + rnd * (max - min);
      },
      checkFormat: function checkFormat(value, option) {
        cc.log("\u683c\u5f0f\u68c0\u67e5", value, option);
        "number" == typeof value && (value = "" + value);
        var baseCfg = [], optionalConfig = [];
        var NON_VOID = eazyNew("nonvoid", true);
        var VOID = eazyNew("nonvoid", false);
        option.canNull ? baseCfg.push(VOID) : baseCfg.push(NON_VOID);
        option.unique && optionalConfig.push(eazyNew("unique", option.name));
        var regOptions = Object.keys(option);
        for (var i = 0; i < regOptions.length; i++) {
          var regOption = regOptions[i];
          regList[regOptions[i]] && optionalConfig.push(regNew(regList[regOption], option.errMsg));
        }
        var config = uConcat(baseCfg, optionalConfig);
        cc.log("============", config, baseCfg, optionalConfig);
        var _result = check(value, config);
        cc.log("_result", _result, option.name);
        return 0 == _result ? 0 : option.name ? getErrStr(option.name, _result) : _result;
      }
    };
    dataLogic.init();
    cc._RF.pop();
  }, {} ],
  deposit: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a8f31OekddGBZ+9zvFz96UV", "deposit");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _BalanceExchange = {
      Action: "BalanceExchange",
      ExchangeMoney: 0
    };
    var _doneCb = null;
    var _isWithdrawalFromSafe = false;
    var _curExchangeNum = 0;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        eb: cc.EditBox,
        txtAccountBalance: cc.Label,
        txtSaveBalance: cc.Label
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "balanceExchangeCb", this.balanceExchangeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _curExchangeNum = 0;
        this.txtAccountBalance.string = initArg.accountBalance;
        this.txtSaveBalance.string = (Math.round(100 * Number(initArg.saveBalance)) / 100).toFixed(2);
        _isWithdrawalFromSafe = initArg.isWithdraw;
        _doneCb = initArg.doneCb;
        this.registerEvent();
        this.toastShow();
      },
      btnDepositNumEvent: function btnDepositNumEvent(event, num) {
        audioMgr.playEffect(this.clickAudio);
        if ("all" == num) this.eb.string = _isWithdrawalFromSafe ? "" + this.txtSaveBalance.string : "" + this.txtAccountBalance.string; else {
          _curExchangeNum = "" == this.eb.string ? 0 : Number(this.eb.string);
          this.eb.string = "" + Math.round(100 * (_curExchangeNum + Number(num))) / 100;
        }
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "confirm":
          var str = void 0;
          if (_isWithdrawalFromSafe) {
            str = "\u53d6\u6b3e\u91d1\u989d";
            _BalanceExchange.ExchangeMoney = this.eb.string;
          } else {
            str = "\u5b58\u6b3e\u91d1\u989d";
            _BalanceExchange.ExchangeMoney = -this.eb.string;
          }
          var result = dataLogic.checkFormat(this.eb.string, {
            Money: true,
            name: str
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (_isWithdrawalFromSafe && Number(this.txtSaveBalance.string) < this.eb.string) {
            this.showLayerTip("\u4f59\u989d\u4e0d\u8db3");
            return;
          }
          if (!_isWithdrawalFromSafe && Number(this.txtAccountBalance.string) < this.eb.string) {
            this.showLayerTip("\u4f59\u989d\u4e0d\u8db3");
            return;
          }
          this.reqDateAndShowLoadView(_BalanceExchange, "balanceExchangeCb", null, true);
          break;

         case "clear":
          this.eb.string = "";
          _curExchangeNum = 0;
        }
      },
      balanceExchangeCb: function balanceExchangeCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          _doneCb(_isWithdrawalFromSafe ? "\u53d6\u6b3e\u6210\u529f" : "\u5b58\u6b3e\u6210\u529f");
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  dialogBase: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c6b94ybsZ5MhJBzJcmsXpm2", "dialogBase");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _showLoadView = null;
    var _hideLoadView = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        isNeedCloseBtn: {
          default: 1,
          type: cc.Float
        },
        mainNodeWidth: cc.Float,
        mainNodeHight: cc.Float,
        titleTxt: cc.String,
        loadIconPos: cc.v2(0, 0),
        layerTipPos: cc.v2(0, 0),
        layerMsgPf: cc.Prefab,
        customBgWidth: {
          default: 0,
          type: cc.Float
        }
      },
      unregisterEvent: function unregisterEvent() {
        if (this.registerHandler && this.registerHandler.length) for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      reuse: function reuse(dialogCommonLayer, initArg, showLoadView, hideLoadView) {
        _showLoadView = showLoadView;
        _hideLoadView = hideLoadView;
        this.dialogCommonLayer = dialogCommonLayer;
        this.setDialogSize(this.mainNodeWidth, this.mainNodeHight);
        this.loadIcon = this.dialogCommonLayer.getChildByName("loadIcon");
        this.mainNode.opacity = 0;
        this.mask = this.dialogCommonLayer.getChildByName("mask");
        this.mask.width = cc.winSize.width + 200;
        this.mask.height = cc.winSize.height + 200;
        this.loadMask = this.dialogCommonLayer.getChildByName("loadMask");
        this.loadMask.width = cc.winSize.width + 200;
        this.loadMask.height = cc.winSize.height + 200;
        this.UIWidget();
        this.init && this.init(initArg);
        kf.createPool(constant.PoolId.layerMsg, 1, this.layerMsgPf, "layerMsg");
      },
      UIWidget: function UIWidget() {
        this.setTitleContent(this.titleTxt);
        var header = this.mainNode.getChildByName("header");
        var closeBtn = header.getChildByName("btnClose");
        if (this.isNeedCloseBtn) {
          closeBtn.active = true;
          closeBtn.x = this.mainNodeWidth / 2 - 17;
        } else closeBtn.active = false;
      },
      setDialogSize: function setDialogSize(width, height) {
        this.mainNode = this.dialogCommonLayer.getChildByName("main");
        this.mainNode.width = width;
        this.mainNode.height = height;
        this.mainNodeWidth = width;
        this.mainNodeHight = height;
        var contentBg = this.mainNode.getChildByName("contentBg");
        var bg = this.mainNode.getChildByName("bg");
        contentBg.width = width - 24;
        contentBg.height = height - 74;
        bg.height = height - 74;
        this.customBgWidth ? bg.width = this.customBgWidth : bg.width = this.mainNodeWidth - 24;
        bg.x = (this.mainNodeWidth - 24) / 2 - bg.width;
        this.UIWidget();
      },
      showLoadView: function showLoadView() {
        var needLoadMask = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        _showLoadView(needLoadMask, this.loadIconPos);
      },
      hideLoadView: function hideLoadView() {
        _hideLoadView();
      },
      setTitleContent: function setTitleContent(txt) {
        var header = this.mainNode.getChildByName("header");
        header.y = this.mainNodeHight / 2 - 21;
        header.getChildByName("txt").getComponent(cc.Label).string = txt;
      },
      toastShow: function toastShow() {
        this.mainNode.opacity = 255;
      },
      toastClose: function toastClose(event, index) {
        null != event && audioMgr.playEffect(this.clickAudio);
        this.unregisterEvent();
        this.mainNode.opacity = 0;
        if (1 != index) {
          this.loadIcon.opacity = 0;
          http.abortAllReq();
          this.node.destroy();
          kf.killObj(this.dialogCommonLayer);
        }
        dataLogic.delCurFocusEditBox();
        this.closeBeforeHandle && this.closeBeforeHandle();
      },
      showLayerTip: function showLayerTip(str) {
        var isAutoHide = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
        var isListeningClick = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        var layerMsg_node = kf.getObj(constant.PoolId.layerMsg, this.node, this.layerMsgPf);
        layerMsg_node.position = this.layerTipPos;
        layerMsg_node.getComponent("layerMsg").layerTip(str, isAutoHide, isListeningClick);
      },
      reqDateAndShowLoadView: function reqDateAndShowLoadView(reqArg, cbEventName, cbArg) {
        var needLoadMask = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
        this.showLoadView(needLoadMask);
        this.reqData(reqArg, cbEventName, cbArg);
      },
      reqData: function reqData(reqArg, cbEventName, cbArg) {
        reqArg.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false,
          isLightHint: true,
          timeout: 0,
          lightHintPos: cc.v2(0, 0)
        };
        http.post(reqArg, cbEventName, cbArg);
      },
      reqCheckCode: function reqCheckCode(appointImgType, jsName) {
        this.showLoadView(true);
        appointImgType ? this.reqDateAndShowLoadView({
          Action: "GetImageCode",
          isJack: 1,
          imgType: 1
        }, "reqCheckCodeCb", jsName, true) : this.reqDateAndShowLoadView({
          Action: "GetImageCode",
          isJack: 1
        }, "reqCheckCodeCb", jsName, true);
      },
      showImgCheckCodeDialog: function showImgCheckCodeDialog(initArg) {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/checkCode",
          js: "checkCode",
          initArg: initArg
        });
      },
      editingDidBegin: function editingDidBegin(eb, name) {
        cc.log("\u83b7\u5f97\u7126\u70b9\u4e8b\u4ef6");
      },
      editingDidEnd: function editingDidEnd(eb, name) {
        cc.log("\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6");
        dataLogic.delCurFocusEditBox();
      }
    });
    cc._RF.pop();
  }, {} ],
  dialogCommonLayer: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5d393SOMGlOcYbtvGTbz7vy", "dialogCommonLayer");
    "use strict";
    require("../script/basic/constant");
    var _opacity = 191;
    var _notShowMask = false;
    var _toastArg = {
      type: constant.ToastType.Loading
    };
    var _isLoadedImgRes = false;
    var _loadProcessCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        auBtn: {
          default: null,
          type: cc.AudioClip
        },
        mask: cc.Node,
        loadMask: cc.Node,
        loadIcon: cc.Node,
        headBg: cc.Node,
        pfToastLoading: cc.Prefab
      },
      reuse: function reuse(data) {
        if (!dataLogic.isLoadedPrefab[data.path]) {
          this.mask.opacity = 0;
          this.mask.width = cc.winSize.width + 200;
          this.mask.height = cc.winSize.height + 200;
          this.mask.active = !data.hideLoadingToast;
          if (!data.hideLoadingToast) {
            this.toastLoading ? this.toastLoading.active = true : this.toastLoading = kf.getObj(constant.PoolId.ToastLoading, this.node, this.pfToastLoading, _toastArg);
            var txt = this.toastLoading.getChildByName("txt").getComponent(cc.Label);
            txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
            var n = 0;
            _loadProcessCb = function _loadProcessCb() {
              n++;
              txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
            };
            this.schedule(_loadProcessCb, .1, 98);
          }
        }
        this.loadDialog(data);
      },
      loadDialog: function loadDialog(data) {
        var _this = this;
        resMgr.loadSingleRes(data.path, function(pf) {
          if (_this.toastLoading && _this.toastLoading.active && !data.hideLoadingToast) {
            _this.mask.opacity = _opacity;
            _this.toastLoading.active = false;
            _this.unschedule(_loadProcessCb);
          } else data.hideLoadingToast && (_this.mask.opacity = _opacity);
          _this.mask.active || (_this.mask.active = true);
          var node = cc.instantiate(pf);
          node.parent = _this.node.getChildByName("main").getChildByName("contentBg");
          _this.hideLoadView();
          null == data.initArg && (data.initArg = {});
          null != data.js && node.getComponent(data.js).reuse(_this.node, data.initArg, _this.showLoadView.bind(_this), _this.hideLoadView.bind(_this));
          var btnClose = _this.node.getChildByName("main").getChildByName("header").getChildByName("btnClose").getComponent(cc.Button);
          var clickEventHandler = new cc.Component.EventHandler();
          clickEventHandler.target = node;
          clickEventHandler.component = data.js;
          clickEventHandler.handler = "toastClose";
          btnClose.clickEvents.shift();
          btnClose.clickEvents.push(clickEventHandler);
          dataLogic.setLoadedPrefab(data.path);
          _this.headBg.width = _this.headBg.parent.getChildByName("txt").width + 290;
        }, cc.Prefab);
      },
      btnEvent: function btnEvent(event, eventName) {
        eventName;
      },
      showLoadView: function showLoadView() {
        var needLoadMask = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        var loadIconPos = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : cc.v2(0, 0);
        if (needLoadMask) {
          this.loadMask.getComponent(cc.BlockInputEvents).enabled = true;
          this.loadMask.opacity = _opacity;
          this.loadIcon.x = 0;
          this.loadIcon.y = 0;
        } else this.loadIcon.position = loadIconPos;
        this.loadIcon.opacity = 255;
        this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
      },
      hideLoadView: function hideLoadView() {
        this.loadMask.opacity = 0;
        this.loadMask.getComponent(cc.BlockInputEvents).enabled = false;
        !_notShowMask;
        this.loadIcon.stopAllActions();
        this.loadIcon.opacity = 0;
      }
    });
    cc._RF.pop();
  }, {
    "../script/basic/constant": "constant"
  } ],
  dialogExtend: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "f401fjo3WVH25qfqzW0FM3a", "dialogExtend");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        loadIconPos: cc.v2(0, 0),
        layerTipPos: cc.v2(0, 0),
        layerMsgPf: cc.Prefab,
        loadMask: cc.Node,
        loadIcon: cc.Node
      },
      unregisterEvent: function unregisterEvent() {
        if (this.registerHandler && this.registerHandler.length) for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      unuse: function unuse() {
        this.unregisterEvent();
      },
      showLoadView: function showLoadView() {
        var needLoadMask = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        var loadIconPos = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : cc.v2(0, 0);
        if (needLoadMask) {
          this.loadMask.getComponent(cc.BlockInputEvents).enabled = true;
          this.loadMask.opacity = 153;
          this.loadIcon.x = 0;
          this.loadIcon.y = 0;
        } else this.loadIcon.position = loadIconPos;
        this.loadIcon.opacity = 255;
        this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
      },
      hideLoadView: function hideLoadView() {
        this.loadMask.opacity = 0;
        this.loadMask.getComponent(cc.BlockInputEvents).enabled = false;
        this.loadIcon.stopAllActions();
        this.loadIcon.opacity = 0;
      },
      showLayerTip: function showLayerTip(str) {
        var isAutoHide = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
        var isListeningClick = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        var layerMsg_node = kf.getObj(constant.PoolId.layerMsg, this.node, this.layerMsgPf);
        layerMsg_node.position = this.layerTipPos;
        layerMsg_node.getComponent("layerMsg").layerTip(str, isAutoHide, isListeningClick);
      },
      reqDateAndShowLoadView: function reqDateAndShowLoadView(reqArg, cbEventName, cbArg) {
        var needLoadMask = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
        var loadIconPos = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : this.loadIconPos;
        this.showLoadView(needLoadMask, loadIconPos);
        this.reqData(reqArg, cbEventName, cbArg);
      },
      reqData: function reqData(reqArg, cbEventName, cbArg) {
        reqArg.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false,
          isLightHint: true,
          timeout: 0,
          lightHintPos: cc.v2(0, 0)
        };
        http.post(reqArg, cbEventName, cbArg);
      }
    });
    cc._RF.pop();
  }, {} ],
  diceConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5f6f9vlmwNGi7Gxk52qR85o", "diceConstant");
    "use strict";
    window.diceConstant = window.diceConstant || {};
    diceConstant.maxPlayerNum = 6;
    var n = 0;
    diceConstant.CardType = {
      Single: n++,
      Pair: n++,
      Straight: n++,
      Flush: n++,
      StraightFlush: n++,
      Set: n++
    };
    diceConstant.Audio = {
      Bg: 0
    };
    n = 0;
    diceConstant.PlayerState = {
      Fold: n++,
      HaveSeen: n++,
      Failed: n++,
      Normal: n++
    };
    var _action = "DoPlay";
    diceConstant.PostBet = {
      action: _action,
      eventName: "bet"
    };
    diceConstant.PostOpen = {
      action: _action,
      eventName: "open"
    };
    diceConstant.PostSyncBetButtonInfo = {
      action: "GetBetConfig",
      roomId: 2201
    };
    diceConstant.PostMatching = {
      action: "JoinRoom"
    };
    diceConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    diceConstant.PostGuess = {
      action: _action,
      eventName: "guess"
    };
    diceConstant.PostCancelMatching = {
      action: _action,
      eventName: "leave"
    };
    cc._RF.pop();
  }, {} ],
  diceHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1343dMl8itFroWxjJWswM1t", "diceHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Dice);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "dice/gameBg", "dice/table", "dice", "dice2", "dice3", "diceBetState", "dice/UI/arrowNew", "dice/Effect/effect/dhtz_defeat_pd" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  diceLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c7ee8FXVb9G9pZSFy9U3P//", "diceLogic");
    "use strict";
    window.diceLogic = {
      checkDiceType: function checkDiceType(diceArr) {}
    };
    cc._RF.pop();
  }, {} ],
  diceMain: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "8d7cegykppKqYyDQAzPmGxb", "diceMain");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class((_cc$Class = {
      extends: require("gameSceneBase"),
      properties: {
        indicatorGame: cc.Node,
        btnGroup1: cc.Node,
        btnGroup2: cc.Node,
        btnGroup3: cc.Node,
        betPanel: cc.Node,
        btnCall: cc.Node,
        btnOpen: cc.Node,
        buttonClickAudio: {
          default: null,
          type: cc.AudioClip
        },
        matchingBtn: cc.Node,
        restartMatchingBtn: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        btCancelMatching: cc.Button,
        efMatchingLoad: cc.Node,
        anteBg: cc.Node,
        playIdBg: cc.Node,
        anteTxt: cc.Label,
        playIdTxt: cc.Label,
        playerArr: [ cc.Node ],
        countDownNode: cc.Node,
        countDownTxt: cc.Label,
        diceAtlas: cc.SpriteAtlas,
        dice2Atlas: cc.SpriteAtlas,
        betNumPfb: cc.Prefab,
        btnSprite: [ cc.SpriteFrame ],
        dice: [ cc.Node ],
        roundTxt: cc.Label,
        roundNode: cc.Node,
        callDiceRecordItemPfb: cc.Prefab,
        callDiceRecordContent: cc.Node,
        callDiceRecordPanel: cc.Node,
        nullRecord: cc.Node,
        gameEndPanel: cc.Node,
        victoryPfb: cc.Prefab,
        defeatPfb: cc.Prefab,
        callDiceState: [ cc.SpriteFrame ],
        selfDiceCup: [ cc.Node ],
        selfDiceGroup: [ cc.Node ],
        diceBetState: cc.SpriteAtlas,
        callDiceNumberManAudio: {
          default: [],
          type: cc.AudioClip
        },
        callDiceNumberWomanAudio: {
          default: [],
          type: cc.AudioClip
        },
        callDiceValManAudio: {
          default: [],
          type: cc.AudioClip
        },
        callDiceValWomanAudio: {
          default: [],
          type: cc.AudioClip
        },
        grapOpenAudio: {
          default: [],
          type: cc.AudioClip
        },
        openAudio: {
          default: [],
          type: cc.AudioClip
        },
        diceAudio: {
          default: null,
          type: cc.AudioClip
        },
        gameEndAudio: {
          default: [],
          type: cc.AudioClip
        },
        callDiceWinAudio: {
          default: [],
          type: cc.AudioClip
        },
        openDiceWinAudio: {
          default: [],
          type: cc.AudioClip
        },
        notGuessAudio: {
          default: [],
          type: cc.AudioClip
        },
        scrollParent: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "openCb", this.openCb.bind(this) ], [ "onOpenDice", this.onOpenDice.bind(this) ], [ "onStartGuess", this.onStartGuess.bind(this) ], [ "guessCb", this.guessCb.bind(this) ], [ "onGuess", this.onGuess.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow() {
        this.node.stopAllActions();
        if (this.indicatorGame.active) {
          this.indicatorGame.stopAllActions();
          this.indicatorGame.active = false;
        }
        if (-1 != this.gameState) {
          var nowPassTime = (new Date().getTime() - this.curGameStartTime) / 1e3;
          if (nowPassTime > 4) {
            if (this.indicatorGame.active) {
              this.indicatorGame.stopAllActions();
              this.indicatorGame.active = false;
            }
            var anim = this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").getComponent(cc.Animation);
            anim.stop();
            this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").rotation = 0;
          } else if (nowPassTime > 2) {
            var anim = this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").getComponent(cc.Animation);
            anim.stop();
            this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").rotation = 0;
          }
          this.alterCountDown();
          if (this.selfDiceCup[0].active) {
            this.showSelfDice(this.selfDiceData);
            this.updateBtn(this.curOperationUISeatId);
            this.updateSoapInfo(null, this.curOperationUISeatId, null, null);
          }
        } else if (null != this.gameEndData) {
          var anim = this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").getComponent(cc.Animation);
          anim.stop();
          this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").rotation = 0;
          this.unscheduleAllCallbacks();
          this.unschedule(this.timeoutOpen);
          this.gameEnd(this.gameEndData);
        }
      },
      gameHide: function gameHide() {
        this.unscheduleAllCallbacks();
      },
      updateBtn: function updateBtn(UISeatId) {
        if (this.playerData.length > 2) {
          if (UISeatId === constant.SelfUISeatId) {
            this.btnGroup1.active = true;
            this.btnGroup2.active = this.btnGroup3.active = false;
            this.btnOpen.active = !!this.isFirstPlayerHasBet;
            this.lastPlayerBetData[0] == this.callDiceLimit[this.playerData.length - 2][0] && this.lastPlayerBetData[1] == this.callDiceLimit[this.playerData.length - 2][1] ? this.btnCall.active = false : this.upRoundLimit > 0 && (this.btnCall.active = false);
          } else if (this.isFirstPlayerHasBet) {
            this.btnGroup1.active = false;
            if (this.isSomeOneOpenPoison) {
              this.btnGroup2.active = true;
              this.btnGroup3.active = false;
            } else {
              this.btnGroup2.active = false;
              this.btnGroup3.active = true;
            }
          }
        } else {
          cc.log("\u53cc\u4eba\u623f");
          this.btnGroup2.active = this.btnGroup3.active = false;
          if (UISeatId === constant.SelfUISeatId) {
            this.btnGroup1.active = true;
            this.btnOpen.active = !!this.isFirstPlayerHasBet;
            var callDiceLimit = this.callDiceLimit[this.playerData.length - 2];
            this.lastPlayerBetData[0] == callDiceLimit[0] && this.lastPlayerBetData[1] == callDiceLimit[1] ? this.btnCall.active = false : this.upRoundLimit > 0 && (this.btnCall.active = false);
          } else this.btnGroup1.active = false;
        }
      },
      hideAllBtnGroup: function hideAllBtnGroup() {
        this.btnGroup1.active = this.btnGroup2.active = this.btnGroup3.active = false;
      },
      countDown: function countDown(endTime, nextUISeatId) {
        var setTimeResult = dataLogic.setTimerData(endTime);
        if (!setTimeResult) return;
        this.unschedule(this.timeoutOpen);
        this.unschedule(this.callback);
        this.setCurOpeartionUIseatId(nextUISeatId);
        cc.log("coutndown");
        var remainingTime = Math.floor((dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3);
        this.countDownNode.active = true;
        this.countDownTxt.string = remainingTime;
        this.callback = function() {
          remainingTime--;
          this.countDownTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.countDownNode.active = false;
          }
        };
        this.schedule(this.callback, 1);
        nextUISeatId === constant.SelfUISeatId && this.scheduleOnce(this.timeoutOpen, dataLogic.timerTotalTime);
      },
      alterCountDown: function alterCountDown() {
        this.unschedule(this.timeoutOpen);
        var remainingTime = Math.floor((dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3);
        if (remainingTime <= 0) this.curOperationUISeatId == constant.SelfUISeatId && 1 == this.gameState && this.timeoutOpen(); else {
          this.curOperationUISeatId == constant.SelfUISeatId && 1 == this.gameState && this.scheduleOnce(this.timeoutOpen, remainingTime);
          this.countDownNode.active = true;
          this.countDownTxt.string = remainingTime;
          this.unschedule(this.callback);
          this.callback = function() {
            remainingTime--;
            this.countDownTxt.string = remainingTime;
            if (remainingTime <= 0) {
              remainingTime = 0;
              this.unschedule(this.callback);
              this.countDownNode.active = false;
            }
          };
          this.schedule(this.callback, 1);
        }
      },
      setCurOpeartionUIseatId: function setCurOpeartionUIseatId(UISeatId) {
        this.curOperationUISeatId = UISeatId;
      },
      timeoutOpen: function timeoutOpen() {
        if (this.isFirstPlayerHasBet) if (1 == this.isGuessTime) {
          diceConstant.PostGuess.guessId = 3;
          http.post(diceConstant.PostGuess, "guessCb");
        } else http.post(diceConstant.PostOpen, "openCb"); else {
          this.betData = [ this.playerData.length, 2 ];
          diceConstant.PostBet.betNum = this.betData.join(",");
          http.post(diceConstant.PostBet, "betCb");
        }
        this.resetCurRoundBetData();
      },
      btnEvent: function btnEvent(event, eventType) {
        eventType && audioMgr.playEffect(this.buttonClickAudio);
        switch (eventType) {
         case "matching":
          this.matching();
          break;

         case "cancelMatching":
          this.cancelMatching();
          break;

         case "exitGame":
          this.tryExitGame();
          break;

         case "closeExitPanel":
          break;

         case "callDice":
          this.betPanel.active = true;
          break;

         case "openDice":
          this.openDice();
          break;

         case "closeGameEndPanel":
          this.hideGameEndPanel();
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          record.getComponent("record").recordMainShow(constant.GameId.Dice);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "refresh":
          cc.game.restart();
        }
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        this.matchingBtn.active = false;
        this.restartMatchingBtn.active = false;
        var roomKey = dataLogic.curRoomKey || 1;
        dataLogic.setNeedRecover(true);
        dataLogic.setDeskId(-1);
        this.resetGameData();
        this.initMatchingView(true, false);
        diceConstant.PostMatching.roomId = constant.GameId.Dice + roomKey;
        http.post(diceConstant.PostMatching, "matchingCb");
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      matchingCb: function matchingCb(data) {
        if (1 != data.Code) {
          this.setMatchingToastView(false);
          dataLogic.setNeedRecover(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
            this.matchingBtn.active = true;
            return;
          }
          this.matchingBtn.active = true;
          return;
        }
        dataLogic.setDeskId(data.Data.deskId);
        this.setMatchingToastUI(true);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        this.playerArr[UISeatId].getChildByName("userInfo").getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
      },
      getPlayerBalance: function getPlayerBalance(UISeatId) {
        return this.playerArr[UISeatId].getChildByName("userInfo").getChildByName("balance").getComponent(cc.Label).string;
      },
      gameRecoverCb: function gameRecoverCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          this.doneGameRecover = true;
          this.gameState = -1;
          this.isOffLine = 0;
          this.resetGameData();
          dataLogic.isFriendRoom ? this.btReady.node.active = true : this.matchingBtn.active = true;
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          if (this.recoverLoad && this.recoverLoad.parent) {
            this.recoverLoad.stopAllActions();
            kf.killObj(this.recoverLoad);
          }
          dataLogic.gameEnd();
          constant.HttpCode.GameOver == data.Code && (dataLogic.isFriendRoom ? this.dissolutionRoom(data.StrCode) : dataLogic.setReqRecoverState(false));
          return;
        }
        if (this.recoverLoad && this.recoverLoad.parent) {
          this.recoverLoad.stopAllActions();
          kf.killObj(this.recoverLoad);
        }
        this.onGameRecover(data.Data);
      },
      hidePlayerSoapAndBetState: function hidePlayerSoapAndBetState(playerData) {
        for (var i = 0; i < playerData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          this.hideSinglePlayerSoapAndBetState(UISeatId);
        }
      },
      hideSinglePlayerSoapAndBetState: function hideSinglePlayerSoapAndBetState(UISeatId) {
        this.playerArr[UISeatId].getChildByName("betSoap").opacity = 0;
        this.playerArr[UISeatId].getChildByName("turnSoap").opacity = 0;
        this.playerArr[UISeatId].getChildByName("betState").opacity = 0;
        UISeatId != constant.SelfUISeatId && (this.playerArr[UISeatId].getChildByName("New Sprite").opacity = 0);
      },
      playerJoin: function playerJoin(info, seatId) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        this.hideSinglePlayerSoapAndBetState(UISeatId);
      },
      onGameRecover: function onGameRecover(data) {
        this.isOffLine = 0;
        dataLogic.setReqRecoverState(false);
        dataLogic.setLimitPlayerNum(4);
        dataLogic.setMsgId(data.msgId);
        this.selfDiceData = data.cards;
        if (0 == data.state) {
          this.gameState = -1;
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerReadyState(data);
            this.hidePlayerSoapAndBetState(data.playerInfo);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(data.kickOutTime, true);
          } else {
            this.initMatchingView(true, true);
            this.matchingBtn.active = false;
          }
          return;
        }
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        this.setMatchingToastView(false);
        dataLogic.matching();
        dataLogic.setPlayerInfo(data.playerInfo);
        this.matchingBtn.active = false;
        this.betNumSliderKey = 0;
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        this.betData = [ data.playerInfo.length, 2 ];
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + data.ante;
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + data.playId;
        if (dataLogic.isFriendRoom) {
          this.setAllPlayerReadyState(data);
          this.updateTips();
        } else this.createPlayer(data);
        2 != data.playerInfo.length || dataLogic.isFriendRoom || this.exChangePlayerPos(data.playerInfo);
        this.setRound(data);
        this.checkRound(data.round, data.nextSeatId);
        if (data.matchData.diceNum > 0 && data.matchData.diceVal > 0) {
          this.lastPlayerBetData = [ data.matchData.diceNum, data.matchData.diceVal ];
          this.isFirstPlayerHasBet = 1;
        }
        if (2 == data.state) {
          this.isGuessTime = 1;
          var callUISeatId = dataLogic.getUISeatIdBySeatId(data.matchData.callSeatId);
          var openUISeatId = dataLogic.getUISeatIdBySeatId(data.matchData.openSeatId);
          if (constant.SelfUISeatId != callUISeatId && constant.SelfUISeatId != openUISeatId) {
            this.btnGroup1.active = false;
            this.btnGroup2.active = true;
            this.btnGroup3.active = false;
            this.countDown(data.endTime, constant.SelfUISeatId);
          } else this.countDown(data.endTime, null);
        } else {
          this.countDown(data.endTime, UISeatId);
          var _updateUserState = false;
          dataLogic.isFriendRoom && data.cards.length && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Gaming ? _updateUserState = true : !dataLogic.isFriendRoom && data.cards.length && (_updateUserState = true);
          _updateUserState && dataLogic.selfSeatId != data.matchData.callSeatId && this.updateBtn(UISeatId);
          this.createBetNumButton(data);
          this.setBetNumBtnState();
        }
        this.setPlayIdWidth();
        this.setPlayIdBgState();
        this.initBetRecord(data);
        data.cards.length && this.showSelfDice(data.cards);
        this.recoverSoapInfo(data);
      },
      ready: function ready() {
        var btReady = this.gameEndPanel.getChildByName("btReady");
        btReady.active && (btReady.active = false);
        this.gameEndPfb && this.gameEndPfb.parent && this.gameEndPfb.destroy();
        this.gameEndPanel.getChildByName("mask").active && (this.gameEndPanel.getChildByName("mask").active = false);
      },
      exChangePlayerPos: function exChangePlayerPos(data) {
        var renderPos = kf.clone(this.playerArrPos);
        var _betSoapPos = kf.clone(this.betSoapPos);
        var _turnSoapPos = kf.clone(this.turnSoapPos);
        var _diceCupPos = kf.clone(this.diceCupPos);
        for (var i = 0; i < data.length; i++) {
          var _UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (_UISeatId != constant.SelfUISeatId) {
            this.playerArr[_UISeatId].position = renderPos[2];
            this.playerArr[_UISeatId].playerPos = this.playerArr[2].playerPos;
            cc.log(_UISeatId);
            if (1 == _UISeatId) {
              var turnSoap = this.playerArr[1].getChildByName("turnSoap");
              var betSoap = this.playerArr[1].getChildByName("betSoap");
              turnSoap.position = _turnSoapPos[2];
              turnSoap.scaleX = 1;
              turnSoap.getChildByName("txt").scaleX = 1;
              betSoap.position = _betSoapPos[2];
              betSoap.scaleX = 1;
              betSoap.getChildByName("txt").scaleX = 1;
              betSoap.getChildByName("txt").x = this.secondBetSoapDicePos.x;
              betSoap.getChildByName("dice").x = this.secondBetSoapTxtPos.x;
              this.playerArr[_UISeatId].getChildByName("New Sprite").position = _diceCupPos[2];
            }
          }
        }
      },
      setAllPlayerReadyState: function setAllPlayerReadyState(data) {
        dataLogic.setPlayerInfo(data.playerInfo);
        var UISeatId = void 0, playerInfo = kf.clone(data.playerInfo);
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (null == playerInfo[i].headUrl) {
            this.playerArr[UISeatId].active && (this.playerArr[UISeatId].active = false);
            continue;
          }
          this.playerArr[UISeatId].userId = playerInfo[i].userId;
          UISeatId == constant.SelfUISeatId && (playerInfo[i].InvUserState == constant.FriendRoomPlayerState.Gaming ? this.gameState = 1 : this.gameState = -1);
        }
        for (var _i = playerInfo.length; _i < this.playerArr.length; _i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i);
          this.playerArr[UISeatId].active && (this.playerArr[UISeatId].active = false);
        }
        this.initAllPlayerReadyStateUI();
        this.createPlayer(data);
      },
      setPlayerInfo: function setPlayerInfo(playerInfo, UISeatId, isNewJoin) {
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        this.playerArr[UISeatId].userId = playerInfo.userId;
        dataLogic.isFriendRoom && playerInfo.InvUserState == constant.FriendRoomPlayerState.Gaming && dataLogic.setFriendRoomPlayerState(seatId, constant.FriendRoomPlayerState.Unready);
        if (!this.playerArr[UISeatId].active) {
          this.playerArr[UISeatId].active = true;
          UISeatId != constant.SelfUISeatId && (this.playerArr[UISeatId].getChildByName("New Sprite").opacity = 0);
        }
        playerInfo.seatId = seatId;
        playerInfo.UISeatId = UISeatId;
        this.renderPlayerInfo(UISeatId, playerInfo);
        this.hideSinglePlayerSoapAndBetState(UISeatId);
        isNewJoin;
        var activePlayerCount = 0;
        for (var i = 0; i < this.playerArr.length; i++) this.playerArr[i].active && activePlayerCount++;
      },
      recoverSoapInfo: function recoverSoapInfo(data) {
        var callUISeatId = dataLogic.getUISeatIdBySeatId(data.matchData.callSeatId);
        var openUISeatId = dataLogic.getUISeatIdBySeatId(data.matchData.openSeatId);
        var diceNum = data.matchData.diceNum;
        var diceVal = data.matchData.diceVal;
        this.isLockOne = data.matchData.isLockOne;
        var NextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        if (2 == data.state) for (var i = 0; i < this.playerArr.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (-1 == [ callUISeatId, openUISeatId ].indexOf(UISeatId)) this.playerArr[UISeatId].getChildByName("turnSoap").opacity = 255; else if (callUISeatId == UISeatId) {
            var betSoap = this.playerArr[callUISeatId].getChildByName("betSoap");
            betSoap.opacity = 255;
            betSoap.getChildByName("txt").getComponent(cc.Label).string = diceNum + "\u4e2a";
            betSoap.getChildByName("dice").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, diceVal);
          }
        } else diceNum > 0 && diceVal > 0 ? this.updateSoapInfo(callUISeatId, NextUISeatId, diceNum, diceVal) : this.updateSoapInfo(null, NextUISeatId, null, null);
      },
      cancelMatching: function cancelMatching() {
        this.btCancelMatching.node.active = false;
        this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
        http.post(diceConstant.PostCancelMatching, "cancelMatchingCb");
      },
      cancelMatchingCb: function cancelMatchingCb(data) {
        if (1 == data.Code || -4 == data.Code) {
          dataLogic.gameEnd();
          this.matchingBtn.active = true;
          this.setMatchingToastView(false);
        } else this.setMatchingToastView(false);
      },
      tryExitGame: function tryExitGame() {
        dataLogic.isFriendRoom ? -1 == this.gameState && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState != constant.FriendRoomPlayerState.Gaming ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6") : -1 == this.gameState ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa,\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
      },
      exitRoom: function exitRoom() {
        this.unscheduleAllCallbacks();
        this.resetGameData();
        this.node.stopAllActions();
        dataLogic.gameEnd();
        dataLogic.leaveTable();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      betCb: function betCb(data) {
        if (data.code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      onGameStart: function onGameStart(data) {
        var _this = this;
        dataLogic.matching();
        dataLogic.setLimitPlayerNum(4);
        dataLogic.setPlayerInfo(data.playerInfo);
        this.curGameStartTime = new Date().getTime();
        if (dataLogic.isFriendRoom) {
          this.updateTips();
          this.gameStartCommonHandle();
          this.resetGameData();
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.setCurOpeartionUIseatId(UISeatId);
        dataLogic.setTimerData(data.endTime);
        this.setMatchingToastView(false);
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + data.ante;
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + data.playId;
        this.setPlayIdWidth();
        this.setPlayIdBgState();
        this.selfDiceData = data.cards;
        this.gameState = 1;
        this.betData = [ data.playerInfo.length, 2 ];
        this.selfDiceCup[0].active = true;
        this.createPlayer(data);
        dataLogic.isFriendRoom || 2 != data.playerInfo.length || this.exChangePlayerPos(data.playerInfo);
        this.node.runAction(cc.sequence(cc.callFunc(function() {
          audioMgr.playEffect(_this.diceAudio);
          _this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("New Sprite").getComponent(cc.Animation).play();
        }, this), cc.delayTime(2), cc.callFunc(function() {
          _this.indicatorWhoFirstStart(UISeatId);
        }, this), cc.delayTime(2), cc.callFunc(function() {
          if (_this.indicatorGame.active) {
            _this.indicatorGame.stopAllActions();
            _this.indicatorGame.active = false;
          }
          _this.countDown(data.endTime, UISeatId);
          _this.updateBtn(UISeatId);
          _this.showSelfDice(data.cards);
          _this.updateSoapInfo(null, UISeatId, null, null);
        }, this)));
        this.createBetNumButton(data);
        this.setRound(data);
      },
      guessWhoWin: function guessWhoWin(event, whoWinId) {
        diceConstant.PostGuess.guessId = whoWinId;
        http.post(diceConstant.PostGuess, "guessCb");
        this.resetCurRoundBetData();
      },
      guessCb: function guessCb(data) {
        if (1 == data.Code) ; else if (data.Code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      showSelfDice: function showSelfDice(cards) {
        this.selfDiceCup[0].active = false;
        this.selfDiceCup[1].active = true;
        this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("diceNumGroup").active = true;
        for (var i = 0; i < cards.length; i++) this.selfDiceGroup[i].getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.dice2Atlas, cards[i]);
      },
      indicatorWhoFirstStart: function indicatorWhoFirstStart(UISeatId) {
        var rotateTime = 2;
        var rotateRound = 3;
        var self = this;
        this.indicatorGame.active = true;
        this.indicatorGame.runAction(cc.sequence(cc.rotateBy(2, dataLogic.isFriendRoom ? -90 * UISeatId - 360 * rotateRound : UISeatId * (2 == this.playerData.length ? -180 : -90) - 360 * rotateRound), cc.callFunc(function() {
          self.indicatorGame.active = false;
        }, this))).easing(cc.easeCubicActionOut(rotateTime));
      },
      onBet: function onBet(data) {
        1 == data.betVal && (this.isLockOne = true);
        this.isFirstPlayerHasBet = 1;
        this.betData = [ this.playerData.length, 2 ];
        this.lastPlayerBetData = [ data.betNum, data.betVal ];
        var nextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.countDown(data.endTime, nextUISeatId);
        this.updateSoapInfo(UISeatId, nextUISeatId, data.betNum, data.betVal);
        nextUISeatId == constant.SelfUISeatId && this.setBetNumBtnState();
        this.setRound(data);
        this.initBetRecord(data);
        this.playBetAudio(data);
        this.checkRound(data.round, data.seatId);
        if (UISeatId != constant.SelfUISeatId) {
          if (dataLogic.isFriendRoom && (!this.selfDiceData.length || dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState != constant.FriendRoomPlayerState.Gaming)) return;
          this.updateBtn(nextUISeatId);
        } else this.hideAllBtnGroup();
      },
      onGuess: function onGuess(data) {
        var guessUISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        if (2 == data.guessId) {
          this.playerArr[guessUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "openWin");
          1 == this.playerData[data.seatId].sex ? audioMgr.playEffect(this.openDiceWinAudio[0]) : audioMgr.playEffect(this.openDiceWinAudio[1]);
        } else if (1 == data.guessId) {
          this.playerArr[guessUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "callWin");
          1 == this.playerData[data.seatId].sex ? audioMgr.playEffect(this.callDiceWinAudio[0]) : audioMgr.playEffect(this.callDiceWinAudio[1]);
        } else {
          this.playerArr[guessUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "notGuess");
          1 == this.playerData[data.seatId].sex ? audioMgr.playEffect(this.notGuessAudio[0]) : audioMgr.playEffect(this.notGuessAudio[1]);
        }
        this.playerArr[guessUISeatId].getChildByName("betState").opacity = 255;
        this.playerArr[guessUISeatId].getChildByName("turnSoap").opacity = 0;
        if (guessUISeatId == constant.SelfUISeatId) {
          this.hideAllBtnGroup();
          this.unschedule(this.createDotFunc);
        }
        if (data.isEnd) {
          this.gameState = -1;
          this.unschedule(this.timeoutOpen);
          this.hideAllBtnGroup();
          this.unscheduleAllCallbacks();
          this.countDownNode.active = false;
          this.gameEndData = data;
          dataLogic.isHide ? this.gameEnd(data) : this.scheduleOnce(function() {
            this.gameEnd(data);
          }, 1);
        }
      },
      onStartGuess: function onStartGuess(data) {
        this.unschedule(this.timeoutOpen);
        this.unschedule(this.callback);
        var callUISeatId = dataLogic.getUISeatIdBySeatId(data.callSeatId);
        var openUISeatId = dataLogic.getUISeatIdBySeatId(data.openSeatId);
        this.playerArr[openUISeatId].getChildByName("turnSoap").opacity = 0;
        this.isGuessTime = 1;
        if (data.openState) {
          1 == this.playerData[data.openSeatId].sex ? audioMgr.playEffect(this.grapOpenAudio[0]) : audioMgr.playEffect(this.grapOpenAudio[1]);
          this.playerArr[openUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "grap");
        } else {
          1 == this.playerData[data.openSeatId].sex ? audioMgr.playEffect(this.openAudio[0]) : audioMgr.playEffect(this.openAudio[1]);
          this.playerArr[openUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "call");
        }
        this.playerArr[openUISeatId].getChildByName("betState").opacity = 255;
        for (var i = 0; i < this.playerData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (UISeatId != openUISeatId && UISeatId != callUISeatId) if (dataLogic.isFriendRoom) {
            if (UISeatId == constant.SelfUISeatId && this.selfDiceData.length && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Gaming) {
              this.playerArr[UISeatId].getChildByName("turnSoap").opacity = 255;
              this.dotAni(UISeatId);
            }
          } else {
            this.playerArr[UISeatId].getChildByName("turnSoap").opacity = 255;
            this.dotAni(UISeatId);
          }
        }
        if (constant.SelfUISeatId != callUISeatId && constant.SelfUISeatId != openUISeatId) {
          this.countDown(data.endTime, constant.SelfUISeatId);
          if (dataLogic.isFriendRoom) {
            if (this.selfDiceData.length && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Gaming) {
              this.btnGroup1.active = false;
              this.btnGroup2.active = true;
              this.btnGroup3.active = false;
            }
          } else {
            this.btnGroup1.active = false;
            this.btnGroup2.active = true;
            this.btnGroup3.active = false;
          }
        } else this.countDown(data.endTime, null);
      },
      playBetAudio: function playBetAudio(data) {
        var _sex = this.playerData[data.seatId].sex;
        1 == _sex ? this.playManAudio(data.betNum, data.betVal) : this.playWomanAudio(data.betNum, data.betVal);
      },
      playManAudio: function playManAudio(betNum, betVal) {
        var id = audioMgr.playEffect(this.callDiceNumberManAudio[betNum - 2]);
        var self = this;
        cc.audioEngine.setFinishCallback(id, function() {
          audioMgr.playEffect(self.callDiceValManAudio[betVal - 1]);
        });
      },
      playWomanAudio: function playWomanAudio(betNum, betVal) {
        var id = audioMgr.playEffect(this.callDiceNumberWomanAudio[betNum - 2]);
        var self = this;
        cc.audioEngine.setFinishCallback(id, function() {
          audioMgr.playEffect(self.callDiceValWomanAudio[betVal - 1]);
        });
      },
      initBetRecord: function initBetRecord(data) {
        if (data.betRecord.length) {
          this.nullRecord.active = false;
          this.callDiceRecordPanel.active = true;
        }
        this.betRecord = data.betRecord;
        this.initRecordItem(data);
      },
      initRecordItem: function initRecordItem() {
        for (var i = this.callDiceRecordContent.children.length - 1; i >= 0; i--) this.callDiceRecordContent.children[i].destroy();
        var count = 0;
        var _height = 0;
        for (var _i2 = this.betRecord.length - 1; _i2 >= 0; _i2--) {
          var _data = this.betRecord[_i2];
          var recordPfb = cc.instantiate(this.callDiceRecordItemPfb);
          recordPfb.getComponent("callDiceRecordItem").init(_data, count);
          recordPfb.parent = this.callDiceRecordContent;
          var y = -51 * count - 28;
          _height += recordPfb.height + 2;
          count++;
          recordPfb.position = cc.v2(0, y);
        }
        this.callDiceRecordContent.height = _height + 10;
      },
      openDice: function openDice() {
        diceConstant.PostOpen.roomId = constant.GameId.Dice + dataLogic.curRoomKey || 1;
        http.post(diceConstant.PostOpen, "openCb");
        this.resetCurRoundBetData();
      },
      openCb: function openCb(data) {
        if (1 == data.Code) ; else if (data.Code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      onOpenDice: function onOpenDice(data) {
        this.unschedule(this.timeoutOpen);
        this.hideAllBtnGroup();
        this.unscheduleAllCallbacks();
        this.gameState = -1;
        this.gameEndData = data;
        var openUISeatId = dataLogic.getUISeatIdBySeatId(data.openSeatId);
        if (data.openState) {
          1 == this.playerData[data.openSeatId].sex ? audioMgr.playEffect(this.grapOpenAudio[0]) : audioMgr.playEffect(this.grapOpenAudio[1]);
          this.playerArr[openUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "grap");
        } else {
          1 == this.playerData[data.openSeatId].sex ? audioMgr.playEffect(this.openAudio[0]) : audioMgr.playEffect(this.openAudio[1]);
          this.playerArr[openUISeatId].getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "call");
        }
        this.playerArr[openUISeatId].getChildByName("betState").opacity = 255;
        this.playerArr[openUISeatId].getChildByName("turnSoap").opacity = 0;
        this.countDownNode.active = false;
        dataLogic.isHide ? this.gameEnd(data) : this.scheduleOnce(function() {
          this.gameEnd(data);
        }, 1);
      },
      gameEnd: function gameEnd(data) {
        this.unscheduleAllCallbacks();
        this.hideAllBtnGroup();
        if (dataLogic.isFriendRoom && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState != constant.FriendRoomPlayerState.Gaming) {
          this.btReady.node.active = true;
          this.btReady.node.scaleX = 1;
          dataLogic.setPlayState(false);
          this.gamingPlayerToUnready();
          this.updateTips();
          return;
        }
        for (var i = 0; i < this.playerArr.length; i++) {
          this.playerArr[i].getChildByName("turnSoap").opacity = 0;
          this.playerArr[i].getChildByName("turnSoap").getChildByName("txt").stopAllActions();
          this.unschedule(this.createDotFunc);
        }
        if (null != this.gameEndPfb) {
          this.gameEndPfb.destroy();
          this.gameEndPfb = null;
        }
        if (!this.gameEndPfb) if (data.endData[dataLogic.selfSeatId] >= 0) {
          this.gameEndPfb = cc.instantiate(this.victoryPfb);
          audioMgr.playEffect(this.gameEndAudio[0]);
        } else {
          this.gameEndPfb = cc.instantiate(this.defeatPfb);
          audioMgr.playEffect(this.gameEndAudio[1]);
        }
        this.gameEndPfb.parent = this.gameEndPanel;
        this.gameEndPfb.position = cc.v2(0, 0);
        var dhtz_victory_di = this.gameEndPfb.getChildByName("dhtz_victory_di");
        var contentBody = dhtz_victory_di.getChildByName("contentBody");
        var closeIcon = dhtz_victory_di.getChildByName("closeIcon");
        var contentHead = dhtz_victory_di.getChildByName("contentHead");
        for (var _i3 = 0; _i3 < data.endData.length; _i3++) {
          var _playerInfo = dataLogic.playerInfo[_i3];
          _playerInfo.balance = (100 * _playerInfo.balance + 100 * data.endData[_i3]) / 100;
          data.endData[_i3] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * data.endData[_i3]) / 100);
          data.isEnd && (_playerInfo.gameTimes += 1);
          this.playerArr[_i3]._playerInfo = _playerInfo;
          var playStr = "player" + (_i3 + 1);
          var endPlayer = contentBody.getChildByName(playStr);
          var UISeatId = dataLogic.getUISeatIdBySeatId(_i3);
          UISeatId === constant.SelfUISeatId && (endPlayer.getChildByName("selfBg").active = true);
          endPlayer.active = true;
          endPlayer.getChildByName("playerName").getComponent(cc.Label).string = data.endInfo[_i3].nickname;
          var betState = endPlayer.getChildByName("betState");
          var balance = +this.getPlayerBalance(UISeatId);
          this.setPlayerBalance(UISeatId, balance.add(data.endData[_i3]));
          if (1 == data.endInfo[_i3].state) {
            betState.getComponent(cc.Sprite).spriteFrame = this.callDiceState[0];
            betState.active = true;
          } else if (2 == data.endInfo[_i3].state) {
            betState.getComponent(cc.Sprite).spriteFrame = this.callDiceState[3];
            betState.active = true;
          } else if (3 == data.endInfo[_i3].state || 4 == data.endInfo[_i3].state) {
            betState.getComponent(cc.Sprite).spriteFrame = this.callDiceState[2];
            endPlayer.getChildByName("winState").getComponent(cc.Label).string = 3 == data.endInfo[_i3].state ? "\u53eb\u9ab0\u8d62- " : "\u5f00\u76c5\u8d62- ";
            endPlayer.getChildByName("winState").active = true;
            betState.active = true;
          } else if (6 == data.endInfo[_i3].state) {
            betState.getComponent(cc.Sprite).spriteFrame = this.callDiceState[1];
            betState.active = true;
          }
          if (data.endData[_i3] >= 0) {
            endPlayer.getChildByName("money").getComponent(cc.Label).string = "+" + data.endData[_i3].toFixed(2);
            endPlayer.getChildByName("money").color = new cc.Color(198, 91, 13);
          } else {
            endPlayer.getChildByName("money").getComponent(cc.Label).string = data.endData[_i3].toFixed(2);
            endPlayer.getChildByName("money").color = new cc.Color(69, 166, 42);
          }
          var diceGroup = endPlayer.getChildByName("betDiceGroup");
          if (3 == data.endInfo[_i3].cardType) {
            var cards = kf.clone(data.endInfo[_i3].cards);
            cards[0] + 1 == cards[1] && cards[1] + 1 == cards[2] && cards[2] + 1 == cards[3] && cards[3] + 1 == cards[4] && (data.endInfo[_i3].cardType = 5);
          }
          for (var j = 0; j < 5; j++) {
            var diceStr = ("dice" + (j + 1)).toString();
            diceGroup.getChildByName(diceStr).getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, data.endInfo[_i3].cards[j]);
            this.isLockOne ? data.endInfo[_i3].cards[j] == data.gameInfo.callDice && 5 != data.endInfo[_i3].cardType && (diceGroup.getChildByName(diceStr).getChildByName("diceMask").active = false) : 1 != data.endInfo[_i3].cards[j] && data.endInfo[_i3].cards[j] != data.gameInfo.callDice || 3 == data.endInfo[_i3].cardType || 5 == data.endInfo[_i3].cardType || (diceGroup.getChildByName(diceStr).getChildByName("diceMask").active = false);
          }
        }
        var animaState = this.gameEndPfb.getComponent(cc.Animation).play();
        this.gameEndPanel.getChildByName("mask").active = true;
        this.gameEndPanel.active = true;
        if (dataLogic.isFriendRoom) {
          this.gameEndPanel.getChildByName("btReady").active = true;
          this.gameEndPanel.getChildByName("btReady").scale = 1;
        } else {
          this.restartMatchingBtn.active = true;
          this.restartMatchingBtn.scale = 1;
        }
        var callDiceNum = contentHead.getChildByName("callInfo").getChildByName("callNum");
        var dice1 = contentHead.getChildByName("callInfo").getChildByName("dice");
        var openDiceNum = contentHead.getChildByName("totalInfo").getChildByName("callNum");
        var dice2 = contentHead.getChildByName("totalInfo").getChildByName("dice");
        var whoWin = contentHead.getChildByName("whoWin");
        whoWin.getComponent(cc.Label).string = data.gameInfo.winId ? "\u53eb\u9ab0\u65b9\u8d62" : "\u5f00\u76c5\u65b9\u8d62";
        callDiceNum.getComponent(cc.Label).string = "\u53eb\u9ab0\uff1a" + data.gameInfo.callNum + "\u4e2a";
        if (3 == data.endInfo[data.callSeatId].cardType && 3 == data.endInfo[data.openSeatId].cardType || 5 == data.endInfo[data.callSeatId].cardType && 5 == data.endInfo[data.openSeatId].cardType || 3 == data.endInfo[data.callSeatId].cardType && 5 == data.endInfo[data.openSeatId].cardType || 5 == data.endInfo[data.callSeatId].cardType && 3 == data.endInfo[data.openSeatId].cardType) {
          openDiceNum.getComponent(cc.Label).string = "\u987a\u5b50\u5f00\u987a\u5b50";
          dice1.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, data.gameInfo.callDice);
        } else {
          openDiceNum.getComponent(cc.Label).string = "\u5171\u8ba1\uff1a" + data.gameInfo.openNum + "\u4e2a";
          dice1.getComponent(cc.Sprite).spriteFrame = dice2.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, data.gameInfo.callDice);
        }
        var self = this;
        closeIcon.on("touchstart", function() {
          closeIcon.runAction(cc.scaleTo(.1, .9, .9));
          audioMgr.playEffect(self.buttonClickAudio);
          self.gameEndPfb.destroy();
          self.gameEndPanel.getChildByName("mask").active = false;
          if (dataLogic.isFriendRoom) {
            self.btReady.node.active = true;
            self.btReady.scale = 1;
            self.gameEndPanel.getChildByName("btReady").active = false;
          } else {
            self.matchingBtn.active = true;
            self.matchingBtn.scale = 1;
            self.gameEndPanel.getChildByName("btStartNewGame").active = false;
          }
        });
        animaState.on("finished", function() {
          this.gameEndData = null;
        }, this);
        if (dataLogic.isFriendRoom) {
          dataLogic.setPlayState(false);
          this.gamingPlayerToUnready();
          this.updateTips();
        } else dataLogic.gameEnd();
      },
      showGameEndPanel: function showGameEndPanel() {
        var _this2 = this;
        this.gameEndPanel.active = true;
        var seq = cc.sequence(cc.callFunc(function() {
          _this2.gameEndPanel.getChildByName("mask").active = true;
        }, this), cc.fadeIn(0), cc.scaleTo(0, 0), cc.scaleTo(.2, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.gameEndPanel.getChildByName("content").runAction(seq);
      },
      hideGameEndPanel: function hideGameEndPanel() {
        var _this3 = this;
        var seq1 = cc.sequence(cc.callFunc(function() {
          _this3.gameEndPanel.getChildByName("mask").active = false;
        }, this), cc.scaleTo(.05, .7, .7), cc.fadeOut(0));
        this.gameEndPanel.getChildByName("content").runAction(seq1);
        this.scheduleOnce(function() {
          _this3.gameEndPanel.active = false;
        }, .1);
        this.matchingBtn.active = true;
      },
      setRound: function setRound(data) {
        this.roundTxt.string = "\u7b2c" + data.round + "/6\u8f6e";
        1 == data.round && (this.roundNode.active = true);
        if (data.round != this.roundTemp) {
          this.roundTemp = data.round;
          2 == data.round && (this.lastPlayerId = data.seatId);
        }
      },
      checkRound: function checkRound(round, seatId) {
        6 == round && seatId == this.lastPlayerId && (this.upRoundLimit = 1);
      },
      setBetNumBtnState: function setBetNumBtnState() {
        var deleteNum = 1 != this.lastPlayerBetData[1] ? this.lastPlayerBetData[0] - this.playerData.length : this.lastPlayerBetData[0] - this.playerData.length + 1;
        for (var i = 0; i < deleteNum; i++) this.scrollParent.children[i].active = false;
        var count = 0;
        for (var _i4 = 0; _i4 < this.scrollParent.children.length; _i4++) if (this.scrollParent.children[_i4].active) {
          this.scrollParent.children[_i4].getComponent(cc.Sprite).spriteFrame = this.btnSprite[0];
          this.scrollParent.children[_i4].position = cc.v2(count * this.scrollParent.children[0].width + 55, -3);
          count++;
        }
        this.betPanel.getComponent(cc.ScrollView).scrollToLeft();
        this.scrollParent.width = count * this.scrollParent.children[0].width + 30;
      },
      createBetNumButton: function createBetNumButton(data) {
        var num = 7 * data.playerInfo.length;
        var count = 0;
        var instantiateNode = void 0;
        for (var i = data.playerInfo.length; i <= num; i++) {
          instantiateNode = kf.getObj(constant.PoolId.diceBetNumBtn, this.scrollParent, this.betNumPfb);
          instantiateNode.getComponent(cc.Sprite).spriteFrame = this.btnSprite[0];
          instantiateNode.active = true;
          var clickEventHandler = new cc.Component.EventHandler();
          clickEventHandler.target = this.node;
          clickEventHandler.component = "diceMain";
          clickEventHandler.handler = "toggleBind";
          clickEventHandler.customEventData = i;
          instantiateNode.getComponent(cc.Button).clickEvents.push(clickEventHandler);
          instantiateNode.getChildByName("txt").getComponent(cc.Label).string = i;
          instantiateNode.position = cc.v2(instantiateNode.width * count + 55, -3);
          count++;
        }
        this.betPanel.getComponent(cc.ScrollView).scrollToLeft();
        this.scrollParent.width = count * this.scrollParent.children[0].width + 30;
      },
      toggleBind: function toggleBind(event, betDiceNum) {
        for (var j = 0; j < this.scrollParent.children.length; j++) this.scrollParent.children[j].getComponent(cc.Sprite).spriteFrame = this.btnSprite[0];
        this.betData[0] = betDiceNum;
        event.target.getComponent(cc.Sprite).spriteFrame = this.btnSprite[1];
        this.hideDiceMask();
      },
      hideDiceMask: function hideDiceMask() {
        for (var i = 0; i < 6; i++) if (this.betData[0] > this.lastPlayerBetData[0]) {
          this.dice[i].opacity = 255;
          this.dice[i].getComponent(cc.Button).interactable = true;
        } else {
          var diceNum = this.diceArr[i];
          if (1 === diceNum || diceNum > this.lastPlayerBetData[1]) {
            this.dice[i].opacity = 255;
            this.dice[i].getComponent(cc.Button).interactable = true;
          } else {
            this.dice[i].opacity = 85;
            this.dice[i].getComponent(cc.Button).interactable = false;
          }
        }
      },
      setDiceMask: function setDiceMask() {
        for (var i = 0; i < 6; i++) {
          this.dice[i].opacity = 85;
          this.dice[i].getComponent(cc.Button).interactable = false;
        }
      },
      setBetNumBtnSprite: function setBetNumBtnSprite() {
        for (var i = 0; i < this.betNumArr.length; i++) this.betNumArr[i].getComponent(cc.Button).interactable && (this.betNumArr[i].getComponent(cc.Sprite).spriteFrame = this.btnSprite[0]);
      },
      checkCanBet: function checkCanBet() {
        if (this.betData[0] && this.betData[1]) {
          diceConstant.PostBet.betNum = this.betData.join(",");
          http.post(diceConstant.PostBet, "betCb");
          this.resetCurRoundBetData();
        }
      },
      resetCurRoundBetData: function resetCurRoundBetData() {
        this.betData = [];
        this.betPanel.active = false;
        this.hideAllBtnGroup();
        this.setDiceMask();
        this.playerArr[constant.SelfUISeatId].getChildByName("turnSoap").getChildByName("txt").getComponent(cc.Label).string = "\u6211\u60f3";
        this.unschedule(this.createDotFunc);
        this.unschedule(this.timeoutOpen);
        this.playerArr[constant.SelfUISeatId].getChildByName("turnSoap").opacity = 0;
      },
      createPlayer: function createPlayer(data) {
        var playerInfo = kf.clone(data.playerInfo);
        this.playerData = kf.clone(data.playerInfo);
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        for (var i = 0; i < playerInfo.length; i++) {
          if (!playerInfo[i].headUrl) continue;
          var UISeatId = void 0;
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          playerInfo[i].UISeatId = UISeatId;
          this.playerArr[UISeatId].active = true;
          this.playerArr[UISeatId].userId = playerInfo[i].userId;
          UISeatId != constant.SelfUISeatId && this.renderPlayerInfo(UISeatId, playerInfo[i]);
        }
      }
    }, _defineProperty(_cc$Class, "hideAllBtnGroup", function hideAllBtnGroup() {
      this.btnGroup1.active = this.btnGroup2.active = this.btnGroup3.active = false;
    }), _defineProperty(_cc$Class, "updateSoapInfo", function updateSoapInfo(lastBetSeatId, curBetUISeatId, betNum, betVal) {
      for (var i = 0; i < this.playerArr.length; i++) {
        var player = this.playerArr[i];
        player.getChildByName("betSoap").opacity = 0;
        player.getChildByName("turnSoap").opacity = 0;
      }
      if (null != lastBetSeatId || void 0 != lastBetSeatId) {
        var betSoap = this.playerArr[lastBetSeatId].getChildByName("betSoap");
        betSoap.opacity = 255;
        betSoap.getChildByName("txt").getComponent(cc.Label).string = betNum + "\u4e2a";
        betSoap.getChildByName("dice").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceAtlas, betVal);
      }
      if (null != curBetUISeatId || void 0 != curBetUISeatId) {
        this.playerArr[curBetUISeatId].getChildByName("turnSoap").opacity = 255;
        this.unschedule(this.createDotFunc);
        this.dotAni(curBetUISeatId);
      }
    }), _defineProperty(_cc$Class, "dotAni", function dotAni(UISeatId) {
      var dotCount = 0;
      this.playerArr[UISeatId].getChildByName("turnSoap").getChildByName("txt").getComponent(cc.Label).string = "\u6211\u60f3";
      this.createDotFunc = function() {
        if (dotCount < 3) {
          this.playerArr[UISeatId].getChildByName("turnSoap").getChildByName("txt").getComponent(cc.Label).string += ".";
          dotCount++;
        } else {
          dotCount = 0;
          this.playerArr[UISeatId].getChildByName("turnSoap").getChildByName("txt").getComponent(cc.Label).string = "\u6211\u60f3";
        }
      };
      this.schedule(this.createDotFunc, 1);
    }), _defineProperty(_cc$Class, "callDiceBetVal", function callDiceBetVal(event, diceVal) {
      this.betData[1] = diceVal;
      this.checkCanBet();
    }), _defineProperty(_cc$Class, "renderPlayerInfo", function renderPlayerInfo(UISeatId, playerInfo) {
      var player = this.playerArr[UISeatId];
      var userInfo = player.getChildByName("userInfo");
      var avatar = userInfo.getChildByName("head").getComponent(cc.Sprite);
      userInfo.getChildByName("nickname").getComponent(cc.Label).string = playerInfo.nickName;
      userInfo.getChildByName("balance").getComponent(cc.Label).string = parseFloat(playerInfo.balance).toFixed(2);
      dataLogic.isFriendRoom && (playerInfo.InvUserState != constant.FriendRoomPlayerState.Gaming ? this.hideSinglePlayerSoapAndBetState(UISeatId) : UISeatId != constant.SelfUISeatId && 0 == player.getChildByName("New Sprite").opacity && (player.getChildByName("New Sprite").opacity = 255));
      if (playerInfo.state) switch (playerInfo.state) {
       case 2:
        player.getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "call");
        player.getChildByName("betState").opacity = 255;
        break;

       case 6:
        player.getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "grap");
        player.getChildByName("betState").opacity = 255;
        break;

       case 3:
        player.getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "callWin");
        player.getChildByName("betState").opacity = 255;
        break;

       case 4:
        player.getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "openWin");
        player.getChildByName("betState").opacity = 255;
        break;

       case 5:
        player.getChildByName("betState").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.diceBetState, "notGuess");
        player.getChildByName("betState").opacity = 255;
      }
      resMgr.loadSingleRes("baoWang" + playerInfo.headUrl.replace(".jpg", ""), function(res) {
        avatar.spriteFrame = res;
      }, cc.SpriteFrame);
    }), _defineProperty(_cc$Class, "initMatchingView", function initMatchingView(isWaitMatching, canCanCel) {
      if (isWaitMatching) {
        this.setMatchingToastView(true, canCanCel);
        this.matchingBtn.active = false;
      } else {
        this.matchingBtn.active = true;
        this.setMatchingToastView(false);
      }
    }), _defineProperty(_cc$Class, "setMatchingToastView", function setMatchingToastView(show, canCanCel) {
      this.matchingToastLayer.stopAllActions();
      if (show) {
        this.matchingToastLayer.active = true;
        this.setMatchingToastUI(canCanCel);
        this.efMatchingLoad.getComponent(cc.Animation).play();
      } else {
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
      }
    }), _defineProperty(_cc$Class, "setBetNumWidth", function setBetNumWidth() {
      this.anteTxt._updateRenderData(true);
      this.anteBg.width = this.anteTxt.node.width + 40;
      this.playIdBg.x = this.anteBg.x + this.anteBg.width + 20;
    }), _defineProperty(_cc$Class, "setPlayIdWidth", function setPlayIdWidth() {
      this.playIdTxt._updateRenderData(true);
      this.playIdBg.width = this.playIdTxt.node.width + 40;
    }), _defineProperty(_cc$Class, "setPlayIdBgState", function setPlayIdBgState() {
      this.setPlayIdWidth();
      this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.playIdBg.x + this.playIdBg.width + 20);
    }), _defineProperty(_cc$Class, "showSelfUI", function showSelfUI() {
      var playerInfo = {
        headUrl: dataLogic.userHeadUrl,
        nickName: dataLogic.userName,
        balance: dataLogic.userBalance
      };
      this.renderPlayerInfo(constant.SelfUISeatId, playerInfo);
    }), _defineProperty(_cc$Class, "onLoad", function onLoad() {
      this.baseInit(constant.GameId.Dice);
      this.registerEvent();
      kf.createPool(constant.PoolId.diceBetNumBtn, 28, this.betNumPfb);
      if (dataLogic.needRecover) {
        this.doneGameRecover = false;
        this.btReady.node.active = false;
        this.matchingBtn.active = false;
        this.isOffLine = 1;
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      }
      this.diceArr = [ 1, 6, 5, 4, 3, 2 ];
      this.callDiceLimit = [ [ 14, 1 ], [ 21, 1 ], [ 28, 1 ] ];
      this.betNumArr = [];
      this.playerArrPos = [];
      this.turnSoapPos = [];
      this.betSoapPos = [];
      this.diceCupPos = [];
      this.secondBetSoapTxtPos = cc.v2(18, 6);
      this.secondBetSoapDicePos = cc.v2(-17, 8);
      var playerPos = [ {
        x: 185,
        y: -148
      }, {
        x: 64,
        y: 45
      }, {
        x: 341,
        y: 29
      }, {
        x: -5,
        y: 77
      } ];
      for (var i = 0; i < this.playerArr.length; i++) {
        this.playerArrPos.push(this.playerArr[i].position);
        this.turnSoapPos.push(this.playerArr[i].getChildByName("turnSoap").position);
        this.betSoapPos.push(this.playerArr[i].getChildByName("betSoap").position);
        0 == i ? this.diceCupPos.push(this.playerArr[i].getChildByName("openDice").position) : this.diceCupPos.push(this.playerArr[i].getChildByName("New Sprite").position);
      }
      this.resetGameData();
      this.setBetNumWidth();
      this.setPlayIdWidth();
      this.showSelfUI();
      for (var _i5 = 0; _i5 < this.playerArr.length; _i5++) {
        this.playerArr[_i5].playerPos = playerPos[_i5];
        this.bindLongTouchEvent(this.playerArr[_i5]);
      }
      dataLogic.isFriendRoom && this.genReadyStateFlag();
    }), _defineProperty(_cc$Class, "changeBetPage", function changeBetPage(event, flag) {
      this.betPanel.getComponent(cc.ScrollView).stopAutoScroll();
      var scrollX = this.betPanel.getComponent(cc.ScrollView).getScrollOffset().x;
      var scrollNum = Math.floor(Math.abs(scrollX) / 82);
      if ("up" == flag) {
        var slideNum = scrollNum - 6;
        slideNum = slideNum <= 0 ? 0 : slideNum;
        this.betPanel.getComponent(cc.ScrollView).scrollToOffset(cc.v2(82 * slideNum, -23), .2);
      } else {
        var slideNum = scrollNum + 6;
        slideNum = slideNum > 28 ? 28 : slideNum;
        this.betPanel.getComponent(cc.ScrollView).scrollToOffset(cc.v2(82 * slideNum, -23), .2);
      }
    }), _defineProperty(_cc$Class, "resetGameData", function resetGameData() {
      this.selfDiceData = [];
      this.isFirstPlayerHasBet = 0;
      this.isSomeOneOpenPoison = 0;
      this.gameState = -1;
      this.playerData = [];
      this.isLockOne = false;
      this.prePlayerCallNum;
      this.unscheduleAllCallbacks();
      this.lastPlayerId;
      this.roundTemp = 1;
      this.upRoundLimit = -1;
      this.curGameStartTime = null;
      var renderPlayerPos = this.playerArrPos.slice(0);
      var _betSoapPos = kf.clone(this.betSoapPos);
      var _turnSoapPos = kf.clone(this.turnSoapPos);
      var _diceCupPos = kf.clone(this.diceCupPos);
      for (var i = 0; i < this.playerArr.length; i++) {
        this.playerArr[i].position = renderPlayerPos[i];
        this.playerArr[i].active = false;
        var turnSoap = this.playerArr[i].getChildByName("turnSoap");
        var betSoap = this.playerArr[i].getChildByName("betSoap");
        turnSoap.opacity = 0;
        betSoap.opacity = 0;
        if (!dataLogic.isFriendRoom) {
          turnSoap.position = _turnSoapPos[i];
          betSoap.position = _betSoapPos[i];
          if (1 == i) {
            turnSoap.scaleX = -1;
            turnSoap.getChildByName("txt").scaleX = -1;
            betSoap.scaleX = -1;
            betSoap.getChildByName("txt").scaleX = -1;
            betSoap.getChildByName("txt").x = this.secondBetSoapTxtPos.x;
            betSoap.getChildByName("dice").x = this.secondBetSoapDicePos.x;
          }
          0 != i && (this.playerArr[i].getChildByName("New Sprite").position = _diceCupPos[i]);
        }
        this.playerArr[i].getChildByName("betState").opacity = 0;
        turnSoap.getChildByName("txt").getComponent(cc.Label).string = "\u6211\u60f3";
      }
      this.playerArr[constant.SelfUISeatId].active = true;
      this.hideAllBtnGroup();
      this.btnCall.active = this.btnOpen.active = true;
      this.betPanel.active = false;
      this.betNumSliderKey = 0;
      this.isOffLine = 0;
      this.betData = [ 0, 0 ];
      this.lastPlayerBetData = [ 0, 0 ];
      this.isGuessTime = -1;
      this.curOperationUISeatId = -1;
      if (this.scrollParent.children.length) for (var _i6 = this.scrollParent.children.length - 1; _i6 >= 0; _i6--) kf.killObj(this.scrollParent.children[_i6]);
      this.betRecord = [];
      for (var _i7 = 0; _i7 < 6; _i7++) {
        this.dice[_i7].opacity = 85;
        this.dice[_i7].getComponent(cc.Button).interactable = false;
      }
      this.roundTxt.string = "\u7b2c1/6\u8f6e";
      this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + dataLogic.curRoomKey);
      this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a";
      for (var _i8 = this.callDiceRecordContent.children.length - 1; _i8 >= 0; _i8--) this.callDiceRecordContent.children[_i8].destroy();
      this.callDiceRecordPanel.active = false;
      this.nullRecord.active = true;
      this.gameEndPanel.active = false;
      this.gameEndPfb && this.gameEndPfb.destroy();
      this.indicatorGame.active = false;
      this.indicatorGame.rotation = 0;
      this.selfDiceCup[0].active = false;
      this.selfDiceCup[1].active = false;
      this.playerArr[constant.SelfUISeatId].getChildByName("openDice").getChildByName("diceNumGroup").active = false;
      this.roundNode.active = false;
      this.gameEndData = null;
      this.setBetNumWidth();
      this.setPlayIdWidth();
    }), _defineProperty(_cc$Class, "switchSceneFrontDispose", function switchSceneFrontDispose() {
      kf.clearPool(constant.PoolId.diceBetNumBtn);
    }), _cc$Class));
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  dzDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "de488DQpVtITqU0RisSdVor", "dzDataLogic");
    "use strict";
    window.dzDataLogic = {
      init: function init() {
        dataLogic.setLimitPlayerNum(6);
        this.userInfo = {};
        this.ante = "";
        this.totalChipNum = 0;
        this.playerInfo = [];
        this.nowPlayerNum = 0;
        this.handCard = [];
        this.playerData = [];
        this.isFold = false;
        this.autoFold = false;
        this.autoCheck = false;
        this.autoFollow = false;
        this.followV = false;
        this.round = 0;
        this.addChipRange = [];
        this.shareCards = [];
        this.countTime = "";
        this.allIn = false;
        this.curOperationUISeatId = -1;
        this.followVChipNum = 0;
        this.seatId = 0;
        this.gameState = -1;
        this.needShowNotice = 1;
        this.showNoticeType = 2;
        this.isOffLine = 0;
        this.smallBlindUISeatId = this.bigBlindUISeatId = this.dealerUISeatId = -1;
        for (var i = 0; i < dzConstant.maxPlayerNum; i++) this.playerData.push({});
      },
      setSeatId: function setSeatId(seatId) {
        this.seatId = seatId;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      setCountTime: function setCountTime(countTime) {
        this.countTime = countTime;
      },
      setFold: function setFold() {
        this.isFold = true;
      },
      resetData: function resetData() {
        this.smallBlindUISeatId = this.bigBlindUISeatId = this.dealerUISeatId = -1;
        this.userInfo = {};
        this.totalChipNum = 0;
        this.playerInfo = [];
        this.nowPlayerNum = 0;
        this.handCard = [];
        this.playerData = [];
        this.isFold = false;
        this.autoFold = false;
        this.autoCheck = false;
        this.autoFollow = false;
        this.followV = false;
        this.round = 0;
        this.addChipRange = [];
        this.shareCards = [];
        this.countTime = "";
        this.allIn = false;
        this.isGameOver = false;
        this.curOperationUISeatId = -1;
        this.followVChipNum = 0;
        this.seatId = 0;
        this.onGame = false;
        for (var i = 0; i < dzConstant.maxPlayerNum; i++) this.playerData.push({});
      },
      setShareCards: function setShareCards(cards) {
        if (this.shareCards.length >= 5) return;
        if (-1 != cards.indexOf(",")) {
          var cardsArr = cards.split(",");
          this.shareCards = 5 == cardsArr.length ? cardsArr : this.shareCards.concat(cardsArr);
        } else this.shareCards.push(cards);
      },
      setFirstPlayerSeatId: function setFirstPlayerSeatId(seatId) {
        this.firstPlayerSeatId = seatId;
      },
      setRound: function setRound() {
        this.round++;
      },
      setAnte: function setAnte(ante) {
        this.ante = ante;
      },
      setTotalChipNum: function setTotalChipNum(totalChipNum) {
        this.totalChipNum = totalChipNum;
      },
      setPlayerOwn: function setPlayerOwn(data) {
        this.userInfo = data;
        this.userInfo.sex = data.sex;
      },
      setPlayerInfo: function setPlayerInfo(data) {
        this.playerInfo = data;
        this.nowPlayerNum = data.length;
      },
      setCurOpeartionUIseatId: function setCurOpeartionUIseatId(UIseatId) {
        this.curOperationUISeatId = UIseatId;
      },
      setHandCard: function setHandCard(cards) {
        this.handCard = cards;
      },
      setPlayerData: function setPlayerData(UISeatId, playerData) {
        this.playerData[UISeatId] = playerData;
      },
      setAddChipRange: function setAddChipRange(nextRange) {
        this.addChipRange = nextRange;
      },
      getMaxCardType: function getMaxCardType(cards, shareCards) {
        if (null == cards || null == shareCards || !cards.length || !shareCards.length) return;
        var maxCards = [];
        var cardType = 0;
        var n1 = cards[0] % 13;
        var n2 = cards[1] % 13;
        var arr2 = [];
        for (var _i = 0; _i < shareCards.length; _i++) {
          var _n = shareCards[_i] % 13;
          var color = parseInt(shareCards[_i] / 13);
          var arr = [ _n, color ];
          arr2.push(arr);
        }
        var color1 = parseInt(cards[0] / 13);
        var color2 = parseInt(cards[1] / 13);
        var arr1 = [ [ n1, color1 ], [ n2, color2 ] ];
        var c = [];
        c = arr1.concat(arr2);
        for (var _i2 = 0; _i2 < c.length; _i2++) 0 == c[_i2][0] ? c[_i2][0] = 14 : c[_i2][0] = c[_i2][0] + 1;
        for (var i = 0; i < c.length - 1; i++) for (var j = i + 1; j < c.length; j++) if (c[j][0] > c[i][0]) {
          var t = c[j];
          c[j] = c[i];
          c[i] = t;
        }
        var loopLength1 = 5 == c.length ? 1 : 6 == c.length ? 2 : 3;
        var tempVal = 0;
        for (var i = 0; i < loopLength1; i++) {
          var szList = [];
          szList.push(c[i]);
          for (var j = i + 1; j < c.length; j++) {
            szList.length < 5 && szList[szList.length - 1][0] - c[j][0] == 1 ? szList.push(c[j]) : szList[szList.length - 1][0] == c[j][0] && szList[0][1] == c[j][1] && (szList[szList.length - 1] = c[j]);
            if (szList.length >= 5 && j == c.length - 1) {
              var isTongHua = true;
              for (var z = 1; z < szList.length; z++) if (szList[z][1] != szList[0][1]) {
                isTongHua = false;
                break;
              }
              var newType = isTongHua ? 9 : 5;
              var newVal;
              var card1 = szList[0][0] < 10 ? "0" + szList[0][0] : szList[0][0].toString();
              var card2 = szList[1][0] < 10 ? "0" + szList[1][0] : szList[1][0].toString();
              var card3 = szList[2][0] < 10 ? "0" + szList[2][0] : szList[2][0].toString();
              var card4 = szList[3][0] < 10 ? "0" + szList[3][0] : szList[3][0].toString();
              var card5 = szList[4][0] < 10 ? "0" + szList[4][0] : szList[4][0].toString();
              newVal = parseFloat(newType + card1 + card2 + card3 + card4 + card5);
              if (newVal > tempVal) {
                cardType = newType;
                tempVal = newVal;
                maxCards = [ cardType, szList[0][0], szList[1][0], szList[2][0], szList[3][0], szList[4][0] ];
                if (9 == cardType) {
                  14 == szList[0][0] && 13 == szList[1][0] && (cardType = 10);
                  return [ cardType, szList[0][0], szList[1][0], szList[2][0], szList[3][0], szList[4][0], szList[0][1] ];
                }
              }
              break;
            }
          }
        }
        var copyC = [];
        if (0 == cardType && 14 == c[0][0]) {
          for (var i = 0; i < c.length; i++) {
            var _arr = [];
            _arr = c[i].slice(0);
            copyC.push(_arr);
            14 == copyC[i][0] && (copyC[i][0] = 1);
          }
          for (var i = 0; i < copyC.length - 1; i++) for (var j = i + 1; j < copyC.length; j++) if (copyC[j][0] > copyC[i][0]) {
            var t = copyC[j];
            copyC[j] = copyC[i];
            copyC[i] = t;
          }
          for (var i = 0; i < copyC.length - 4; i++) {
            var szList = [];
            szList.push(copyC[copyC.length - 1 - i]);
            for (var j = copyC.length - 2 - i; j >= 0; j--) {
              szList.length < 5 && szList[szList.length - 1][0] + 1 == copyC[j][0] ? szList.push(copyC[j]) : szList[szList.length - 1][0] == copyC[j][0] && szList[0][1] == copyC[j][1] && (szList[szList.length - 1] = copyC[j]);
              if (szList.length >= 5 && 0 == j) {
                var isTongHua = true;
                for (var z = 1; z < szList.length; z++) if (szList[z][1] != szList[0][1]) {
                  isTongHua = false;
                  break;
                }
                var newType = isTongHua ? 9 : 5;
                var newVal;
                var card1 = szList[0][0] < 10 ? "0" + szList[0][0] : szList[0][0].toString();
                var card2 = szList[1][0] < 10 ? "0" + szList[1][0] : szList[1][0].toString();
                var card3 = szList[2][0] < 10 ? "0" + szList[2][0] : szList[2][0].toString();
                var card4 = szList[3][0] < 10 ? "0" + szList[3][0] : szList[3][0].toString();
                var card5 = szList[4][0] < 10 ? "0" + szList[4][0] : szList[4][0].toString();
                newVal = parseFloat(newType + card1 + card2 + card3 + card4 + card5);
                if (newVal > tempVal) {
                  cardType = newType;
                  tempVal = newVal;
                  maxCards = [ cardType, szList[0][0], szList[1][0], szList[2][0], szList[3][0], szList[4][0] ];
                  if (9 == cardType) return [ cardType, szList[0][0], szList[1][0], szList[2][0], szList[3][0], szList[4][0], szList[0][1] ];
                }
                break;
              }
            }
          }
        }
        for (var i = 0; i < c.length - 3; i++) if (c[i][0] == c[i + 1][0] && c[i + 1][0] == c[i + 2][0] && c[i + 2][0] == c[i + 3][0]) {
          cardType = 8;
          return [ cardType, c[i][0], c[i + 1][0], c[i + 2][0], c[i + 3][0], c[0 == i ? 4 : 0][0] ];
        }
        for (var i = 0; i < c.length - 2; i++) if (c[i][0] == c[i + 1][0] && c[i + 1][0] == c[i + 2][0]) {
          for (var j = 0; j < c.length - 1; j++) if (c[j][0] == c[j + 1][0] && c[i][0] != c[j][0]) return [ 7, c[i][0], c[i + 1][0], c[i + 2][0], c[j][0], c[j + 1][0] ];
          if (cardType < 4) {
            cardType = 4;
            maxCards = [ cardType, c[i][0], c[i + 1][0], c[i + 2][0], c[0 == i ? 3 : 0][0], c[i > 1 ? 1 : 4][0] ];
            break;
          }
        }
        if (cardType < 6) for (var i = 0; i < 4; i++) {
          var n = 0;
          for (var j = 0; j < c.length; j++) c[j][1] == i && n++;
          if (n >= 5) {
            var z = 0;
            var tempArr = [];
            for (var j = 0; j < c.length; j++) if (c[j][1] == i) {
              tempArr[z] = c[j][0];
              z++;
              if (z >= 5) {
                cardType = 6;
                return [ cardType, tempArr[0], tempArr[1], tempArr[2], tempArr[3], tempArr[4], i ];
              }
            }
          }
        }
        if (cardType < 3) for (var i = 0; i < c.length - 1; i++) if (c[i][0] == c[i + 1][0]) {
          for (var j = 0; j < c.length - 1; j++) if (c[j][0] == c[j + 1][0] && c[i][0] != c[j][0]) {
            cardType = 3;
            return [ cardType, c[i][0], c[i + 1][0], c[j][0], c[j + 1][0], c[0 == i ? 2 == j ? 4 : 2 : 0][0] ];
          }
          cardType = 2;
          return [ cardType, c[i][0], c[i + 1][0], c[0 == i ? 2 : 0][0], c[i > 1 ? 1 : 3][0], c[i > 2 ? 2 : 4][0] ];
        }
        if (cardType < 1) {
          cardType = 1;
          maxCards = [ cardType, c[0][0], c[1][0], c[2][0], c[3][0], c[4][0] ];
        }
        return maxCards;
      },
      checkTwoCardsType: function checkTwoCardsType(cardsArr) {
        var cards0 = cardsArr[0], cards1 = cardsArr[1];
        return dataLogic.getCardValue(cards0) == dataLogic.getCardValue(cards1) ? [ 2, dataLogic.getCardValue(cards0), dataLogic.getCardValue(cards1), "", "", "" ] : [ 1, dataLogic.getCardValue(cards0), dataLogic.getCardValue(cards1), "", "", "" ];
      }
    };
    dzDataLogic.init();
    cc._RF.pop();
  }, {} ],
  dzpkConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "42c38G33/1LRbhupC9AH0g3", "dzpkConstant");
    "use strict";
    window.dzConstant = window.dzConstant || {};
    dzConstant.maxPlayerNum = 6;
    dzConstant.cardTypeArr = [ "\u6563\u724c", "\u4e00\u5bf9", "\u4e24\u5bf9", "\u4e09\u6761", "\u987a\u5b50", "\u540c\u82b1", "\u846b\u82a6", "\u56db\u6761", "\u540c\u82b1\u987a", "\u7687\u5bb6\u540c\u82b1\u987a" ];
    var n = 0;
    dzConstant.CardType = {
      Single: n++,
      Pair: n++,
      Straight: n++,
      Flush: n++,
      StraightFlush: n++,
      Set: n++
    };
    dzConstant.Audio = {
      Bg: 0
    };
    n = 0;
    dzConstant.PlayerState = {
      Fold: n++,
      HaveSeen: n++,
      Failed: n++,
      Normal: n++
    };
    var _action = "DoPlay";
    dzConstant.PostBet = {
      action: _action,
      eventName: "bet",
      chipNum: -1
    };
    dzConstant.PostCompare = {
      action: _action,
      eventName: "compareCard",
      rivalSeatId: 0
    };
    dzConstant.PostFold = {
      action: _action,
      eventName: "fold"
    };
    dzConstant.PostSeeCard = {
      action: _action,
      eventName: "seeCard"
    };
    dzConstant.PostSyncBetButtonInfo = {
      action: "GetBetConfig",
      roomId: 2201
    };
    dzConstant.PostMatching = {
      action: "JoinRoom"
    };
    dzConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    dzConstant.PostPass = {
      action: _action,
      eventName: "pass"
    };
    dzConstant.PostCancelMatching = {
      action: _action,
      eventName: "leave"
    };
    dzConstant.bigCardPos = [ cc.v2(-220, -130), cc.v2(-120, -130), cc.v2(-20, -130), cc.v2(80, -130), cc.v2(180, -130) ];
    dzConstant.dealerPos = [ cc.v2(-55, 70), cc.v2(-55, 70), cc.v2(-55, 70), cc.v2(-55, 70), cc.v2(55, 70), cc.v2(55, 70) ];
    cc._RF.pop();
  }, {} ],
  dzpkHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "dd3d653DBJLSKISiwSYvwGT", "dzpkHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {
        setCarryChipNumPanelPfb: cc.Prefab,
        setCarryChipNumPanel: cc.Node
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Dzpk);
        kf.createPool(constant.PoolId.SetCarryChipNumPanel, 1, this.setCarryChipNumPanelPfb, "pfbCommon");
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "dzpk/table", "dzpk/roomBgNew", "card", "cardType", "betState", "dzpk/UI/cardTypePic" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      },
      setCarryChipNum: function setCarryChipNum(eventName, key) {},
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.SetCarryChipNumPanel);
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  dzpkMain: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "32e21vlP85HsoqJb+brr47H", "dzpkMain");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        matchingBtn: cc.Node,
        playerArr: [ cc.Node ],
        totalChipNum: cc.Node,
        totalChipTxt: cc.Label,
        betNumTxt: cc.Label,
        gameIdTxt: cc.Label,
        cardAtlas: cc.SpriteAtlas,
        betStateAtlas: cc.SpriteAtlas,
        cardTypeAtlas: cc.SpriteAtlas,
        backCardPfb: cc.Prefab,
        tableCardPos: cc.Node,
        backCardPos: cc.Node,
        anteBg: cc.Node,
        playIdBg: cc.Node,
        timer: cc.Node,
        btnGroup1: cc.Node,
        btnGroup2: cc.Node,
        btnCheck: cc.Node,
        btnFollow: cc.Node,
        btnFollowTxt: cc.Label,
        btnAddChip: cc.Node,
        btnAddChipTxt: cc.Label,
        chipPfb: cc.Prefab,
        chipParent: cc.Node,
        chipInfoArr: [ cc.Node ],
        dealer: cc.Node,
        fold: cc.Node,
        chipPanel: cc.Node,
        addChipBtnGroup: [ cc.Node ],
        autoFoldOrPassToggle: cc.Toggle,
        autoCheckToggle: cc.Toggle,
        autoFollowToggle: cc.Toggle,
        followVToggle: cc.Toggle,
        buttonClickAudio: {
          default: null,
          type: cc.AudioClip
        },
        manFoldAudio: {
          default: null,
          type: cc.AudioClip
        },
        manCallAudio: {
          default: null,
          type: cc.AudioClip
        },
        manRaiseAudio: {
          default: null,
          type: cc.AudioClip
        },
        manAllInAudio: {
          default: null,
          type: cc.AudioClip
        },
        womanFoldAudio: {
          default: null,
          type: cc.AudioClip
        },
        womanCallAudio: {
          default: null,
          type: cc.AudioClip
        },
        womanRaiseAudio: {
          default: null,
          type: cc.AudioClip
        },
        womanAllInAudio: {
          default: null,
          type: cc.AudioClip
        },
        foldBgAudio: {
          default: null,
          type: cc.AudioClip
        },
        passAudio: {
          default: null,
          type: cc.AudioClip
        },
        chipFollowAudio: {
          default: null,
          type: cc.AudioClip
        },
        addChipAudio: {
          default: null,
          type: cc.AudioClip
        },
        allInScreamAudio: {
          default: null,
          type: cc.AudioClip
        },
        roomBgAudio: {
          default: null,
          type: cc.AudioClip
        },
        dealCardAudio: {
          default: null,
          type: cc.AudioClip
        },
        selfWinAudio: {
          default: null,
          type: cc.AudioClip
        },
        compareCardAudio: {
          default: null,
          type: cc.AudioClip
        },
        chipFlyToPeopleAudio: {
          default: null,
          type: cc.AudioClip
        },
        AllInPanel: cc.Node,
        fanpaiAudio: {
          default: null,
          type: cc.AudioClip
        },
        zhuanpaiAudio: {
          default: null,
          type: cc.AudioClip
        },
        hepaiAudio: {
          default: null,
          type: cc.AudioClip
        },
        cardTypeAudio: {
          default: [],
          type: cc.AudioClip
        },
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        sliderBetTxt: cc.Label,
        chipSlider: cc.Slider,
        chipSliderProgress: cc.Node,
        matchingToastLayer: cc.Node,
        btCancelMatching: cc.Button,
        efMatchingLoad: cc.Node,
        matchingToastLayerTxt: cc.Label,
        followVChipNum: cc.Label,
        cacelMatchingBtn: cc.Node,
        ef_finalCardAni: cc.Node,
        ef_hulu_pfb: cc.Prefab,
        ef_sitiao_pfb: cc.Prefab,
        ef_ths_pfb: cc.Prefab,
        ef_hjths_pfb: cc.Prefab,
        cardTypePanel: cc.Node,
        ef_finalChipAniPos: cc.Node,
        winBeforeCompare: cc.Node,
        setCarryChipNumPanelPfb: cc.Prefab,
        setCarryChipNumPanel: cc.Node,
        noticePanel: cc.Node,
        noticePanelTxt: cc.Label,
        chipSpriteFrame: [ cc.SpriteFrame ],
        cardEffect: [ cc.SpriteFrame ],
        gameBg: cc.Node,
        visitingEf: [ cc.Node ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "foldCb", this.foldCb.bind(this) ], [ "onFold", this.onFold.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "onPass", this.onPass.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "passCb", this.passCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "showNotice", this.showNotice.bind(this) ], [ "syncUserBalanceCb", this.syncUserBalanceCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow() {
        -1 != dzDataLogic.gameState && this.alterCountDown();
      },
      gameHide: function gameHide() {
        if (-1 == dzDataLogic.gameState) return;
        this.unscheduleAllCallbacks();
        if (255 == this.noticePanel.opacity) {
          this.noticePanel.opacity = 0;
          this.noticePanel.position = cc.v2(0, cc.winSize.height / 2 + this.noticePanel.height / 2);
        }
      },
      btnEvent: function btnEvent(event, eventType) {
        switch (eventType) {
         case "matching":
          audioMgr.playEffect(this.buttonClickAudio);
          this.adjustBringMoney();
          this.matching();
          break;

         case "follow":
          this.chipPanel.active = false;
          audioMgr.playEffect(this.buttonClickAudio);
          var sendData = {
            action: "DoPlay",
            eventName: "bet"
          };
          sendData.chipNum = dzDataLogic.allIn ? 0 : -1;
          http.post(sendData, "betCb");
          0 == sendData.chipNum ? this.setAllInOrFoldState() : this.hideBtnGroup();
          break;

         case "pass":
          this.chipPanel.active = false;
          audioMgr.playEffect(this.buttonClickAudio);
          http.post(dzConstant.PostPass, "passCb");
          this.hideBtnGroup();
          break;

         case "fold":
          this.chipPanel.active = false;
          audioMgr.playEffect(this.buttonClickAudio);
          http.post(dzConstant.PostFold, "foldCb");
          this.setAllInOrFoldState();
          break;

         case "doAllIn":
          this.hideAllInPanel();
          audioMgr.playEffect(this.buttonClickAudio);
          var sendObj = {
            action: "DoPlay",
            eventName: "bet",
            chipNum: 0
          };
          dzDataLogic.allIn = true;
          http.post(sendObj, "betCb");
          this.setAllInOrFoldState();
          break;

         case "cancelAllIn":
          audioMgr.playEffect(this.buttonClickAudio);
          this.hideAllInPanel();
          break;

         case "addChip":
          if ("ALL IN" == this.btnAddChipTxt.string) this.showAllInPanel(); else if (this.chipPanel.active) {
            var _sendObj = {
              action: "DoPlay",
              eventName: "bet"
            };
            var _balance = this.getPlayerBalance(constant.SelfUISeatId);
            if (this.isTouchSlider) {
              _sendObj.chipNum = "ALL IN" == this.sliderBetTxt.string || +this.sliderBetTxt.string >= _balance ? 0 : this.sliderBetTxt.string;
              if (0 == _sendObj.chipNum) this.showAllInPanel(); else {
                http.post(_sendObj, "betCb");
                this.chipPanel.active = false;
                this.hideBtnGroup();
              }
            } else if (this.range[0] >= _balance) {
              _sendObj.chipNum = 0;
              this.showAllInPanel();
            } else {
              _sendObj.chipNum = this.range[0];
              http.post(_sendObj, "betCb");
              this.chipPanel.active = false;
              0 == _sendObj.chipNum ? this.setAllInOrFoldState() : this.hideBtnGroup();
            }
            audioMgr.playEffect(this.buttonClickAudio);
            this.isTouchSlider = false;
          } else {
            this.chipPanel.active = true;
            this.btnAddChipTxt.string = "\u786e\u8ba4\u52a0\u6ce8";
          }
          audioMgr.playEffect(this.buttonClickAudio);
          break;

         case "autoFold":
          audioMgr.playEffect(this.buttonClickAudio);
          this.autoFoldOrPassToggle.isChecked ? dzDataLogic.autoFoldOrPass = true : dzDataLogic.autoFoldOrPass = false;
          this.autoCheckToggle.isChecked = this.autoFollowToggle.isChecked = this.followVToggle.isChecked = false;
          dzDataLogic.autoCheck = dzDataLogic.autoFollow = dzDataLogic.followV = false;
          break;

         case "autoCheck":
          audioMgr.playEffect(this.buttonClickAudio);
          this.autoCheckToggle.isChecked ? dzDataLogic.autoCheck = true : dzDataLogic.autoCheck = false;
          this.autoFoldOrPassToggle.isChecked = this.autoFollowToggle.isChecked = this.followVToggle.isChecked = false;
          dzDataLogic.autoFoldOrPass = dzDataLogic.autoFollow = dzDataLogic.followV = false;
          break;

         case "autoFollow":
          audioMgr.playEffect(this.buttonClickAudio);
          this.autoFollowToggle.isChecked ? dzDataLogic.autoFollow = true : dzDataLogic.autoFollow = false;
          this.autoFoldOrPassToggle.isChecked = this.autoCheckToggle.isChecked = this.followVToggle.isChecked = false;
          dzDataLogic.autoFoldOrPass = dzDataLogic.autoCheck = dzDataLogic.followV = false;
          break;

         case "followV":
          audioMgr.playEffect(this.buttonClickAudio);
          this.followVToggle.isChecked ? dzDataLogic.followV = true : dzDataLogic.followV = false;
          this.autoFoldOrPassToggle.isChecked = this.autoCheckToggle.isChecked = this.autoFollowToggle.isChecked = false;
          dzDataLogic.autoFoldOrPass = dzDataLogic.autoCheck = dzDataLogic.autoFollow = false;
          break;

         case "showCardTypePanel":
          audioMgr.playEffect(this.buttonClickAudio);
          this.cardTypePanel.active = true;
          break;

         case "helpBtn":
          audioMgr.playEffect(this.buttonClickAudio);
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          audioMgr.playEffect(this.buttonClickAudio);
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          record.getComponent("record").recordMainShow(constant.GameId.Dzpk);
          break;

         case "goBackHall":
          this.loadScene(constant.SceneName.Hall);
          break;

         case "Setting":
          audioMgr.playEffect(this.buttonClickAudio);
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "setCarryChip":
          audioMgr.playEffect(this.buttonClickAudio);
          http.post(constant.PostReqUserBalance, "syncUserBalanceCb");
          break;

         case "sliderBet":
          this.isTouchSlider = true;
          var chipRange = this.range[this.range.length - 1] - this.range[0];
          var slideV = Math.floor(this.chipSlider.progress * chipRange) + this.range[0];
          this.chipSliderProgress.height = this.chipSlider.progress * this.chipSlider.node.height;
          var balance = this.getPlayerBalance(constant.SelfUISeatId);
          1 === this.chipSlider.progress || slideV >= balance ? this.sliderBetTxt.string = "ALL IN" : this.sliderBetTxt.string = slideV;
          break;

         case "exitGame":
          audioMgr.playEffect(this.buttonClickAudio);
          this.tryExitGame();
          break;

         case "closeExitPanel":
          audioMgr.playEffect(this.buttonClickAudio);
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "cancelMatching":
          this.cancelMatching();
          audioMgr.playEffect(this.buttonClickAudio);
        }
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setNeedRecover(true);
        this.resetGameData();
        dzDataLogic.resetData();
        this.matchingBtn.active = false;
        this.initMatchingView(true, false);
        dataLogic.setDeskId(-1);
        var balance = +this.getPlayerBalance(constant.SelfUISeatId);
        dzDataLogic.needBringCoin ? dzConstant.PostMatching.bringCoin = dataLogic.carryChipNumData[this.roomKey] : dzConstant.PostMatching.bringCoin = balance;
        dzConstant.PostMatching.roomId = constant.GameId.Dzpk + dataLogic.curRoomKey;
        http.post(dzConstant.PostMatching, "matchingCb");
      },
      matchingCb: function matchingCb(data) {
        if (1 != data.Code) {
          dataLogic.setNeedRecover(false);
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            var roomKey = dataLogic.curRoomKey;
            this.matchingBtn.active = true;
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
            return;
          }
          this.matchingBtn.active = true;
          return;
        }
        dataLogic.setDeskId(data.Data.deskId);
        dzDataLogic.needBringCoin && !dataLogic.autoFreshChipNum && (dzDataLogic.needBringCoin = 0);
        this.setMatchingToastUI(true);
      },
      gameRecoverCb: function gameRecoverCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          this.doneGameRecover = true;
          dzDataLogic.gameState = -1;
          dzDataLogic.isOffLine = 0;
          this.resetGameData();
          dataLogic.isFriendRoom ? this.btReady.node.active = true : this.matchingBtn.active = true;
          if (this.recoverLoad && this.recoverLoad.parent) {
            this.recoverLoad.stopAllActions();
            kf.killObj(this.recoverLoad);
          }
          dataLogic.gameEnd();
          constant.HttpCode.GameOver == data.Code && (dataLogic.isFriendRoom ? this.dissolutionRoom(data.StrCode) : dataLogic.setReqRecoverState(false));
          return;
        }
        if (this.recoverLoad && this.recoverLoad.parent) {
          this.recoverLoad.stopAllActions();
          kf.killObj(this.recoverLoad);
        }
        this.onGameRecover(data.Data);
      },
      onGameRecover: function onGameRecover(data) {
        dataLogic.setReqRecoverState(false);
        dzDataLogic.isOffLine = 0;
        dataLogic.setLimitPlayerNum(6);
        dataLogic.setMsgId(data.msgId);
        if (0 == data.state) {
          dzDataLogic.gameState = -1;
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerReadyState(data);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            for (var i = 0; i < data.playerInfo.length; i++) {
              var _UISeatId = dataLogic.getUISeatIdBySeatId(i);
              this.resetMoneyState(this.playerArr[_UISeatId]);
              this.resetHandCardData(this.playerArr[_UISeatId]);
            }
            this.updateTips(data.kickOutTime, true);
          } else {
            this.initMatchingView(true, true);
            this.matchingBtn.active = false;
          }
          return;
        }
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        dataLogic.matching();
        dzDataLogic.resetData();
        dataLogic.setPlayerInfo(data.playerInfo);
        var ante = +data.ante.split("/")[0];
        dzDataLogic.ante = ante;
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        var dealerUISeatId = dataLogic.getUISeatIdBySeatId(data.dealer);
        this.matchingBtn.active = false;
        this.setDealerPos(dealerUISeatId);
        this.setMatchingToastView(false);
        this.setGameInfo(data);
        this.setBetNumWidth();
        this.setGameTotalChipNum(data.awardPot);
        if (dataLogic.isFriendRoom) {
          this.setAllPlayerReadyState(data);
          this.updateTips();
        } else {
          dzDataLogic.gameState = 1;
          this.createPlayer(data);
        }
        data.shareCards && dzDataLogic.setShareCards(data.shareCards);
        for (var _i = 0; _i < data.playerInfo.length; _i++) {
          var playerOption = data.playerInfo[_i].option;
          var _UISeatId2 = dataLogic.getUISeatIdBySeatId(_i);
          var optionArr = [ "smallBlind", "bigBlind", "check", "follow", "AddChip", "AllIn", "fold" ];
          if (playerOption) {
            this.setPlayerBetState(_UISeatId2, optionArr[playerOption - 1]);
            if (6 == playerOption && _UISeatId2 == constant.SelfUISeatId) dzDataLogic.allIn = true; else if (7 == playerOption) {
              this.setFoldPlayerData(_UISeatId2);
              this.setFoldPlayerUIState(_UISeatId2);
              dataLogic.isFriendRoom && data.playerInfo[_i].InvUserState == constant.FriendRoomPlayerState.Gaming && this.setFriendRoomPlayerState(dataLogic.selfSeatId, constant.FriendRoomPlayerState.Unready);
            }
          } else if (2 == data.playerInfo[_i].state) {
            this.setPlayerBetState(_UISeatId2, "fold");
            this.setFoldPlayerData(_UISeatId2);
            this.setFoldPlayerUIState(_UISeatId2);
            dataLogic.isFriendRoom && data.playerInfo[_i].InvUserState == constant.FriendRoomPlayerState.Gaming && this.setFriendRoomPlayerState(dataLogic.selfSeatId, constant.FriendRoomPlayerState.Unready);
          }
        }
        data.endTime && this.countDown(data.nextSeatId, data.endTime);
        this.tableCardPos.children.length || this.initTableBackCard();
        data.cards.length && this.setAddChipRange(data.myAddRange, data.nextSeatId, data.myFollow);
        if (data.cards && data.cards.length) {
          dzDataLogic.setHandCard(data.cards);
          for (var _i2 = 0; _i2 < data.cards.length; _i2++) this.initPlayerHandCard(constant.SelfUISeatId, data.cards);
          this.checkPlayerHandCardType(constant.SelfUISeatId, data.cards);
        }
        if (data.shareCards && data.shareCards.length) {
          for (var _i3 = 0; _i3 < dzDataLogic.shareCards.length; _i3++) this.showTableCard(_i3, dzDataLogic.shareCards[_i3]);
          data.cards.length && this.setMaxCardType(data.cards, dzDataLogic.shareCards, constant.SelfUISeatId);
        }
        data.cards.length && !dzDataLogic.isFold && this.updateBtn(UISeatId, data.myFollow, null, data.follows[dataLogic.selfSeatId]);
      },
      setAllPlayerReadyState: function setAllPlayerReadyState(data) {
        dataLogic.setPlayerInfo(data.playerInfo);
        var UISeatId = void 0, playerInfo = data.playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (null == playerInfo[i].headUrl) {
            this.playerArr[UISeatId].active && (this.playerArr[UISeatId].active = false);
            continue;
          }
          this.playerArr[UISeatId].userId = playerInfo[i].userId;
          dataLogic.isFriendRoom && playerInfo[i].InvUserState == constant.FriendRoomPlayerState.Gaming && (7 != playerInfo[i].option && 2 != playerInfo.state || dataLogic.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Unready));
          UISeatId == constant.SelfUISeatId && (playerInfo[i].InvUserState == constant.FriendRoomPlayerState.Gaming ? dzDataLogic.gameState = 1 : dzDataLogic.gameState = -1);
        }
        for (var _i4 = playerInfo.length; _i4 < this.playerArr.length; _i4++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i4);
          this.playerArr[UISeatId].active && (this.playerArr[UISeatId].active = false);
        }
        this.initAllPlayerReadyStateUI();
        this.createPlayer(data);
      },
      ready: function ready() {
        dzDataLogic.resetData();
        this.adjustBringMoney();
        var balance = +this.getPlayerBalance(constant.SelfUISeatId);
        var newBricoin = 0;
        newBricoin = dzDataLogic.needBringCoin ? dataLogic.carryChipNumData[this.roomKey] : balance;
        return [ "dzpk", newBricoin ];
      },
      setPlayerInfo: function setPlayerInfo(playerInfo, UISeatId, isNewJoin) {
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        this.playerArr[UISeatId].userId = playerInfo.userId;
        dataLogic.isFriendRoom && playerInfo.InvUserState == constant.FriendRoomPlayerState.Gaming && (7 != playerInfo.option && 2 != playerInfo.state || dataLogic.setFriendRoomPlayerState(seatId, constant.FriendRoomPlayerState.Unready));
        this.playerArr[UISeatId].active || (this.playerArr[UISeatId].active = true);
        playerInfo.seatId = seatId;
        playerInfo.UISeatId = UISeatId;
        this.resetMoneyState(this.playerArr[UISeatId]);
        this.resetHandCardData(this.playerArr[UISeatId]);
        this.renderPlayerInfo(UISeatId, playerInfo);
        dzDataLogic.setPlayerData(UISeatId, playerInfo);
        isNewJoin;
      },
      cancelMatching: function cancelMatching() {
        this.btCancelMatching.node.active = false;
        this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
        http.post(dzConstant.PostCancelMatching, "cancelMatchingCb");
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        dzDataLogic.gameState = -1;
        this.setMatchingToastView(false);
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.GameOver) {
          this.matchingBtn.active = true;
          dataLogic.gameEnd();
        }
      },
      tryExitGame: function tryExitGame() {
        dataLogic.isFriendRoom ? -1 == dzDataLogic.gameState && dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState != constant.FriendRoomPlayerState.Gaming || !dataLogic.playerInfo.length ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6") : -1 == dzDataLogic.gameState || dzDataLogic.isFold ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u5148\u5f03\u724c\u518d\u9000\u51fa");
      },
      exitRoom: function exitRoom() {
        this.unscheduleAllCallbacks();
        this.resetGameData();
        this.node.stopAllActions();
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      playerLeave: function playerLeave(seatId) {
        if (seatId != dataLogic.selfSeatId) for (var i = 0; i < this.tiedPlayerIdArr.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (UISeatId != constant.UISeatId) {
            this.removePlayerWinEffect();
            this.winBeforeCompare.x = -1e4;
          }
        }
        constant.UISeatId != dzDataLogic.dealerUISeatId && this.setDealerPos(-1);
      },
      playerJoin: function playerJoin(info, seatId) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        dzDataLogic.setPlayerData(UISeatId, info);
      },
      removePlayerWinEffect: function removePlayerWinEffect() {
        this.visitingEf[0].x = -1e4;
        this.visitingEf[1].x = -1e4;
        this.visitingEf[0].getComponent(cc.Animation).stop();
        this.visitingEf[1].getComponent(cc.Animation).stop();
      },
      betCb: function betCb(data) {
        this.closeAllPanel();
        if (1 == data.Code) this.chipPanel.active = false; else if (data.code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      passCb: function passCb(data) {
        this.closeAllPanel();
        if (1 == data.Code) ; else if (data.Code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      foldCb: function foldCb(data) {
        this.closeAllPanel();
        if (data.Code == constant.HttpCode.GameOver) {
          this.node.stopAllActions();
          this.resetGameData();
          this.matchingBtn.active = true;
        }
      },
      onGameStart: function onGameStart(data) {
        dataLogic.matching();
        dataLogic.setLimitPlayerNum(6);
        dataLogic.setPlayerInfo(data.playerInfo);
        if (dataLogic.isFriendRoom) {
          this.updateTips();
          this.gameStartCommonHandle();
          this.resetGameData();
          dzDataLogic.resetData();
        }
        dzDataLogic.gameState = 1;
        this.matchingBtn.active = false;
        this.setGameInfo(data);
        var ante = +data.ante.split("/")[0];
        if (dzDataLogic.needShowNotice > 0) {
          var balance = data.balances[dataLogic.selfSeatId];
          dataLogic.selfSeatId == data.smallBlind ? balance += ante : dataLogic.selfSeatId == data.bigBlind && (balance += ante.multi(2));
          this.showNotice(balance);
        }
        this.setMatchingToastView(false);
        this.createPlayer(data);
        this.initPlayerRole(data);
        dzDataLogic.followVChipNum = dzDataLogic.ante;
        this.initTableBackCard();
        this.setAddChipRange(data.nextAddRange, data.nextSeatId, data.nextFollow);
        dzDataLogic.setHandCard(data.cards);
        var totalChipNum = ante.multi(3);
        this.setGameTotalChipNum(totalChipNum);
        this.setFollowNum(data.nextFollow);
        this.dealPlayerHandCard();
        this.countDown(data.nextSeatId, data.endTime);
        this.updateOperationBtn(data);
        this.followVChipNum.string = "\u8ddf" + dzDataLogic.followVChipNum;
      },
      settingLightPlayerMaxCard: function settingLightPlayerMaxCard(data) {
        if (!dzDataLogic.handCard.length) return;
        -1 == data.shareCards.indexOf(",") || dataLogic.isHide ? dataLogic.isHide ? this.lightPlayerMaxCard() : this.scheduleOnce(this.lightPlayerMaxCard, 1) : this.scheduleOnce(this.lightPlayerMaxCard, 1.8);
      },
      onBet: function onBet(data) {
        if (dzDataLogic.isOffLine && !this.doneGameRecover) return;
        var state = 1 == data.betType ? "follow" : 2 == data.betType ? "AllIn" : "AddChip";
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.runFollowAction(UISeatId, data.chipNum);
        this.setPlayerBetState(UISeatId, state);
        this.PlayerBetNum[data.seatId] = 1;
        this.setGameTotalChipNum(data.awardPot);
        if (data.isEnd) this.gameOver(data, 1); else {
          if (dzDataLogic.handCard.length && !dzDataLogic.isFold) {
            this.updateOperationBtn(data);
            this.setAddChipRange(data.nextAddRange, data.nextSeatId, data.nextFollow);
          }
          if (data.shareCards) {
            this.dealTableCard(data.shareCards);
            this.settingLightPlayerMaxCard(data);
            this.checkPlayerStateAndRunChipFlyAction();
          }
          this.countDown(data.nextSeatId, data.endTime);
          this.setPlayerBalance(UISeatId, data.balance);
        }
        this.playBetAudio(state, UISeatId);
      },
      onPass: function onPass(data) {
        if (dzDataLogic.isOffLine && !this.doneGameRecover) return;
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.setPlayerBetState(UISeatId, "check");
        if (data.isEnd) this.gameOver(data); else {
          if (dzDataLogic.handCard.length && !dzDataLogic.isFold) {
            this.updateOperationBtn(data, "onPass");
            this.setAddChipRange(data.nextAddRange, data.nextSeatId, data.nextFollow);
          }
          if (data.shareCards) {
            this.dealTableCard(data.shareCards);
            this.settingLightPlayerMaxCard(data);
            this.checkPlayerStateAndRunChipFlyAction();
          }
          this.countDown(data.nextSeatId, data.endTime);
          this.setPlayerBalance(UISeatId, data.balance);
        }
        this.playBetAudio("pass", UISeatId);
      },
      onFold: function onFold(data) {
        if (dzDataLogic.isOffLine && !this.doneGameRecover) return;
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.setFoldPlayerData(UISeatId);
        this.runFoldAction(UISeatId);
        this.setPlayerBetState(UISeatId, "fold");
        this.playBetAudio("fold", UISeatId);
        dataLogic.isFriendRoom && this.setFriendRoomPlayerState(data.seatId, constant.FriendRoomPlayerState.Unready);
        if (data.isEnd) this.gameOver(data); else {
          if (UISeatId == constant.SelfUISeatId) {
            dataLogic.isFriendRoom ? this.updateTips() : this.matchingBtn.active = true;
            this.setAllInOrFoldState();
          }
          if (dzDataLogic.handCard.length && !dzDataLogic.isFold) {
            this.updateOperationBtn(data);
            this.setAddChipRange(data.nextAddRange, data.nextSeatId, data.nextFollow);
          }
          if (data.shareCards) {
            this.dealTableCard(data.shareCards);
            this.settingLightPlayerMaxCard(data);
            this.checkPlayerStateAndRunChipFlyAction();
          }
          this.setPlayerBalance(UISeatId, data.balance);
          this.countDown(data.nextSeatId, data.endTime);
        }
      },
      adjustBringMoney: function adjustBringMoney() {
        var gameBalance = this.getPlayerBalance(constant.SelfUISeatId);
        var enterRoomMinMoney = dataLogic.carryChipNumRange[this.roomKey][0];
        var enterRoomMaxMoney = dataLogic.carryChipNumRange[this.roomKey][1];
        if (gameBalance < enterRoomMinMoney || gameBalance > enterRoomMaxMoney || dataLogic.autoFreshChipNum) {
          dzDataLogic.needShowNotice = 1;
          if (dataLogic.userBalance >= dataLogic.carryChipNumData[this.roomKey]) {
            dzDataLogic.needBringCoin = 1;
            dataLogic.autoFreshChipNum ? dzDataLogic.showNoticeType = 2 : gameBalance < enterRoomMinMoney ? dzDataLogic.showNoticeType = 3 : gameBalance > enterRoomMaxMoney && (dzDataLogic.showNoticeType = 5);
          } else {
            dzDataLogic.needBringCoin = 1;
            dataLogic.carryChipNumData[this.roomKey] = dataLogic.userBalance;
            dataLogic.autoFreshChipNum = 0;
            cc.sys.localStorage.setItem("game_autoFreshChipNum", dataLogic.autoFreshChipNum);
            dzDataLogic.showNoticeType = 4;
          }
        } else dzDataLogic.showNoticeType = 2;
      },
      createPlayer: function createPlayer(data) {
        var playerInfo = data.playerInfo;
        dzDataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) {
          if (!playerInfo[i].headUrl) continue;
          var UISeatId = void 0;
          playerInfo[i].seatId = i;
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          playerInfo[i].UISeatId = UISeatId;
          this.playerArr[UISeatId].active = true;
          this.playerArr[UISeatId].userId = playerInfo[i].userId;
          this.renderPlayerInfo(UISeatId, playerInfo[i]);
          dzDataLogic.setPlayerData(UISeatId, playerInfo[i]);
          void 0 !== playerInfo[i].balance && this.setPlayerBalance(UISeatId, playerInfo[i].balance);
          if (void 0 !== playerInfo[i].coins && playerInfo[i].coins) {
            this.chipInfoArr[UISeatId].active = true;
            this.setPlayerChipValue(UISeatId, playerInfo[i].coins);
            this.PlayerBetNum[i] = 1;
          } else this.chipInfoArr[UISeatId].active = false;
        }
      },
      initPlayerRole: function initPlayerRole(data) {
        var dealerUISeatId = dataLogic.getUISeatIdBySeatId(data.dealer);
        var smallBlindUISeatId = dataLogic.getUISeatIdBySeatId(data.smallBlind);
        var bigBlindUISeatId = dataLogic.getUISeatIdBySeatId(data.bigBlind);
        var smallBlindNode = this.playerArr[smallBlindUISeatId], bigBlindNode = this.playerArr[bigBlindUISeatId];
        this.setDealerPos(dealerUISeatId);
        dzDataLogic.bigBlindUISeatId = bigBlindUISeatId;
        dzDataLogic.smallBlindUISeatId = smallBlindUISeatId;
        smallBlindNode.getChildByName("state").active = bigBlindNode.getChildByName("state").active = true;
        this.setPlayerBetState(bigBlindUISeatId, "bigBlind");
        this.setPlayerBetState(smallBlindUISeatId, "smallBlind");
        this.chipInfoArr[smallBlindUISeatId].active = this.chipInfoArr[bigBlindUISeatId].active = true;
        this.setPlayerChipValue(smallBlindUISeatId, dzDataLogic.ante);
        this.setPlayerChipValue(bigBlindUISeatId, 2 * dzDataLogic.ante);
        this.PlayerBetNum[data.bigBlind] = 1;
        this.PlayerBetNum[data.smallBlind] = 1;
      },
      checkPlayerStateAndRunChipFlyAction: function checkPlayerStateAndRunChipFlyAction() {
        var _this = this;
        for (var i = 0; i < this.PlayerBetNum.length; i++) this.PlayerBetNum[i] && function() {
          var playerUISeatId = dataLogic.getUISeatIdBySeatId(i);
          var chipInfo = _this.chipInfoArr[playerUISeatId];
          var endPos = cc.v2(-40, _this.totalChipNum.position.y);
          var startPos = cc.v2(chipInfo.position.x - chipInfo.width / 2 + 17, chipInfo.position.y);
          dataLogic.isHide || _this.scheduleOnce(function() {
            this.chipFlyAnimation(startPos, endPos);
          }, .5);
        }();
        this.PlayerBetNum = [];
      },
      checkBlindHasBeted: function checkBlindHasBeted(UISeatId) {
        dzDataLogic.shareCards.length ? this.blindBetState = [ 1, 1 ] : UISeatId == dzDataLogic.smallBlindUISeatId ? this.blindBetState[0] = 1 : UISeatId == dzDataLogic.bigBlindUISeatId && (this.blindBetState[1] = 1);
      },
      setDealerPos: function setDealerPos(UISeatId) {
        if (-1 == UISeatId) this.dealer.x = 1e3; else {
          var pos = this.playerArr[UISeatId].position.add(dzConstant.dealerPos[UISeatId]);
          this.dealer.position = pos;
          dzDataLogic.dealerUISeatId = UISeatId;
        }
      },
      setPlayerChipValue: function setPlayerChipValue(UISeatId, val) {
        this.chipInfoArr[UISeatId].getChildByName("chipNum").getComponent(cc.Label).string = val;
      },
      setGameInfo: function setGameInfo(data) {
        this.betNumTxt.string = "\u76f2\u6ce8\uff1a" + data.ante;
        this.gameIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + data.playId;
        dzDataLogic.setAnte(data.ante.split("/")[0]);
        this.setPlayIdWidth();
        this.setPlayIdBgState();
      },
      setGameTotalChipNum: function setGameTotalChipNum(val) {
        dzDataLogic.setTotalChipNum(val);
        this.totalChipNum.active = true;
        this.totalChipTxt.string = val;
        this.totalChipTxt._updateRenderData(true);
        if (val > 100) {
          var width = this.totalChipTxt.node.width;
          this.totalChipNum.width = width + 80;
        } else this.totalChipNum.width = 120;
      },
      setFollowNum: function setFollowNum(val) {
        this.btnFollowTxt.string = "\u8ddf" + val;
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        this.playerArr[UISeatId].getChildByName("userInfo").getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
      },
      getPlayerBalance: function getPlayerBalance(UISeatId) {
        var balance = this.playerArr[UISeatId].getChildByName("userInfo").getChildByName("balance").getComponent(cc.Label).string;
        return +balance;
      },
      setAddChipRange: function setAddChipRange(nextRange, nextSeatId, nextFollowNumber) {
        if (!nextRange) return;
        var balance = this.getPlayerBalance(constant.SelfUISeatId);
        if (balance <= nextFollowNumber) return;
        var rangeData = nextRange.split(",");
        var range0 = +rangeData[0];
        var range1 = +rangeData[1];
        if (!(range0 >= range1)) {
          var maxChipNum = range1, minChipNum = range0;
          var middleChipNum1 = +parseFloat(.25 * (maxChipNum - minChipNum) + minChipNum).toFixed(2);
          var middleChipNum2 = +parseFloat(.5 * (maxChipNum - minChipNum) + minChipNum).toFixed(2);
          this.range = [ minChipNum, middleChipNum1, middleChipNum2, maxChipNum ];
          dzDataLogic.setAddChipRange(this.range);
          var nextUISeatId = dataLogic.getUISeatIdBySeatId(nextSeatId);
          var _balance2 = this.getPlayerBalance(nextUISeatId);
          for (var i = 0; i < this.addChipBtnGroup.length; i++) {
            this.addChipBtnGroup[i].getChildByName("chipTxt").getComponent(cc.Label).string = 3 == i ? "ALL IN" : this.range[i];
            (this.range[i] >= _balance2 || 0 == this.range[i]) && 3 != i ? this.addChipBtnGroup[i].getComponent(cc.Button).interactable = false : this.addChipBtnGroup[i].getComponent(cc.Button).interactable = true;
          }
          if (this.range[0] >= _balance2) {
            this.sliderBetTxt.string = "ALL IN";
            this.chipSlider.progress = 1;
            this.chipSliderProgress.height = this.chipSlider.node.height;
          } else {
            this.sliderBetTxt.string = this.range[0];
            this.chipSlider.progress = this.chipSliderProgress.height = 0;
          }
          this.btnAddChipTxt.string = "\u52a0\u6ce8";
          return this.range;
        }
        this.btnAddChipTxt.string = "ALL IN";
      },
      addChip: function addChip(event, index) {
        var sendObj = {
          action: "DoPlay",
          eventName: "bet"
        };
        sendObj.chipNum = 3 == index ? 0 : this.range[index];
        audioMgr.playEffect(this.buttonClickAudio);
        if (3 == index) this.showAllInPanel(); else {
          this.playBetAudio("addChip", constant.SelfUISeatId);
          http.post(sendObj, "betCb");
          this.chipPanel.active = false;
          0 == sendObj.chipNum ? this.setAllInOrFoldState() : this.hideBtnGroup();
        }
      },
      dealPlayerHandCard: function dealPlayerHandCard() {
        var _this2 = this;
        var _loop = function _loop(i) {
          _this2.instantiateBackCard("player");
          var delay = cc.delayTime(.2 * i);
          var _index = i > dzDataLogic.nowPlayerNum - 1 ? i - dzDataLogic.nowPlayerNum : i;
          var diffY = _this2.backCardPos.position.y;
          var UISeatId = dzDataLogic.playerInfo[_index].UISeatId;
          var seqAnimation = void 0;
          var callFunc1 = cc.callFunc(function() {
            audioMgr.playEffect(this.dealCardAudio);
            if (UISeatId == constant.SelfUISeatId) {
              this.initPlayerHandCard(constant.SelfUISeatId, dzDataLogic.handCard);
              i > 1 && this.checkPlayerHandCardType(constant.SelfUISeatId, dzDataLogic.handCard);
            }
            i == 2 * dzDataLogic.nowPlayerNum - 1 && this.backCardPos.removeAllChildren();
          }, _this2);
          if (UISeatId == constant.SelfUISeatId) {
            var cardInfoPos = _this2.playerArr[UISeatId].getChildByName("cardInfo").position;
            var diffX = 0 == _index ? cardInfoPos.x + 10 : cardInfoPos + 45;
            seqAnimation = cc.sequence(delay, cc.spawn(cc.scaleTo(.3, 2.5, 2.5), cc.moveTo(.3, _this2.playerArr[UISeatId].position.x + diffX, _this2.playerArr[UISeatId].position.y - diffY + cardInfoPos.y)), callFunc1);
          } else seqAnimation = cc.sequence(delay, cc.moveTo(.3, _this2.playerArr[UISeatId].position.x, _this2.playerArr[UISeatId].position.y - diffY), callFunc1);
          if (dataLogic.isHide) {
            _this2.backCardPos.children[i].destroy();
            _this2.initPlayerHandCard(constant.SelfUISeatId, dzDataLogic.handCard);
            if (i == 2 * dzDataLogic.nowPlayerNum - 1) {
              _this2.checkPlayerHandCardType(constant.SelfUISeatId, dzDataLogic.handCard);
              _this2.backCardPos.removeAllChildren();
            }
          } else _this2.backCardPos.children[i].runAction(seqAnimation);
        };
        for (var i = 0; i < 2 * dzDataLogic.nowPlayerNum; i++) _loop(i);
      },
      initPlayerHandCard: function initPlayerHandCard(UISeatId, cards) {
        var cardInfo = this.playerArr[UISeatId].getChildByName("cardInfo");
        cardInfo.active = true;
        var card0_bg = this.playerArr[UISeatId].getChildByName("cardInfo").getChildByName("card0").getChildByName("cardBg");
        var card1_bg = this.playerArr[UISeatId].getChildByName("cardInfo").getChildByName("card1").getChildByName("cardBg");
        if ("backCard" != card0_bg.getComponent(cc.Sprite).spriteFrame.name) {
          card1_bg.active = true;
          this.setSpriteUrl(card1_bg, this.cardAtlas, cards[1]);
        } else {
          card0_bg.active = true;
          this.setSpriteUrl(card0_bg, this.cardAtlas, cards[0]);
        }
      },
      showFinalPlayerHandCard: function showFinalPlayerHandCard(UISeatId, cards, isRunChipFlyToPool) {
        var _this3 = this;
        var cardInfo = this.playerArr[UISeatId].getChildByName("cardInfo");
        cardInfo.active = true;
        var card0_bg = this.playerArr[UISeatId].getChildByName("cardInfo").getChildByName("card0").getChildByName("cardBg");
        var card1_bg = this.playerArr[UISeatId].getChildByName("cardInfo").getChildByName("card1").getChildByName("cardBg");
        var _loop2 = function _loop2(i) {
          if (dataLogic.isHide) if (0 == i) {
            card0_bg.active = true;
            _this3.setSpriteUrl(card0_bg, _this3.cardAtlas, cards[0]);
          } else {
            card1_bg.active = true;
            _this3.setSpriteUrl(card1_bg, _this3.cardAtlas, cards[1]);
          } else _this3.scheduleOnce(function() {
            if (0 == i) {
              card0_bg.active = true;
              var animation = card0_bg.getComponent(cc.Animation);
              animation.play();
              animation.on("finished", function() {
                card0_bg.scaleX = 1;
                card0_bg.skewY = 0;
                this.setSpriteUrl(card0_bg, this.cardAtlas, cards[i]);
              }, _this3);
            } else {
              card1_bg.active = true;
              var _animation = card1_bg.getComponent(cc.Animation);
              _animation.play();
              _animation.on("finished", function() {
                card1_bg.scaleX = 1;
                card1_bg.skewY = 0;
                this.setSpriteUrl(card1_bg, this.cardAtlas, cards[i]);
              }, _this3);
            }
          }, .5 * i + .5);
        };
        for (var i = 0; i < cards.length; i++) _loop2(i);
        isRunChipFlyToPool && this.scheduleOnce(this.checkPlayerStateAndRunChipFlyAction, 1);
      },
      checkPlayerHandCardType: function checkPlayerHandCardType(UISeatId, handCard) {
        var cardTypeResult = dzDataLogic.checkTwoCardsType(handCard)[0];
        this.setCardTypeResult(UISeatId, cardTypeResult);
        var player = this.playerArr[UISeatId];
        var handCard0 = player.getChildByName("cardInfo").getChildByName("card0").getChildByName("cardFrame");
        var handCard1 = player.getChildByName("cardInfo").getChildByName("card1").getChildByName("cardFrame");
        handCard0.getComponent(cc.Sprite).spriteFrame = this.cardEffect[0];
        handCard1.getComponent(cc.Sprite).spriteFrame = this.cardEffect[0];
        2 == cardTypeResult && (handCard0.active = handCard1.active = true);
        return cardTypeResult;
      },
      setCardTypeResult: function setCardTypeResult(UISeatId, cardTypeResult) {
        var cardTypeBg = this.playerArr[UISeatId].getChildByName("cardInfo").getChildByName("cardTypeBg");
        cardTypeBg.active = true;
        var cardTypePic = kf.getSFByImgName(this.cardTypeAtlas, cardTypeResult - 1);
        cardTypeBg.getComponent(cc.Sprite).spriteFrame = cardTypePic;
        cardTypeBg.width = cardTypePic._originalSize.width;
        cardTypeBg.height = cardTypePic._originalSize.height;
      },
      countDown: function countDown(nextSeatId, endTime) {
        var setTimeResult = dataLogic.setTimerData(endTime);
        if (!setTimeResult) return;
        this.unschedule(this.timeOutFold);
        var UISeatId = dataLogic.getUISeatIdBySeatId(nextSeatId);
        dzDataLogic.setCurOpeartionUIseatId(UISeatId);
        this.timer.position = this.playerArr[UISeatId].position;
        var animState = this.timer.getComponent(cc.Animation).play();
        var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
        if (remainingTime >= 15) animState.speed = 10 / dataLogic.timerTotalTime; else {
          animState.speed = 10 / 15;
          var curTime = 10 * (1 - remainingTime / 15);
          this.timer.getComponent(cc.Animation).setCurrentTime(curTime);
        }
        constant.SelfUISeatId == UISeatId && this.scheduleOnce(this.timeOutFold, dataLogic.timerTotalTime);
      },
      removeTimer: function removeTimer() {
        this.unschedule(this.timeOutFold);
        this.timer.x = 1e3;
      },
      alterCountDown: function alterCountDown() {
        this.unschedule(this.timeOutFold);
        var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
        if (remainingTime <= 0) dzDataLogic.curOperationUISeatId != constant.SelfUISeatId || dzDataLogic.isFold || 1 != dzDataLogic.gameState || this.timeOutFold(); else {
          dzDataLogic.curOperationUISeatId == constant.SelfUISeatId && 1 == dzDataLogic.gameState && this.scheduleOnce(this.timeOutFold, remainingTime);
          var curTime = 10 * (1 - remainingTime / 15);
          var animState = this.timer.getComponent(cc.Animation).play();
          animState.speed = 10 / dataLogic.timerTotalTime;
          this.timer.getComponent(cc.Animation).setCurrentTime(curTime);
        }
      },
      timeOutFold: function timeOutFold() {
        if (this.btnCheck.active) http.post(dzConstant.PostPass, "passCb"); else {
          audioMgr.playEffect(this.buttonClickAudio);
          http.post(dzConstant.PostFold, "foldCb");
        }
      },
      showAllInPanel: function showAllInPanel() {
        var _this4 = this;
        this.AllInPanel.active = true;
        var seq = cc.sequence(cc.callFunc(function() {
          _this4.AllInPanel.getChildByName("mask").active = true;
        }, this), cc.fadeIn(0), cc.scaleTo(0, 0), cc.scaleTo(.2, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.AllInPanel.getChildByName("contentMain").stopAllActions();
        this.AllInPanel.getChildByName("contentMain").runAction(seq);
      },
      hideAllInPanel: function hideAllInPanel() {
        var _this5 = this;
        var seq1 = cc.sequence(cc.callFunc(function() {
          _this5.AllInPanel.getChildByName("mask").active = false;
        }, this), cc.scaleTo(.05, .7, .7), cc.fadeOut(0));
        this.AllInPanel.getChildByName("contentMain").runAction(seq1);
        this.scheduleOnce(function() {
          _this5.AllInPanel.active = false;
        }, .2);
      },
      updateOperationBtn: function updateOperationBtn(data, type) {
        var NextUISeatId = void 0, followNumber = void 0;
        NextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        followNumber = data.follows && data.follows.length ? data.follows[dataLogic.selfSeatId] : dzDataLogic.followVChipNum;
        this.updateBtn(NextUISeatId, data.nextFollow, type, followNumber);
      },
      setAllInOrFoldState: function setAllInOrFoldState() {
        this.btnGroup1.active = this.btnGroup2.active = false;
        this.removeTimer();
      },
      updateBtn: function updateBtn(UISeatId, nextFollowValue, type, followNumber) {
        var balance = this.getPlayerBalance(constant.SelfUISeatId);
        if (dzDataLogic.isFold || dzDataLogic.allIn) dzDataLogic.isFold || this.setAllInOrFoldState(); else if (UISeatId === constant.SelfUISeatId) if (this.isAutoState()) this.doAutoBetAction(UISeatId, nextFollowValue, type, followNumber); else {
          this.btnGroup1.active = true;
          this.btnGroup2.active = false;
          if (0 === nextFollowValue || "onPass" == type) {
            this.btnCheck.active = true;
            this.btnFollow.active = false;
          } else {
            this.btnCheck.active = false;
            this.btnFollow.active = true;
            if (balance <= nextFollowValue) {
              this.btnFollowTxt.string = "ALL IN";
              dzDataLogic.allIn = true;
              this.btnAddChip.getComponent(cc.Button).interactable = false;
              this.btnAddChip.getChildByName("btnBg").getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
              this.btnAddChipTxt.string = "\u52a0\u6ce8";
            } else {
              this.setFollowNum(nextFollowValue);
              this.btnAddChip.getChildByName("btnBg").getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);
              this.btnAddChip.getComponent(cc.Button).interactable = true;
            }
          }
        } else {
          this.btnGroup1.active = false;
          this.btnGroup2.active = true;
          if (0 == followNumber || "onPass" == type) {
            this.followVToggle.node.active = false;
            this.autoCheckToggle.node.active = true;
            if (dzDataLogic.followV) {
              dzDataLogic.followV = false;
              this.followVToggle.isChecked = false;
            }
          } else {
            var lastFollowNumber = "ALL IN" == this.followVChipNum.string ? "ALL IN" : +this.followVChipNum.string.split("\u8ddf")[1];
            if (followNumber == lastFollowNumber || "ALL IN" == lastFollowNumber) return;
            this.followVChipNum.string = balance <= followNumber ? "ALL IN" : "\u8ddf" + followNumber;
            this.followVToggle.node.active = true;
            this.autoCheckToggle.node.active = false;
            this.followVToggle.isChecked = false;
            dzDataLogic.followV = false;
            dzDataLogic.followVChipNum = followNumber;
            if (dzDataLogic.autoCheck) {
              dzDataLogic.autoCheck = false;
              this.autoCheckToggle.isChecked = false;
            }
          }
        }
      },
      hideBtnGroup: function hideBtnGroup() {
        this.btnGroup1.active = false;
        this.btnGroup2.active = true;
        this.autoCheckToggle.node.active = true;
        this.followVToggle.node.active = false;
        this.removeTimer();
      },
      isAutoState: function isAutoState() {
        if (dzDataLogic.autoCheck || dzDataLogic.autoFollow || dzDataLogic.autoFoldOrPass || dzDataLogic.followV) return true;
        return false;
      },
      syncUserBalanceCb: function syncUserBalanceCb(data) {
        var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + dataLogic.curRoomKey);
        if (1 == data.Code) {
          dataLogic.userBalance = data.Data.balance;
          if (admittanceChipNum > data.Data.balance) {
            this.showRechargeToast(admittanceChipNum, true);
            this.matchingBtn.active = true;
            return;
          }
          this.setCarryChipNumPanelNode = kf.getObj(constant.PoolId.SetCarryChipNumPanel, dataLogic.isFriendRoom ? cc.find("Canvas/toastLayer/2") : this.setCarryChipNumPanel, this.setCarryChipNumPanelPfb);
        } else this.closeAllPanel();
      },
      doAutoBetAction: function doAutoBetAction(UISeatId, nextFollowValue, type, followNumber) {
        var _this6 = this;
        var balance = this.getPlayerBalance(constant.SelfUISeatId);
        if (dzDataLogic.autoFoldOrPass) if (nextFollowValue) if (dataLogic.isHide) {
          http.post(dzConstant.PostFold, "foldCb");
          this.setAllInOrFoldState();
        } else this.scheduleOnce(function() {
          http.post(dzConstant.PostFold, "foldCb");
          _this6.setAllInOrFoldState();
        }, .5); else if (dataLogic.isHide) {
          http.post(dzConstant.PostPass, "passCb");
          this.resetAutoBetState();
        } else this.scheduleOnce(function() {
          http.post(dzConstant.PostPass, "passCb");
          _this6.resetAutoBetState();
        }, .5); else if (dzDataLogic.autoFollow) if (nextFollowValue) {
          var sendObj = {
            action: "DoPlay",
            eventName: "bet"
          };
          sendObj.chipNum = balance <= nextFollowValue ? 0 : -1;
          if (dataLogic.isHide) {
            http.post(sendObj, "betCb");
            0 == sendObj.chipNum ? this.setAllInOrFoldState() : this.resetAutoBetState();
          } else this.scheduleOnce(function() {
            http.post(sendObj, "betCb");
            0 == sendObj.chipNum ? _this6.setAllInOrFoldState() : _this6.resetAutoBetState();
          }, .5);
        } else if (dataLogic.isHide) {
          http.post(dzConstant.PostPass, "passCb");
          this.resetAutoBetState();
        } else this.scheduleOnce(function() {
          http.post(dzConstant.PostPass, "passCb");
          _this6.resetAutoBetState();
        }, .5); else if (dzDataLogic.autoCheck) if (nextFollowValue) {
          this.resetAutoBetState();
          this.updateBtn(UISeatId, nextFollowValue, type, followNumber);
        } else if (dataLogic.isHide) {
          http.post(dzConstant.PostPass, "passCb");
          this.resetAutoBetState();
        } else this.scheduleOnce(function() {
          http.post(dzConstant.PostPass, "passCb");
          _this6.resetAutoBetState();
        }, .5); else if (dzDataLogic.followV) {
          var _sendObj2 = {
            action: "DoPlay",
            eventName: "bet"
          };
          if (followNumber != dzDataLogic.followVChipNum && followNumber <= balance) {
            this.followVToggle.isChecked = false;
            dzDataLogic.followV = false;
            this.updateBtn(UISeatId, nextFollowValue, type, followNumber);
          } else {
            var _balance3 = this.getPlayerBalance(constant.SelfUISeatId);
            _sendObj2.chipNum = followNumber >= _balance3 || "ALL IN" == this.followVChipNum.string ? 0 : -1;
            0 == _sendObj2.chipNum && (dzDataLogic.allIn = true);
            if (dataLogic.isHide) {
              http.post(_sendObj2, "betCb");
              0 == _sendObj2.chipNum ? this.setAllInOrFoldState() : this.resetAutoBetState();
            } else this.scheduleOnce(function() {
              http.post(_sendObj2, "betCb");
              0 == _sendObj2.chipNum ? _this6.setAllInOrFoldState() : _this6.resetAutoBetState();
            }, .5);
          }
        }
      },
      resetAutoBetState: function resetAutoBetState() {
        this.autoFoldOrPassToggle.isChecked = false;
        this.autoFollowToggle.isChecked = false;
        this.autoCheckToggle.isChecked = false;
        this.followVToggle.isChecked = false;
        dzDataLogic.autoFoldOrPass = dzDataLogic.autoFollow = dzDataLogic.autoCheck = dzDataLogic.followV = false;
      },
      runFollowAction: function runFollowAction(UISeatId, chipNum) {
        var _this7 = this;
        var startPos = void 0, chipPfb = void 0, endPos = void 0, chipInfo = void 0, chipNumTxt = void 0;
        chipInfo = this.chipInfoArr[UISeatId];
        chipNumTxt = chipInfo.getChildByName("chipNum").getComponent(cc.Label).string = chipNum;
        chipInfo.active = true;
        if (!dataLogic.isHide) {
          startPos = this.playerArr[UISeatId].position;
          chipPfb = cc.instantiate(this.chipPfb);
          chipPfb.parent = this.chipParent;
          this.chipParent.position = startPos;
          endPos = cc.v2(chipInfo.position.x - chipInfo.width / 2, chipInfo.position.y);
          this.chipParent.active = true;
          this.chipParent.runAction(cc.sequence(cc.moveTo(.3, endPos), cc.callFunc(function() {
            _this7.chipParent.removeAllChildren();
          }, this)));
        }
      },
      setFoldPlayerUIState: function setFoldPlayerUIState(UISeatId) {
        var player = this.playerArr[UISeatId];
        player.opacity = 200;
        UISeatId == dzDataLogic.dealerUISeatId && (this.dealer.opacity = 200);
      },
      runFoldAction: function runFoldAction(UISeatId) {
        var player = this.playerArr[UISeatId];
        this.setFoldPlayerUIState(UISeatId);
        if (UISeatId === constant.SelfUISeatId && !dataLogic.isHide) {
          var playerPos = player.position, cardInfoPos = player.getChildByName("cardInfo").position;
          var desPos = cc.v2(playerPos.x + cardInfoPos.x, playerPos.y);
          this.fold.position = desPos;
          this.fold.runAction(cc.spawn(cc.moveTo(.3, cc.v2(0, 0)), cc.scaleTo(.3, 0, 0)));
        }
      },
      doCardAction: function doCardAction(i, cardsIndex) {
        var callFunc = cc.callFunc(function() {
          var amni = this.tableCardPos.children[i].getComponent(cc.Animation);
          amni.play();
          amni.on("finished", function() {
            this.tableCardPos.children[i].getChildByName("bg").scaleX = 1;
            this.tableCardPos.children[i].getChildByName("bg").skewY = 0;
            this.tableCardPos.children[i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cardsIndex);
            this.hasDealCardNum++;
          }, this);
        }, this);
        var seqAnimation = void 0;
        seqAnimation = cc.sequence(cc.spawn(cc.scaleTo(.2, 3, 3), cc.moveTo(.2, dzConstant.bigCardPos[i])), cc.delayTime(.5), callFunc);
        this.tableCardPos.children[i].position = cc.v2(0, 0);
        this.tableCardPos.children[i].active = true;
        this.tableCardPos.children[i].runAction(seqAnimation);
      },
      chipFlyAnimation: function chipFlyAnimation(startPos, endPos) {
        var _this8 = this;
        if (!dataLogic.isHide) {
          var _loop3 = function _loop3(i) {
            var chip_pfb = cc.instantiate(_this8.chipPfb);
            chip_pfb.parent = _this8.ef_finalChipAniPos;
            chip_pfb.getComponent(cc.Sprite).spriteFrame = _this8.chipSpriteFrame[6 - i];
            chip_pfb.position = startPos;
            chip_pfb.runAction(cc.sequence(cc.delayTime(.1 * i), cc.moveTo(.4, endPos), cc.callFunc(function() {
              0 == i && audioMgr.playEffect(_this8.chipFlyToPeopleAudio);
              chip_pfb.opacity = 0;
            })));
          };
          for (var i = 0; i < 6; i++) _loop3(i);
        }
      },
      setPlayerBetState: function setPlayerBetState(UISeatId, state) {
        var player = this.playerArr[UISeatId];
        var stateNode = player.getChildByName("state");
        stateNode.active = true;
        if (UISeatId === constant.SelfUISeatId && "fold" == state) {
          dzDataLogic.isFold = true;
          dataLogic.isFriendRoom || (dzDataLogic.gameState = -1);
        }
        switch (state) {
         case "check":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "check");
          break;

         case "follow":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "follow");
          break;

         case "AddChip":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "addChip");
          break;

         case "AllIn":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "allIn");
          break;

         case "fold":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "fold");
          break;

         case "smallBlind":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "smallBlind");
          break;

         case "bigBlind":
          player.getChildByName("state").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.betStateAtlas, "bigBlind");
        }
      },
      dealTableCard: function dealTableCard(shareCards) {
        var _this9 = this;
        dzDataLogic.setShareCards(shareCards);
        if (-1 != shareCards.indexOf(",")) (function() {
          var cardsArr = shareCards.split(",");
          audioMgr.playEffect(_this9.fanpaiAudio);
          var _loop4 = function _loop4(i) {
            var delayTime = .2 * (i + 1);
            dataLogic.isHide ? _this9.showTableCard(i, cardsArr[i]) : _this9.scheduleOnce(function() {
              this.doCardAction(i, cardsArr[i]);
            }, delayTime);
            cc.log(i, cardsArr[i], "\u53d1\u4e09\u5f20\u516c\u5171\u724c");
          };
          for (var i = 0; i < cardsArr.length; i++) _loop4(i);
        })(); else if (dataLogic.isHide) this.showTableCard(dzDataLogic.shareCards.length - 1, shareCards); else {
          var startCardIndex = dzDataLogic.shareCards.length - 1;
          if (this.hasDealCardNum != startCardIndex) this.scheduleOnce(function() {
            _this9.doCardAction(startCardIndex, shareCards);
            3 == startCardIndex ? audioMgr.playEffect(_this9.hepaiAudio) : audioMgr.playEffect(_this9.zhuanpaiAudio);
          }, .5 * (startCardIndex - this.hasDealCardNum)); else {
            this.doCardAction(startCardIndex, shareCards);
            3 == startCardIndex ? audioMgr.playEffect(this.hepaiAudio) : audioMgr.playEffect(this.zhuanpaiAudio);
          }
        }
        this.hideChipInfoAndPlayerBetState();
      },
      setMaxCardType: function setMaxCardType(handCards, shareCards, UISeatId) {
        var resultArr = void 0, relResult = void 0;
        try {
          resultArr = dzDataLogic.getMaxCardType(handCards, shareCards);
        } catch (e) {
          resultArr = [ 1, 11, 21, 31, 41, 12 ];
        }
        relResult = resultArr[0];
        this.resetSpecialCardTypeEffect(UISeatId);
        this.setSpecialCardTypeEffect(dzDataLogic.handCard, resultArr, UISeatId, 0);
        this.setCardTypeResult(UISeatId, relResult);
      },
      lightPlayerMaxCard: function lightPlayerMaxCard() {
        this.setMaxCardType(dzDataLogic.handCard, dzDataLogic.shareCards, constant.SelfUISeatId);
      },
      setPlayerMaxCardTypeResult: function setPlayerMaxCardTypeResult(handCards, shareCards, UISeatId) {
        if (handCards.length && shareCards.length) {
          var resultArr = void 0, relResult = void 0;
          try {
            resultArr = dzDataLogic.getMaxCardType(handCards, shareCards);
          } catch (e) {
            resultArr = [ 1, 11, 21, 31, 41, 12 ];
          }
          relResult = resultArr[0];
          this.resetSpecialCardTypeEffect(UISeatId);
          this.setCardTypeResult(UISeatId, relResult);
          return relResult;
        }
      },
      setSpecialCardTypeEffect: function setSpecialCardTypeEffect(playerHandCard, result, UISeatId, isLiftCard) {
        var _this10 = this;
        var handnodeArr = [];
        var player = this.playerArr[UISeatId];
        var handCard0 = player.getChildByName("cardInfo").getChildByName("card0").getChildByName("cardFrame");
        var handCard1 = player.getChildByName("cardInfo").getChildByName("card1").getChildByName("cardFrame");
        if (-1 == dzDataLogic.gameState) {
          handCard0.getComponent(cc.Sprite).spriteFrame = this.cardEffect[1];
          handCard1.getComponent(cc.Sprite).spriteFrame = this.cardEffect[1];
        } else {
          handCard0.getComponent(cc.Sprite).spriteFrame = this.cardEffect[0];
          handCard1.getComponent(cc.Sprite).spriteFrame = this.cardEffect[0];
        }
        handnodeArr = [ handCard0, handCard1 ];
        var compareResult = void 0;
        var cardTypeColor = void 0, resultCh = void 0;
        var isTongHua = 0;
        var tonghuaArr = [ 10, 9, 6 ];
        if (-1 != tonghuaArr.indexOf(result[0])) {
          isTongHua = 1;
          cardTypeColor = result[result.length - 1];
          result.pop();
        }
        resultCh = result.shift();
        compareResult = result;
        var _loop5 = function _loop5(i) {
          var cardValue = dataLogic.getCardValue(dzDataLogic.shareCards[i]);
          var cardColor = dataLogic.getCardCorol(dzDataLogic.shareCards[i]);
          var isThisCardSelect = 0;
          if (isTongHua) {
            if (-1 != compareResult.indexOf(cardValue) && cardColor == cardTypeColor) {
              isThisCardSelect = 1;
              compareResult.splice(compareResult.indexOf(cardValue), 1);
              _this10.resetCardArr.push(i);
            }
          } else if (-1 != compareResult.indexOf(cardValue)) {
            isThisCardSelect = 1;
            compareResult.splice(compareResult.indexOf(cardValue), 1);
            _this10.resetCardArr.push(i);
          }
          if (isThisCardSelect) {
            -1 == dzDataLogic.gameState ? _this10.tableCardPos.children[i].getChildByName("cardFrame").getComponent(cc.Sprite).spriteFrame = _this10.cardEffect[1] : _this10.tableCardPos.children[i].getChildByName("cardFrame").getComponent(cc.Sprite).spriteFrame = _this10.cardEffect[0];
            _this10.tableCardPos.children[i].getChildByName("cardFrame").active = true;
            isLiftCard && (dataLogic.isHide ? _this10.tableCardPos.children[i].position = dzConstant.bigCardPos[i].add(cc.v2(0, 15)) : _this10.tableCardPos.children[i].runAction(cc.sequence(cc.delayTime(.3), cc.moveBy(.3, 0, 8), cc.callFunc(function() {
              _this10.tableCardPos.children[i].opacity = 255;
            }, _this10))));
          }
        };
        for (var i = 0; i < dzDataLogic.shareCards.length; i++) _loop5(i);
        for (var j = 0; j < playerHandCard.length; j++) {
          var _cardValue = dataLogic.getCardValue(playerHandCard[j]);
          var _cardColor = dataLogic.getCardCorol(playerHandCard[j]);
          var _isThisCardSelect = 0;
          if (isTongHua) {
            if (-1 != compareResult.indexOf(_cardValue) && _cardColor == cardTypeColor) {
              _isThisCardSelect = 1;
              compareResult.splice(compareResult.indexOf(_cardValue), 1);
            }
          } else if (-1 != compareResult.indexOf(_cardValue)) {
            _isThisCardSelect = 1;
            compareResult.splice(compareResult.indexOf(_cardValue), 1);
          }
          handnodeArr[j].active = !!_isThisCardSelect;
        }
      },
      hidePlayerCardTypeBg: function hidePlayerCardTypeBg(UISeatId) {
        var player = this.playerArr[UISeatId];
        var cardTypeBg = player.getChildByName("cardInfo").getChildByName("cardTypeBg");
        var handCard0 = player.getChildByName("cardInfo").getChildByName("card0").getChildByName("cardFrame");
        var handCard1 = player.getChildByName("cardInfo").getChildByName("card1").getChildByName("cardFrame");
        handCard0.active = handCard1.active = false;
        cardTypeBg.active = false;
      },
      setCardTypeBgWidth: function setCardTypeBgWidth(UISeatId, addWidth) {
        var player = this.playerArr[UISeatId];
        var cardTypeBg = player.getChildByName("cardInfo").getChildByName("cardTypeBg");
        var _width = cardTypeBg.width;
        cardTypeBg.width = -1 != addWidth ? _width + addWidth : 106;
      },
      resetSpecialCardTypeEffect: function resetSpecialCardTypeEffect(UISeatId) {
        var player = this.playerArr[UISeatId];
        for (var i = 0; i < 5; i++) {
          this.tableCardPos.children[i].getChildByName("cardFrame").active = false;
          if (this.resetCardArr.length && -1 != this.resetCardArr.indexOf(i) && this.isGameEnd) {
            this.tableCardPos.children[i].stopAction();
            this.tableCardPos.children[i].position = dzConstant.bigCardPos[i];
            this.tableCardPos.children[i].opacity = 210;
          }
        }
        var handCard0 = player.getChildByName("cardInfo").getChildByName("card0").getChildByName("cardFrame");
        var handCard1 = player.getChildByName("cardInfo").getChildByName("card1").getChildByName("cardFrame");
        handCard0.active = handCard1.active = false;
        this.resetCardArr = [];
      },
      playBetAudio: function playBetAudio(type, UISeatId) {
        var _sex = dzDataLogic.playerData[UISeatId].sex;
        1 == _sex ? this.playManAudio(type) : this.playWomanAudio(type);
      },
      playManAudio: function playManAudio(type) {
        switch (type) {
         case "fold":
          audioMgr.playEffect(this.manFoldAudio);
          break;

         case "follow":
          audioMgr.playEffect(this.manCallAudio);
          audioMgr.playEffect(this.chipFollowAudio);
          break;

         case "pass":
          audioMgr.playEffect(this.passAudio);
          break;

         case "AddChip":
          audioMgr.playEffect(this.manRaiseAudio);
          audioMgr.playEffect(this.addChipAudio);
          break;

         case "AllIn":
          audioMgr.playEffect(this.manAllInAudio);
          audioMgr.playEffect(this.allInScreamAudio);
        }
      },
      playWomanAudio: function playWomanAudio(type) {
        switch (type) {
         case "fold":
          audioMgr.playEffect(this.womanFoldAudio);
          break;

         case "follow":
          audioMgr.playEffect(this.womanCallAudio);
          audioMgr.playEffect(this.chipFollowAudio);
          break;

         case "pass":
          audioMgr.playEffect(this.passAudio);
          break;

         case "AddChip":
          audioMgr.playEffect(this.womanRaiseAudio);
          audioMgr.playEffect(this.addChipAudio);
          break;

         case "AllIn":
          audioMgr.playEffect(this.womanAllInAudio);
          audioMgr.playEffect(this.allInScreamAudio);
        }
      },
      hideChipInfoAndPlayerBetState: function hideChipInfoAndPlayerBetState() {
        var _this11 = this;
        if (dataLogic.isHide) {
          for (var i = 0; i < this.chipInfoArr.length; i++) this.chipInfoArr[i].active = false;
          for (var _i5 = 0; _i5 < this.playerArr.length; _i5++) {
            var _UISeatId3 = dataLogic.getUISeatIdBySeatId(_i5);
            -1 != this.foldPlayerArr.indexOf(_UISeatId3) && 1 == dzDataLogic.gameState ? this.playerArr[_UISeatId3].getChildByName("state").active = true : this.playerArr[_UISeatId3].getChildByName("state").active = false;
          }
        } else this.scheduleOnce(function() {
          for (var _i6 = 0; _i6 < _this11.chipInfoArr.length; _i6++) _this11.chipInfoArr[_i6].active = false;
          for (var _i7 = 0; _i7 < _this11.playerArr.length; _i7++) {
            var _UISeatId4 = dataLogic.getUISeatIdBySeatId(_i7);
            -1 != _this11.foldPlayerArr.indexOf(_UISeatId4) && 1 == dzDataLogic.gameState ? _this11.playerArr[_UISeatId4].getChildByName("state").active = true : _this11.playerArr[_UISeatId4].getChildByName("state").active = false;
          }
        }, .4);
      },
      runWinnerCardAction: function runWinnerCardAction(playerHandCard, cardTypeResult, UISeatId) {
        this.resetSpecialCardTypeEffect(UISeatId);
        this.setSpecialCardTypeEffect(playerHandCard, cardTypeResult, UISeatId, 1);
      },
      setPlayerWinOrLoseMoney: function setPlayerWinOrLoseMoney(UISeatId, money) {
        var player = this.playerArr[UISeatId];
        money = money.toFixed(2);
        var winMoney = player.getChildByName("winMoney");
        winMoney.y = 0;
        if (money >= 0) {
          winMoney.getComponent(cc.Label).font = this.winChipNumFont;
          winMoney.getComponent(cc.Label).string = "+" + money;
        } else {
          winMoney.getComponent(cc.Label).font = this.loseChipNumFont;
          winMoney.getComponent(cc.Label).string = money;
        }
      },
      dispendLeaveCard: function dispendLeaveCard(startPos, cards) {
        this.doCardAction(startPos, cards);
      },
      showTableCard: function showTableCard(i, cards) {
        this.tableCardPos.children[i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, cards);
        this.tableCardPos.children[i].setScale(3, 3);
        this.tableCardPos.children[i].position = dzConstant.bigCardPos[i];
        this.tableCardPos.children[i].active = true;
        this.tableCardPos.children[i].getComponent(cc.Animation).stop();
      },
      gameOver: function gameOver(data, isRunChipFlyToPool) {
        var _this14 = this;
        var endSeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.setPlayerBalance(endSeatId, data.balance);
        var maxWinPlayerSeatId = 0, maxWinMoney = data.endData[0];
        var finalCardTypeResult = void 0;
        var actionDelayTime = void 0;
        var liftCardAniTime = 1.3;
        this.tiedPlayerIdArr = [];
        this.resetCardArr = [];
        dzDataLogic.gameState = -1;
        this.isGameEnd = true;
        this.hideChipInfoAndPlayerBetState();
        this.hidePlayerCardTypeBg(constant.SelfUISeatId);
        this.unschedule(this.lightPlayerMaxCard);
        for (var i = 0; i < data.endData.length; i++) {
          var _UISeatId5 = dataLogic.getUISeatIdBySeatId(i);
          if (data.endData[i] > maxWinMoney) {
            maxWinMoney = data.endData[i];
            maxWinPlayerSeatId = i;
            this.tiedPlayerIdArr = [ maxWinPlayerSeatId ];
          } else if (data.endData[i] == maxWinMoney && -1 == this.foldPlayerArr.indexOf(_UISeatId5)) {
            maxWinMoney = data.endData[i];
            this.tiedPlayerIdArr.push(i);
          }
        }
        this.func1 = function() {
          if (dzDataLogic.shareCards.length < 5 && !data.isBefore) {
            this.tableCardPos.children.length || this.initTableBackCard();
            if (dzDataLogic.shareCards.length) {
              var hasDispendCard = dzDataLogic.shareCards.length;
              var allCards = data.shareCards.split(",");
              var needL = allCards.length - hasDispendCard;
              var startIndex = hasDispendCard;
              for (var _i8 = 0; _i8 < needL; _i8++) dataLogic.isHide ? this.showTableCard(_i8 + startIndex, allCards[_i8 + startIndex]) : this.scheduleOnce(this.dispendLeaveCard.bind(this, _i8 + startIndex, allCards[_i8 + startIndex]), .2 * (_i8 + 1));
              dzDataLogic.setShareCards(data.shareCards);
            } else this.dealTableCard(data.shareCards);
          }
        };
        this.func2 = function() {
          for (var _i9 = 0; _i9 < data.endData.length; _i9++) {
            var _UISeatId6 = dataLogic.getUISeatIdBySeatId(_i9);
            var playerHandCard = data.cards[_i9];
            this.setPlayerWinOrLoseMoney(_UISeatId6, data.endData[_i9]);
            this.resetSpecialCardTypeEffect(_UISeatId6);
            if (data.isBefore) this.hidePlayerCardTypeBg(constant.SelfUISeatId); else {
              _UISeatId6 != constant.SelfUISeatId && -1 === this.foldPlayerArr.indexOf(_UISeatId6) && this.showFinalPlayerHandCard(_UISeatId6, data.cards[_i9], isRunChipFlyToPool);
              if (data.endData[_i9] >= 0) {
                this.setPlayerMaxCardTypeResult(playerHandCard, dzDataLogic.shareCards, _UISeatId6);
                this.playerArr[_UISeatId6].getChildByName("cardInfo").getChildByName("cardTypeBg").active = false;
              } else this.hidePlayerCardTypeBg(_UISeatId6);
            }
          }
        };
        this.func3 = function() {
          var _this12 = this;
          var _loop6 = function _loop6(_i10) {
            var playerId = _this12.tiedPlayerIdArr[_i10];
            var playerUISeatId = dataLogic.getUISeatIdBySeatId(playerId);
            if (dataLogic.isHide) _this12.playerArr[playerUISeatId].getChildByName("cardInfo").getChildByName("cardTypeBg").active = true; else {
              var _delayTime = playerUISeatId == constant.SelfUISeatId ? .5 : 1.2;
              _this12.scheduleOnce(function() {
                _this12.playerArr[playerUISeatId].getChildByName("cardInfo").getChildByName("cardTypeBg").active = true;
              }, _delayTime);
            }
          };
          for (var _i10 = 0; _i10 < this.tiedPlayerIdArr.length; _i10++) _loop6(_i10);
        };
        this.func4 = function() {
          var _this13 = this;
          var l = this.tiedPlayerIdArr.length - 1;
          var countIndex = 0;
          this.schedule(function() {
            var playerId = _this13.tiedPlayerIdArr[countIndex];
            var playerHandCard = data.cards[playerId];
            var playerUISeatId = dataLogic.getUISeatIdBySeatId(playerId);
            var cardTypeResult;
            try {
              cardTypeResult = dzDataLogic.getMaxCardType(playerHandCard, dzDataLogic.shareCards);
            } catch (e) {
              cardTypeResult = [ 1, 11, 21, 31, 41, 12 ];
            }
            var resultCh = cardTypeResult[0] - 1;
            finalCardTypeResult = dzConstant.cardTypeArr[resultCh];
            _this13.runWinnerCardAction(playerHandCard, cardTypeResult, playerUISeatId);
            var endPos = _this13.playerArr[playerUISeatId].position;
            var startPos = cc.v2(-40, _this13.totalChipNum.position.y);
            _this13.totalChipNum.active = false;
            _this13.chipFlyAnimation(startPos, endPos);
            if (0 == countIndex) {
              var finalCardAni = void 0;
              switch (finalCardTypeResult) {
               case "\u846b\u82a6":
                var ef_hulu_pfb = cc.instantiate(_this13.ef_hulu_pfb);
                ef_hulu_pfb.parent = _this13.ef_finalCardAni;
                finalCardAni = ef_hulu_pfb.getComponent(cc.Animation);
                audioMgr.playEffect(_this13.cardTypeAudio[0]);
                break;

               case "\u56db\u6761":
                var ef_sitiao_pfb = cc.instantiate(_this13.ef_sitiao_pfb);
                ef_sitiao_pfb.parent = _this13.ef_finalCardAni;
                finalCardAni = ef_sitiao_pfb.getComponent(cc.Animation);
                audioMgr.playEffect(_this13.cardTypeAudio[1]);
                break;

               case "\u540c\u82b1\u987a":
                var ef_ths_pfb = cc.instantiate(_this13.ef_ths_pfb);
                ef_ths_pfb.parent = _this13.ef_finalCardAni;
                finalCardAni = ef_ths_pfb.getComponent(cc.Animation);
                audioMgr.playEffect(_this13.cardTypeAudio[2]);
                break;

               case "\u7687\u5bb6\u540c\u82b1\u987a":
                var ef_hjths_pfb = cc.instantiate(_this13.ef_hjths_pfb);
                ef_hjths_pfb.parent = _this13.ef_finalCardAni;
                finalCardAni = ef_hjths_pfb.getComponent(cc.Animation);
                audioMgr.playEffect(_this13.cardTypeAudio[3]);
              }
              if (finalCardAni) {
                _this13.ef_finalCardAni.active = true;
                finalCardAni.play();
              }
            }
            countIndex++;
          }, liftCardAniTime, l, 0);
        };
        this.func5 = function() {
          for (var _i11 = 0; _i11 < data.endData.length; _i11++) {
            var _UISeatId7 = dataLogic.getUISeatIdBySeatId(_i11);
            var player = this.playerArr[_UISeatId7];
            var winMoney = player.getChildByName("winMoney");
            winMoney.active = true;
            var deltaY = player.height / 2 + 20;
            dataLogic.isHide ? winMoney.y = 110 : winMoney.runAction(cc.moveBy(.5, 0, deltaY));
            player.getChildByName("state").active = false;
            this.setPlayerBalance(_UISeatId7, data.balances[_i11]);
            var _playerInfo = dataLogic.playerInfo[_i11];
            _playerInfo.balance = this.getPlayerBalance(_UISeatId7);
            data.endData[_i11] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * data.endData[_i11]) / 100);
            data.isEnd && (_playerInfo.gameTimes += 1);
            this.playerArr[_i11]._playerInfo = _playerInfo;
            if (dataLogic.isFriendRoom) {
              this.gamingPlayerToUnready();
              this.updateTips();
              this.btReady.node.active = true;
            } else this.matchingBtn.active = true;
          }
          if (1 == this.tiedPlayerIdArr.length) {
            var _UISeatId8 = dataLogic.getUISeatIdBySeatId(this.tiedPlayerIdArr[0]);
            this.showFinalWinnerEffect(_UISeatId8);
          }
        };
        this.func6 = function() {
          var maxWinPlayerUISeatId = dataLogic.getUISeatIdBySeatId(maxWinPlayerSeatId);
          var desPosition = this.playerArr[maxWinPlayerUISeatId].position;
          this.winBeforeCompare.position = desPosition.add(cc.v2(0, -this.playerArr[maxWinPlayerUISeatId].height / 2 + 30));
        };
        switch (dzDataLogic.shareCards.length) {
         case 0:
          actionDelayTime = 1.8;
          break;

         case 3:
          actionDelayTime = 1.5;
          break;

         case 4:
          actionDelayTime = 1;
          break;

         case 5:
          actionDelayTime = .5;
        }
        if (data.isBefore) if (dataLogic.isHide) {
          this.func2();
          this.func5();
          this.func6();
          this.unschedule(this.checkPlayerStateAndRunChipFlyAction);
          this.totalChipNum.active = false;
        } else this.node.runAction(cc.sequence(cc.callFunc(this.func2, this), cc.delayTime(.5), cc.callFunc(function() {
          _this14.hideChipInfoAndPlayerBetState();
          _this14.totalChipNum.active = false;
          for (var _i12 = 0; _i12 < _this14.tiedPlayerIdArr.length; _i12++) {
            var maxWinPlayerUISeatId = dataLogic.getUISeatIdBySeatId(_this14.tiedPlayerIdArr[_i12]);
            var endPos = _this14.playerArr[maxWinPlayerUISeatId].position;
            var startPos = cc.v2(-40, _this14.totalChipNum.position.y);
            _this14.chipFlyAnimation(startPos, endPos);
          }
        }, this), cc.delayTime(.5), cc.callFunc(this.func6, this), cc.delayTime(1), cc.callFunc(this.func5, this))); else if (dataLogic.isHide) {
          this.func1();
          this.func2();
          this.func3();
          this.func5();
          this.unschedule(this.checkPlayerStateAndRunChipFlyAction);
          this.totalChipNum.active = false;
          var l = this.tiedPlayerIdArr.length - 1;
          var playerId = this.tiedPlayerIdArr[l];
          var playerHandCard = data.cards[playerId];
          var _playerUISeatId = dataLogic.getUISeatIdBySeatId(playerId);
          var cardTypeResult = void 0;
          try {
            cardTypeResult = dzDataLogic.getMaxCardType(playerHandCard, dzDataLogic.shareCards);
          } catch (e) {
            cardTypeResult = [ 1, 11, 21, 31, 41, 12 ];
          }
          this.runWinnerCardAction(playerHandCard, cardTypeResult, _playerUISeatId);
        } else this.node.runAction(cc.sequence(cc.callFunc(this.func1, this), cc.delayTime(actionDelayTime), cc.callFunc(this.func2, this), cc.callFunc(this.func3, this), cc.delayTime(isRunChipFlyToPool ? 1.2 : .5), cc.callFunc(this.func4, this), cc.delayTime(this.tiedPlayerIdArr.length * liftCardAniTime + 1.25), cc.callFunc(this.func5, this)));
        this.closeAllPanel();
        this.unschedule(this.timeOutFold);
        this.timer.x = -1e4;
        this.btnGroup2.active = this.btnGroup1.active = false;
        dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
      },
      showFinalWinnerEffect: function showFinalWinnerEffect(UISeatId) {
        var userInfo = this.playerArr[UISeatId].getChildByName("userInfo");
        userInfo.getComponent(cc.Animation).play();
        this.visitingEf[0].position = this.playerArr[UISeatId].position;
        this.visitingEf[1].position = this.playerArr[UISeatId].position;
        this.visitingEf[0].getComponent(cc.Animation).play();
        this.visitingEf[1].getComponent(cc.Animation).play();
      },
      closeAllPanel: function closeAllPanel() {
        this.hideAllInPanel();
        this.chipPanel.active = false;
        this.setCarryChipNumPanelNode && this.setCarryChipNumPanelNode.parent && kf.killObj(this.setCarryChipNumPanelNode);
      },
      animationFinished: function animationFinished() {
        this.ef_finalCardAni.active = false;
        this.removeNodesChildren(this.ef_finalCardAni);
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) this.setMatchingToastView(true, canCancel); else {
          this.matchingBtn.active = true;
          this.setMatchingToastView(false);
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      setBetNumWidth: function setBetNumWidth() {
        this.betNumTxt._updateRenderData(true);
        this.anteBg.width = this.betNumTxt.node.width + 40;
        this.playIdBg.x = this.anteBg.x + this.anteBg.width + 20;
      },
      setPlayIdWidth: function setPlayIdWidth() {
        this.gameIdTxt._updateRenderData(true);
        this.playIdBg.width = this.gameIdTxt.node.width + 40;
      },
      setPlayIdBgState: function setPlayIdBgState() {
        this.setPlayIdWidth();
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.playIdBg.x + this.playIdBg.width + 20);
      },
      onLoad: function onLoad() {
        var _this15 = this;
        this.baseInit(constant.GameId.Dzpk);
        this.registerEvent();
        kf.createPool(constant.PoolId.SetCarryChipNumPanel, 1, this.setCarryChipNumPanelPfb, "pfbCommon");
        this.roomKey = dataLogic.curRoomKey - 1;
        this.range = [];
        this.tiedPlayerIdArr = [];
        this.resetCardArr = [];
        this.foldPlayerArr = [];
        this.hasDealCardNum = 0;
        this.PlayerBetNum = [];
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        dataLogic.carryChipNumData = cc.sys.localStorage.getItem("game_carryChipNumData") ? JSON.parse(cc.sys.localStorage.getItem("game_carryChipNumData")) : dataLogic.carryChipNumData;
        dataLogic.autoFreshChipNum = cc.sys.localStorage.getItem("game_autoFreshChipNum") ? +cc.sys.localStorage.getItem("game_autoFreshChipNum") : dataLogic.autoFreshChipNum;
        this.betNumTxt.string = "\u76f2\u6ce8\uff1a" + dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].ante;
        this.gameIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a";
        this.setBetNumWidth();
        this.setPlayIdWidth();
        this.resetGameData();
        this.showSelfUI();
        if (dataLogic.needRecover) {
          this.doneGameRecover = false;
          this.matchingBtn.active = false;
          dzDataLogic.isOffLine = 1;
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        } else this.matchingBtn.active = true;
        this.cardTypePanel.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this15.cardTypePanel.active = false;
        });
        var playerPos = [ {
          x: 355,
          y: -96
        }, {
          x: -19,
          y: -96
        }, {
          x: -162,
          y: 114
        }, {
          x: 36,
          y: 69
        }, {
          x: -36,
          y: 69
        }, {
          x: 173,
          y: 32
        } ];
        for (var i = 0; i < this.playerArr.length; i++) {
          this.playerArr[i].playerPos = playerPos[i];
          this.bindLongTouchEvent(this.playerArr[i]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setFoldPlayerData: function setFoldPlayerData(foldPlayerUISeatId) {
        -1 == this.foldPlayerArr.indexOf(foldPlayerUISeatId) && this.foldPlayerArr.push(foldPlayerUISeatId);
      },
      hideAllPlayerAndChipInfo: function hideAllPlayerAndChipInfo() {
        for (var i = 0; i < this.playerArr.length; i++) {
          this.playerArr[i].active = false;
          this.chipInfoArr[i].active = false;
        }
      },
      showSelfUI: function showSelfUI() {
        var playerInfo = {
          headUrl: dataLogic.userHeadUrl,
          nickName: dataLogic.userName,
          balance: dataLogic.carryChipNumData[this.roomKey].toFixed(2)
        };
        var player = this.playerArr[constant.SelfUISeatId];
        var userInfo = player.getChildByName("userInfo");
        var avatar = userInfo.getChildByName("head").getComponent(cc.Sprite);
        this.setLabelValue(userInfo.getChildByName("nickname"), playerInfo.nickName);
        this.setLabelValue(userInfo.getChildByName("balance"), playerInfo.balance);
        var self = this;
        resMgr.loadSingleRes("baoWang" + playerInfo.headUrl.replace(".jpg", ""), function(res) {
          avatar.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      renderPlayerInfo: function renderPlayerInfo(UISeatId, playerInfo) {
        if (!playerInfo.headUrl) return;
        var player = this.playerArr[UISeatId];
        var userInfo = player.getChildByName("userInfo");
        var avatar = userInfo.getChildByName("head").getComponent(cc.Sprite);
        UISeatId != constant.SelfUISeatId && this.setLabelValue(userInfo.getChildByName("nickname"), playerInfo.nickName);
        this.setLabelValue(userInfo.getChildByName("balance"), playerInfo.balance);
        resMgr.loadSingleRes("baoWang" + playerInfo.headUrl.replace(".jpg", ""), function(res) {
          avatar.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      showNotice: function showNotice(balance) {
        switch (dzDataLogic.showNoticeType) {
         case 1:
          this.noticePanelTxt.string = "\u4e0b\u4e00\u5c40\u60a8\u7684\u724c\u684c\u643a\u5e26\u91d1\u989d\u5c06\u8c03\u6574\u81f3" + dataLogic.carryChipNumData[this.roomKey];
          break;

         case 2:
          this.noticePanelTxt.string = "\u60a8\u7684\u724c\u684c\u91d1\u989d\u5df2\u8c03\u6574\u81f3" + balance;
          break;

         case 3:
          this.noticePanelTxt.string = "\u7531\u4e8e\u60a8\u7684\u724c\u684c\u91d1\u989d\u4e0d\u8db3\u5df2\u81ea\u52a8\u8c03\u6574\u5230" + balance;
          break;

         case 4:
          this.noticePanelTxt.string = "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u5df2\u4e3a\u60a8\u53d6\u6d88\u81ea\u52a8\u5e26\u5165\u91d1\u989d";
          break;

         case 5:
          this.noticePanelTxt.string = "\u60a8\u7684\u724c\u684c\u91d1\u989d\u5927\u4e8e\u6700\u5927\u643a\u5e26\u91d1\u989d\u5df2\u4e3a\u60a8\u8c03\u81f3" + balance;
        }
        dzDataLogic.needShowNotice = dzDataLogic.needShowNotice - 1;
        if (!dataLogic.isHide) {
          this.noticePanel.opacity = 255;
          this.noticePanel.position = cc.v2(0, cc.winSize.height / 2 + this.noticePanel.height / 2);
          this.noticePanel.runAction(cc.moveBy(.3, 0, -78));
          this.scheduleOnce(function() {
            var _this16 = this;
            this.noticePanel.runAction(cc.sequence(cc.moveBy(.3, 0, 78), cc.callFunc(function() {
              _this16.noticePanel.opacity = 0;
            }, this)));
          }, 1.8);
        }
      },
      resetMoneyState: function resetMoneyState(player) {
        var winMoney = player.getChildByName("winMoney");
        winMoney.stopAllActions();
        winMoney.active = false;
        winMoney.getComponent(cc.Label).string = "";
        winMoney.y = 0;
      },
      resetHandCardData: function resetHandCardData(player) {
        var cardInfo = player.getChildByName("cardInfo");
        cardInfo.active = false;
        var cardTypeBg = cardInfo.getChildByName("cardTypeBg");
        cardTypeBg.active = false;
        cardTypeBg.width = 106;
        var cardFrame1 = cardInfo.getChildByName("card0").getChildByName("cardFrame");
        var cardFrame2 = cardInfo.getChildByName("card1").getChildByName("cardFrame");
        cardFrame1.active = cardFrame2.active = false;
        var card0 = cardInfo.getChildByName("card0").getChildByName("cardBg");
        var card1 = cardInfo.getChildByName("card1").getChildByName("cardBg");
        card0.getComponent(cc.Sprite).spriteFrame = card1.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.cardAtlas, "backCard");
        card0.active = card1.active = false;
      },
      resetGameData: function resetGameData() {
        for (var i = 0; i < this.chipInfoArr.length; i++) {
          var player = this.playerArr[i];
          this.chipInfoArr[i].active = false;
          this.playerArr[constant.SelfUISeatId].active = true;
          player.getChildByName("state").active = false;
          var cardTypeBg = player.getChildByName("cardInfo").getChildByName("cardTypeBg");
          cardTypeBg.width = 106;
          player.active = false;
          player.setScale(1, 1);
          player.opacity = 255;
          this.resetHandCardData(player);
          this.resetMoneyState(player);
        }
        for (var _i13 = 0; _i13 < this.addChipBtnGroup.length; _i13++) this.addChipBtnGroup[_i13].getComponent(cc.Button).interactable = true;
        this.isGameEnd = false;
        this.tableCardPos.removeAllChildren();
        this.backCardPos.removeAllChildren();
        this.matchingBtn.active = false;
        this.totalChipNum.active = false;
        this.gameIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a";
        this.totalChipTxt.string = "";
        this.btnGroup1.active = this.btnGroup2.active = false;
        this.btnCheck.active = false;
        this.dealer.x = -1e4;
        this.removePlayerWinEffect();
        this.fold.x = -1e4;
        this.chipPanel.active = false;
        this.isTouchSlider = false;
        this.dealer.setScale(1, 1);
        this.dealer.opacity = 255;
        this.winBeforeCompare.x = -1e4;
        this.removeNodesChildren(this.ef_finalCardAni);
        this.btnAddChip.getComponent(cc.Button).interactable = true;
        this.btnAddChipTxt.string = "\u52a0\u6ce8";
        this.followVChipNum.string = "";
        this.resetAutoBetState();
        this.unscheduleAllCallbacks();
        this.timer.x = -1e4;
        this.tiedPlayerIdArr = [];
        this.foldPlayerArr = [];
        this.noticePanel.opacity = 0;
        this.hasDealCardNum = 0;
        this.setPlayIdWidth();
        this.setPlayIdBgState();
        this.PlayerBetNum = [];
        this.btnAddChip.getChildByName("btnBg").getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);
      },
      removeNodesChildren: function removeNodesChildren(parentNode) {
        for (var i = parentNode.children.length - 1; i >= 0; i--) parentNode.children[i].destroy();
      },
      initTableBackCard: function initTableBackCard() {
        for (var i = 0; i < 5; i++) {
          this.instantiateBackCard("table");
          this.tableCardPos.children[i].active = false;
          this.tableCardPos.children[i].position = cc.v2(0, 0);
        }
      },
      instantiateBackCard: function instantiateBackCard(type) {
        var backCardPfb = cc.instantiate(this.backCardPfb);
        backCardPfb.parent = "table" === type ? this.tableCardPos : this.backCardPos;
      },
      nodeTurnToHide: function nodeTurnToHide(nodeArr) {
        for (var i = 0; i < nodeArr.length; i++) nodeArr[i].active = false;
      },
      instantiatePfb: function instantiatePfb(pfb, pfbParent) {
        var newPfb = cc.instantiate(pfb);
        newPfb.parent = pfbParent;
        newPfb.setPosition(0, 0);
        pfbParent.active = false;
      },
      setLabelValue: function setLabelValue(node, val) {
        node.getComponent(cc.Label).string = val;
      },
      setSpriteUrl: function setSpriteUrl(node, atalas, name) {
        node.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(atalas, name);
      },
      randomFrom: function randomFrom(lowerValue, upperValue) {
        return parseFloat(Math.random() * (upperValue - lowerValue + 1) + lowerValue + 1).toFixed(2);
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  ebgConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "099ebvAdLVNxpgNgx4iWmCX", "ebgConstant");
    "use strict";
    window.ebgConstant = window.ebgConstant || {};
    ebgConstant.maxPlayerNum = 4;
    ebgConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    ebgConstant.PostMatching = {
      action: "JoinRoom",
      roomId: "101"
    };
    var _action = "DoPlay";
    ebgConstant.PostVillage = {
      action: _action,
      eventName: "village",
      villageNum: -1
    };
    ebgConstant.PostBet = {
      action: _action,
      eventName: "bet",
      betNum: -1
    };
    ebgConstant.OpenCards = {
      action: _action,
      eventName: "openCards"
    };
    cc._RF.pop();
  }, {} ],
  ebgDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e8a4430tqlLj4to7VseY0FJ", "ebgDataLogic");
    "use strict";
    window.ebgDataLogic = {
      init: function init() {
        this.selfSeatId = 0;
        this.qzBtnConfig = [];
        this.betBtnConfig = [];
        this.playerState = [];
        this.roomId = "101";
        this.chnNumChar = [ "\u9cd6\u5341", "\u4e00\u70b9", "\u4e00\u70b9\u534a", "\u4e8c\u70b9", "\u4e8c\u70b9\u534a", "\u4e09\u70b9", "\u4e09\u70b9\u534a", "\u56db\u70b9", "\u56db\u70b9\u534a", "\u4e94\u70b9", "\u4e94\u70b9\u534a", "\u516d\u70b9", "\u516d\u70b9\u534a", "\u4e03\u70b9", "\u4e03\u70b9\u534a", "\u516b\u70b9", "\u516b\u70b9\u534a", "\u4e5d\u70b9", "\u4e5d\u70b9\u534a", "\u4e8c\u516b\u6760", "\u4e00\u5b9d", "\u4e8c\u5b9d", "\u4e09\u5b9d", "\u56db\u5b9d", "\u4e94\u5b9d", "\u516d\u5b9d", "\u4e03\u5b9d", "\u516b\u5b9d", "\u4e5d\u5b9d", "\u5929\u738b" ];
      },
      getCardValueAndColor: function getCardValueAndColor(cardKey) {
        var value = cardKey % 10;
        0 == value && (value = 10);
        return {
          value: value,
          key: cardKey % 10
        };
      },
      setVillageMul: function setVillageMul(data) {
        this.qzBtnConfig = kf.clone(data);
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        this.playerState[UISeatId] = state;
        console.log("this.playerState", this.playerState);
      },
      getViewSeat: function getViewSeat(serverSeatId) {
        cc.log("this.seatTable", this.seatTable);
        for (var i = 0; i < this.seatTable.length; i++) if (this.seatTable[i] == serverSeatId) return i;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      getCardTypeByTxt: function getCardTypeByTxt(cardTypeIndex) {
        return this.chnNumChar[cardTypeIndex];
      },
      getSFByImgName: function getSFByImgName(spriteAtlas, imgName) {
        return spriteAtlas.getSpriteFrame(imgName);
      },
      CardJudgment: function CardJudgment(pokers) {
        this.order(pokers);
        var oneCardVal = pokers[0].value, twoCardVal = pokers[1].value;
        if (oneCardVal == twoCardVal) return oneCardVal + 19;
        if (10 == oneCardVal || 10 == twoCardVal) return 10 == oneCardVal ? 2 * twoCardVal : 2 * oneCardVal;
        if (8 == oneCardVal && 2 == twoCardVal || 2 == oneCardVal && 8 == twoCardVal) return 19;
        var lave = (oneCardVal + twoCardVal) % 10;
        return 0 == lave ? lave : 2 * lave - 1;
      },
      order: function order(pokers) {
        pokers && pokers.length > 1 && pokers.sort(function(a, b) {
          return 2 == pokers[0].value && 8 == pokers[1].value || 8 == pokers[0].value && 2 == pokers[1].value ? a.value - b.value : 10 == pokers[0].value || 10 == pokers[1].value ? a.value - b.value : b.value - a.value;
        });
        return pokers;
      }
    };
    ebgDataLogic.init();
    cc._RF.pop();
  }, {} ],
  editPersonalInfo: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1e377yZZEpKcbmTu4FrPXv5", "editPersonalInfo");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        editUserName: cc.EditBox,
        scroll_parent: cc.Node,
        avatar: [ cc.SpriteFrame ],
        avatarParent: [ cc.Node ],
        toggleArr: [ cc.Toggle ],
        userAvatar_pf: cc.Prefab,
        avatar_sel: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "updataPersonalInfoCb", this.updataPersonalInfoCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        this.callBack = initArg.callBack;
        this.userSex = dataLogic.userSex;
        this.userAvatarPath = dataLogic.userHeadUrl;
        dataLogic.userName != dataLogic.account && (this.editUserName.string = dataLogic.userName);
        this.allAvatarPath = [];
        for (var i = 0; i < this.avatar.length; i++) this.allAvatarPath.push("/Avatar/avatar" + (i + 1) + ".jpg");
        this.userAvatarIndex = this.allAvatarPath.indexOf(dataLogic.userHeadUrl) + 1;
        for (var k = 0; k <= 1; k++) {
          for (var _i = 0; _i < this.avatar.length / 2; _i++) {
            var avatar_node = cc.instantiate(this.userAvatar_pf);
            avatar_node.parent = this.avatarParent[k];
            avatar_node.getChildByName("avatar").getComponent(cc.Sprite).spriteFrame = 0 == k ? this.avatar[_i] : this.avatar[this.avatar.length / 2 + _i];
            avatar_node.x = (avatar_node.width + 3) * (_i % 4) + avatar_node.width / 2 + 7;
            avatar_node.y = Math.floor(_i / 4) * -avatar_node.height + -avatar_node.height / 2;
            var clickEventHandler = new cc.Component.EventHandler();
            clickEventHandler.target = this.node;
            clickEventHandler.component = "editPersonalInfo";
            clickEventHandler.handler = "showUserSelAvatar";
            clickEventHandler.customEventData = 0 == k ? _i : _i + this.avatar.length / 2;
            var button = avatar_node.getComponent(cc.Button);
            button.clickEvents[0] = clickEventHandler;
            this.allAvatarPath[k * this.avatar.length / 2 + _i] == dataLogic.userHeadUrl && (avatar_node.getChildByName("avatar_sel").opacity = 255);
          }
          this.avatarParent[k].height = this.scroll_parent.height = Math.ceil(this.avatar.length / 2 / 4) * this.avatarParent[k].children[0].height;
        }
        this.avatarParent[dataLogic.userSex - 1].active = true;
        this.toggleArr[dataLogic.userSex - 1].notAudioEf = true;
        this.toggleArr[dataLogic.userSex - 1].isChecked = true;
        delete this.toggleArr[dataLogic.userSex - 1].notAudioEf;
      },
      showUserSelAvatar: function showUserSelAvatar(event, index) {
        var loopParent = this.avatarParent[index <= this.avatar.length / 2 ? 0 : 1];
        for (var k = 0; k <= 1; k++) for (var i = 0; i < this.avatarParent[k].children.length; i++) this.avatarParent[k].children[i].getChildByName("avatar_sel").opacity = 14 * k + i == index ? 255 : 0;
        this.userAvatarIndex = index + 1;
        this.userAvatarPath = "/Avatar/avatar" + (index + 1) + ".jpg";
      },
      changeSexTab: function changeSexTab(event, sex) {
        event.notAudioEf || audioMgr.playEffect(this.clickAudio);
        this.userSex = sex;
        this.scroll_parent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        this.scroll_parent.parent.parent.getComponent(cc.ScrollView).scrollToTop();
        this.avatarParent[0].active = this.avatarParent[1].active = false;
        this.avatarParent[sex - 1].active = true;
        this.avatar_sel.x = -1e4;
      },
      updateInfo: function updateInfo() {
        audioMgr.playEffect(this.clickAudio);
        var sendData = {
          action: "UpdatePersonInfo",
          NickName: this.editUserName.string ? this.editUserName.string : "",
          Sex: this.userSex,
          UserPhoto: this.userAvatarIndex
        };
        cc.log((this.userSex - 1) * (this.avatar.length / 2) < this.userAvatarIndex);
        cc.log((this.userSex - 1) * (this.avatar.length / 2));
        cc.log(this.userAvatarIndex <= this.userSex * (this.avatar.length / 2));
        (this.userSex - 1) * (this.avatar.length / 2) < this.userAvatarIndex && this.userAvatarIndex <= this.userSex * (this.avatar.length / 2) ? this.reqDateAndShowLoadView(sendData, "updataPersonalInfoCb") : this.showLayerTip("\u8bf7\u9009\u62e9\u76f8\u5e94\u6027\u522b\u7684\u5934\u50cf");
      },
      updataPersonalInfoCb: function updataPersonalInfoCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          dataLogic.userName = this.editUserName.string ? this.editUserName.string : dataLogic.userName;
          dataLogic.userSex = this.userSex;
          dataLogic.userHeadUrl = this.userAvatarPath;
          this.toastClose();
          this.callBack("success");
        } else this.callBack("fail");
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  engineAdapter: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "65cddFeXzlFvKtr0p5WR7Ly", "engineAdapter");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    function _toConsumableArray(arr) {
      if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
        return arr2;
      }
      return Array.from(arr);
    }
    var pool = [];
    var _color = cc.Color.BLACK;
    window.kf = window.kf || {
      extends: cc.Component
    };
    window["word"] = window["word"] || {};
    window["util"] = window["util"] || {};
    window["logic"] = window["logic"] || {};
    kf._loadedItem = {};
    kf.ignoreInitArr = [];
    kf.addIgnoreInitDir = function(dirStr) {
      kf.ignoreInitArr.push(dirStr);
    };
    kf.require = function(requireName, noInit) {
      if (!kf._loadedItem[requireName]) {
        var splitNameSpace = requireName.split(".");
        var item = window;
        var i;
        for (i = 0; i < splitNameSpace.length; i++) item = item[splitNameSpace[i]];
        if (item) {
          kf._loadedItem[requireName] = item();
          if (!noInit) {
            for (i = 0; i < kf.ignoreInitArr.length; i++) {
              var key = kf.ignoreInitArr[i];
              if (0 === requireName.indexOf(key)) break;
            }
            i >= kf.ignoreInitArr.length && kf._loadedItem[requireName].init && kf._loadedItem[requireName].init();
          }
        }
      }
      return kf._loadedItem[requireName];
    };
    kf.computeLabelSizeByString = function(str, label) {
      var size = cc.size(0, 0), lineCount = 0, lineCharLimit = 0;
      switch (label.overflow) {
       case cc.Label.Overflow.RESIZE_HEIGHT:
        size.width = label.node.width;
        lineCharLimit = label.node.width / (4 * label.fontSize / 3);
        lineCharLimit *= 2;
      }
      var len = 0, c = void 0;
      for (var i = 0; i < str.length; i++) {
        c = str.charCodeAt(i);
        c < 127 ? 10 == c ? len = lineCharLimit : len++ : len += 2;
        if (lineCharLimit <= len) {
          lineCount++;
          len = 0;
        }
      }
      size.height = lineCount * label.lineHeight;
      cc.log(str, "size", size);
      return size;
    };
    var floatCalc = function floatCalc(a, b) {
      a += "", b += "";
      var aNum = a.indexOf("."), bNum = b.indexOf("."), aSum, bSum, resultNum, inta, intb;
      aSum = aNum < 0 ? 0 : a.split(".")[1].length;
      bSum = bNum < 0 ? 0 : b.split(".")[1].length;
      resultNum = aSum > bSum ? aSum : bSum;
      inta = aNum < 0 ? Number(a + (Math.pow(10, resultNum) + "").replace("1", "")) : function() {
        a = a.replace(".", "");
        a = resultNum == aSum ? a : a + (Math.pow(10, resultNum - aSum) + "").replace("1", "");
        return Number(a);
      }();
      intb = bNum < 0 ? Number(b + (Math.pow(10, resultNum) + "").replace("1", "")) : function() {
        b = b.replace(".", "");
        b = resultNum == bSum ? b : b + (Math.pow(10, resultNum - bSum) + "").replace("1", "");
        return Number(b);
      }();
      return {
        a: inta,
        b: intb,
        num: resultNum
      };
    };
    Number.prototype.add = function(n) {
      var o = floatCalc(this, n);
      return (o.a + o.b) / Math.pow(10, o.num);
    };
    Number.prototype.minus = function(n) {
      var o = floatCalc(this, n);
      return (o.a - o.b) / Math.pow(10, o.num);
    };
    Number.prototype.multi = function(n) {
      var o = floatCalc(this, n);
      return o.a * o.b / Math.pow(10, 2 * o.num);
    };
    Number.prototype.divide = function(n) {
      var o = floatCalc(this, n);
      return o.a / o.b;
    };
    kf.clone = function(obj) {
      var o;
      if ("object" == ("undefined" === typeof obj ? "undefined" : _typeof(obj))) if (null === obj) o = null; else {
        if (!(obj instanceof Array)) {
          var keys = Object.keys(obj);
          o = {};
          for (var _i = 0; _i < keys.length; _i++) o[[ keys[_i] ]] = this.clone(obj[keys[_i]]);
          return o;
        }
        o = [];
        for (var i = 0, len = obj.length; i < len; i++) o.push(this.clone(obj[i]));
      } else o = obj;
      return o;
    };
    kf.fromHEX = function(hexString) {
      return _color.fromHEX(hexString);
    };
    kf.cloneArray = function(obj) {
      if (!(obj instanceof Array)) return [];
      var o = [];
      for (var i = 0, len = obj.length; i < len; i++) o.push(obj[i]);
      return o;
    };
    kf.getArrIndexByValue = function(arr, value) {
      for (var i = 0; i < arr.length; i++) if (arr[i] === value) return i;
      return -1;
    };
    kf.getObjIndexByValue = function(arr, value, objName) {
      for (var i = 0; i < arr.length; i++) if (arr[i][objName] === value) return i;
      return -1;
    };
    kf.loadNetImg = function(url, sp, callBack) {
      if ("" === url) return cc.error("url is empty");
      cc.loader.load(url, function(err, tex) {
        if (err || !this.isValid) {
          cc.error(err);
          "undefined" != typeof callBack && callBack(null, sp);
          return;
        }
        var spriteFrame = new cc.SpriteFrame();
        spriteFrame.initWithTexture(tex);
        if ("undefined" != typeof callBack) {
          this.spriteFrame = spriteFrame;
          callBack(spriteFrame, sp);
        } else this.spriteFrame = spriteFrame;
      }.bind(sp));
    };
    kf.getSFByImgName = function(spriteAtlas, imgName) {
      return spriteAtlas.getSpriteFrame(imgName);
    };
    kf.getArrIndexByValue = function(arr, value) {
      for (var i = 0; i < arr.length; i++) if (arr[i] === value) return i;
      return -1;
    };
    kf.getArrAllIndexByValue = function(arr, value) {
      var a = [];
      for (var i = 0; i < arr.length; i++) arr[i] === value && a.push(i);
      return a;
    };
    kf.flattenArr = function(arr) {
      var _ref;
      return (_ref = []).concat.apply(_ref, _toConsumableArray(arr.map(function(x) {
        return Array.isArray(x) ? kf.flattenArr(x) : x;
      })));
    };
    kf.getUrlArg = function(name) {
      if (cc.sys.isNative) return true;
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
      if (null == window.location.href.split("/?")[1]) return null;
      var r = window.location.href.split("/?")[1].match(reg);
      if (null != r) return unescape(r[2]);
      return null;
    };
    kf.createSlideCheckCode = function(jsAddr, checkSucceedCb, point) {
      point.showLoadView(true);
      if (cc.sys.isNative) {
        jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "doCaptcha", "(Ljava/lang/String;)V", jsAddr);
        window.androidBridge = function(status, ticket) {
          cc.log("\u6ed1\u5757\u9a8c\u8bc1\u7ed3\u679c", dataLogic.isHide, status, ticket);
          status ? dataLogic.isHide ? cc.game.once(cc.game.EVENT_SHOW, function() {
            checkSucceedCb(ticket);
          }) : checkSucceedCb(ticket) : point.hideLoadView();
        };
        return;
      }
      var slideCheckCode = document.getElementById("slideCheckCode");
      if (slideCheckCode) slideCheckCode.src = jsAddr; else {
        var ele = document.createElement("script");
        ele.setAttribute("id", "slideCheckCode");
        ele.src = jsAddr;
        var e = document.getElementsByTagName("script")[0];
        e.parentNode.insertBefore(ele, e);
      }
      var show = function show() {
        if (null == window.capInit) return;
        var cbfn = function cbfn(retJson) {
          0 == retJson.ret ? checkSucceedCb(retJson.ticket) : point.hideLoadView();
        };
        var capOption = {
          callback: cbfn,
          showHeader: true
        };
        var TCaptcha = document.getElementById("TCaptcha");
        capInit(TCaptcha, capOption);
        point.unschedule(show);
      };
      point.schedule(show, .03);
    };
    kf.copyToClipboard = function(input, callback) {
      if (cc.sys.isNative) return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "copyValues", "(Ljava/lang/String;)Z", input);
      var el = document.createElement("textarea");
      el.value = input;
      el.setAttribute("readonly", "");
      el.style.contain = "strict";
      el.style.position = "absolute";
      el.style.left = "-9999px";
      el.style.fontSize = "12pt";
      var selection = getSelection();
      var originalRange = false;
      selection.rangeCount > 0 && (originalRange = selection.getRangeAt(0));
      document.body.appendChild(el);
      el.select();
      el.selectionStart = 0;
      el.selectionEnd = input.length;
      var success = false;
      try {
        success = document.execCommand("copy");
      } catch (err) {}
      document.body.removeChild(el);
      if (originalRange) {
        selection.removeAllRanges();
        selection.addRange(originalRange);
      }
      return success;
    };
    kf.compareVersion = function(versionA, versionB) {
      var vA = versionA.split(".");
      var vB = versionB.split(".");
      for (var i = 0; i < vA.length; ++i) {
        var a = parseInt(vA[i]);
        var b = parseInt(vB[i] || 0);
        if (a === b) continue;
        return a - b;
      }
      return vB.length > vA.length ? -1 : 0;
    };
    kf.Base64 = function() {
      var _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      this.encode = function(input) {
        var output = "";
        var chr1 = void 0, chr2 = void 0, chr3 = void 0, enc1 = void 0, enc2 = void 0, enc3 = void 0, enc4 = void 0;
        var i = 0;
        input = _utf8_encode(input.toString());
        while (i < input.length) {
          chr1 = input.charCodeAt(i++);
          chr2 = input.charCodeAt(i++);
          chr3 = input.charCodeAt(i++);
          enc1 = chr1 >> 2;
          enc2 = (3 & chr1) << 4 | chr2 >> 4;
          enc3 = (15 & chr2) << 2 | chr3 >> 6;
          enc4 = 63 & chr3;
          isNaN(chr2) ? enc3 = enc4 = 64 : isNaN(chr3) && (enc4 = 64);
          output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4);
        }
        return output;
      };
      this.decode = function(input) {
        var output = "";
        var chr1 = void 0, chr2 = void 0, chr3 = void 0;
        var enc1 = void 0, enc2 = void 0, enc3 = void 0, enc4 = void 0;
        var i = 0;
        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
        while (i < input.length) {
          enc1 = _keyStr.indexOf(input.charAt(i++));
          enc2 = _keyStr.indexOf(input.charAt(i++));
          enc3 = _keyStr.indexOf(input.charAt(i++));
          enc4 = _keyStr.indexOf(input.charAt(i++));
          chr1 = enc1 << 2 | enc2 >> 4;
          chr2 = (15 & enc2) << 4 | enc3 >> 2;
          chr3 = (3 & enc3) << 6 | enc4;
          output += String.fromCharCode(chr1);
          64 != enc3 && (output += String.fromCharCode(chr2));
          64 != enc4 && (output += String.fromCharCode(chr3));
        }
        output = _utf8_decode(output);
        return output;
      };
      var _utf8_encode = function _utf8_encode(string) {
        string = string.replace(/\r\n/g, "\n");
        var utftext = "";
        for (var n = 0; n < string.length; n++) {
          var c = string.charCodeAt(n);
          if (c < 128) utftext += String.fromCharCode(c); else if (c > 127 && c < 2048) {
            utftext += String.fromCharCode(c >> 6 | 192);
            utftext += String.fromCharCode(63 & c | 128);
          } else {
            utftext += String.fromCharCode(c >> 12 | 224);
            utftext += String.fromCharCode(c >> 6 & 63 | 128);
            utftext += String.fromCharCode(63 & c | 128);
          }
        }
        return utftext;
      };
      var _utf8_decode = function _utf8_decode(utftext) {
        var string = "";
        var i = 0;
        var c = void 0, c1 = void 0, c2 = void 0;
        while (i < utftext.length) {
          c = utftext.charCodeAt(i);
          if (c < 128) {
            string += String.fromCharCode(c);
            i++;
          } else if (c > 191 && c < 224) {
            c2 = utftext.charCodeAt(i + 1);
            string += String.fromCharCode((31 & c) << 6 | 63 & c2);
            i += 2;
          } else {
            c2 = utftext.charCodeAt(i + 1);
            c1 = utftext.charCodeAt(i + 2);
            string += String.fromCharCode((15 & c) << 12 | (63 & c2) << 6 | 63 & c1);
            i += 3;
          }
        }
        return string;
      };
    };
    kf.setSpriteFrameByBase64 = function(data, sp) {
      var img = new Image();
      var base = "data:image/png;base64,R0lGODlhPAAWAPcAAAAAAAAAMwAAZgAAmQAAzAAA/wArAAArMwArZgArmQArzAAr/wBVAABVMwBVZgBVmQBVzABV/wCAAACAMwCAZgCAmQCAzACA/wCqAACqMwCqZgCqmQCqzACq/wDVAADVMwDVZgDVmQDVzADV/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMrADMrMzMrZjMrmTMrzDMr/zNVADNVMzNVZjNVmTNVzDNV/zOAADOAMzOAZjOAmTOAzDOA/zOqADOqMzOqZjOqmTOqzDOq/zPVADPVMzPVZjPVmTPVzDPV/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YrAGYrM2YrZmYrmWYrzGYr/2ZVAGZVM2ZVZmZVmWZVzGZV/2aAAGaAM2aAZmaAmWaAzGaA/2aqAGaqM2aqZmaqmWaqzGaq/2bVAGbVM2bVZmbVmWbVzGbV/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5krAJkrM5krZpkrmZkrzJkr/5lVAJlVM5lVZplVmZlVzJlV/5mAAJmAM5mAZpmAmZmAzJmA/5mqAJmqM5mqZpmqmZmqzJmq/5nVAJnVM5nVZpnVmZnVzJnV/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wrAMwrM8wrZswrmcwrzMwr/8xVAMxVM8xVZsxVmcxVzMxV/8yAAMyAM8yAZsyAmcyAzMyA/8yqAMyqM8yqZsyqmcyqzMyq/8zVAMzVM8zVZszVmczVzMzV/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8rAP8rM/8rZv8rmf8rzP8r//9VAP9VM/9VZv9Vmf9VzP9V//+AAP+AM/+AZv+Amf+AzP+A//+qAP+qM/+qZv+qmf+qzP+q///VAP/VM//VZv/Vmf/VzP/V////AP//M///Zv//mf//zP///wAAAAAAAAAAAAAAACH5BAEAAPwALAAAAAA8ABYAAAj" + data;
      img.src = base;
      img.onload = function() {
        var texture = new cc.Texture2D();
        texture.initWithElement(img);
        texture.handleLoadedTexture();
        var spriteFrame = new cc.SpriteFrame(texture);
        sp.spriteFrame = spriteFrame;
        return spriteFrame;
      };
    };
    kf.createPool = function(poolId, initCount, prefab, jsName) {
      var enableExcess = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];
      if (null == prefab) {
        cc.warn("null\u9884\u5236\u4f53\u4e0d\u80fd\u521b\u5efa\u5bf9\u8c61\u6c60", poolId);
        return;
      }
      if (pool[poolId]) {
        if (pool[poolId].prefabUuid === prefab._uuid) return;
        this.clearPool(poolId);
      }
      if (null != jsName) {
        pool[poolId] = new cc.NodePool(jsName);
        pool[poolId].jsName = jsName;
      } else pool[poolId] = new cc.NodePool();
      pool[poolId].enableExcess = enableExcess;
      pool[poolId].prefab = prefab;
      pool[poolId].prefabUuid = prefab._uuid;
      for (var i = 0; i < initCount; ++i) {
        var obj = cc.instantiate(prefab);
        pool[poolId].put(obj);
      }
    };
    kf.clearPool = function(poolId) {
      if (pool[poolId]) {
        pool[poolId].clear();
        delete pool[poolId].prefab;
      }
    };
    kf.getObj = function(poolId, parent, prefab, arg) {
      null == pool[poolId] && cc.warn("\u627e\u4e0d\u5230pooId", poolId);
      var obj = null;
      if (pool[poolId].size() > 0) obj = pool[poolId].get(arg); else {
        if (!pool[poolId].enableExcess) return null;
        prefab || (prefab = pool[poolId].prefab);
        obj = cc.instantiate(prefab);
        var handler = pool[poolId].poolHandlerComp ? obj.getComponent(pool[poolId].poolHandlerComp) : null;
        handler && handler.reuse && handler.reuse(arg);
      }
      obj.parent = parent;
      obj.poolId = poolId;
      return obj;
    };
    kf.getPoolSize = function(poolId) {
      return pool[poolId].size();
    };
    kf.killObj = function(obj) {
      if (null == obj || null == obj.poolId) {
        cc.warn("\u672a\u77e5\u7684obj \u6216 poolId");
        return;
      }
      pool[obj.poolId].put(obj);
    };
    cc._RF.pop();
  }, {} ],
  erBaGangHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3099bLbCzNF8bIBdsbcYwWl", "erBaGangHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.ErBaGang);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "erBaGang/bg", "common/UI/table", "erBaGang/mjCard", "paiGow/effect/qzpj_paixing_di", "cattle/seeThreeCattle/selNormal" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  erBaGang: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "2d43677HrFKz59EqDC06D8q", "erBaGang");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        yuPiaBtn: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        betNum: cc.Node,
        roomNum: cc.Node,
        yuPaiView: cc.Node,
        yuPaiContent: cc.Node,
        CardPf: cc.Prefab,
        pokersSf: cc.SpriteFrame,
        cardTypeSf: cc.SpriteFrame,
        showdown: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        villageMultiple: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        grab: cc.Node,
        grabBtn: [ cc.Button ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        villageIcon: cc.Node,
        villageBgBox: cc.Node,
        arrow: cc.Node,
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        round: cc.Node,
        notice: cc.Node,
        gameStartAnim: cc.Node,
        lunShuAnim: cc.Node,
        diceAtlas: cc.SpriteAtlas,
        diceAnim: cc.Node,
        tongChiAnim: cc.Node,
        tongPeiAnim: cc.Node,
        winAnim: cc.Node,
        cardType: [ cc.Node ],
        sgAnimPf: cc.Prefab,
        fanPaiPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        femaleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        upturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        },
        diceAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onVillage", this.onVillage.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "village", this.village.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        cc.log("\u6e05\u7406\u5bf9\u8c61\u6c60");
        kf.clearPool(constant.PoolId.paiGowCardType);
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.ErBaGang);
        this.registerEvent();
        this.clearOtherPlayer();
        this.clickBind();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        kf.createPool(constant.PoolId.paiGowCardType, 4, this.sgAnimPf);
        var isCheck = cc.sys.localStorage.getItem("game_erBaGangAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(constant.GameId.ErBaGang);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[selRoomKey - 1].ante;
        this.setBetNumState();
        this.round.active = false;
        this.yuPaiList = [];
        for (var i = 0; i < 10; i++) {
          this.yuPaiList[i] = cc.instantiate(this.CardPf);
          this.yuPaiList[i].getChildByName("color").getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + i);
          this.yuPaiList[i].getChildByName("txt").getComponent(cc.Label).string = "0";
          this.yuPaiList[i].parent = this.yuPaiContent;
          this.yuPaiList[i].x = i % 5 * 94 * .5 + 10 + i % 5 * 10;
          this.yuPaiList[i].y = -193 * Math.floor(i / 5) * .5 - 10 - 10 * Math.floor(i / 5);
        }
        var playerPos = [ {
          x: 99,
          y: -166
        }, {
          x: 157,
          y: 80
        }, {
          x: 226,
          y: 87
        }, {
          x: -157,
          y: 80
        } ];
        for (var _i = 0; _i < this.player.length; _i++) {
          this.player[_i].playerPos = playerPos[_i];
          this.bindLongTouchEvent(this.player[_i]);
        }
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.gameStartAnim.active = false;
        this.gameStartAnim.getComponent(cc.Animation).stop();
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.villageBgBox.stopAllActions();
        for (var i = 0; i < this.pokers.length; i++) 5 != this.roundNum && this.getBetTxt[i].node.stopAllActions();
        this.diceAnim.active && (this.diceAnim.active = false);
        if (5 != this.roundNum) {
          this.winTxt.stopAllActions();
          this.gameLayer.stopAllActions();
        }
      },
      gameShow: function gameShow() {
        var UISeatId = void 0;
        cc.log("this.progress", this.progress);
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        this.lunShuAnim.active = false;
        if (this.progress >= 2) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.getVillage(this.confirmVillage);
          2 == this.progress && this.showVillageCallFun(UISeatId);
          if (3 == this.progress) {
            this.diceAnim.active = false;
            this.showdown.active = true;
          }
          if (this.progress >= 3) {
            for (var i = 0; i < this.pokers.length; i++) this.pokers[i].active = true;
            for (var k = 0; k < this.openCardsArr.length; k++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(k);
              if (this.openCardsArr[k].length) {
                this.setPlayerHandCard(UISeatId, this.openCardsArr[k], true);
                var cardTypeNum = this.showPokers(UISeatId, this.openCardsArr[k]);
                this.cardType[UISeatId].active = true;
                this.cardType[UISeatId].getComponent(cc.Sprite).spriteFrame = this.cardTypeSf;
                this.cardType[UISeatId].getChildByName("txt").getComponent(cc.Label).string = ebgDataLogic.getCardTypeByTxt(cardTypeNum);
                if (0 == cardTypeNum) {
                  this.cardType[UISeatId].getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
                  this.cardType[UISeatId].getChildByName("txt").color = new cc.Color(255, 255, 255);
                }
              }
            }
            if (this.progress > 3 && 2 != this.isEnd) {
              this.winTxt.opacity = 255;
              for (var j = 0; j < this.endData.length; j++) {
                this.updateUserBalance();
                UISeatId = dataLogic.getUISeatIdBySeatId(j);
                if (this.endData[j] >= 0) {
                  this.getBetTxt[UISeatId].font = this.winChipNumFont;
                  this.getBetTxt[UISeatId].string = "+" + this.endData[j].toFixed(2);
                } else {
                  this.getBetTxt[UISeatId].font = this.loseChipNumFont;
                  this.getBetTxt[UISeatId].string = this.endData[j].toFixed(2);
                }
              }
            }
            if (this.progress > 3 && 2 == this.isEnd && this.isResultAnim) {
              this.matchBtn.active = true;
              this.autoMatch.active = true;
            }
            if (this.progress > 3) {
              this.reciprocal.active = false;
              return;
            }
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          cc.log("newDate", newDate);
          if (1 == this.progress && newDate > 0) {
            this.isVillage || (this.grab.active = true);
            this.wait.active = true;
          }
          if (2 == this.progress && newDate > 0) {
            this.isBet || (this.multiple.active = true);
            this.wait.active = true;
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.initMatchingView(true, false);
        this.round.active = false;
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        dataLogic.setNeedRecover(true);
        this.clearOtherPlayer();
        this.total = 0;
        var roomKey = dataLogic.curRoomKey;
        ebgConstant.PostMatching.roomId = constant.GameId.ErBaGang + roomKey;
        http.post(ebgConstant.PostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        this.matchBtn.active = true;
        this.autoMatch.active = true;
        this.setMatchingToastView(false);
        dataLogic.gameEnd();
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        cc.log("show", show);
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.matchingToastLayer.active = false;
          this.efMatchingLoad.getComponent(cc.Animation).stop();
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            var roomKey = dataLogic.curRoomKey;
            this.matchBtn.active = true;
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
            return;
          }
          return;
        }
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setDeskId(data.Data.deskId);
        }
        this.setMatchingToastUI(true);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.setMatchingToastView(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          if (constant.HttpCode.GameOver == msg.Code) {
            dataLogic.setReqRecoverState(false);
            this.round.active = false;
            for (var i = 0; i < 10; i++) this.yuPaiList[i].getChildByName("txt").getComponent(cc.Label).string = "0";
          }
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
        if (0 == msg.state) {
          cc.log("\u7b49\u5f85\u5339\u914d");
          this.initMatchingView(true, true);
          return;
        }
        var playerInfo = kf.clone(msg.playerInfo), UISeatId = void 0;
        void 0 != msg.cards && (this.playerCardsArr = msg.cards);
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        this.setMatchingToastView(false);
        this.playerInfo = playerInfo;
        dataLogic.setLimitPlayerNum(playerInfo.length);
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < msg.playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          cc.log("UISeatId---", UISeatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[i].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[i].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[i].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[i].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[i].headUrl, avatarSp);
          if (1 == msg.state) if (-1 == playerInfo[i].state) {
            if (UISeatId == constant.SelfUISeatId) {
              this.isVillage = false;
              this.grab.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
              ebgDataLogic.setVillageMul(msg.robMultiples[i]);
              this.initQzMultipleBtn();
            }
          } else {
            this.isVillage = true;
            0 == playerInfo[i].state ? this.villageMultiple[UISeatId].string = "\u4e0d\u62a2" : this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
          }
          if (msg.state >= 2) if (i == msg.isVillage) {
            this.multipleTxt[UISeatId].string = "";
            this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
            if (UISeatId == constant.SelfUISeatId && 2 == msg.state) {
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
            }
          } else if (playerInfo[i].betMultiple < 0 && UISeatId == ebgDataLogic.selfSeatId) {
            if (2 == msg.state) {
              dataLogic.setRoomConfig("betConfig", msg.multiples[i]);
              this.betMultipleBtn();
              this.isBet = false;
              this.multiple.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
            }
          } else if (playerInfo[i].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d";
          }
          if (3 == msg.state) {
            var cards = msg.cards[i];
            cc.log("remainingTime--", remainingTime);
            this.pokers[UISeatId].active = true;
            if (UISeatId == constant.SelfUISeatId) if (playerInfo[i].isComplete) {
              this.isOpenCard = true;
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.isOpenCard = false;
              this.showdown.active = true;
            } else if (playerInfo[i].isComplete) {
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            }
          }
          if (4 == msg.state) {
            this.pokers[UISeatId].active = true;
            this.upturnCards(i, msg.cards[i], true);
            if (msg.endData[i] >= 0) {
              this.getBetTxt[UISeatId].font = this.winChipNumFont;
              this.getBetTxt[UISeatId].string = "+" + msg.endData[i].toFixed(2);
            } else {
              this.getBetTxt[UISeatId].font = this.loseChipNumFont;
              this.getBetTxt[UISeatId].string = msg.endData[i].toFixed(2);
            }
            this.winTxt.opacity = 255;
          }
        }
        for (var h = 0; h < msg.openCardNum.length; h++) this.yuPaiList[h].getChildByName("txt").getComponent(cc.Label).string = msg.openCardNum[h];
        this.round.active = true;
        this.roundNum = msg.round;
        this.round.getChildByName("txt").getComponent(cc.Label).string = "\u7b2c" + msg.round + "/5\u8f6e";
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:" + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        this.confirmVillage = msg.isVillage;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        ebgDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        dataLogic.matching();
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        this.clearOtherPlayer();
        this.round.active = true;
        this.roundNum = msgData.round;
        this.round.getChildByName("txt").getComponent(cc.Label).string = "\u7b2c" + msgData.round + "/5\u8f6e";
        if (1 == msgData.round) for (var i = 0; i < 10; i++) this.yuPaiList[i].getChildByName("txt").getComponent(cc.Label).string = "0";
        dataLogic.matching();
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.active = true;
          this.lunShuAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.getChildByName("New Label").getComponent(cc.Label).string = msgData.round;
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        var playerInfo = kf.clone(msgData.playerInfo), UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        dataLogic.setPlayerInfo(playerInfo);
        dataLogic.setLimitPlayerNum(playerInfo.length);
        for (var _i2 = 0; _i2 < msgData.playerInfo.length; _i2++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i2);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i2].userId;
          this.player[UISeatId]._playerInfo = playerInfo[_i2];
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i2].nickName);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i2].balance);
          this.setPlayerBalance(UISeatId, playerInfo[_i2].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i2].headUrl, avatarSp);
          if (UISeatId == constant.SelfUISeatId) {
            balance = playerInfo[_i2].balance;
            ebgDataLogic.setVillageMul(msgData.robMultiples[_i2]);
            this.initQzMultipleBtn();
          }
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        this.scheduleOnce(function() {
          _this.grab.active = true;
          _this.wait.active = true;
          _this.countDown(msgData.endTime, 1);
        }, 1.67);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.playerCardsArr = [];
        this.balanceArr = [];
        this.isVillageNum = 1;
        this.isBetNum = 2;
        this.isVillage = false;
        this.isBet = false;
        this.isOpenCard = false;
        this.send = false;
        this.isResultAnim = false;
        this.villageBgBox.x = 1e4;
        this.villageBgBox.y = 1e4;
        this.villageIcon.x = 1e4;
        this.villageIcon.y = 1e4;
        this.arrow.x = 1e4;
        this.arrow.y = 1e4;
        this.openPokers = [];
        this.grab.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.showdown.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.winTxt.opacity = 0;
        this.grab.active = false;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var l = 0; l < this.grabBtn.length; l++) this.grabBtn[l].node.active = false;
        for (var i = 0; i < this.player.length; i++) {
          this.multipleTxt[i].string = "";
          this.villageMultiple[i].string = "";
          this.pokers[i].active = false;
          this.getBetTxt[i].string = "";
          if (0 != i) {
            this.player[i].active = false;
            this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
            this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
          }
          for (var j = 0; j < 2; j++) {
            this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
            this.pokers[i].getChildByName("pokers" + j).getChildByName("num").opacity = 0;
          }
          this.cardType[i].active = false;
          this.cardType[i].getComponent(cc.Sprite).spriteFrame = "";
          this.cardType[i].getChildByName("txt").getComponent(cc.Label).string = "";
          this.cardType[i].children[1] && this.cardType[i].children[1].destroy();
        }
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.grab.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.grab.active = false;
            this.multiple.active = false;
            switch (type) {
             case 1:
              this.grab.active = false;
              this.isVillage || this.scheduleOnce(function() {
                cc.log("\u62a2\u5e84");
                _this2.postGrabVillage(0);
              }, .1 * mySeatId);
              break;

             case 2:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                cc.log("\u4e0b\u6ce8");
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 3:
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                cc.log("\u644a\u724c");
                _this2.openTheCard();
              }, .3 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      initQzMultipleBtn: function initQzMultipleBtn() {
        var multiple = ebgDataLogic.qzBtnConfig;
        cc.log("multiple", multiple);
        this.grabBtn[0].node.active = true;
        for (var i = 0; i < multiple.length; i++) if (i < 4 && multiple[i] > 0) {
          this.grabBtn[Number(i) + 1].node.active = true;
          this.grabBtn[Number(i) + 1].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.grabBtn[Number(i) + 1].node.x = (Number(i) + 1) * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var i = 0; i < multiple.length; i++) if (i < 5 && multiple[i] > 0) {
          this.multipleBtn[i].node.active = true;
          this.multipleBtn[i].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.multipleBtn[i].node.x = i * (this.multiplBtnWidth + 22);
        } else this.multipleBtn[i].node.active = false;
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      grabVillage: function grabVillage(event, key) {
        this.grab.active = false;
        audioMgr.playEffect(this.audioBtn);
        this.postGrabVillage(key);
      },
      postGrabVillage: function postGrabVillage(key) {
        cc.log(key, 11);
        cc.log(ebgDataLogic.qzBtnConfig, 22);
        ebgConstant.PostVillage.villageNum = 0 == key ? key : ebgDataLogic.qzBtnConfig[key - 1];
        http.post(ebgConstant.PostVillage, "village");
        this.isVillage = true;
        this.grab.active = false;
        this.isVillageNum < this.playerInfo.length ? this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u62a2\u5e84" : this.wait.active = false;
      },
      village: function village(msgData) {
        if (0 == msgData.Code) return;
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      onVillage: function onVillage(msgData) {
        var _this3 = this;
        this.isVillageNum++;
        var lastVillage = msgData.seatId.toString().split(","), multiple = void 0, UISeatId = void 0;
        multiple = 0 == msgData.villageNum ? "\u4e0d\u62a2" : "\u62a2" + msgData.villageNum + "\u500d";
        for (var i = 0; i < lastVillage.length; i++) if ("" != lastVillage[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastVillage[i]);
          this.villageMultiple[UISeatId].string = multiple;
          this._village.push({
            seatId: lastVillage[i],
            villageNum: msgData.villageNum
          });
        }
        if (void 0 != msgData.confirmVillage) {
          this.progress = 2;
          this.reciprocal.active = false;
          this.grab.active = false;
          this.wait.active = false;
          var seatId = dataLogic.getSeatIdByUISeatId(ebgDataLogic.selfSeatId);
          if (seatId != msgData.confirmVillage) {
            dataLogic.setRoomConfig("betConfig", msgData.multiples[seatId]);
            this.betMultipleBtn();
          }
          this.confirmVillage = msgData.confirmVillage;
          this.endTime = msgData.endTime;
          UISeatId = dataLogic.getUISeatIdBySeatId(msgData.confirmVillage);
          var max;
          max = msgData.dealerMultiple;
          this.unschedule(this.callback);
          dataLogic.isHide ? this.showVillage(UISeatId, max) : this.node.runAction(cc.sequence(cc.delayTime(.6), cc.callFunc(function() {
            var delay = _this3.selVillage(msgData.confirmVillage);
            _this3.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(function() {
              this.showVillage(UISeatId, max);
              audioMgr.playEffect(this.selVillageOver);
            }, _this3)));
          }, this)));
        }
      },
      showVillage: function showVillage(UISeatId, max) {
        var _this4 = this;
        cc.log("max22", max);
        this.villageMultiple[UISeatId].string = "\u62a2" + max + "\u500d";
        this.getVillage(this.confirmVillage);
        var callFunc = cc.callFunc(function() {
          _this4.showVillageCallFun(UISeatId);
        }, this);
        dataLogic.isHide ? this.showVillageCallFun(UISeatId) : this.node.runAction(cc.sequence(cc.delayTime(.8), callFunc));
      },
      showVillageCallFun: function showVillageCallFun(UISeatId) {
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
        this.wait.active = true;
        if (UISeatId != constant.SelfUISeatId) if (this.isBet) this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8"; else {
          this.multiple.active = true;
          this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
        } else this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
        this.countDown(this.endTime, 2);
      },
      selVillage: function selVillage(confirmVillage) {
        var _this5 = this;
        var len = void 0, UISeatId = void 0, time = .15, num = 4, delay = void 0, delay1 = void 0;
        var newVillage = [];
        var villageCopy = [];
        for (var i = 0; i < this._village.length; i++) {
          this._village[i].villageNum && newVillage.push(Number(this._village[i].seatId));
          villageCopy.push(this._village[i].seatId);
        }
        newVillage.length ? newVillage.sort(function(a, b) {
          return a - b;
        }) : newVillage = kf.clone(villageCopy);
        var aArr = [], aArr1 = [];
        for (var k = 0; k < newVillage.length; k++) newVillage[k] <= confirmVillage ? aArr.push(newVillage[k]) : aArr1.push(newVillage[k]);
        newVillage = aArr1.concat(aArr);
        len = newVillage.length;
        if (len > 1) {
          var _loop = function _loop(j) {
            delay = cc.delayTime(time * len);
            delay1 = cc.delayTime(j * time);
            UISeatId = dataLogic.getUISeatIdBySeatId(newVillage[j]);
            var pos = _this5.player[UISeatId].position;
            var callFun = cc.callFunc(function() {
              _this5.selTheVillage(pos, delay, num);
            }, _this5);
            _this5.node.runAction(cc.sequence(delay1, callFun));
          };
          for (var j = 0; j < newVillage.length; j++) _loop(j);
          return time * len * num;
        }
        return 0;
      },
      selTheVillage: function selTheVillage(pos, delay, num) {
        var sequence = void 0, repeat = void 0;
        var AudioCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.selVillageAudio);
        }, this);
        sequence = cc.sequence(AudioCallFun, cc.moveTo(0, pos.x, pos.y), delay);
        repeat = cc.repeat(sequence, num);
        this.villageBgBox.runAction(repeat);
      },
      getVillage: function getVillage(confirmVillage) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(confirmVillage);
        this.villageBgBox.x = this.player[UISeatId].x;
        this.villageBgBox.y = this.player[UISeatId].y;
        if (1 == UISeatId) {
          this.villageIcon.x = this.player[UISeatId].x + 54;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        } else {
          this.villageIcon.x = this.player[UISeatId].x - 53;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        }
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.audioBtn);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        cc.log(key, "key");
        cc.log(dataLogic.roomConfig.betConfig, "betConfig");
        ebgConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(ebgConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.playerInfo.length > 2 && this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this6 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        for (var i = 0; i < lastBet.length; i++) if ("" != lastBet[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[i]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + msgData.betNum + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
          this.progress = 3;
          this.endTime = msgData.endTime;
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.playerCardsArr = msgData.cards;
          this.shakeDice(msgData.dice, msgData.startSeatId);
          this.scheduleOnce(function() {
            _this6.sendCardAnim();
            _this6.scheduleOnce(function() {
              _this6.countDown(_this6.endTime, 3);
              _this6.showdown.active = true;
            }, 1.2);
          }, 3.48);
          this.startSeatId = msgData.startSeatId;
        }
      },
      sendCardAnim: function sendCardAnim() {
        var _this7 = this;
        var userSeatId = [ 0, 1, 2, 3 ], sliceArr = [], spliceArr = [], newArr = [];
        if (this.startSeatId > 0) {
          sliceArr = userSeatId.slice(0, this.startSeatId);
          spliceArr = userSeatId.slice(this.startSeatId);
          newArr = spliceArr.concat(sliceArr);
        } else newArr = userSeatId;
        cc.log("newArr", newArr);
        var _loop2 = function _loop2(i) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(newArr[i]);
          if (dataLogic.isHide) {
            _this7.pokers[UISeatId].active = true;
            _this7.showdown.active = true;
          } else _this7.node.runAction(cc.sequence(cc.delayTime(.2 * i), cc.callFunc(function() {
            _this7.pokers[UISeatId].active = true;
            audioMgr.playEffect(_this7.sendCard);
            _this7.arrow.x = 1e4;
            _this7.arrow.y = 1e4;
            _this7.diceAnim.active = false;
          }, _this7)));
        };
        for (var i = 0; i < newArr.length; i++) _loop2(i);
      },
      shakeDice: function shakeDice(diceData, startSeatId) {
        var _this8 = this;
        if (!dataLogic.isHide) {
          audioMgr.playEffect(this.diceAudio);
          this.diceAnim.active = true;
          this.diceAnim.getChildByName("dice1").getComponent(cc.Sprite).spriteFrame = ebgDataLogic.getSFByImgName(this.diceAtlas, diceData[0]);
          this.diceAnim.getChildByName("dice2").getComponent(cc.Sprite).spriteFrame = ebgDataLogic.getSFByImgName(this.diceAtlas, diceData[1]);
          this.diceAnim.getComponent(cc.Animation).play();
          var _UISeatId = dataLogic.getUISeatIdBySeatId(startSeatId), _pos = this.player[_UISeatId].position;
          this.scheduleOnce(function() {
            _this8.arrow.x = _pos.x;
            _this8.arrow.y = _pos.y + 95;
            _this8.arrow.stopAllActions();
            _this8.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3, 0, -8), cc.moveBy(.3, 0, 8))));
          }, 2.48);
        }
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this9 = this;
        var cards = void 0, UISeatId = void 0, txt = "", endAudio = void 0, lastArr = [], win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          UISeatId != constant.SelfUISeatId && this.upturnCards(msgData.seatId, cards);
        }
        if (msgData.isEnd > 0) {
          for (var _h = 0; _h < msgData.openCardNum.length; _h++) this.yuPaiList[_h].getChildByName("txt").getComponent(cc.Label).string = msgData.openCardNum[_h];
          this.isEnd = msgData.isEnd;
          this.endData = kf.clone(msgData.endData);
          this.progress = 4;
          this.showdown.active = false;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          var max = Math.max.apply(null, msgData.endData);
          var min = Math.min.apply(null, msgData.endData);
          var isMeMax = 0;
          var isMeMin = 0;
          var newEndData = [];
          for (var _j = 0; _j < msgData.endData.length; _j++) {
            var _playerInfo = dataLogic.playerInfo[_j];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[_j]) / 100;
            msgData.endData[_j] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[_j]) / 100);
            _playerInfo.gameTimes += 1;
            newEndData[_j] = Math.abs(msgData.endData[_j]);
            msgData.endData[_j] >= 0 && isMeMax++;
            msgData.endData[_j] <= 0 && isMeMin++;
          }
          var absMax;
          newEndData.sort(function(a, b) {
            return a - b;
          });
          absMax = newEndData[newEndData.length - 1];
          cc.log("isMeMin", isMeMin, "isMeMax", isMeMax);
          for (var i = 0; i < msgData.endData.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            if (UISeatId == constant.SelfUISeatId) if (msgData.endData[i] > 0) {
              if (this.confirmVillage == i && msgData.endData[i] == max && absMax == max && 1 == isMeMax) if (msgData.endData.length < 3) {
                txt = 1;
                cc.log("\u4e24\u4eba\u5bf9\u5c40\u52dd\u5229");
                endAudio = this.winGold;
              } else {
                txt = 0;
                cc.log("\u901a\u5403");
                endAudio = this.allWin;
              } else {
                txt = 1;
                cc.log("\u52dd\u5229");
                endAudio = this.winGold;
              }
              win = false;
            } else {
              if (this.confirmVillage == i && msgData.endData[i] < 0 && msgData.endData[i] == min && 1 == isMeMin) {
                if (msgData.endData.length >= 3 && Math.abs(min) == absMax) {
                  txt = 2;
                  cc.log("\u901a\u8d54");
                }
              } else cc.log("\u5931\u8d25");
              endAudio = this.lose;
              win = true;
            }
          }
          var scrollNumCallFunc = cc.callFunc(function() {
            for (var _i3 = 0; _i3 < msgData.endData.length; _i3++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i3);
              if (msgData.endData[_i3] >= 0) {
                _this9.getBetTxt[UISeatId].font = _this9.winChipNumFont;
                _this9.scrollNum(msgData.endData[_i3].toFixed(2), UISeatId);
              } else {
                _this9.getBetTxt[UISeatId].font = _this9.loseChipNumFont;
                _this9.getBetTxt[UISeatId].string = msgData.endData[_i3].toFixed(2);
              }
            }
          }, this);
          time = dataLogic.isHide ? 0 : lastArr.length + .5;
          cc.log("time======", time);
          if (dataLogic.isHide && 2 == msgData.isEnd || !dataLogic.isHide) {
            var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc, cc.delayTime(msgData[dataLogic.selfSeatId] >= 0 ? 2.1 : 1), cc.callFunc(function() {
              _this9.updateUserBalance();
            }, this));
            this.winTxt.runAction(sequence);
            sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
            this.winTxt.runAction(sequence);
            this.resultAnim(txt, time, endAudio, win, dataLogic.isHide);
          }
        }
        2 == msgData.isEnd && dataLogic.gameEnd();
      },
      updateUserBalance: function updateUserBalance() {
        var selfBalance;
        for (var i = 0; i < this.endData.length; i++) {
          var _UISeatId2 = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          balance = balance <= 0 ? 0 : balance;
          this.player[_UISeatId2].getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
          _UISeatId2 == constant.SelfUISeatId && (selfBalance = balance);
        }
        dataLogic.setUserBalance(selfBalance);
        var roomKey = dataLogic.curRoomKey;
        var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
        if (this.roundNum < 5 && 2 == this.isEnd) if (selfBalance < admittanceChipNum) {
          this.gameOver(1);
          this.autoMatch.getComponent(cc.Toggle).isChecked = false;
          cc.sys.localStorage.setItem("game_erBaGangAutoMatch", false);
        } else this.gameOver();
      },
      gameOver: function gameOver(isMe) {
        var _this10 = this;
        var noticeTxt = "";
        noticeTxt = 1 == isMe ? "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u672c\u5c40\u6e38\u620f\u63d0\u524d\u7ed3\u675f" : "\u6709\u73a9\u5bb6\u4f59\u989d\u4e0d\u8db3\uff0c\u672c\u5c40\u6e38\u620f\u63d0\u524d\u7ed3\u675f";
        this.notice.getChildByName("txt").getComponent(cc.Label).string = noticeTxt;
        this.notice.position = cc.v2(0, cc.winSize.height + this.notice.height / 2);
        this.notice.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3, 1), cc.moveBy(.3, 0, -78)), cc.delayTime(1.8), cc.spawn(cc.fadeOut(.3, 0), cc.moveBy(.3, 0, 78)), cc.callFunc(function() {
          _this10.round.active = false;
          for (var i = 0; i < 10; i++) _this10.yuPaiList[i].getChildByName("txt").getComponent(cc.Label).string = "0";
        }, this)));
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this11 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this11.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this11.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        dataLogic.isHide && 1 == this.roundNum || this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this11.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this)));
      },
      resultAnim: function resultAnim(type, time, endAudio, win, hide) {
        var delayTime = -1 != [ 0, 1, 2 ].indexOf(type) ? cc.delayTime(3) : 0;
        var showAnimCallFun = cc.callFunc(function() {
          switch (type) {
           case 0:
            this.tongChiAnim.active = true;
            this.tongChiAnim.getComponent(cc.Animation).play();
            break;

           case 1:
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
            break;

           case 2:
            this.tongPeiAnim.active = true;
            this.tongPeiAnim.getComponent(cc.Animation).play();
          }
          audioMgr.playEffect(endAudio);
          win || audioMgr.playEffect(this.scrollNumber);
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.tongChiAnim.active = false;
          this.tongPeiAnim.active = false;
          this.winAnim.active = false;
          2 == this.isEnd && (this.isResultAnim = true);
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (2 == this.isEnd) if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(delayTime ? .3 : 1.5), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr, isOpen) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        UISeatId == constant.SelfUISeatId && (this.showdown.active = false);
        if (this.isUserOpenPokers(UISeatId)) return false;
        this.openPokers.push(UISeatId);
        var cardTypeNum = this.showPokers(UISeatId, cards);
        var hideCardsCallFun = cc.callFunc(function() {
          this.setPlayerHandCard(UISeatId, cards);
        }, this);
        cc.log("\u724c\u578b", cardTypeNum);
        if (!dataLogic.isHide || isOpen) this.node.runAction(cc.sequence(cc.delayTime(1 * index), hideCardsCallFun)); else {
          this.pokers[UISeatId].active = true;
          this.setPlayerHandCard(UISeatId, cards, true);
          this.cardType[UISeatId].getComponent(cc.Sprite).spriteFrame = this.cardTypeSf;
          this.cardType[UISeatId].getChildByName("txt").getComponent(cc.Label).string = ebgDataLogic.getCardTypeByTxt(cardTypeNum);
          if (0 == cardTypeNum) {
            this.cardType[UISeatId].getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
            this.cardType[UISeatId].getChildByName("txt").color = new cc.Color(255, 255, 255);
          } else {
            this.cardType[UISeatId].getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);
            this.cardType[UISeatId].getChildByName("txt").color = new cc.Color(255, 253, 204);
          }
        }
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, cardTypeNum) {
        var showCardsCallFun = cc.callFunc(function() {
          this.sgA(UISeatId, cardTypeNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleSgAudio[cardTypeNum]) : audioMgr.playEffect(this.femaleSgAudio[cardTypeNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      sgA: function sgA(UISeatId, cardTypeNum) {
        for (var i = 0; i < this.cardType[UISeatId].children.length; i++) this.cardType[UISeatId].children[i].poolId && kf.killObj(this.cardType[UISeatId].children[i]);
        var sgAnim = kf.getObj(constant.PoolId.paiGowCardType, this.cardType[UISeatId], this.sgAnimPf);
        this.cardType[UISeatId].active = true;
        if (0 == cardTypeNum) {
          sgAnim.getChildByName("qzpj_paixing_di").getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
          sgAnim.getChildByName("New Label").color = new cc.Color(255, 255, 255);
        } else {
          sgAnim.getChildByName("qzpj_paixing_di").getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);
          sgAnim.getChildByName("New Label").color = new cc.Color(255, 253, 104);
        }
        sgAnim.getChildByName("New Label").getComponent(cc.Label).string = ebgDataLogic.getCardTypeByTxt(cardTypeNum);
        sgAnim.getComponent(cc.Animation).play();
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards, backstage) {
        var _this12 = this;
        var pokers = [];
        var cardTypeNum = this.showPokers(UISeatId, cards);
        cc.log(cardTypeNum, "cardTypeNumBefore");
        for (var j = 0; j < cards.length; j++) pokers.push(ebgDataLogic.getCardValueAndColor(cards[j]));
        cc.log(pokers, "pokers");
        pokers = ebgDataLogic.order(pokers);
        cc.log(pokers, "pokersAfter");
        cc.log(cardTypeNum, "cardTypeNumAfter");
        for (var i = 0; i < pokers.length; i++) if (backstage) {
          this.pokers[UISeatId].getChildByName("pokers" + i).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("otherCard");
          this.pokers[UISeatId].getChildByName("pokers" + i).getChildByName("num").opacity = 255;
          this.pokers[UISeatId].getChildByName("pokers" + i).getChildByName("num").getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + pokers[i].key);
        } else {
          var _loop3 = function _loop3(_i4) {
            _this12.scheduleOnce(function() {
              _this12.pokers[UISeatId].getChildByName("pokers" + _i4).getComponent(cc.Sprite).spriteFrame = _this12.cardAtlas.getSpriteFrame("otherCard");
              _this12.pokers[UISeatId].getChildByName("pokers" + _i4).getChildByName("num").opacity = 255;
              _this12.pokers[UISeatId].getChildByName("pokers" + _i4).getChildByName("num").getComponent(cc.Sprite).spriteFrame = _this12.cardAtlas.getSpriteFrame("" + pokers[_i4].key);
              audioMgr.playEffect(_this12.upturnPoker);
              1 == _i4 && _this12.sgA(UISeatId, cardTypeNum);
            }, .3 * _i4 + .3);
          };
          for (var _i4 = 0; _i4 < pokers.length; _i4++) _loop3(_i4);
          this.scheduleOnce(function() {
            var sex = dataLogic.getSex(UISeatId);
            0 == sex ? audioMgr.playEffect(_this12.maleSgAudio[cardTypeNum]) : audioMgr.playEffect(_this12.femaleSgAudio[cardTypeNum]);
          }, .7);
        }
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var i = 0; i < cards.length; i++) playerPokersData.push(ebgDataLogic.getCardValueAndColor(cards[i]));
        return ebgDataLogic.CardJudgment(playerPokersData);
      },
      openTheCard: function openTheCard() {
        http.post(ebgConstant.OpenCards, "openCards");
        this.isOpenCard = true;
        this.showdown.active = false;
        this.upturnCards(dataLogic.selfSeatId, this.playerCardsArr[dataLogic.selfSeatId]);
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.goBackSelectRoom();
      },
      clickBind: function clickBind() {
        var _this13 = this;
        this.yuPaiView.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this13.yuPaiView.active = false;
        });
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "yuPaiBtn":
          this.yuPaiView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.ErBaGang);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "showdown":
          this.openTheCard();
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("game_erBaGangAutoMatch", isCheck);
          break;

         case "1":
          this.dispenseCardAction();
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  eventListener: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d1d81s/eR5BaaCPoPqawn30", "eventListener");
    "use strict";
    window["basic"]["eventListener"] = function() {
      var oneTooOneListener = {};
      oneTooOneListener.register = function(eventName, handler) {
        this[eventName] = handler;
      };
      oneTooOneListener.dispatch = function(eventName) {
        var handler = this[eventName];
        var args = [];
        for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
        handler ? handler.apply(this, args) : cc.error("not register " + eventName + "    callback func");
      };
      var oneToMultiListener = {};
      oneToMultiListener.register = function(eventName, handler) {
        var handlerList = this.handlers[eventName];
        if (!handlerList) {
          handlerList = [];
          this.handlers[eventName] = handlerList;
        }
        for (var i = 0; i < handlerList.length; i++) if (!handlerList[i]) {
          handlerList[i] = handler;
          return i;
        }
        handlerList.push(handler);
        return handlerList.length;
      };
      oneToMultiListener.dispatch = function(eventName) {
        var handlerList = this.handlers[eventName];
        var args = [];
        var i;
        for (i = 1; i < arguments.length; i++) args.push(arguments[i]);
        if (!handlerList) return;
        for (i = 0; i < handlerList.length; i++) {
          var handler = handlerList[i];
          handler && handler.apply(this, args);
        }
      };
      oneToMultiListener.unregister = function(eventName, handler) {
        var handlerList = this.handlers[eventName];
        if (!handlerList) return;
        for (var i = 0; i < handlerList.length; i++) {
          var oldHandler = handlerList[i];
          if (oldHandler === handler) {
            handlerList.splice(i, 1);
            break;
          }
        }
      };
      oneToMultiListener.unregisterAll = function() {
        for (var key in this.handlers) this.handlers[key] = [];
      };
      var setmetatable = function setmetatable(properties, obj) {
        obj = Object.create(obj);
        properties.__proto__ = obj.__proto__;
        return properties;
      };
      var getmetatable = function getmetatable(obj) {
        return Object.create(obj);
      };
      var eventListener = {};
      eventListener.create = function(type) {
        var newEventListener = {};
        if ("multi" === type) {
          newEventListener.handlers = {};
          setmetatable(newEventListener, Object.create(oneToMultiListener));
        } else setmetatable(newEventListener, Object.create(oneTooOneListener));
        return newEventListener;
      };
      return eventListener;
    };
    cc._RF.pop();
  }, {} ],
  fastRecharge: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "489f5wkxBdB2qwxo8pz4WzO", "fastRecharge");
    "use strict";
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtNickname: cc.Label,
        txtSingleRecharge: cc.Label,
        txtWeiXin: cc.Label,
        txtQq: cc.Label,
        txtZhiFuBao: cc.Label,
        copyAndOpenAppBtn: [ cc.Node ]
      },
      init: function init(data) {
        this.toastShow();
        this.yinShangInfo = data;
        this.txtNickname.string = data.BankStore;
        this.txtWeiXin.string = data.WXAccount || "\u6682\u65e0";
        this.copyAndOpenAppBtn[0].active = !!data.WXAccount;
        this.txtQq.string = data.QQAccount || "\u6682\u65e0";
        this.copyAndOpenAppBtn[1].active = !!data.QQAccount;
        this.txtZhiFuBao.string = data.ZFBAccount || "\u6682\u65e0";
        this.copyAndOpenAppBtn[2].active = !!data.ZFBAccount;
        this.txtSingleRecharge.string = "\u5355\u7b14\u5145\u503c\u6700\u4f4e" + data.Min + "\u5143\uff0c\u6700\u9ad8" + data.Max + "\u5143";
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.clickAudio);
        var isSucceed = void 0;
        switch (name) {
         case "weiXin":
          isSucceed = kf.copyToClipboard(this.yinShangInfo.WXAccount);
          break;

         case "qq":
          isSucceed = kf.copyToClipboard(this.yinShangInfo.QQAccount);
          break;

         case "zhiFuBao":
          isSucceed = kf.copyToClipboard(this.yinShangInfo.ZFBAccount);
        }
        this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  fastZJHHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d0593aS3iROfpNfjJSEI+1V", "fastZJHHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.FastZJH);
      },
      start: function start() {},
      preloadRes: function preloadRes() {
        var list = [ "goldenFraud/gameBg", "common/UI/table", "card", "goldenFraud/UI/yellowBtnBg", "common/effect/effect_start/glow3" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i]);
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  fastZJH: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "be3f95PnBJJKZSZ9vWjTMZY", "fastZJH");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var packUpActionTime = .1;
    var isDoneOverAction = false;
    var isEnd = true;
    var _playerNum = 0;
    var timerFun = null;
    var startTime = null;
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        dispenseCardNode: cc.Node,
        player: [ cc.Node ],
        timer: cc.Node,
        visitingEf: [ cc.Node ],
        efMatchingLoad: cc.Node,
        anteBg: cc.Node,
        playIdBg: cc.Node,
        roundBg: cc.Node,
        noticePanel: cc.Node,
        gameStartAnim: cc.Node,
        lunShuAnim: cc.Node,
        btMatching: cc.Button,
        autoMatch: cc.Node,
        btOpenCard: cc.Button,
        btCancelMatching: cc.Button,
        btStopGame: cc.Button,
        backCardPf: cc.Prefab,
        playIdTxt: cc.Label,
        anteTxt: cc.Label,
        roundTxt: cc.Label,
        cardTypeTxt: [ cc.Label ],
        matchingToastLayerTxt: cc.Label,
        cardAtlas: cc.SpriteAtlas,
        btnAudio: {
          default: null,
          type: cc.AudioClip
        },
        showAudio: {
          default: null,
          type: cc.AudioClip
        },
        winAudio: {
          default: null,
          type: cc.AudioClip
        },
        sendCardAudio: {
          default: null,
          type: cc.AudioClip
        },
        audioStart: {
          default: null,
          type: cc.AudioClip
        },
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        cardTypeManAudio: {
          default: [],
          type: cc.AudioClip
        },
        cardTypeWoManAudio: {
          default: [],
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "openCardCb", this.openCardCb.bind(this) ], [ "stopGameCb", this.stopGameCb.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "intoGameRoom", this.intoGameRoom.bind(this) ], [ "intoRoom", this.intoRoom.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ], [ "onGameOver", this.onGameOver.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow(hideTime) {
        cc.log("gameShow");
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.gameStartAnim.active = false;
        this.lunShuAnim.active = false;
        for (var i = 0; i < this.backCard.length; i++) this.backCard[i].stopAllActions();
        cc.log("socket\u94fe\u63a5\u72b6\u6001", this.socketIO.isConnected());
        if (this.socketIO.isConnected()) {
          this.updatePlayerUI();
          var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
          if (this.isGameOver) {
            var nowTime = new Date().getTime();
            if ((nowTime - startTime) / 1e3 > 3) {
              this.btMatching.node.active = true;
              this.autoMatch.active = true;
            }
            this.hideAllBackCard();
          }
          if (isEnd) {
            isDoneOverAction = true;
            this.showSettleUI(gfDataLogic.settlementChipNum);
          } else {
            remainingTime = Math.floor(remainingTime);
            if (remainingTime > 0) {
              cc.log("\u91cd\u65b0\u5012\u8a08\u6642");
              this.countDown(remainingTime);
            } else {
              this.btOpenCard.node.active = false;
              this.removeTimer();
              this.timeOutOpenCard();
            }
          }
        }
      },
      gameHide: function gameHide() {
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.setNoticeOpacityHide();
      },
      onLoad: function onLoad() {
        isEnd = true;
        _playerNum = 0;
        this.baseInit(constant.GameId.FastZJH);
        dataLogic.setLimitPlayerNum(gfConstant.maxPlayerNum);
        this.registerEvent();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        gfDataLogic.setSettlementChipNum(null);
        var isCheck = cc.sys.localStorage.getItem("game_fastZJHAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        for (var i = 1; i < gfConstant.maxPlayerNum; i++) this.player[i].active = false;
        this.backCard = [];
        for (var _i = 0; _i < 3 * gfConstant.maxPlayerNum; _i++) {
          this.backCard[_i] = cc.instantiate(this.backCardPf);
          this.backCard[_i].parent = this.dispenseCardNode;
          this.backCard[_i].opacity = 0;
        }
        this.handCardSp = [];
        this.handCardPos = [];
        for (var _i2 = 0; _i2 < gfConstant.maxPlayerNum; _i2++) {
          this.handCardSp[_i2] = [];
          this.handCardPos[_i2] = [];
          for (var j = 0; j < 3; j++) {
            this.handCardSp[_i2][j] = this.player[_i2].getChildByName("card" + j).getChildByName("bg").getComponent(cc.Sprite);
            this.handCardPos[_i2][j] = kf.clone(this.player[_i2].getChildByName("card" + j).position);
            this.handCardSp[_i2][j].node.opacity = 0;
          }
        }
        this.headSp = [];
        for (var _i3 = 0; _i3 < gfConstant.maxPlayerNum; _i3++) this.headSp[_i3] = this.player[_i3].getChildByName("bg").getChildByName("head").getComponent(cc.Sprite);
        this.resultChipNumTxt = [];
        for (var _i4 = 0; _i4 < gfConstant.maxPlayerNum; _i4++) {
          this.resultChipNumTxt[_i4] = this.player[_i4].getChildByName("resultChipNumTxt").getComponent(cc.Label);
          this.resultChipNumTxt[_i4].node.opacity = 0;
        }
        this.chipNode = [];
        this.isGameOver = true;
        this.haveCardData = false;
        this.doneShowCardAmin = false;
        this.hideAllCardTypeView();
        this.isPlayShowCardAmin = false;
        cc.log("dataLogic.needRecover", dataLogic.needRecover);
        if (dataLogic.needRecover) {
          this.doneGameRecover = false;
          this.btOpenCard.node.active = false;
          this.showAndUpdateSelfUI();
          this.setHandCardView(constant.SelfUISeatId, false);
          this.btMatching.node.active = false;
          this.autoMatch.active = false;
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        } else this.initMatchingView(false, false);
        var selRoomKey = dataLogic.curRoomKey;
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[selRoomKey - 1].ante;
        this.setAnteBgState();
        this.btStopGame.node.active = false;
        var playerPos = [ {
          x: 87,
          y: -166
        }, {
          x: 169,
          y: 24
        }, {
          x: -12,
          y: 117
        }, {
          x: 14,
          y: 117
        }, {
          x: -169,
          y: 24
        } ];
        for (var _i5 = 0; _i5 < this.player.length; _i5++) {
          this.player[_i5].playerPos = playerPos[_i5];
          this.bindLongTouchEvent(this.player[_i5]);
        }
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          gfDataLogic.setSettlementChipNum(null);
          var roomKey = dataLogic.curRoomKey;
          this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
          this.setAnteBgState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          dataLogic.gameEnd();
          this.isGameOver = true;
          this.cleanView();
          this.btMatching.node.active = true;
          this.btMatching.node.scale = 1;
          this.autoMatch.active = true;
          constant.HttpCode.GameOver == msg.Code && dataLogic.setReqRecoverState(false);
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        var _this = this;
        isDoneOverAction = false;
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        this.btMatching.node.active = false;
        this.autoMatch.active = false;
        gfDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        var roomKey = dataLogic.curRoomKey;
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setAnteBgState();
        if (0 == msg.state) {
          cc.log("\u7b49\u5f85\u5339\u914d");
          this.initMatchingView(true, true);
          this.btMatching.node.active = false;
          return;
        }
        dataLogic.matching();
        this.setMatchingToastView(false);
        this.isGameOver = false;
        var countDownLeaveTime;
        var UISeatId = void 0;
        gfDataLogic.setAllPlayerCards(msg.cards);
        var seed = msg.playId.substr(-4);
        dataLogic.setSeed(Number(seed));
        var playerInfo = kf.clone(msg.playerInfo);
        for (var i = 0; i < playerInfo.length; i++) {
          playerInfo[i].seatId = i;
          var _UISeatId = dataLogic.getUISeatIdBySeatId(i);
          this.player[_UISeatId].userId = playerInfo[i].userId;
        }
        _playerNum = playerInfo.length;
        if (1 == msg.isEnd) {
          isEnd = true;
          this.removeTimer();
          this.showSettleUI(msg.endData);
        } else {
          dataLogic.setTimerData(msg.endTime);
          var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
          cc.log("\u5269\u4f59\u5f00\u724c\u65f6\u95f4", remainingTime);
          remainingTime = Math.floor(remainingTime);
          countDownLeaveTime = remainingTime;
          if (remainingTime > 0) {
            isEnd = false;
            this.countDown(remainingTime);
          } else {
            isEnd = true;
            this.removeTimer();
          }
        }
        dataLogic.setPlayerInfo(playerInfo);
        for (var _i6 = 0; _i6 < playerInfo.length; _i6++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i6);
          this.player[UISeatId].userId = playerInfo[_i6].userId;
          this.setPlayerUIInfo(UISeatId, playerInfo[_i6]);
          if (UISeatId == constant.SelfUISeatId && 2 == playerInfo[_i6].state) {
            this.btStopGame.node.active = false;
            this.isDoStopGame = true;
            1 != msg.isEnd && 2 != msg.isEnd || (this.isGameOver = true);
          }
          this.player[UISeatId].active || (this.player[UISeatId].active = true);
          this.setPlayerHandCard(UISeatId, msg.cards[_i6]);
          if (playerInfo[_i6].isComplete || 1 == msg.isEnd) {
            if (UISeatId == constant.SelfUISeatId) {
              this.btOpenCard.node.active = false;
              gfDataLogic.seeCard();
              this.setSelfCardUI(true);
            }
            this.setHandCardView(UISeatId, true);
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.HaveSeen);
          } else if (isEnd) if (UISeatId == constant.SelfUISeatId) {
            this.btOpenCard.node.active = false;
            gfDataLogic.seeCard();
            this.setSelfCardUI(true);
            this.setHandCardView(constant.SelfUISeatId, true);
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.HaveSeen);
          } else {
            this.showPlayerBackCard(UISeatId);
            this.setHandCardView(UISeatId, false);
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.NoLook);
          } else {
            if (UISeatId == constant.SelfUISeatId) {
              gfDataLogic.setSeeCardState(false);
              countDownLeaveTime - 3 ? this.scheduleOnce(function() {
                _this.btOpenCard.node.active = true;
              }, countDownLeaveTime - 3) : this.btOpenCard.node.active = true;
              this.setSelfCardUI(false);
              this.setHandCardView(constant.SelfUISeatId, true);
            } else this.showPlayerBackCard(UISeatId);
            this.setCardTypeView(UISeatId, false);
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.NoLook);
          }
        }
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + msg.playId;
        this.setPlayIdBgState();
        this.setRoundNum(msg.round);
        5 == msg.round || this.isGameOver ? this.btStopGame.node.active = false : this.btStopGame.node.active = true;
        if (this.isGameOver) {
          this.btMatching.node.active = true;
          this.btMatching.node.scale = 1;
          this.autoMatch.active = true;
        }
      },
      onGameOver: function onGameOver(msg) {
        var _this3 = this;
        cc.log("\u73a9\u5bb6\u4eba\u6570\u4e0d\u591f\uff0c\u63d0\u524d\u7ed3\u675f\u6e38\u620f", isDoneOverAction);
        this.isGameOver = true;
        this.btStopGame.node.active = false;
        if (dataLogic.isHide) {
          if (isDoneOverAction) {
            this.btMatching.node.active = true;
            this.btMatching.node.scale = 1;
            this.autoMatch.active = true;
          }
        } else {
          if (!this.isDoStopGame) {
            this.noticePanel.opacity = 255;
            this.noticePanel.y = cc.winSize.height / 2 + this.noticePanel.height / 2;
            this.noticePanel.getChildByName("noticeTxt").getComponent(cc.Label).string = "\u56e0\u5176\u4ed6\u73a9\u5bb6\u9000\u51fa\u6e38\u620f\uff0c\u8be5\u724c\u5c40\u63d0\u524d\u7ed3\u675f";
            this.noticePanel.runAction(cc.moveBy(.3, 0, -78));
            this.scheduleOnce(function() {
              var _this2 = this;
              this.noticePanel.runAction(cc.sequence(cc.moveBy(.3, 0, 78), cc.callFunc(function() {
                _this2.noticePanel.opacity = 0;
                if (isDoneOverAction) {
                  _this2.btMatching.node.active = true;
                  _this2.btMatching.node.scale = 1;
                  _this2.autoMatch.active = true;
                }
              }, this)));
            }, 1.8);
          }
          if (this.autoMatch.getComponent(cc.Toggle).isChecked && !dataLogic.isHide) {
            if (this.noticePanel.opacity > 0) {
              this.noticePanel.opacity = 0;
              this.noticePanel.y = cc.winSize.height + this.noticePanel.height / 2;
            }
            dataLogic.isHide ? this.matching() : this.scheduleOnce(function() {
              _this3.matching();
            }, 1);
          } else {
            this.btMatching.node.active = true;
            this.btMatching.node.scale = 1;
            this.autoMatch.active = true;
          }
        }
      },
      hideAllPlayer: function hideAllPlayer() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) {
          this.setHandCardView(i, false);
          this.player[i].active = false;
        }
      },
      hideAllBackCard: function hideAllBackCard() {
        for (var i = 0; i < this.backCard.length; i++) this.backCard[i].opacity = 0;
      },
      showAndUpdateSelfUI: function showAndUpdateSelfUI() {
        this.player[constant.SelfUISeatId].active || (this.player[constant.SelfUISeatId].active = true);
        this.setPlayerHead(constant.SelfUISeatId, dataLogic.userHeadUrl);
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var nicknameNode = this.player[constant.SelfUISeatId].getChildByName("bg").getChildByName("nickname");
        nicknameNode.getComponent(cc.Label).string = dataLogic.userName;
      },
      stopAllActions: function stopAllActions() {
        this.node.stopAllActions();
      },
      setNoticeOpacityHide: function setNoticeOpacityHide() {
        if (255 == this.noticePanel.opacity) {
          this.noticePanel.opacity = 0;
          this.noticePanel.position = cc.v2(0, cc.winSize.height / 2 + this.noticePanel.height / 2);
        }
      },
      cleanView: function cleanView() {
        _playerNum = 0;
        this.btStopGame.node.active = false;
        this.btOpenCard.node.active = false;
        this.hideAllPlayer();
        this.hideAllBackCard();
        this.showAndUpdateSelfUI();
        this.setHandCardView(constant.SelfUISeatId, false);
        this.resultChipNumTxt[constant.SelfUISeatId].node.opacity = 0;
        this.setRoundNum(1);
        this.visitingEf[0].getComponent(cc.Animation).stop();
        this.visitingEf[1].getComponent(cc.Animation).stop();
        this.visitingEf[0].x = -1e4;
        this.visitingEf[1].x = -1e4;
        this.hideAllCardTypeView();
        this.removeTimer();
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a";
        this.setPlayIdBgState();
        this.setNoticeOpacityHide();
        this.setMatchingToastView(false);
        this.roundBg.active = false;
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        this.setVisitingCardOpacity(constant.SelfUISeatId, 255);
        this.cleanView();
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.btMatching.node.active = false;
          this.autoMatch.active = false;
        } else {
          this.btMatching.node.active = true;
          this.btMatching.node.scale = 1;
          this.autoMatch.active = true;
        }
      },
      onGameStart: function onGameStart(data) {
        var _this4 = this;
        audioMgr.playEffect(this.audioStart);
        isEnd = false;
        isDoneOverAction = false;
        this.visitingEf[0].getComponent(cc.Animation).stop();
        this.visitingEf[1].getComponent(cc.Animation).stop();
        this.visitingEf[0].x = 1e3;
        this.visitingEf[1].x = 1e3;
        startTime = new Date().getTime();
        dataLogic.matching();
        this.setMatchingToastView(false);
        this.isPlayShowCardAmin = false;
        this.isGameOver = false;
        this.isDoStopGame = false;
        gfDataLogic.resetData();
        this.doneShowCardAmin = false;
        this.hideAllCardTypeView();
        this.roundBg.active = true;
        var playerInfo = data.playerInfo, UISeatId = void 0;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.player[i].active = false;
        _playerNum = playerInfo.length;
        var bg = null;
        for (var _i7 = 0; _i7 < playerInfo.length; _i7++) {
          playerInfo[_i7].seatId = _i7;
          UISeatId = dataLogic.getUISeatIdBySeatId(_i7);
          this.setPlayerUIInfo(UISeatId, playerInfo[_i7]);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i7].userId;
          this.player[UISeatId].getChildByName("bg");
          bg = this.player[UISeatId].getChildByName("bg");
          bg.getComponent(cc.Animation).stop();
          bg.scale = 1;
          this.resultChipNumTxt[UISeatId].node.opacity = 0;
          this.setHandCardView(UISeatId, false);
          gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.NoLook);
          this.setPlayerHandCard(UISeatId, data.cards[_i7]);
        }
        gfDataLogic.setAllPlayerCards(data.cards);
        this.setRoundNum(data.round);
        5 == data.round ? this.btStopGame.node.active = false : this.btStopGame.node.active = true;
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + data.playId;
        this.setPlayIdBgState();
        var delayTime = .1 * (_playerNum + 1) + 1;
        if (dataLogic.isHide) this.dispenseCardAction(); else {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.active = true;
          this.lunShuAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.getChildByName("New Label").getComponent(cc.Label).string = data.round;
          this.scheduleOnce(function() {
            _this4.dispenseCardAction();
          }, 1.67);
          delayTime += 1.67;
        }
        if (dataLogic.isHide) {
          this.btOpenCard.node.active = true;
          this.btOpenCard.node.scale = 1;
        } else this.scheduleOnce(function() {
          _this4.btOpenCard.node.active = true;
          _this4.btOpenCard.node.scale = 1;
        }, delayTime);
        dataLogic.setTimerData(data.endTime);
        this.node.runAction(cc.sequence(cc.delayTime(delayTime), cc.callFunc(function() {
          _this4.setSelfCardUI(false);
          _this4.setHandCardView(constant.SelfUISeatId, true);
          _this4.setCardTypeView(constant.SelfUISeatId, false);
          for (var _i8 = 0; _i8 < 3; _i8++) _this4.backCard[_i8].x = 9e3;
          var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
          remainingTime = Math.floor(remainingTime);
          _this4.countDown(remainingTime);
        }, this)));
      },
      setAnteBgState: function setAnteBgState() {
        this.anteBg.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.anteBg.width = this.anteBg.getChildByName("txt").width + 40;
        this.playIdBg.x = this.anteBg.x + this.anteBg.width + 20;
      },
      setPlayIdBgState: function setPlayIdBgState() {
        this.playIdBg.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.playIdBg.width = this.playIdBg.getChildByName("txt").width + 40;
      },
      showNoticePanel: function showNoticePanel() {
        this.noticePanel.opacity = 255;
        this.noticePanel.y = cc.winSize.height / 2 + this.noticePanel.height / 2;
        this.noticePanel.runAction(cc.moveBy(.3, 0, -78));
        this.scheduleOnce(function() {
          var _this5 = this;
          this.noticePanel.runAction(cc.sequence(cc.moveBy(.3, 0, 78), cc.callFunc(function() {
            _this5.noticePanel.opacity = 0;
          }, this)));
        }, 1.8);
      },
      gameEnd: function gameEnd(data, atOnceRun) {
        var _this6 = this;
        cc.log("\u6e38\u620f\u7ed3\u675f");
        gfDataLogic.setSettlementChipNum(data.endData);
        isEnd = true;
        if (2 == data.isEnd || this.isDoStopGame) {
          this.btStopGame.node.active = false;
          dataLogic.gameEnd();
          this.isGameOver = true;
        }
        this.btOpenCard.node.active = false;
        this.removeTimer();
        var winUISeatId = 0, winner = 0, winChipNum = 0, UISeatId = 0, balance = void 0;
        for (var i = 0; i < data.endData.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          balance = this.getPlayerBalance(UISeatId);
          var _playerInfo = dataLogic.playerInfo[i];
          _playerInfo.balance = (100 * _playerInfo.balance + 100 * data.endData[i]) / 100;
          data.endData[i] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * data.endData[i]) / 100);
          _playerInfo.gameTimes += 1;
          this.player[i]._playerInfo = _playerInfo;
          if (data.endData[i] > 0) {
            winner = i;
            winChipNum = data.endData[i];
            continue;
          }
          this.setPlayerBalance(UISeatId, data.endData[i].add(balance));
        }
        var selfBalance = this.getPlayerBalance(constant.SelfUISeatId);
        var roomKey = dataLogic.curRoomKey;
        var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
        if (2 == data.isEnd && gfDataLogic.chipRoundNum < 5 && !this.isDoStopGame) if (selfBalance < admittanceChipNum) {
          this.isGameOver = true;
          if (!dataLogic.isHide) {
            this.noticePanel.getChildByName("noticeTxt").getComponent(cc.Label).string = "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7ee7\u7eed\u6e38\u620f";
            this.showNoticePanel();
          }
          this.autoMatch.getComponent(cc.Toggle).isChecked = false;
          cc.sys.localStorage.setItem("game_fastZJHAutoMatch", false);
        } else if (!dataLogic.isHide) {
          this.noticePanel.getChildByName("noticeTxt").getComponent(cc.Label).string = "\u56e0\u5176\u4ed6\u73a9\u5bb6\u9000\u51fa\u6e38\u620f\uff0c\u8be5\u724c\u5c40\u63d0\u524d\u7ed3\u675f";
          this.showNoticePanel();
        }
        if (_playerNum >= 3 && gfDataLogic.chipRoundNum < 5 && !this.isDoStopGame && selfBalance < admittanceChipNum) {
          this.isGameOver = true;
          if (!dataLogic.isHide) {
            this.noticePanel.getChildByName("noticeTxt").getComponent(cc.Label).string = "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7ee7\u7eed\u6e38\u620f";
            this.showNoticePanel();
          }
          this.autoMatch.getComponent(cc.Toggle).isChecked = false;
          cc.sys.localStorage.setItem("game_fastZJHAutoMatch", false);
        }
        if (dataLogic.isHide) {
          isDoneOverAction = true;
          this.showSettleUI(data.endData);
          return;
        }
        winUISeatId = dataLogic.getUISeatIdBySeatId(winner);
        var delayTime = 0;
        var func1 = cc.callFunc(function() {
          var seatId = 0;
          for (var _i9 = 0; _i9 < gfConstant.maxPlayerNum; _i9++) ;
          var needShowCardUISeatIds = gfDataLogic.getNotOpenCardUISeatIds();
          for (var _i10 = 0; _i10 < needShowCardUISeatIds.length; _i10++) {
            UISeatId = needShowCardUISeatIds[_i10];
            seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
            _this6.showCardAnim(UISeatId);
            _this6.playCardTypeAudio(UISeatId);
          }
          if (!gfDataLogic.haveSeen) {
            _this6.showSelfCard();
            _this6.playCardTypeAudio(constant.SelfUISeatId);
          }
        }, this);
        var func2 = cc.callFunc(function() {
          UISeatId = dataLogic.getUISeatIdBySeatId(winner);
          var balance = _this6.getPlayerBalance(UISeatId);
          _this6.setPlayerBalance(UISeatId, balance.add(winChipNum));
          _this6.settlementChipNumAction(data.endData);
          _this6.visitingWinAnim(UISeatId);
        }, this);
        var func3 = cc.callFunc(function() {
          winUISeatId == constant.SelfUISeatId && audioMgr.playEffect(_this6.winAudio);
          if (_this6.isGameOver) if (_this6.autoMatch.getComponent(cc.Toggle).isChecked && !dataLogic.isHide) {
            if (_this6.noticePanel.opacity > 0) {
              _this6.noticePanel.opacity = 0;
              _this6.noticePanel.y = cc.winSize.height + _this6.noticePanel.height / 2;
            }
            dataLogic.isHide ? _this6.matching() : _this6.scheduleOnce(function() {
              _this6.matching();
            }, 1.25);
          } else if (dataLogic.isHide) {
            _this6.btMatching.node.active = true;
            _this6.btMatching.node.scale = 1;
            _this6.autoMatch.active = true;
            _this6.btStopGame.node.active = false;
          } else _this6.scheduleOnce(function() {
            cc.log("\u724c\u5c40\u7d50\u675f\u5ef6\u66421");
            _this6.btMatching.node.active = true;
            _this6.btMatching.node.scale = 1;
            _this6.autoMatch.active = true;
            _this6.btStopGame.node.active = false;
          }, 1.5);
          isDoneOverAction = true;
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(delayTime + .5), func1, cc.delayTime(.1), func2, cc.delayTime(.1), func3));
      },
      showSettleUI: function showSettleUI(result) {
        cc.log(result, "result");
        if (null == result || !result.length) return;
        cc.log("\u663e\u793a\u7ed3\u675fUI");
        this.setSelfCardUI(true);
        var winUISeatId = 0, UISeatId = void 0;
        for (var i = 0; i < result.length; i++) if (result[i] > 0) {
          winUISeatId = dataLogic.getUISeatIdBySeatId(i);
          break;
        }
        for (var _i11 = 0; _i11 < _playerNum; _i11++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i11);
          this.setHandCardView(UISeatId, true);
        }
        this.visitingWinAnim(winUISeatId);
        this.showSettlementChip(result);
      },
      setRoundNum: function setRoundNum(n) {
        if (null != n) {
          gfDataLogic.setChipRoundNum(n);
          this.roundTxt.string = "\u7b2c" + n + "/5\u8f6e";
        }
      },
      onSeeCard: function onSeeCard(data) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        if (!this.player[UISeatId].active) {
          cc.log("\u6ca1\u6709\u8fd9\u4e2a\u73a9\u5bb6", data);
          return;
        }
        if (UISeatId == constant.SelfUISeatId) {
          this.haveCardData = true;
          gfDataLogic.setHandCard(data.cards);
          this.setHandCardView(UISeatId, true);
        } else {
          var audioKey = this.randomAudioKey(UISeatId);
          audioMgr.playEffect(this.watchCardAudio[audioKey]);
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.btMatching.node.active = true;
          this.btMatching.node.scale = 1;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        dataLogic.setDeskId(data.Data.deskId);
        this.setMatchingToastUI(true);
      },
      openCardCb: function openCardCb(data) {
        if (data.Code == constant.HttpCode.GameOver) {
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
      },
      onOpenCards: function onOpenCards(msg) {
        if (1 == msg.isEnd || 2 == msg.isEnd) this.gameEnd(msg); else {
          var UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
          if (UISeatId != constant.SelfUISeatId) {
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.HaveSeen);
            this.showCardAnim(UISeatId);
            this.playCardTypeAudio(UISeatId);
          }
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.GameOver) {
          this.btMatching.node.active = true;
          this.btMatching.node.stopAllActions();
          this.btMatching.node.scale = 1;
          this.autoMatch.active = true;
          this.isGameOver = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      countDown: function countDown(second) {
        var _this7 = this;
        second <= 3 && (this.timer.x = 0);
        var timeTxt = this.timer.getChildByName("txt").getComponent(cc.Label);
        timeTxt.string = second;
        this.unschedule(this.timerFun);
        this.timerFun = function() {
          Number(timeTxt.string) - 1 <= 3 && (_this7.timer.x = 0);
          timeTxt.string = Number(timeTxt.string) - 1;
          if (0 == timeTxt.string) {
            gfDataLogic.haveSeen || _this7.timeOutOpenCard();
            _this7.removeTimer();
            _this7.btOpenCard.node.active = false;
          }
        };
        this.schedule(this.timerFun, 1, second - 1);
      },
      timeOutOpenCard: function timeOutOpenCard() {
        cc.log("\u8d85\u65f6\u81ea\u52a8\u5f00\u724c");
        this.btnEvent("", "openCard");
      },
      removeTimer: function removeTimer() {
        this.unschedule(this.timerFun);
        this.timer.x = 1e3;
      },
      btnEvent: function btnEvent(eventTouch, eventName) {
        cc.log("===btnEvent", eventName);
        "" != eventTouch && audioMgr.playEffect(this.btnAudio);
        switch (eventName) {
         case "menu":
          this.menuBg.active = true;
          break;

         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf);
          break;

         case "exitRoom":
          this.tryExitRoom();
          break;

         case "goBackHall":
          this.loadScene(constant.SceneName.Hall);
          break;

         case "help":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          record.getComponent("record").recordMainShow(constant.GameId.FastZJH);
          break;

         case "matching":
          this.matching();
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "stopGame":
          this.stopGame();
          http.post(gfConstant.PostStopGame, "stopGameCb");
          break;

         case "openCard":
          this.unschedule(this.timeOutOpenCard);
          gfDataLogic.seeCard();
          this.showSelfCard();
          gfDataLogic.setPlayerState(constant.SelfUISeatId, gfConstant.PlayerState.HaveSeen);
          this.btOpenCard.node.active = false;
          this.playCardTypeAudio(constant.SelfUISeatId);
          http.post(gfConstant.PostOpenCard, "openCardCb");
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("game_fastZJHAutoMatch", isCheck);
          break;

         default:
          cc.warn("\u672a\u77e5\u7684\u4e8b\u4ef6\u540d", eventName);
        }
      },
      stopGameCb: function stopGameCb(data) {
        var _this8 = this;
        if (data.Code == constant.HttpCode.GameOver) {
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
        if (data.Code == constant.HttpCode.Succeed) {
          this.isGameOver = true;
          if (isDoneOverAction) if (dataLogic.isHide) {
            this.btMatching.node.active = true;
            this.btMatching.node.scale = 1;
            this.autoMatch.active = true;
          } else this.scheduleOnce(function() {
            cc.log("\u5ef6\u66421.5s");
            _this8.btMatching.node.active = true;
            _this8.btMatching.node.scale = 1;
            _this8.autoMatch.active = true;
          }, 1.5);
        }
      },
      stopGame: function stopGame() {
        this.btStopGame.node.active = false;
        this.noticePanel.opacity = 255;
        this.noticePanel.y = cc.winSize.height / 2 + this.noticePanel.height / 2;
        this.noticePanel.getChildByName("noticeTxt").getComponent(cc.Label).string = "\u672c\u5c40\u7ed3\u675f\u5c06\u81ea\u52a8\u505c\u6b62\u6e38\u620f";
        this.noticePanel.runAction(cc.moveBy(.3, 0, -78));
        this.autoMatch.getComponent(cc.Toggle).isChecked = false;
        this.isDoStopGame = true;
        cc.sys.localStorage.setItem("game_fastZJHAutoMatch", false);
        this.scheduleOnce(function() {
          var _this9 = this;
          this.noticePanel.runAction(cc.sequence(cc.moveBy(.3, 0, 78), cc.callFunc(function() {
            _this9.noticePanel.opacity = 0;
          }, this)));
        }, 1.8);
      },
      btnIntoRoomEvent: function btnIntoRoomEvent(eventTouch, roomId) {
        audioMgr.playEffect(this.btnAudio);
        gfDataLogic.setRoomId(roomId);
        dataLogic.setRoomConfig("roomId", roomId);
        this.matching();
      },
      intoRoom: function intoRoom(bet, roomId) {
        cc.log("bet", bet, "roomid", roomId);
        bet <= dataLogic.userBalance ? this.intoGameRoom(roomId) : this.showRechargeToast(bet);
      },
      intoGameRoom: function intoGameRoom(roomId) {
        gfDataLogic.setRoomId(constant.GameId.FastZJH + roomId);
        dataLogic.setRoomConfig("roomId", constant.GameId.FastZJH + roomId);
        this.matching();
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        dataLogic.setNeedRecover(true);
        gfDataLogic.setGameEndData(null);
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        var roomKey = dataLogic.curRoomKey;
        cc.log("roomKey", roomKey, dataLogic.selectRoomConfig);
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setAnteBgState();
        this.initMatchingView(true, false);
        this.btMatching.node.active = false;
        this.autoMatch.active = false;
        gfConstant.PostMatching.roomId = constant.GameId.FastZJH + roomKey;
        http.post(gfConstant.PostMatching, "matchingCb");
        gfDataLogic.resetData();
      },
      btnBetEvent: function btnBetEvent(eventTouch, key) {
        this.setChoiceCompareFrameView(false);
        audioMgr.playEffect(this.btnAudio);
        this.unschedule(this.timeOutFold);
        this.removeTimer();
        key = Number(key);
        var multi = 1;
        gfDataLogic.haveSeen && (multi = 2);
        var chipNum = void 0, sex = dataLogic.getSex(constant.SelfUISeatId);
        if (key > -1) {
          audioMgr.playEffect(this.addChipAudio[sex]);
          gfConstant.PostBet.index = dataLogic.roomConfig.betConfig[key];
          chipNum = dataLogic.roomConfig.betConfig[key] * multi;
        } else {
          audioMgr.playEffect(this.followAudio[sex]);
          chipNum = gfDataLogic.followChipNum;
          gfConstant.PostBet.index = -1;
        }
        this.bet(constant.SelfUISeatId, chipNum);
        http.post(gfConstant.PostBet, "betCb", chipNum);
      },
      showPlayerBackCard: function showPlayerBackCard(UISeatId) {
        var key = void 0, bg = void 0;
        for (var j = 0; j < 3; j++) {
          key = 3 * UISeatId + j;
          this.backCard[key].stopAllActions();
          bg = this.backCard[key].getChildByName("bg");
          bg.getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          bg.scaleX = 1;
          bg.skewY = 0;
          this.backCard[key].position = this.getHandCardPos(UISeatId, j);
          this.backCard[key].rotation = 0;
          this.backCard[key].opacity = 255;
          UISeatId === constant.SelfUISeatId ? this.backCard[key].scale = 1.2 : this.backCard[key].scale = .84;
        }
      },
      dispenseCardAction: function dispenseCardAction() {
        var _this10 = this;
        this.recoverHandCardPos();
        if (dataLogic.isHide) return;
        this.send = true;
        var startPos = cc.v2(0, 360), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0;
        var _loop = function _loop(i) {
          if (!_this10.player[i].active) return "continue";
          basecDelay += .1;
          for (var j = 0; j < 3; j++) {
            key = 3 * i + j;
            delay = cc.delayTime(.1 * j + basecDelay);
            _this10.backCard[key].position = startPos;
            _this10.backCard[key].getChildByName("bg").skewY = 0;
            _this10.backCard[key].getChildByName("bg").scale = 1;
            _this10.backCard[key].scale = .55;
            _this10.backCard[key].opacity = 255;
            endPos = _this10.getHandCardPos(i, 0);
            if (dataLogic.isHide) _this10.showPlayerBackCard(i); else {
              move = cc.moveTo(actionTime, endPos);
              if (i === constant.SelfUISeatId) {
                scale = cc.scaleTo(actionTime, 1.2);
                cardMove = cc.moveTo(.15, _this10.getHandCardPos(i, j));
              } else {
                scale = cc.scaleTo(actionTime, .84);
                cardMove = cc.moveTo(.15, _this10.getHandCardPos(i, j));
              }
              var fpCallFun = cc.callFunc(function() {
                0 == i && audioMgr.playEffect(_this10.sendCardAudio);
              }, _this10);
              spawn = cc.spawn(move, scale, fpCallFun);
              sequence = cc.sequence(delay, spawn, cardMove);
              _this10.backCard[key].runAction(sequence);
            }
          }
        };
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) {
          var _ret = _loop(i);
          if ("continue" === _ret) continue;
        }
        showPokerTime = .1 * (_playerNum + 1) + 1;
        return showPokerTime;
      },
      setHandCardView: function setHandCardView(UISeatId, isShow) {
        if (!isShow) {
          for (var i = 0; i < 3; i++) this.handCardSp[UISeatId][i].node.opacity = 0;
          return;
        }
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        var cardType = gfDataLogic.getOptimalCardType(gfDataLogic.cards[seatId]);
        this.setCardTypeView(UISeatId, true, cardType);
        var key = 0;
        for (var _i12 = 0; _i12 < 3; _i12++) {
          key = 3 * UISeatId + _i12;
          this.handCardSp[UISeatId][_i12].node.opacity = 255;
          this.backCard[key].opacity = 0;
        }
      },
      packUpCardAction: function packUpCardAction(UISeatId) {
        var key = void 0;
        key = 3 * UISeatId;
        var endPos = this.backCard[key].position;
        for (var i = 1; i < 3; i++) {
          key = 3 * UISeatId + i;
          this.backCard[key].runAction(cc.moveTo(packUpActionTime, endPos));
        }
      },
      recoverHandCardPos: function recoverHandCardPos() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) for (var j = 0; j < 3; j++) this.handCardSp[i][j].node.parent.position = this.handCardPos[i][j];
      },
      spreadCardAction: function spreadCardAction(UISeatId) {
        var card = void 0;
        var spaceBetween = 40;
        card = this.handCardSp[UISeatId][0].node.parent;
        var endPos = {
          x: card.x,
          y: card.y
        };
        for (var i = 1; i < 3; i++) {
          this.handCardSp[UISeatId][i].node.parent.position = card.position;
          endPos.x += spaceBetween;
          this.handCardSp[UISeatId][i].node.parent.stopAllActions();
          this.handCardSp[UISeatId][i].node.parent.runAction(cc.moveTo(packUpActionTime, endPos));
        }
      },
      setSelfCardUI: function setSelfCardUI(isOpenCard) {
        var space = 120;
        var scale = 1, handCardX = this.handCardSp[constant.SelfUISeatId][1].node.parent.x - space;
        if (isOpenCard) {
          scale = .695;
          space = 40;
          handCardX = this.handCardSp[constant.SelfUISeatId][1].node.parent.x - space;
        }
        for (var i = 0; i < 3; i++) {
          this.handCardSp[constant.SelfUISeatId][i].node.opacity = 255;
          this.handCardSp[constant.SelfUISeatId][i].node.parent.x = handCardX + space * i;
          this.handCardSp[constant.SelfUISeatId][i].node.parent.scale = scale;
        }
      },
      showSelfCard: function showSelfCard() {
        var space = 40;
        var x = this.getHandCardPos(constant.SelfUISeatId, 1).x - space;
        this.setSelfCardUI(true);
        for (var i = 0; i < 3; i++) {
          this.backCard[i].scale = .84;
          this.backCard[i].x = x + space * i;
        }
        this.setHandCardView(constant.SelfUISeatId, false);
        this.showCardAnim(constant.SelfUISeatId);
      },
      showCardAnim: function showCardAnim(UISeatId) {
        var _this11 = this;
        var key = void 0, amin = void 0;
        if (dataLogic.isHide) {
          constant.SelfUISeatId == UISeatId && (this.doneShowCardAmin = true);
          this.setHandCardView(UISeatId, true);
          return;
        }
        audioMgr.playEffect(this.showAudio);
        var delayTime = 0;
        this.packUpCardAction(UISeatId);
        delayTime = packUpActionTime;
        constant.SelfUISeatId == UISeatId && (this.isPlayShowCardAmin = true);
        this.scheduleOnce(function() {
          for (var i = 0; i < 3; i++) {
            key = 3 * UISeatId + i;
            amin = _this11.backCard[key].getComponent(cc.Animation);
            amin.play();
          }
        }, delayTime);
        this.scheduleOnce(function() {
          constant.SelfUISeatId == UISeatId && (_this11.doneShowCardAmin = true);
          _this11.spreadCardAction(UISeatId);
          _this11.setHandCardView(UISeatId, true);
        }, .13 + delayTime);
      },
      playCardTypeAudio: function playCardTypeAudio(UISeatId) {
        var _this12 = this;
        var sex = dataLogic.getSex(UISeatId);
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        var cardType = gfDataLogic.getOptimalCardType(gfDataLogic.cards[seatId]);
        1 == sex ? dataLogic.isHide || this.scheduleOnce(function() {
          audioMgr.playEffect(_this12.cardTypeWoManAudio[cardType]);
        }, .2) : dataLogic.isHide || this.scheduleOnce(function() {
          audioMgr.playEffect(_this12.cardTypeManAudio[cardType]);
        }, .2);
      },
      setCardTypeView: function setCardTypeView(UISeatId, isShow, cardType) {
        this.cardTypeTxt[UISeatId].node.parent.active = isShow;
        isShow && (this.cardTypeTxt[UISeatId].string = gfConstant.CardTypeTxt[cardType]);
      },
      hideAllCardTypeView: function hideAllCardTypeView() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.cardTypeTxt[i].node.parent.active = false;
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var cardList = kf.clone(gfDataLogic.sortCard(cards));
        cc.log("cardList-----------", cardList);
        for (var i = 0; i < 3; i++) this.handCardSp[UISeatId][i].spriteFrame = this.cardAtlas.getSpriteFrame(cardList[i]);
      },
      getHandCardPos: function getHandCardPos(UISeatId, key) {
        var pos = cc.v2(0, 0);
        pos.x = this.player[UISeatId].x + this.player[UISeatId].getChildByName("card" + key).x;
        pos.y = this.player[UISeatId].y + this.player[UISeatId].getChildByName("card" + key).y;
        return pos;
      },
      setPlayerHead: function setPlayerHead(UISeatId, headUrl) {
        var self = this;
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          self.headSp[UISeatId].spriteFrame = res;
        }, cc.SpriteFrame);
      },
      updatePlayerUI: function updatePlayerUI() {
        var state = void 0, UISeatId = void 0;
        cc.log("_playerNum", _playerNum);
        for (var i = 0; i < _playerNum; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          state = gfDataLogic.playerState[UISeatId];
          switch (state) {
           case gfConstant.PlayerState.HaveSeen:
            this.setHandCardView(UISeatId, true);
            break;

           case gfConstant.PlayerState.NoLook:
            constant.SelfUISeatId == UISeatId ? this.setSelfCardUI(false) : this.showPlayerBackCard(UISeatId);
            break;

           default:
            this.setHandCardView(UISeatId, false);
            this.setCardTypeView(UISeatId, false);
          }
        }
      },
      setPlayerUIInfo: function setPlayerUIInfo(UISeatId, data) {
        this.setPlayerHead(UISeatId, data.headUrl);
        if (UISeatId != constant.SelfUISeatId) {
          var nicknameNode = this.player[UISeatId].getChildByName("bg").getChildByName("nickname");
          nicknameNode.getComponent(cc.Label).string = data.nickName;
        }
        this.setPlayerBalance(UISeatId, data.balance);
        this.setVisitingCardOpacity(UISeatId, 255);
      },
      getPlayerBalance: function getPlayerBalance(UISeatId) {
        var balance = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        return Number(balance.string);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      tryExitRoom: function tryExitRoom() {
        cc.log("\u5c1d\u8bd5\u9000\u51fa", this.isGameOver, isEnd);
        this.isGameOver && isEnd ? this.exitRoom() : this.showExitGameToast("\u8bf7\u5148\u70b9\u51fb\u53f3\u4e0b\u89d2\u505c\u6b62\u6309\u94ae\uff0c\u5f85\u6e38\u620f\u505c\u6b62\u540e\u518d\u9000\u51fa");
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        this.isGameOver = true;
        gfDataLogic.setGameEndData(null);
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.goBackSelectRoom();
      },
      randomAudioKey: function randomAudioKey(UISeatId) {
        var sex = dataLogic.getSex(UISeatId);
        var seed = Math.ceil(this.getPlayerBalance(UISeatId));
        gfDataLogic.randomIntBySeed(0, 1, seed);
        var random = Math.ceil(seed / 3) % 2;
        var audioKey = sex + 2 * random;
        return audioKey;
      },
      visitingWinAnim: function visitingWinAnim(UISeatId) {
        var bg = this.player[UISeatId].getChildByName("bg");
        bg.getComponent(cc.Animation).play();
        this.visitingEf[0].position = this.player[UISeatId].position;
        this.visitingEf[1].position = this.player[UISeatId].position;
        this.visitingEf[0].getComponent(cc.Animation).play();
        this.visitingEf[1].getComponent(cc.Animation).play();
      },
      setVisitingCardOpacity: function setVisitingCardOpacity(UISeatId, opacity) {
        this.player[UISeatId].getChildByName("bg").opacity = opacity;
        this.player[UISeatId].getChildByName("state").opacity = opacity;
      },
      setAshPlayer: function setAshPlayer(UISeatId) {
        if (-1 == UISeatId || false == this.player[UISeatId].active) return;
        var bg = this.player[UISeatId].getChildByName("bg");
        bg.getChildByName("balance").color = new cc.Color(253, 253, 253);
        this.headSp[UISeatId].setState(cc.Sprite.State.GRAY);
        var key = void 0;
        for (var i = 0; i < 3; i++) {
          key = 3 * UISeatId + i;
          bg = this.backCard[key].getChildByName("bg");
          bg.getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
          this.handCardSp[UISeatId][i].setState(cc.Sprite.State.GRAY);
        }
      },
      setWinnerCardType: function setWinnerCardType(UISeatId, cards) {
        var diff = void 0, diffY = void 0;
        var position = this.player[UISeatId].position;
        if (UISeatId == constant.SelfUISeatId) {
          diff = 150;
          diffY = 80;
          return;
        }
        diff = UISeatId > 2 ? 143 : -143;
        diffY = 30;
        var cardType = gfDataLogic.getOptimalCardType(cards);
      },
      settlementChipNumAction: function settlementChipNumAction(chips) {
        var UISeatId = void 0;
        for (var i = 0; i < chips.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          this.resultChipNumTxt[UISeatId].node.opacity = 255;
          if (chips[i] > 0) {
            this.resultChipNumTxt[UISeatId].font = this.winChipNumFont;
            this.resultChipNumTxt[UISeatId].string = "+" + chips[i].toFixed(2);
          } else {
            this.resultChipNumTxt[UISeatId].font = this.loseChipNumFont;
            this.resultChipNumTxt[UISeatId].string = chips[i].toFixed(2);
          }
          this.resultChipNumTxt[UISeatId].node.y = -2;
          this.resultChipNumTxt[UISeatId].node.stopAllActions();
          this.resultChipNumTxt[UISeatId].node.runAction(cc.moveBy(.3, 0, 110));
        }
      },
      showSettlementChip: function showSettlementChip(chips) {
        var UISeatId = void 0;
        for (var i = 0; i < chips.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          this.resultChipNumTxt[UISeatId].node.opacity = 255;
          if (chips[i] > 0) {
            this.resultChipNumTxt[UISeatId].font = this.winChipNumFont;
            this.resultChipNumTxt[UISeatId].string = "+" + chips[i].toFixed(2);
          } else {
            this.resultChipNumTxt[UISeatId].font = this.loseChipNumFont;
            this.resultChipNumTxt[UISeatId].string = (+chips[i]).toFixed(2);
          }
          this.resultChipNumTxt[UISeatId].node.y = -2;
          this.resultChipNumTxt[UISeatId].node.stopAllActions();
          this.resultChipNumTxt[UISeatId].node.y += 110;
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  firstRechargeGift: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "db5b5mUzblH0YpOBWUqruj1", "firstRechargeGift");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        acClick: {
          type: cc.AudioClip,
          default: null
        },
        loadIcon: cc.Node,
        fixedMoney: cc.Node,
        ratiosMoney: cc.Node,
        txtRatios: cc.Label,
        txtPresenterRatiosHint: cc.Label
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getInitDataCb", this.getInitDataCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      unregisterEvent: function unregisterEvent() {
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.registerEvent();
        this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
        http.post({
          action: "GetInitData",
          Requirement: JSON.stringify([ "GetFirstRecharge" ]),
          reqExtendArg: {
            timeoutRefresh: false,
            reRequested: false
          }
        }, "getInitDataCb");
      },
      getInitDataCb: function getInitDataCb(data) {
        this.loadIcon.active = false;
        if (data.Code != constant.HttpCode.Succeed) return;
        var config = data.BackData.GetFirstRecharge;
        if (config) if (1 == config.discount_type) this.initFixedMoneyItems(config.areaArr, config.amountArr); else {
          this.txtRatios.string = config.first_discount + "%\u989d\u5916\u5956\u91d1";
          this.ratiosMoney.active = true;
          config.rechargeLimit ? config.maxGift ? this.txtPresenterRatiosHint.string = "\u9996\u6b21\u5145\u503c\u4efb\u610f\u91d1\u989d\uff0c\u5373\u53ef\u83b7\u5f97\u6597\u5730\u4e3b\u8bb0\u724c\u5668\uff0c\n\u6ee1" + config.rechargeLimit + "\u5143\u8fd8\u6709" + config.first_discount + "%\u989d\u5916\u5956\u91d1\uff0c\u6700\u591a\u53ef\u5f97" + config.maxGift + "\u5143\u54e6\uff01" : this.txtPresenterRatiosHint.string = "\u9996\u6b21\u5145\u503c\u4efb\u610f\u91d1\u989d\uff0c\u5373\u53ef\u83b7\u5f97\u6597\u5730\u4e3b\u8bb0\u724c\u5668\uff0c\n\u6ee1" + config.rechargeLimit + "\u5143\u8fd8\u6709" + config.first_discount + "%\u989d\u5916\u5956\u91d1\u54e6\uff01" : config.maxGift ? this.txtPresenterRatiosHint.string = "\u9996\u6b21\u5145\u503c\u4efb\u610f\u91d1\u989d\uff0c\u5373\u53ef\u83b7\u5f97\u9996\u5145\u5927\u793c\u5305\uff0c\n\u5956\u91d1\u6700\u591a\u53ef\u5f97" + config.maxGift + "\u5143\u54e6\uff01" : this.txtPresenterRatiosHint.string = "\u9996\u6b21\u5145\u503c\u4efb\u610f\u91d1\u989d\uff0c\u5373\u53ef\u83b7\u5f97\u9996\u5145\u5927\u793c\u5305\u54e6\uff01";
        }
      },
      initFixedMoneyItems: function initFixedMoneyItems(rechargeList, presenterList) {
        var item = {}, offX = 166;
        for (var i = 0; i < rechargeList.length; i++) {
          item = this.fixedMoney.getChildByName("item" + i);
          item.active = true;
          if (rechargeList.length > 4) {
            item.y = i > 3 ? -150 : 20;
            item.x = i > 3 ? (8 - rechargeList.length) * offX / 2 - 249 + (i - 4) * offX : i * offX - 249;
          } else {
            item.y = -70;
            item.x = (4 - rechargeList.length) * offX / 2 - 249 + i * offX;
          }
          item.getChildByName("txtPresenterMoney").getComponent(cc.Label).string = presenterList[i] + "\u91d1\u5e01";
          item.getChildByName("txtRechargeMoney").getComponent(cc.Label).string = "\u5145" + rechargeList[i];
        }
      },
      close: function close() {
        this.unregisterEvent();
        this.node.destroy();
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.acClick);
        switch (name) {
         case "recharge":
          kf.getObj(constant.PoolId.DialogComonLayer, this.node.parent, null, {
            path: "prefab/baoWang/payCenter",
            js: "payCenter",
            initArg: 1
          });
          this.close();
          break;

         case "close":
          this.close();
          break;

         default:
          cc.log("\u672a\u77e5\u4e8b\u4ef6\u540d", name);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  forgetPassword: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "bdd723UTR1H8ag8U+vbdqmS", "forgetPassword");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _CheckUserExist = {
      Action: "CheckUserExist",
      ImgCode: null,
      UserName: null
    };
    var _doneCb = null;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebAccount: cc.EditBox,
        ebCheckCode: cc.EditBox,
        spCheckCode: cc.Sprite,
        pfDialogCommonLayer: cc.Prefab,
        arrow: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ], [ "checkUserExistCb", this.checkUserExistCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        _doneCb = initArg.doneCb;
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "refreshCheckCode":
          this.reqCheckCode();
          break;

         case "confirm":
          var result = dataLogic.checkFormat(this.ebAccount.string, {
            UserName: true,
            name: "\u8d26\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          _CheckUserExist.UserName = this.ebAccount.string;
          this.reqCheckCode(false, "forgetPassword");
        }
      },
      checkUserExistCb: function checkUserExistCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          callbacks && callbacks.closeCheckCodeDialog();
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/resetPassword",
            js: "resetPassword",
            initArg: {
              doneCb: _doneCb,
              isResetLoginPassword: true,
              curStep: 2,
              totalStep: 2,
              phoneNum: msg.Data
            }
          });
        } else msg.Code == constant.HttpCode.CheckCodeError ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this = this;
        cc.log("\u8bf7\u6c42\u56fe\u50cf\u9a8c\u8bc1\u7801", msg, jsName);
        if ("forgetPassword" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "forgetPassword") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          delete _CheckUserExist.ImgCode;
          _CheckUserExist.Ticket = ticket;
          _this.reqDateAndShowLoadView(_CheckUserExist, "checkUserExistCb", null, true);
        }, this); else {
          delete _CheckUserExist.Ticket;
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              _CheckUserExist.ImgCode = checkCode;
              _this.reqData(_CheckUserExist, "checkUserExistCb", callbacks);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      findPasswordSucceed: function findPasswordSucceed() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  gameEntrance: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "1feeaQkOBpErY/vDJIu8JnO", "gameEntrance");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _needUpgradeMain = false;
    var _updateDialog = null;
    var _updateDialogJs = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        audioBtn: {
          default: null,
          type: cc.AudioClip
        },
        atlasGameCardMini: cc.SpriteAtlas,
        spGameCard: cc.Sprite,
        spState: cc.Sprite,
        spGameStates: [ cc.SpriteFrame ],
        download: cc.Node,
        spDownloadProcess: cc.Sprite,
        sfDownloadProcess: cc.SpriteFrame,
        sfDownloadIcon: cc.SpriteFrame,
        sfWaitDownloadIcon: cc.SpriteFrame
      },
      reuse: function reuse(data) {
        this.clickCb = data.clickCb;
        if (data.state == constant.GameState.Able) this.spState.node.opacity = 0; else {
          if (constant.GameState.Wait == data.state) {
            this.spState.node.opacity = 255;
            this.spState.node.x = 0;
            this.spState.node.y = 5;
          } else {
            this.spState.node.opacity = 255;
            this.spState.node.x = 85;
            this.spState.node.y = 65;
          }
          this.spState.spriteFrame = this.spGameStates[data.state];
        }
        this.gameId = data.gameId;
        if (data.gameImg) {
          var self = this;
          kf.loadNetImg(constant.imgServer + data.gameImg, this.spGameCard, function(resSprite) {
            self.spGameCard.node.width = 201;
            self.spGameCard.node.height = 207;
            self.spGameCard.sizeMode = cc.Sprite.SizeMode.CUSTOM;
          });
        } else this.spGameCard.spriteFrame = this.atlasGameCardMini.getSpriteFrame(data.gameId);
        if (data.state == constant.GameState.Wait) {
          this.download.opacity = 0;
          return;
        }
        var version = hotUpdateMgr.getLocalSubModuleVersion(data.gameId);
        cc.log("module", this.gameId, "version", version, hotUpdateMgr.getSubModuleVersion(data.gameId));
        if (kf.compareVersion(version, hotUpdateMgr.getSubModuleVersion(data.gameId)) < 0) {
          this.download.opacity = 255;
          this.spDownloadProcess.spriteFrame = this.sfDownloadIcon;
          this.spDownloadProcess.fillRange = 1;
        } else this.download.opacity = 0;
        if (hotUpdateMgr.getDownloadingModule() == this.gameId) {
          this.spDownloadProcess.fillRange = 0;
          this.spDownloadProcess.spriteFrame = this.sfDownloadProcess;
          hotUpdateMgr.setDelegate(this);
        }
        this.version = version;
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "tryIntoSubGameHall":
          if (255 == this.download.opacity) {
            var downloadingModule = hotUpdateMgr.getDownloadingModule();
            if (downloadingModule) if (this.gameId == downloadingModule) ; else {
              var arg = {
                type: constant.ToastType.RequestError,
                extend: {
                  hintStr: constant.GameNickName[downloadingModule] + "\u6b63\u5728\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019"
                }
              };
              kf.getObj(constant.PoolId.ToastRequestError, cc.find("Canvas/toastLayer/4"), null, arg);
            } else {
              this.spDownloadProcess.fillRange = 0;
              this.spDownloadProcess.spriteFrame = this.sfDownloadProcess;
              hotUpdateMgr.check_update(this, this.gameId);
            }
            break;
          }
          this.clickCb && this.clickCb();
        }
      },
      checkUpgradeCondition: function checkUpgradeCondition(version, module, upgradeFunc) {
        var _this = this;
        if ("main" == module) {
          upgradeFunc();
          return;
        }
        var localNewestVersion = hotUpdateMgr.getSubModuleVersion(this.gameId);
        cc.log("\u5f53\u524d\u652f\u6301\u7248\u672c", localNewestVersion, "version", version, kf.compareVersion(localNewestVersion, version));
        if (kf.compareVersion(localNewestVersion, version) < 0) {
          clientEvent.dispatchEvent("showLayerToast", {
            isShowCloseBtn: true,
            contentTxt: "\u8be5\u6e38\u620f\u66f4\u65b0\u5b8c\u9700\u8981\u91cd\u542f\u5e94\u7528\uff0c\u662f\u5426\u7acb\u5373\u66f4\u65b0\uff1f",
            btnTxt: [ null, "\u4e0b\u8f7d\u66f4\u65b0" ],
            btnEventName: [ null, function() {
              _this.spDownloadProcess.spriteFrame = _this.sfWaitDownloadIcon;
              _this.spDownloadProcess.fillRange = 1;
              _updateDialog = kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), _this.pfDialogCommonLayer, {
                path: "prefab/baoWang/hotUpdate",
                js: "hotUpdateDialog",
                initArg: {
                  initCb: function initCb() {
                    _updateDialogJs = _updateDialog.getChildByName("main").getChildByName("contentBg").getChildByName("hotUpdate").getComponent("hotUpdateDialog");
                    upgradeFunc();
                  }
                }
              });
            } ],
            closeCb: function closeCb() {
              hotUpdateMgr.setDownloadingModule("");
              _this.spDownloadProcess.spriteFrame = _this.sfDownloadIcon;
              _this.spDownloadProcess.fillRange = 1;
            }
          }, 1);
          _needUpgradeMain = true;
        } else {
          _needUpgradeMain = false;
          upgradeFunc();
        }
      },
      updateCb: function updateCb(event, module) {
        switch (event.getEventCode()) {
         case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
          cc.log("\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c");
          break;

         case jsb.EventAssetsManager.UPDATE_FAILED:
          this.spDownloadProcess.spriteFrame = this.sfDownloadIcon;
          this.spDownloadProcess.fillRange = 1;
          _updateDialogJs && _updateDialogJs.toastClose();
          var arg = {
            type: constant.ToastType.RequestError,
            extend: {
              hintStr: constant.GameNickName[module] + "\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"
            }
          };
          kf.getObj(constant.PoolId.ToastRequestError, cc.find("Canvas/toastLayer/4"), null, arg);
          break;

         case jsb.EventAssetsManager.UPDATE_FINISHED:
          if (_needUpgradeMain) if ("main" == module) {
            _updateDialogJs.setProgress(1);
            this.scheduleOnce(function() {
              cc.game.restart();
            }, 0);
          } else hotUpdateMgr.check_update(this, "main"); else this.download.opacity = 0;
          break;

         case jsb.EventAssetsManager.UPDATE_PROGRESSION:
          var p = event ? event.getPercent() : null;
          if (p) if (_needUpgradeMain) {
            p = "main" == module ? p / -2 - .5 : p / -2;
            _updateDialogJs.setProgress(-p);
          } else {
            p > 1 && (p = 1);
            this.spDownloadProcess.fillRange = -p;
          }
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  gameMgr: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3f5473ljfdKBJVMlYbFre+X", "gameMgr");
    "use strict";
    function _toConsumableArray(arr) {
      if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
        return arr2;
      }
      return Array.from(arr);
    }
    window.gameMgr = window.gameMgr || {
      extends: cc.Component
    };
    gameMgr.init = function() {
      this.sceneJs = null;
    };
    gameMgr.getSceneResList = function(sceneName, gameId) {
      var gameRes = constant.GameRes[gameId];
      var resList = [];
      for (var i = 0; i < gameRes.length; i++) gameRes[i].useScene == sceneName && (null == gameRes[i].noneUndoneGameDelayLoad || dataLogic.needRecover) && resList.push(gameRes[i]);
      dataLogic.isFriendRoom && resList.push({
        path: "friendRoom",
        resType: "dir"
      });
      dataLogic.isNewRegister && (dataLogic.userPhoneNum && dataLogic.userBalance > 0 ? resList.push.apply(resList, _toConsumableArray(constant.RegisterCashGiftRes)) : dataLogic.userPhoneNum || resList.push.apply(resList, _toConsumableArray(constant.HintRegisterRes)));
      return resList;
    };
    gameMgr.init();
    cc._RF.pop();
  }, {} ],
  gameRecord: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e212bD//axClJJFBLrPT9J5", "gameRecord");
    "use strict";
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var isFirst = true;
    var _loadProcessCb = null;
    var _loadToast = null;
    var _isFirstUse = true;
    var _recordItemCount = 10;
    cc.Class({
      extends: cc.Component,
      properties: {
        closeBtn: cc.Button,
        bg: cc.Node,
        recordMain: cc.Node,
        nullRecord: cc.Node,
        itemPf: cc.Prefab,
        view: cc.Node,
        content: cc.Node,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        loadIcon: cc.Node,
        tabNavContent: cc.Node,
        tabNavToggleContainer: cc.Node,
        scrollView: cc.ScrollView,
        tabScrollView: cc.ScrollView,
        recordTitle: cc.Label,
        togglePfb: cc.Prefab,
        toggleSprite: [ cc.SpriteFrame ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "syncRecordCb", this.syncRecordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      unregisterEvent: function unregisterEvent() {
        if (null == this.registerHandler) return;
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.bg.width = cc.winSize.width;
        this.bg.height = cc.winSize.height;
        this.gameTypeId = "00";
      },
      showLoadToast: function showLoadToast() {
        var arg = {
          type: constant.ToastType.Loading
        };
        _loadToast = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
        var txt = _loadToast.getChildByName("txt").getComponent(cc.Label);
        txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
        var n = 0;
        _loadProcessCb = function _loadProcessCb() {
          n++;
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
        };
        this.schedule(_loadProcessCb, .1, 98);
      },
      initFirstUse: function initFirstUse() {
        var _this = this;
        _isFirstUse = false;
        this.initGameTab();
        this.initRecordItem(10);
        cc.log("====initFirstUse");
        this.scheduleOnce(function() {
          _this.unschedule(_loadProcessCb);
          _this.toastShow();
          kf.killObj(_loadToast);
          _loadToast = null;
        }, .1);
      },
      loadResource: function loadResource(sceneName) {
        var _this2 = this;
        if (dataLogic.isToastLoad) if (_isFirstUse) {
          this.showLoadToast();
          this.initFirstUse();
        } else this.toastShow(); else {
          this.showLoadToast();
          var preloadRes = constant.GameRes[sceneName];
          var loadDone = function loadDone() {
            _this2.initFirstUse();
            dataLogic.isToastLoad = true;
          };
          var loadTimeout = function loadTimeout() {
            _this2.unschedule(_loadProcessCb);
            kf.killObj(_loadToast);
            _loadToast = null;
            kf.killObj(_this2.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      toastShow: function toastShow() {
        var _this3 = this;
        cc.log("toastShow");
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(.08, 1.1, 1.1), cc.scaleTo(.03, 1, 1), cc.callFunc(function() {
          var toggle = _this3.tabNavToggleContainer.children[0].getComponent(cc.Toggle);
          if (toggle.isChecked) _this3.toggleBind(false, dataLogic.gameList[0].gameTypeId); else {
            isFirst = true;
            toggle.check();
          }
        }));
        this.recordMain.runAction(seq);
        this.bg.active = true;
        this.tabScrollView.stopAutoScroll();
        this.tabScrollView.scrollToLeft();
      },
      unuse: function unuse() {
        this.unregisterEvent();
      },
      initGameTab: function initGameTab() {
        var count = 5;
        for (var i = 0; i < dataLogic.gameList.length; i++) if (5 != dataLogic.gameList[i].state) {
          var togglePfb = void 0;
          if (this.tabNavToggleContainer.children[i]) {
            togglePfb = this.tabNavToggleContainer.children[i];
            togglePfb.opacity = 255;
          } else togglePfb = cc.instantiate(this.togglePfb);
          var gameName = constant.GameNickName[dataLogic.gameList[i].gameTypeId];
          togglePfb.parent = this.tabNavToggleContainer;
          var backGround = togglePfb.getChildByName("Background");
          var checkMark = togglePfb.getChildByName("checkmark");
          var backgroundTxt = backGround.getChildByName("txt");
          var checkmarkTxt = checkMark.getChildByName("txt");
          backgroundTxt.getComponent(cc.Label).string = checkmarkTxt.getComponent(cc.Label).string = gameName;
          gameName.length > 4 ? togglePfb.width = backGround.width = checkMark.width = 152 + 26 * (gameName.length - 4) : togglePfb.width = backGround.width = checkMark.width = 152;
          backgroundTxt.x = checkmarkTxt.x = (backGround.width - backgroundTxt.getComponent(cc.Label).fontSize * gameName.length) / 2;
          togglePfb.position = cc.v2(count, -30);
          count += togglePfb.width + 4;
          var checkEventHandler = new cc.Component.EventHandler();
          checkEventHandler.target = this.node;
          checkEventHandler.component = "gameRecord";
          checkEventHandler.handler = "toggleBind";
          checkEventHandler.customEventData = dataLogic.gameList[i].gameTypeId;
          togglePfb.getComponent(cc.Toggle).checkEvents[0] = checkEventHandler;
        }
        for (var _i = dataLogic.gameList.length; _i < this.tabNavToggleContainer.childrenCount; _i++) {
          this.tabNavToggleContainer.children[_i].opacity = 0;
          this.tabNavToggleContainer.children[_i].getComponent(cc.Toggle).checkEvents[0] = null;
        }
        this.tabNavToggleContainer.width = this.tabNavContent.width = count;
      },
      reuse: function reuse() {
        this.registerEvent();
        this.content.y = this.view.height / 2;
        this.loadResource(constant.ToastName.InfoToast);
      },
      btnEvent: function btnEvent(event, key) {
        switch (key) {
         case "closeBtn":
          audioMgr.playEffect(this.clickAudio);
          this.recordMainClose();
        }
      },
      recordMainShow: function recordMainShow(gameTypeid) {
        cc.log(this.gameTypeId, "recordMainShow");
      },
      syncRecordCb: function syncRecordCb(msg) {
        this.loadIcon.active = false;
        1 == msg.Code ? this.showRecordItem(msg.Data) : kf.killObj(this.node);
      },
      toggleBind: function toggleBind(event, gameTypeId) {
        !isFirst && event && audioMgr.playEffect(this.clickAudio);
        isFirst = false;
        this.nullRecord.opacity = 0;
        this.loadIcon.active = true;
        var repeatForever = cc.repeatForever(cc.rotateBy(1, 360));
        this.loadIcon.runAction(repeatForever);
        this.gameTypeId = gameTypeId;
        this.scrollView.stopAutoScroll();
        this.scrollView.scrollToTop();
        this.changeRoomName();
        var reqExtendArg = {
          timeoutRefresh: false
        };
        http.post(_defineProperty({
          action: "GetUserFlowList",
          gameTypeId: this.gameTypeId,
          reqExtendArg: reqExtendArg
        }, "reqExtendArg", reqExtendArg), "syncRecordCb", {
          timeoutRefresh: false
        });
      },
      changeRoomName: function changeRoomName() {
        "05" == this.gameTypeId ? this.recordTitle.string = "\u7c7b\u578b" : this.recordTitle.string = "\u623f\u95f4";
      },
      onScrolling: function onScrolling() {},
      recordMainClose: function recordMainClose() {
        var _this4 = this;
        this.nullRecord.opacity = 0;
        var seq = cc.sequence(cc.scaleTo(.05, .7, .7), cc.callFunc(function() {
          _this4.hideRecordItem();
          kf.killObj(_this4.node);
        }));
        this.recordMain.runAction(seq);
        this.bg.active = false;
      },
      initRecordItem: function initRecordItem(initCount) {
        if (this.content.childrenCount == initCount) {
          this.hideRecordItem();
          return;
        }
        for (var i = 0; i < initCount; i++) {
          var item = cc.instantiate(this.itemPf);
          item.parent = this.content;
          item.name = "item" + i;
          item.opacity = 0;
          item.y = -(item.height / 2 + item.height * i);
          i % 2 === 1 && (item.getChildByName("bg").opacity = 0);
        }
      },
      hideRecordItem: function hideRecordItem() {
        var item = void 0;
        for (var i = 0; i < _recordItemCount; i++) {
          item = this.content.getChildByName("item" + i);
          if (!item) break;
          item.opacity = 0;
        }
      },
      showRecordItem: function showRecordItem(data) {
        this.hideRecordItem();
        if (null == data || 0 == data.length) {
          this.nullRecord.opacity = 255;
          return;
        }
        data.length > _recordItemCount && (data.length = _recordItemCount);
        if (0 != data.length) {
          this.nullRecord.opacity = 0;
          this.content.height = data.length * this.content.getChildByName("item0").height;
        }
        var item = void 0;
        for (var i = 0; i < data.length; i++) {
          item = this.content.getChildByName("item" + i);
          item.opacity = 255;
          item.getComponent("recordItem").init(data[i], i);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  gameSceneBase: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "89af4npQM5AbaxHhYw+lEmh", "gameSceneBase");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _kickOutRemainingTime = 0;
    var _playersNode = void 0, _UISeatId = void 0;
    var _kickOutTimerId = null;
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        friendRoomMenuBarParent: cc.Node,
        pfFriendRoomMenuBar: cc.Prefab,
        pfReadyStateFlag: cc.Prefab,
        pfTips: cc.Prefab,
        pfGuideWatchPlayerCard: cc.Prefab,
        btReady: cc.Button
      },
      gameBaseRegisterEvent: function gameBaseRegisterEvent() {
        this.registerHandler = [ [ "reqSelectRoomConfigCb", this.reqSelectRoomConfigCb.bind(this) ], [ "reqUserBalanceCb", this.reqUserBalanceCb.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingExceptionHandling.bind(this) ], [ "onReady", this.onReady.bind(this) ], [ "readyCb", this.readyCb.bind(this) ], [ "onRemind", this.onRemind.bind(this) ], [ "onRemove", this.onRemove.bind(this) ], [ "leaveGameCb", this.leaveGameCb.bind(this) ], [ "onJoin", this.onJoin.bind(this) ], [ "onLeave", this.onLeave.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      baseInit: function baseInit(gameId) {
        var _this = this;
        null == this.leastPlayerCount && (this.leastPlayerCount = 2);
        cc.log("\u6700\u5c11\u5f00\u5c40\u73a9\u5bb6\u6570", this.leastPlayerCount);
        _kickOutTimerId = null;
        if (null == gameId) {
          cc.error("gameId", "\u4e0d\u80fd\u672a\u7a7a");
          return;
        }
        dataLogic.addPlayedGameIdList(gameId);
        dataLogic.setCurGameId(gameId);
        this.initSceneBase();
        this.gameBaseRegisterEvent();
        cc.log("dataLogic.isFriendRoom", dataLogic.isFriendRoom);
        if (dataLogic.isFriendRoom) {
          var curFileName = this.name.split(/<|>/)[1];
          this.friendRoomMenuBar = cc.instantiate(this.pfFriendRoomMenuBar);
          this.friendRoomMenuBar.parent = this.friendRoomMenuBarParent;
          this.txtRoomNum = this.friendRoomMenuBar.getChildByName("roomId").getComponent(cc.Label);
          this.txtRoomNum.string = "\u623f\u95f4\u53f7\uff1a" + dataLogic.roomNum;
          this.btCopyRoomNum = this.friendRoomMenuBar.getChildByName("btCopy").getComponent(cc.Button);
          this.btCopyRoomNum.clickEvents[0].target = this.node;
          this.btCopyRoomNum.clickEvents[0].component = curFileName;
          this.btCopyRoomNum.clickEvents[0].handler = "copyRoomNum";
          this.btReady.node.active = true;
          this.showGuideRoomIdPos();
          this.tips = cc.instantiate(this.pfTips);
          this.tips.parent = this.toastLayer[0];
          this.tips.active = false;
          this.btReady.scheduleOnce(function() {
            _this.setPlayIdBgState && _this.setPlayIdBgState();
          }, 0);
        } else this.btReady && (this.btReady.node.active = false);
        dataLogic.setUndoneGame(false);
        this.showGuideWatchPlayerCard();
      },
      copyRoomNum: function copyRoomNum() {
        audioMgr.playEffect(this.audioBtn);
        var isSucceed = kf.copyToClipboard(dataLogic.roomNum);
        this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
        if (this.guideRoomIdPos) {
          this.guideRoomIdPos.destroy();
          delete this.guideRoomIdPos;
        }
      },
      genReadyStateFlag: function genReadyStateFlag() {
        var _this2 = this;
        this.playerReadyStateFalg = [];
        _playersNode = this.player ? this.player : this.playerArr;
        for (var i = 0; i < _playersNode.length; i++) {
          this.playerReadyStateFalg[i] = cc.instantiate(this.pfReadyStateFlag);
          this.playerReadyStateFalg[i].parent = _playersNode[i];
          this.playerReadyStateFalg[i].opacity = 0;
        }
        this.sfReadiedIcon = null;
        this.sfUnreadyIcon = null;
        resMgr.loadSingleRes("friendRoom/readied", function(spriteFrame) {
          _this2.sfReadiedIcon = spriteFrame;
        }, cc.SpriteFrame);
        resMgr.loadSingleRes("friendRoom/unready", function(spriteFrame) {
          _this2.sfUnreadyIcon = spriteFrame;
        }, cc.SpriteFrame);
      },
      showGuideRoomIdPos: function showGuideRoomIdPos() {
        var isGuidedRoomIdPos = cc.sys.localStorage.getItem("isGuidedRoomIdPos");
        if (!isGuidedRoomIdPos && this.pfGuideWatchPlayerCard) {
          this.guideRoomIdPos = cc.instantiate(this.pfGuideWatchPlayerCard);
          this.guideRoomIdPos.parent = this.friendRoomMenuBar;
          this.guideRoomIdPos.getChildByName("txt").getComponent(cc.Label).string = "\u597d\u53cb\u7ea6\u6218\u7684\u623f\u95f4\u53f7  \n\u90fd\u5728\u8fd9\u91cc\uff01";
          this.guideRoomIdPos.getChildByName("txt").y = -5;
          this.guideRoomIdPos.y = -67;
          this.guideRoomIdPos.x = 224;
          this.guideRoomIdPos.getChildByName("bg").scaleX = -1;
          this.guideRoomIdPos.getChildByName("bg").scaleY = -1;
          cc.sys.localStorage.setItem("isGuidedRoomIdPos", 1);
        }
      },
      showGuideWatchPlayerCard: function showGuideWatchPlayerCard() {
        var isGuided = cc.sys.localStorage.getItem("isGuided");
        if (!isGuided && this.pfGuideWatchPlayerCard) {
          var parent = this.player ? this.player[0] : this.playerArr[0];
          this.guideWatchPalyerCard = cc.instantiate(this.pfGuideWatchPlayerCard);
          this.guideWatchPalyerCard.parent = parent;
          this.guideWatchPalyerCard.y = 133;
          this.guideWatchPalyerCard.getChildByName("txt").getComponent(cc.Label).string = "\u6309\u4f4f\u5934\u50cf\u5c31\u53ef\u4ee5\n\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f\u54e6\uff01";
          this.guideWatchPalyerCard.getChildByName("txt").y = 7;
          if (parent.x > 0) {
            this.guideWatchPalyerCard.x = -162;
            this.guideWatchPalyerCard.getChildByName("bg").scaleX = 1;
          } else {
            this.guideWatchPalyerCard.x = 162;
            this.guideWatchPalyerCard.getChildByName("bg").scaleX = -1;
          }
          cc.sys.localStorage.setItem("isGuided", 1);
        }
      },
      killGuideWatchPlayerCard: function killGuideWatchPlayerCard() {
        if (this.guideWatchPalyerCard) {
          this.guideWatchPalyerCard.destroy();
          delete this.guideWatchPalyerCard;
        }
      },
      goBackSelectRoom: function goBackSelectRoom() {
        dataLogic.gameEnd();
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        var sceneName = dataLogic.getSelectRoomSceneNameByGameId(dataLogic.curGameId);
        constant.PostReqUserBalance.gameTypeId = dataLogic.curGameId;
        var reqArg = kf.clone(constant.PostReqUserBalance);
        reqArg.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false
        };
        http.post(reqArg, "reqUserBalanceCb", {
          gameId: dataLogic.curGameId,
          sceneName: sceneName
        });
        var help = this.toastLayer[0].getChildByName("newHelp");
        help && kf.killObj(help);
      },
      reqSelectRoomConfigCb: function reqSelectRoomConfigCb(msg, nextSceneInfo) {
        if (msg.Code == constant.HttpCode.Succeed) {
          dataLogic.reqSelectRoomConfigCb(msg);
          this.loadScene(nextSceneInfo.sceneName, nextSceneInfo.gameId);
        } else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
        }
      },
      reqUserBalanceCb: function reqUserBalanceCb(msg, cbArg) {
        if (msg.Code != constant.HttpCode.Succeed) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          return;
        }
        if (!cbArg) return;
        var Json = cc.sys.localStorage.getItem("gameSelectRoomConfig" + cbArg.sceneName);
        if (null == Json) dataLogic.reqSelectRoomConfig(cbArg.gameId, cbArg); else {
          var data = JSON.parse(Json);
          null == data || data.BackData != msg.BackData ? dataLogic.reqSelectRoomConfig(cbArg.gameId, cbArg) : this.reqSelectRoomConfigCb(data, cbArg);
        }
      },
      setMatchingToastUI: function setMatchingToastUI(canCancel) {
        if (canCancel) {
          this.btCancelMatching.node.active = true;
          this.matchingToastLayerTxt.string = "\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u52a0\u5165...";
        } else {
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u8bf7\u6c42\u5339\u914d...";
        }
      },
      cancelMatchingExceptionHandling: function cancelMatchingExceptionHandling(msg) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.Timeout || msg.Code == constant.HttpCode.GameOver) return;
        dataLogic.isPlaying || this.showRefreshToast("\u8bf7\u6c42\u8d85\u65f6\uff0c\u91cd\u542f\u8bd5\u8bd5\u770b\u5427", 4, 3);
      },
      showTimeOutNotStartToast: function showTimeOutNotStartToast(hintTxt, event) {
        var toast = this.getToast(constant.ToastType.Hint, 0);
        toast && kf.killObj(toast);
        var arg = {
          type: constant.ToastType.Hint,
          onlyManualClose: true,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, event ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        this.showHintToast(arg, 0);
      },
      dissolutionWarnCountDown: function dissolutionWarnCountDown(delay) {
        this.unschedule(this.showDissolutionWarnToast);
        this.scheduleOnce(this.showDissolutionWarnToast, delay);
      },
      kickOutCountDown: function kickOutCountDown() {
        var _this3 = this;
        var kickOutRemainingTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 15;
        var isReadied = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        cc.log("\u5f00\u59cb\u5012\u8ba1\u65f6\u8e22\u51fa");
        _kickOutRemainingTime = kickOutRemainingTime;
        if (null == _kickOutTimerId) {
          var self = this;
          _kickOutTimerId = setInterval(function() {
            --_kickOutRemainingTime;
            if (0 == _kickOutRemainingTime) {
              self.clearKickOutTimer();
              if (constant.FriendRoomPlayerState.Unready == dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState) {
                self.reqLeaveGame(true);
                _this3.btReady.node.active = false;
              }
              self.hideTips();
              return;
            }
            isReadied ? self.setTipsTxt("\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u51c6\u5907(" + _kickOutRemainingTime + ")") : self.setTipsTxt("\u8bf7\u5728\u9650\u65f6\u5185\u51c6\u5907\uff0c\u4ee5\u514d\u88ab\u8bf7\u79bb\u623f\u95f4(" + _kickOutRemainingTime + ")");
          }, 1e3);
        }
        isReadied ? this.setTipsTxt("\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u51c6\u5907(" + _kickOutRemainingTime + ")") : this.setTipsTxt("\u8bf7\u5728\u9650\u65f6\u5185\u51c6\u5907\uff0c\u4ee5\u514d\u88ab\u8bf7\u79bb\u623f\u95f4(" + _kickOutRemainingTime + ")");
      },
      kickOutSelf: function kickOutSelf() {
        cc.log("\u8e22\u51fa\u81ea\u5df1");
        _playersNode = [];
        this.clearKickOutTimer();
        dataLogic.setUnreadyKickOutState(true);
        this.loadScene(constant.SceneName.OfferPk);
      },
      setTipsTxt: function setTipsTxt(str) {
        if (this.tips) {
          this.tips.active || (this.tips.active = true);
          this.tips.getChildByName("txt").getComponent(cc.Label).string = str;
        }
      },
      clearKickOutTimer: function clearKickOutTimer() {
        clearInterval(_kickOutTimerId);
        _kickOutTimerId = null;
      },
      hideTips: function hideTips() {
        this.clearKickOutTimer();
        this.tips.active = false;
      },
      showDissolutionWarnToast: function showDissolutionWarnToast(str) {
        this.showTimeOutNotStartToast(str, "toastClose");
      },
      dissolutionRoom: function dissolutionRoom(str) {
        var _this4 = this;
        cc.log("\u663e\u793a\u89e3\u6563toast");
        dataLogic.setNeedRecover(false);
        this.showTimeOutNotStartToast(str, function() {
          _playersNode = [];
          _this4.clearKickOutTimer();
          _this4.loadScene(constant.SceneName.OfferPk);
        });
      },
      commonBtnEvent: function commonBtnEvent(event, eventName) {
        cc.log("====commonBtnEvent==", eventName);
        audioMgr.playEffect(this.audioBtn || this.clickAudio);
        switch (eventName) {
         case "ready":
          this.guideRoomIdPos && this.guideRoomIdPos.destroy();
          this.killGuideWatchPlayerCard();
          var bringCoin = 0;
          if (this.ready) {
            bringCoin = this.ready();
            void 0 != bringCoin && bringCoin.length && "dzpk" == bringCoin[0] && (constant.PostReady.bringCoin = bringCoin[1]);
          }
          this.btReady.node.active = false;
          http.post(constant.PostReady, "readyCb");
        }
      },
      setFriendRoomPlayerState: function setFriendRoomPlayerState(seatId, state) {
        if (!dataLogic.isFriendRoom) return;
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        cc.log("\u8bbe\u7f6e\u73a9\u5bb6\u72b6\u6001", UISeatId, state);
        if (constant.FriendRoomPlayerState.Gaming == state) this.playerReadyStateFalg[UISeatId].opacity = 0; else {
          this.playerReadyStateFalg[UISeatId].opacity = 255;
          this.playerReadyStateFalg[UISeatId].getComponent(cc.Sprite).spriteFrame = state == constant.FriendRoomPlayerState.Readied ? this.sfReadiedIcon : this.sfUnreadyIcon;
        }
        dataLogic.setFriendRoomPlayerState(seatId, state);
      },
      onReady: function onReady(msg) {
        this.setFriendRoomPlayerState(msg.seatId, constant.FriendRoomPlayerState.Readied);
        var count = dataLogic.getReadiedCount();
        1 == count ? this.updateTips(15, true) : msg.seatId == dataLogic.selfSeatId && this.updateTips(_kickOutRemainingTime);
      },
      readyCb: function readyCb(msg) {
        if (msg.Code == constant.HttpCode.NotSufficientFunds) {
          dataLogic.setUserBalance(msg.Data);
          dataLogic.setNotSufficientFundKickOutState(true);
          dataLogic.setNotSufficientFundHintStr(msg.StrCode);
          _playersNode = [];
          this.clearKickOutTimer();
          this.loadScene(constant.SceneName.OfferPk);
        }
      },
      onRemind: function onRemind(msg) {
        this.showDissolutionWarnToast(msg.msg);
      },
      onRemove: function onRemove(msg) {
        if (null == msg.seatId) this.dissolutionRoom(msg.msg); else {
          var seatIds = msg.seatId.split(",");
          for (var i = 0; i < seatIds.length; i++) {
            _UISeatId = dataLogic.getUISeatIdBySeatId(seatIds[i]);
            cc.log("\u8e22\u51fa UISeatId", _UISeatId);
            if (constant.SelfUISeatId == _UISeatId) {
              this.hideTips();
              this.kickOutSelf();
            } else {
              dataLogic.playerLeave(seatIds[i]);
              this.playerLeave && this.playerLeave(seatIds[i]);
              _playersNode[_UISeatId].active = false;
            }
          }
          this.updateTips();
        }
      },
      reqLeaveGame: function reqLeaveGame(isTimeOutLeave) {
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        http.post(constant.PostCancelMatching, "leaveGameCb", isTimeOutLeave);
      },
      onJoin: function onJoin(msg) {
        _UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        if (_UISeatId != constant.SelfUISeatId) {
          dataLogic.playerJoin(msg.playerInfo, msg.seatId);
          this.setFriendRoomPlayerState(msg.seatId, constant.FriendRoomPlayerState.Unready);
          this.setPlayerInfo(msg.playerInfo, _UISeatId, true);
        }
        this.updateTips(15, true);
      },
      onLeave: function onLeave(msg) {
        _UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        if (_UISeatId != constant.SelfUISeatId) {
          dataLogic.playerLeave(msg.seatId);
          _playersNode[_UISeatId].active = false;
          this.playerLeave && this.playerLeave(msg.seatId);
          var guide = _playersNode[_UISeatId].getChildByName("guideWatchPlayerCard");
          guide && guide.destroy();
        }
        this.updateTips();
      },
      leaveGameCb: function leaveGameCb(msg, isTimeOutLeave) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.GameOver) {
          dataLogic.gameEnd();
          if (isTimeOutLeave) this.kickOutSelf(); else {
            _playersNode = [];
            this.clearKickOutTimer();
            this.loadScene(constant.SceneName.OfferPk);
          }
        } else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
        }
      },
      gameStartCommonHandle: function gameStartCommonHandle() {
        this.killAllToast();
        for (var i = 0; i < dataLogic.playerInfo.length; i++) this.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Gaming);
      },
      initAllPlayerReadyStateUI: function initAllPlayerReadyStateUI() {
        for (var i = 0; i < dataLogic.playerInfo.length; i++) this.setFriendRoomPlayerState(i, dataLogic.playerInfo[i].InvUserState);
      },
      gamingPlayerToUnready: function gamingPlayerToUnready() {
        for (var i = 0; i < dataLogic.playerInfo.length; i++) dataLogic.playerInfo[i].InvUserState == constant.FriendRoomPlayerState.Gaming && this.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Unready);
      },
      updateTips: function updateTips(kickOutRemainingTime) {
        var resetTimer = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        if (!dataLogic.isFriendRoom) return;
        cc.log("===\u66f4\u65b0tips===", dataLogic.playerCount, dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState, dataLogic.isPlaying, dataLogic.getReadiedCount(), kickOutRemainingTime, this.leastPlayerCount);
        if (1 == dataLogic.playerCount) {
          if (dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready) this.hideTips(); else {
            this.clearKickOutTimer();
            this.setTipsTxt("\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6");
          }
          return;
        }
        if (dataLogic.isPlaying) dataLogic.isOnlooker() ? this.setTipsTxt("\u5176\u4ed6\u73a9\u5bb6\u6b63\u5728\u6e38\u620f\u4e2d\uff0c\u8bf7\u7b49\u5f85") : this.hideTips(); else {
          var count = dataLogic.getReadiedCount();
          if (0 == count || count == dataLogic.playerCount) {
            this.hideTips();
            return;
          }
          if (dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready) {
            if (resetTimer) {
              this.clearKickOutTimer();
              this.kickOutCountDown(kickOutRemainingTime);
            }
          } else if (null != kickOutRemainingTime) {
            this.clearKickOutTimer();
            this.kickOutCountDown(kickOutRemainingTime, true);
          }
        }
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  giftMoneyConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "dd955VokCZB47jwUdiu13S7", "giftMoneyConstant");
    "use strict";
    window.giftMoneyConstant = window.giftMoneyConstant || {};
    giftMoneyConstant.maxPlayerNum = 6;
    var n = 0;
    giftMoneyConstant.CardType = {
      Single: n++,
      Pair: n++,
      Straight: n++,
      Flush: n++,
      StraightFlush: n++,
      Set: n++
    };
    giftMoneyConstant.Audio = {
      Bg: 0
    };
    n = 0;
    giftMoneyConstant.PlayerState = {
      Fold: n++,
      HaveSeen: n++,
      Failed: n++,
      Normal: n++
    };
    var _action = "DoPlay";
    giftMoneyConstant.PostSend = {
      action: _action,
      eventName: "push"
    };
    giftMoneyConstant.PostGrap = {
      action: _action,
      eventName: "grab"
    };
    giftMoneyConstant.PostAutoGrap = {
      action: _action,
      eventName: "autoPlay"
    };
    giftMoneyConstant.PostMatching = {
      action: "JoinRoom"
    };
    giftMoneyConstant.PostCancelAutoGrap = {
      action: _action,
      eventName: "cancelAutoPlay"
    };
    giftMoneyConstant.PostGuess = {
      action: _action,
      eventName: "guess"
    };
    giftMoneyConstant.PostCancelMatching = {
      action: _action,
      eventName: "leave"
    };
    cc._RF.pop();
  }, {} ],
  giftMoneyDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "be40cSTLIxFqrcq32OXdYNY", "giftMoneyDataLogic");
    "use strict";
    window.giftMoneyDataLogic = {
      init: function init() {
        this.grabPlayerInfo = [];
        this.btnConfig = [];
        this.isKickedOut = false;
      },
      addPlayer: function addPlayer(playerData) {
        this.grabPlayerInfo.push(playerData);
      },
      setBtnConfig: function setBtnConfig(data) {
        this.btnConfig = data;
      },
      setKickedOut: function setKickedOut(isKickedOut) {
        this.isKickedOut = isKickedOut;
      }
    };
    giftMoneyDataLogic.init();
    cc._RF.pop();
  }, {} ],
  giftMoneyHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "72f19tlrLpOWLLrbppL4AcV", "giftMoneyHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.GiftMoney);
        if (giftMoneyDataLogic.isKickedOut) {
          this.showKickedOut();
          giftMoneyDataLogic.setKickedOut(false);
        }
      },
      showKickedOut: function showKickedOut() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u8d85\u8fc72\u5206\u949f\u6ca1\u6709\u53c2\u4e0e\u6e38\u620f\uff0c\u88ab\u8bf7\u79bb\u4e86\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "giftMoney/UI/banker", "giftMoney/Effect/fa", "giftMoney/bg" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  giftMoney: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "60b8eDX4ZxGbpYV7qMFmMZn", "giftMoney");
    "use strict";
    var _cc$Class;
    function _defineProperty(obj, key, value) {
      key in obj ? Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      }) : obj[key] = value;
      return obj;
    }
    var clientEvent = kf.require("basic.clientEvent");
    var isOpenAniFinished = false;
    var bankerPos = [ cc.v2(-562.2, 230), cc.v2(562.2, 230), cc.v2(-562.2, 140), cc.v2(562.2, 140), cc.v2(-562.2, 50), cc.v2(562.2, 50), cc.v2(-562.2, -40), cc.v2(562.2, -40), cc.v2(-562.2, -130), cc.v2(562.2, -130) ];
    var isMaintaining = false;
    cc.Class((_cc$Class = {
      extends: require("gameSceneBase"),
      properties: {
        txtNickname: cc.Label,
        txtBalance: cc.Label,
        spHead: cc.Sprite,
        matchingBtn: cc.Node,
        playerArr: [ cc.Node ],
        playIdTxt: cc.Label,
        waitRedPanel: cc.Node,
        hasRedPanel: cc.Node,
        sendGiftMoneyPanel: cc.Node,
        btnBg: [ cc.SpriteFrame ],
        moneyBtnArr: [ cc.Node ],
        numBtnArr: [ cc.Node ],
        boomBtnArr: [ cc.Node ],
        waitPlayer: [ cc.Node ],
        curBagOwner: cc.Label,
        curLeftNumber: cc.Label,
        curBagMoney: cc.Label,
        curBoomNumberLabel: cc.Label,
        countDownTxt: cc.Label,
        awardBg: [ cc.SpriteFrame ],
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        curState: cc.Node,
        openBtn: cc.Node,
        banker: cc.Node,
        timer: cc.Node,
        selfBorder: cc.Node,
        playerBg: [ cc.SpriteFrame ],
        autoGrapAni: cc.Animation,
        boom: cc.Node,
        sendGiftMoneyBtnBg: [ cc.SpriteFrame ],
        sendGiftMoneyBtn: cc.Node,
        waitDot: cc.Node,
        grapMoneyAudio: {
          default: null,
          type: cc.AudioClip
        },
        openAudio: {
          default: null,
          type: cc.AudioClip
        },
        boomAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onPush", this.onPush.bind(this) ], [ "onGrab", this.onGrab.bind(this) ], [ "onSettle", this.onSettle.bind(this) ], [ "onNoAlive", this.onNoAlive.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onExit", this.onExit.bind(this) ], [ "onCurrent", this.onCurrent.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "openCb", this.openCb.bind(this) ], [ "leaveGameRoomCb", this.leaveGameRoomCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow() {
        audioMgr.stopAllEffect();
        if (isMaintaining) {
          this.unscheduleAllCallbacks();
          this.showMaintainingToast();
          return;
        }
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.openBtn.getChildByName("kai_no").getComponent(cc.Animation).stop();
        this.openBtn.getChildByName("kai_ing").getComponent(cc.Animation).stop();
        this.autoGrapAni.stop();
        if (this.socketIO.isConnected()) {
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb", true);
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
      },
      gameHide: function gameHide() {
        this.unscheduleAllCallbacks();
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.GiftMoney);
        this.registerEvent();
        this.setSelfUI();
        this.resetGrapPlayerState();
        this.gameState = -1;
        if (dataLogic.needRecover) {
          cc.log("==============\u65ad\u7ebf\u91cd\u8fde");
          this.doneGameRecover = false;
          this.isOffLine = 1;
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        } else {
          dataLogic.setReqRecoverState(false);
          dataLogic.setDeskId(-1);
          var roomKey = dataLogic.curRoomKey || 1;
          giftMoneyConstant.PostMatching.roomId = constant.GameId.GiftMoney + roomKey;
          var _arg = {
            type: constant.ToastType.LoadingWaitStart
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, _arg);
          http.post(giftMoneyConstant.PostMatching, "matchingCb");
        }
        this.timer.getComponent(cc.Animation).play();
        this.countDownTxt.node.opacity = 0;
        this.curGiftMoney = "";
        this.curSendNumber = "";
        this.curBoomNumber = "";
        this.sendPlayerArr = [];
        this.nowRedEnvelopId = "";
        this.curRoundLossMoney = "";
        this.curRoundSeatIndex = null;
        this.isAutoGrap = false;
        this.grabCbData = null;
        this.startIndex = 0;
        this.selfSendBagNum = 0;
        this.curRoundSelfBagMoney = 0;
        this.curRoundSelfBagNum = 0;
      },
      btnEvent: function btnEvent(event, eventType) {
        eventType && audioMgr.playEffect(this.audioBtn);
        switch (eventType) {
         case "exitGame":
          cc.log("exitGame");
          this.tryExitGame();
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.GiftMoney);
          break;

         case "Setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "showGiftMoneyPanel":
          this.checkBetBtnState();
          this.sendGiftMoneyPanel.active = true;
          break;

         case "closeGiftMoneyPanel":
          this.sendGiftMoneyPanel.active = false;
          this.resetSendGiftMoneyData();
        }
      },
      resetSendGiftMoneyData: function resetSendGiftMoneyData() {
        this.curGiftMoney = "";
        this.curSendNumber = "";
        this.curBoomNumber = "";
      },
      gameRecoverCb: function gameRecoverCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          isMaintaining = true;
          constant.HttpCode.error == data.Code && this.showMaintainingToast(data.StrCode);
        } else {
          this.onGameRecover(data.Data);
          dataLogic.setReqRecoverState(false);
          dataLogic.setDeskId(data.Data.deskId);
          dataLogic.setMsgId(data.Data.msgId);
        }
      },
      showMaintainingToast: function showMaintainingToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u7cfb\u7edf\u9700\u8981\u51e0\u5206\u949f\u5347\u7ea7\u4e00\u4e0b\uff0c\u8bf7\u7a0d\u7b49";
        if (this.getToast(constant.ToastType.Hint, 4)) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "exitRoom" ],
            btnTxt: [ null, "\u597d\u7684" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      tryExitGame: function tryExitGame() {
        if (-1 != this.gameState || this.selfSendBagNum) this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u7b49\u5f85\u6e38\u620f\u7ed3\u675f\u518d\u9000\u51fa"); else if (this.isAutoGrap) {
          giftMoneyConstant.PostCancelAutoGrap.roomId = constant.GameId.GiftMoney + dataLogic.curRoomKey;
          http.post(giftMoneyConstant.PostCancelAutoGrap, "openCb", [ "cancelAutoPlay", "leaveRoom" ]);
        } else this.exitRoom();
      },
      exitRoom: function exitRoom() {
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        constant.PostCancelMatching.roomId = constant.GameId.GiftMoney + dataLogic.curRoomKey;
        http.post(constant.PostCancelMatching, "leaveGameRoomCb");
      },
      leaveGameRoomCb: function leaveGameRoomCb(data) {
        if (1 == data.Code || -4 == data.Code) {
          cc.log("3333333333333333333333");
          this.goBackSelectRoom();
        } else this.showExitGameToast("\u9000\u51fa\u5931\u8d25\uff0c\u8bf7\u60a8\u91cd\u65b0\u518d\u8bd5");
      },
      setAutoGrap: function setAutoGrap() {
        audioMgr.playEffect(this.audioBtn);
        this.isAutoGrap = !this.isAutoGrap;
        if (this.isAutoGrap) {
          this.autoGrapAni.play();
          this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2\u4e2d......";
          giftMoneyConstant.PostAutoGrap.roomId = constant.GameId.GiftMoney + dataLogic.curRoomKey;
          http.post(giftMoneyConstant.PostAutoGrap, "openCb", [ "autoPlay" ]);
        } else {
          giftMoneyConstant.PostCancelAutoGrap.roomId = constant.GameId.GiftMoney + dataLogic.curRoomKey;
          http.post(giftMoneyConstant.PostCancelAutoGrap, "openCb", [ "cancelAutoPlay" ]);
          this.autoGrapAni.stop();
          this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2";
        }
      },
      toggleGiftMoney: function toggleGiftMoney(event, key) {
        audioMgr.playEffect(this.audioBtn);
        for (var i = 0; i < this.moneyBtnArr.length; i++) {
          var btn = this.moneyBtnArr[i];
          if (this.moneyBtnArr[i].getComponent(cc.Button).interactable) {
            btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
            btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
          }
        }
        event.target.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[1];
        event.target.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 86, 73, 1);
        this.curGiftMoney = giftMoneyDataLogic.btnConfig[key];
      },
      toggleGiftMoneyNumber: function toggleGiftMoneyNumber(event, key) {
        audioMgr.playEffect(this.audioBtn);
        for (var i = 0; i < this.numBtnArr.length; i++) {
          var btn = this.numBtnArr[i];
          btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
          btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
        }
        event.target.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[1];
        event.target.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 86, 73, 1);
        this.curSendNumber = [ 5, 7, 10 ][key];
      },
      toggleBoomNumber: function toggleBoomNumber(event, key) {
        audioMgr.playEffect(this.audioBtn);
        for (var i = 0; i < this.boomBtnArr.length; i++) {
          var btn = this.boomBtnArr[i];
          btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
          btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
        }
        event.target.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[1];
        event.target.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 86, 73, 1);
        this.curBoomNumber = key;
      },
      sendGiftMoney: function sendGiftMoney(event, key) {
        audioMgr.playEffect(this.audioBtn);
        if (!this.curGiftMoney) {
          this.showLayerTip("\u8bf7\u9009\u62e9\u7ea2\u5305\u91d1\u989d");
          return;
        }
        if (!this.curSendNumber) {
          this.showLayerTip("\u8bf7\u9009\u62e9\u7ea2\u5305\u4e2a\u6570");
          return;
        }
        if (!this.curBoomNumber) {
          this.showLayerTip("\u8bf7\u9009\u62e9\u96f7\u53f7");
          return;
        }
        giftMoneyConstant.PostSend.redEnvelopAmount = this.curGiftMoney;
        giftMoneyConstant.PostSend.redEnvelopCount = this.curSendNumber;
        giftMoneyConstant.PostSend.hitNumber = this.curBoomNumber;
        http.post(giftMoneyConstant.PostSend, "betCb");
      },
      betCb: function betCb(data) {
        if (1 == data.Code) {
          this.showLayerTip("\u6210\u529f\u53d1\u51fa\u7ea2\u5305");
          this.sendGiftMoneyPanel.active = false;
          var balance = +dataLogic.userBalance - this.curGiftMoney;
          this.setPlayerBalance(balance);
          dataLogic.setUserBalance(balance);
          this.gameState = 1;
          this.selfSendBagNum += 1;
          this.resetGiftMoneyPanel();
          this.checkUserBalanceIsEnoughToSendGift();
        } else 1 == data.Code && 4 == data.Data ? this.showLayerTip("\u6392\u961f\u7ea2\u5305\u5df2\u6ee1\uff0c\u8bf7\u7a0d\u540e\u518d\u53d1") : this.showLayerTip("\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001");
      },
      resetGiftMoneyPanel: function resetGiftMoneyPanel() {
        this.curGiftMoney = this.curSendNumber = this.curBoomNumber = "";
        for (var i = 0; i < this.moneyBtnArr.length; i++) {
          var btn = this.moneyBtnArr[i];
          btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
          btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
        }
        for (var _i = 0; _i < this.numBtnArr.length; _i++) {
          var btn = this.numBtnArr[_i];
          btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
          btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
        }
        for (var _i2 = 0; _i2 < this.boomBtnArr.length; _i2++) {
          var btn = this.boomBtnArr[_i2];
          btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
          btn.getChildByName("Background").getChildByName("txt").color = new cc.Color(217, 128, 117, 1);
        }
      },
      setSelfUI: function setSelfUI() {
        this.txtNickname.string = dataLogic.userName;
        this.setPlayerBalance(dataLogic.userBalance);
        this.setPlayerHead(dataLogic.userHeadUrl, this.spHead);
      },
      setPlayerBalance: function setPlayerBalance(balance) {
        "string" == typeof balance && (balance = Number(balance));
        this.txtBalance.string = balance.toFixed(2);
        dataLogic.setUserBalance(balance);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      matchingCb: function matchingCb(data) {
        if (1 == data.Code) {
          dataLogic.setDeskId(data.Data.deskId);
          this.setBetBtnConfig(data.Data.amount);
        } else {
          if (this.recoverLoad && this.recoverLoad.parent) {
            this.recoverLoad.stopAllActions();
            kf.killObj(this.recoverLoad);
          }
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
            return;
          }
        }
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        giftMoneyDataLogic.setBtnConfig(data);
        this.renderBetBtn();
      },
      renderBetBtn: function renderBetBtn() {
        for (var i = 0; i < 4; i++) {
          var btn = this.moneyBtnArr[i];
          btn.getChildByName("Background").getChildByName("txt").getComponent(cc.Label).string = giftMoneyDataLogic.btnConfig[i];
          if (giftMoneyDataLogic.btnConfig[i] > dataLogic.userBalance) {
            btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[2];
            btn.getComponent(cc.Button).interactable = false;
          }
        }
      },
      checkBetBtnState: function checkBetBtnState() {
        for (var i = 0; i < 4; i++) {
          var btn = this.moneyBtnArr[i];
          if (giftMoneyDataLogic.btnConfig[i] > dataLogic.userBalance) {
            btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[2];
            btn.getComponent(cc.Button).interactable = false;
          } else {
            btn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame = this.btnBg[0];
            btn.getComponent(cc.Button).interactable = true;
          }
        }
      },
      grapGiftMoney: function grapGiftMoney() {
        audioMgr.playEffect(this.audioBtn);
        giftMoneyConstant.PostGrap.redEnvelopId = this.nowRedEnvelopId;
        cc.log("================", dataLogic.userId);
        if (this.checkBalanceIsEnoughToLose() > 0) {
          this.setGrapEffect(true);
          audioMgr.playEffect(this.openAudio);
          giftMoneyConstant.PostGrap.roomId = constant.GameId.GiftMoney + dataLogic.curRoomKey;
          http.post(giftMoneyConstant.PostGrap, "openCb");
        } else if (this.isAutoGrap) {
          this.isAutoGrap = false;
          this.autoGrapAni.stop();
          this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2";
          this.showExitGameToast("\u60a8\u643a\u5e26\u7684\u91d1\u989d\u4e0d\u8db3\uff0c\u5df2\u505c\u6b62\u81ea\u52a8\u62a2\u529f\u80fd");
        } else this.showExitGameToast("\u643a\u5e26\u7684\u91d1\u989d\u4e0d\u8db3\u4ee5\u8d54\u4ed8\uff0c\u8bf7\u5145\u503c");
      },
      checkUserBalanceIsEnoughToSendGift: function checkUserBalanceIsEnoughToSendGift() {
        if (dataLogic.userBalance < Number(dataLogic.selectRoomConfig[dataLogic.curRoomKey - 1].joinAmount)) {
          this.sendGiftMoneyBtn.getComponent(cc.Sprite).spriteFrame = this.sendGiftMoneyBtnBg[1];
          this.sendGiftMoneyBtn.getComponent(cc.Button).interactable = false;
        } else {
          this.sendGiftMoneyBtn.getComponent(cc.Sprite).spriteFrame = this.sendGiftMoneyBtnBg[0];
          this.sendGiftMoneyBtn.getComponent(cc.Button).interactable = true;
        }
      },
      checkBalanceIsEnoughToLose: function checkBalanceIsEnoughToLose() {
        return dataLogic.userBalance - this.curRoundLossMoney;
      },
      setGrapEffect: function setGrapEffect(isPlayOpenEffect) {
        var kai_no = this.openBtn.getChildByName("kai_no");
        var kai_ing = this.openBtn.getChildByName("kai_ing");
        if (isPlayOpenEffect) {
          kai_no.active = false;
          kai_no.getComponent(cc.Animation).stop();
          kai_ing.active = true;
          var open_ing = kai_ing.getComponent(cc.Animation);
          open_ing.play();
          open_ing.on("finished", this.openAniCb, this);
        } else {
          kai_no.active = true;
          kai_no.getComponent(cc.Animation).play();
          kai_ing.active = false;
          kai_ing.getComponent(cc.Animation).stop();
        }
      },
      openAniCb: function openAniCb() {
        isOpenAniFinished = true;
        if (null !== this.grabCbData && !this.curState.active) if (5 == this.grabCbData.Code) this.gameState = 1; else if (1 == this.grabCbData.Code && 1 == this.grabCbData.Data) {
          this.openBtn.active = false;
          this.curState.active = true;
          this.curState.getChildByName("txt").getComponent(cc.Label).string = "\u5df2\u62a2\u5b8c";
        } else {
          cc.log(this.grabCbData);
          this.showLayerTip(this.grabCbData.StrCode);
        }
      },
      openCb: function openCb(data, flag) {
        if (flag && "autoPlay" == flag[0]) {
          if (1 != data.Code) {
            this.showLayerTip(data.StrCode ? data.StrCode : "\u53d1\u8d77\u81ea\u52a8\u62a2\u5931\u8d25");
            this.isAutoGrap = false;
            this.autoGrapAni.stop();
            this.gameState = -1;
            this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2";
          }
        } else if (flag && "cancelAutoPlay" == flag[0]) if (1 == data.Code) {
          this.isAutoGrap = false;
          this.autoGrapAni.stop();
          this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2";
          "leaveRoom" == flag[1] && this.exitRoom();
        } else flag[1] ? this.showLayerTip("\u8bf7\u5148\u53d6\u6d88\u81ea\u52a8\u62a2\u7ea2\u5305\u529f\u80fd") : this.showLayerTip(data.StrCode ? data.StrCode : "\u53d6\u6d88\u5931\u8d25"); else this.grabCbData = data;
      },
      onPush: function onPush(data) {
        if (!this.hasRedPanel.active) {
          this.hasRedPanel.active = true;
          this.waitRedPanel.active = false;
          this.curState.active = false;
          this.openBtn.active = true;
          this.setGrapEffect(false);
        }
        this.sendPlayerArr.push(data);
        if (this.sendPlayerArr.length <= 3) {
          var sp = this.waitPlayer[this.sendPlayerArr.length - 1].getComponent(cc.Sprite);
          this.setPlayerHead(data.avartar, sp);
          1 == data.totalCount && (this.curBagOwner.string = data.nickName);
        }
      },
      onCurrent: function onCurrent(data) {
        if (this.recoverLoad && this.recoverLoad.parent) {
          this.recoverLoad.stopAllActions();
          kf.killObj(this.recoverLoad);
        }
        this.resetGrapPlayerState();
        this.timer.getComponent(cc.Animation).stop();
        this.timer.getChildByName("sl_00007").active = false;
        this.countDown();
        this.waitDot.opacity = this.sendPlayerArr.length - 1 >= this.startIndex + 2 ? 255 : 0;
        for (var i = 0; i < 3; i++) {
          var sp = this.waitPlayer[i].getComponent(cc.Sprite);
          if (0 == i) {
            this.setPlayerHead(data.avartar, sp);
            this.curBagOwner.string = data.nickName;
          } else {
            cc.log(this.sendPlayerArr, this.startIndex + i);
            if (this.sendPlayerArr.length - 1 >= this.startIndex + i && this.sendPlayerArr[this.startIndex + i].avartar) {
              this.setPlayerHead(this.sendPlayerArr[this.startIndex + i].avartar, sp);
              this.waitPlayer[i].opacity = 255;
            } else this.waitPlayer[i].opacity = 0;
          }
        }
        this.startIndex += 1;
        this.curLeftNumber.string = "\u5269\u4f59\uff1a" + data.count;
        this.curBagMoney.string = "\u7ea2\u5305\u603b\u989d\uff1a" + data.amount;
        this.curBoomNumberLabel.string = data.hitNumber;
        this.nowRedEnvelopId = data.redEnvelopId;
        this.curState.active = false;
        this.openBtn.active = true;
        this.grabCbData = null;
        this.resetBoomState();
        this.setGrapEffect(false);
        isOpenAniFinished = false;
        this.resetBankerAndSelfBorderState();
        this.curRoundLossMoney = data.amount * (5 == data.count ? 2 : 7 == data.count ? 1.5 : 1);
        if (data.userId == dataLogic.userId) {
          this.selfSendBagNum--;
          this.curRoundSelfBagMoney = data.amount;
          this.curRoundSelfBagNum = data.count;
        }
      },
      resetBoomState: function resetBoomState() {
        this.boom.opacity = 0;
        this.boom.x = -1e4;
      },
      resetGrapPlayerState: function resetGrapPlayerState() {
        giftMoneyDataLogic.grabPlayerInfo = [];
        for (var i = 0; i < this.playerArr.length; i++) {
          var sp = this.playerArr[i].getChildByName("avatarBox");
          var playerNameNode = this.playerArr[i].getChildByName("playerName");
          var stateNode = this.playerArr[i].getChildByName("grapState");
          var awardNode = this.playerArr[i].getChildByName("award");
          stateNode.getChildByName("txt").getComponent(cc.Label).string = "\u7b49\u5f85\u63ed\u6653";
          playerNameNode.opacity = 0;
          stateNode.opacity = 0;
          sp.opacity = 0;
          awardNode.opacity = 0;
          this.playerArr[i].getComponent(cc.Sprite).spriteFrame = this.playerBg[0];
        }
      },
      resetBankerAndSelfBorderState: function resetBankerAndSelfBorderState() {
        this.banker.x = -1e4;
        this.selfBorder.x = -1e4;
      },
      onGrab: function onGrab(data) {
        var _this = this;
        var playerInfo = {
          nickName: data.nickName
        };
        giftMoneyDataLogic.addPlayer(playerInfo);
        var index = giftMoneyDataLogic.grabPlayerInfo.length - 1;
        var avatarBox = this.playerArr[index].getChildByName("avatarBox");
        var sp = this.playerArr[index].getChildByName("avatarBox").getChildByName("avatar").getComponent(cc.Sprite);
        var playerNameNode = this.playerArr[index].getChildByName("playerName");
        var stateNode = this.playerArr[index].getChildByName("grapState");
        playerNameNode.opacity = 255;
        stateNode.opacity = 255;
        avatarBox.opacity = 255;
        this.setPlayerHead(data.avartar, sp);
        playerNameNode.getComponent(cc.Label).string = data.nickName;
        this.setBagLeftNumber(data.count);
        data.isRob && (this.banker.position = bankerPos[index]);
        if (-1 != data.userId && data.userId == dataLogic.userId) {
          this.selfBorder.y = this.playerArr[index].y;
          this.selfBorder.x = this.playerArr[index].x - (index % 2 == 0 ? 5 : -5);
          this.selfBorder.scaleX = index % 2 == 0 ? -1 : 1;
          this.playerArr[index].getComponent(cc.Sprite).spriteFrame = this.playerBg[1];
          this.gameState = 1;
          if (!this.curState.active) {
            var kai_no = this.openBtn.getChildByName("kai_no");
            var kai_ing = this.openBtn.getChildByName("kai_ing");
            kai_no.active = false;
            kai_ing.active = true;
            kai_no.getComponent(cc.Animation).stop();
            var open_ing_ani = kai_ing.getComponent(cc.Animation);
            open_ing_ani.play();
            open_ing_ani.on("finished", function() {
              _this.openBtn.active = false;
              _this.curState.active = true;
              _this.curState.getChildByName("txt").getComponent(cc.Label).string = "\uffe5" + data.amount;
            }, this);
          }
        }
      },
      setBagLeftNumber: function setBagLeftNumber(count) {
        this.curLeftNumber.string = "\u5269\u4f59\uff1a" + count;
      },
      onSettle: function onSettle(data) {
        var gameResult = data.gameResult;
        for (var i = 0; i < gameResult.length; i++) {
          var node = this.playerArr[i];
          var awardNode = node.getChildByName("award");
          awardNode.opacity = 255;
          var grapMoney = node.getChildByName("grapState").getChildByName("txt").getComponent(cc.Label);
          var awardMoney = awardNode.getChildByName("awardMoney").getComponent(cc.Label);
          if (gameResult[i].reward > 0) {
            awardNode.getComponent(cc.Sprite).spriteFrame = this.awardBg[0];
            awardMoney.font = this.winChipNumFont;
            awardMoney.string = "+" + gameResult[i].reward.toFixed(2);
            grapMoney.string = gameResult[i].grabAmount.toFixed(2);
          } else {
            awardNode.getComponent(cc.Sprite).spriteFrame = this.awardBg[1];
            awardMoney.font = this.loseChipNumFont;
            awardMoney.string = gameResult[i].reward.toFixed(2);
            grapMoney.string = gameResult[i].grabAmount.toFixed(2);
          }
          if (gameResult[i].userId == dataLogic.userId) {
            var balance = +dataLogic.userBalance + +gameResult[i].reward;
            this.setPlayerBalance(balance);
            dataLogic.setUserBalance(balance);
            gameResult[i].isHit ? audioMgr.playEffect(this.boomAudio) : audioMgr.playEffect(this.grapMoneyAudio);
          }
          if (gameResult[i].isHit) {
            this.boom.opacity = 255;
            var x = this.playerArr[i].x + (i % 2 == 0 ? 210 : -210);
            var y = this.playerArr[i].y + 10;
            this.boom.position = cc.v2(x, y);
          }
        }
        if (this.curRoundSelfBagMoney && this.curRoundSelfBagNum && gameResult.length != this.curRoundSelfBagNum) {
          var totalGrapMoney = 0;
          var leftMoney = 0;
          for (var _i3 = 0; _i3 < gameResult.length; _i3++) totalGrapMoney += gameResult[_i3].grabAmount;
          leftMoney = this.curRoundSelfBagMoney - totalGrapMoney;
          var balance = +dataLogic.userBalance + leftMoney;
          this.setPlayerBalance(balance);
          dataLogic.setUserBalance(balance);
        }
        this.checkBalanceIsEnoughToLose();
        this.gameState = -1;
      },
      onNoAlive: function onNoAlive(data) {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u5df2\u7ecf1\u5206\u949f\u6ca1\u6709\u53c2\u4e0e\u6e38\u620f\uff0c\u8d85\u8fc72\u5206\u949f\u5c06\u88ab\u8bf7\u51fa\u623f\u95f4",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      addPlayer: function addPlayer(playerInfo) {
        var renderPlayer = giftMoneyDataLogic.playerInfo.length > 10 ? giftMoneyDataLogic.playerInfo.slice(-10) : giftMoneyDataLogic.playerInfo;
        for (var i = 0; i < renderPlayer.length; i++) ;
      }
    }, _defineProperty(_cc$Class, "setPlayerHead", function setPlayerHead(headUrl, sp) {
      resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
        sp.spriteFrame = res;
      }, cc.SpriteFrame);
    }), _defineProperty(_cc$Class, "onGameRecover", function onGameRecover(data) {
      if (this.recoverLoad && this.recoverLoad.parent) {
        this.recoverLoad.stopAllActions();
        kf.killObj(this.recoverLoad);
      }
      var state = data.state;
      this.setPlayId(data.playId);
      this.setBetBtnConfig(data.betAmount);
      if (0 == state) {
        this.hasRedPanel.active = false;
        this.waitRedPanel.active = true;
        this.curState.active = true;
        this.openBtn.active = false;
      } else {
        this.hasRedPanel.active = true;
        this.waitRedPanel.active = false;
        this.curState.active = false;
        this.openBtn.active = true;
        this.setGrapEffect(false);
      }
      if (data.pushPlayerInfos.length) {
        this.sendPlayerArr = data.pushPlayerInfos;
        for (var i = 0; i < 3; i++) {
          var sp = this.waitPlayer[i].getComponent(cc.Sprite);
          if (0 == i) {
            this.curBagOwner.string = data.currentNickName;
            this.setPlayerHead(data.currentAvartar, sp);
          } else this.setPlayerHead(data.pushPlayerInfos[i - 1].Avatar, sp);
        }
      }
      if (data.playerInfo && data.playerInfo.length) {
        for (var _i4 = 0; _i4 < data.playerInfo.length; _i4++) {
          var avatarBox = this.playerArr[_i4].getChildByName("avatarBox");
          var sp = this.playerArr[_i4].getChildByName("avatarBox").getChildByName("avatar").getComponent(cc.Sprite);
          var playerNameNode = this.playerArr[_i4].getChildByName("playerName");
          var stateNode = this.playerArr[_i4].getChildByName("grapState");
          playerNameNode.opacity = 255;
          stateNode.opacity = 255;
          avatarBox.opacity = 255;
          this.setPlayerHead(data.playerInfo[_i4].avatar, sp);
          playerNameNode.getComponent(cc.Label).string = data.playerInfo[_i4].nickName || "\u4fdd\u5bc6";
        }
        giftMoneyDataLogic.grabPlayerInfo = data.playerInfo;
      }
      this.curLeftNumber.string = "\u5269\u4f59\uff1a" + data.currentCount;
      this.curBagMoney.string = "\u7ea2\u5305\u603b\u989d\uff1a" + data.currentAmount;
      this.curBoomNumberLabel.string = data.currentHitNumber;
      this.isAutoGrap = data.isAutoPlay;
      if (this.isAutoGrap) {
        this.autoGrapAni.play();
        this.autoGrapAni.node.getChildByName("txt").getComponent(cc.Label).string = "\u81ea\u52a8\u62a2\u4e2d......";
      }
      data.userPushCount && (this.selfSendBagNum = data.userPushCount);
      data.gameResult && data.gameResult.length && this.onSettle(data);
      if (data.endTime) {
        this.timer.getComponent(cc.Animation).stop();
        this.timer.getChildByName("sl_00007").active = false;
        this.countDown(data.endTime);
      }
    }), _defineProperty(_cc$Class, "onGameStart", function onGameStart(data) {
      dataLogic.setDeskId(data.deskId);
      this.setPlayId(data.playId);
      giftMoneyDataLogic.grabPlayerInfo = data.playerInfo;
    }), _defineProperty(_cc$Class, "setPlayId", function setPlayId(playId) {
      this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
    }), _defineProperty(_cc$Class, "countDown", function countDown(endTime) {
      this.unschedule(this.callback);
      var remainingTime = void 0;
      if (endTime) {
        var setTimeResult = dataLogic.setTimerData(endTime);
        if (!setTimeResult) return;
        remainingTime = Math.floor((dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3);
      } else remainingTime = 7;
      this.countDownTxt.node.opacity = 255;
      this.countDownTxt.string = remainingTime;
      this.callback = function() {
        remainingTime--;
        this.countDownTxt.string = remainingTime;
        if (remainingTime <= 0) {
          remainingTime = 0;
          this.unschedule(this.callback);
        }
      };
      this.schedule(this.callback, 1);
    }), _defineProperty(_cc$Class, "onExit", function onExit() {
      giftMoneyDataLogic.setKickedOut(true);
      this.goBackSelectRoom();
    }), _cc$Class));
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  goldenFraudConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "fbea3Ov261MPZnpTxC9104t", "goldenFraudConstant");
    "use strict";
    window.gfConstant = window.gfConstant || {};
    gfConstant.maxPlayerNum = 5;
    var n = 0;
    gfConstant.CardType = {
      Single: n++,
      Pair: n++,
      Straight: n++,
      Flush: n++,
      StraightFlush: n++,
      Set: n++
    };
    gfConstant.CardTypeTxt = [];
    gfConstant.CardTypeTxt[gfConstant.CardType.Single] = "\u6563\u724c";
    gfConstant.CardTypeTxt[gfConstant.CardType.Pair] = "\u5bf9\u5b50";
    gfConstant.CardTypeTxt[gfConstant.CardType.Straight] = "\u987a\u5b50";
    gfConstant.CardTypeTxt[gfConstant.CardType.Flush] = "\u91d1\u82b1";
    gfConstant.CardTypeTxt[gfConstant.CardType.StraightFlush] = "\u540c\u82b1\u987a";
    gfConstant.CardTypeTxt[gfConstant.CardType.Set] = "\u8c79\u5b50";
    gfConstant.Audio = {
      Bg: 0
    };
    n = 0;
    gfConstant.PlayerState = {
      NoLook: n++,
      HaveSeen: n++,
      Fold: n++,
      Failed: n++,
      Wait: n++
    };
    var _action = "DoPlay";
    gfConstant.PostBet = {
      action: _action,
      eventName: "bet",
      index: -1
    };
    gfConstant.PostCompare = {
      action: _action,
      eventName: "compareCard",
      rivalSeatId: 0
    };
    gfConstant.PostFold = {
      action: _action,
      eventName: "fold"
    };
    gfConstant.PostSeeCard = {
      action: _action,
      eventName: "seeCard"
    };
    gfConstant.PostOpenCard = {
      action: _action,
      eventName: "openCards"
    };
    gfConstant.PostStopGame = {
      action: _action,
      eventName: "stopGame"
    };
    gfConstant.PostMatching = {
      action: "JoinRoom",
      roomId: "001"
    };
    gfConstant.FristFalgPosOff = [ cc.v2(-60, 75), cc.v2(60, 72), cc.v2(60, 72), cc.v2(-60, 72), cc.v2(-60, 72) ];
    gfConstant.CardTypePos = [ cc.v2(60, -236), cc.v2(435, -117), cc.v2(241, 115), cc.v2(-241, 115), cc.v2(-435, -117) ];
    gfConstant.CardWinPos = [ cc.v2(53, -193), cc.v2(429, -91.5), cc.v2(238, 142), cc.v2(-238, 142), cc.v2(-429, -91.5) ];
    gfConstant.HttpCode = {
      Succeed: 1,
      RivalFold: -1,
      PKLose: -1,
      PKWin: -1
    };
    cc._RF.pop();
  }, {} ],
  goldenFraudDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "f8c948yTY1CdoALzWSvUJmB", "goldenFraudDataLogic");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    window.gfDataLogic = {
      init: function init() {
        this.playerState = [];
        this.resetData();
        this.betBtnConfig = [ 1, 3, 5, 10, 15, 20 ];
        this.followChipNum = 0;
        this.roomId = "001";
        this.msgList = [];
        this.gameEndData = null;
        this.cards = [];
        this.handCard = [];
        this.settlementChipNum = [];
      },
      resetData: function resetData() {
        this.isPking = false;
        this.curOperationUISeatId = -1;
        this.autoFollow = false;
        this.isFold = false;
        this.haveSeen = false;
        this.chipRoundNum = 1;
        this.curBetUISeatId = -1;
        this.handCard = [];
        this.cards = [];
        this.settlementChipNum = [];
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.playerState[i] = gfConstant.PlayerState.Wait;
      },
      setGameEndData: function setGameEndData(data) {
        if (null == data) {
          this.gameEndData = null;
          return;
        }
        this.gameEndData = kf.clone(data);
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        this.playerState[UISeatId] = state;
        UISeatId == constant.SelfUISeatId && state == gfConstant.PlayerState.Fold && this.fold();
      },
      setCurOpeartionUIseatId: function setCurOpeartionUIseatId(UIseatId) {
        this.curOperationUISeatId = UIseatId;
      },
      getRivalUISeatIds: function getRivalUISeatIds() {
        var UISeatIds = [];
        for (var i = 0; i < this.playerState.length; i++) {
          if (i == constant.SelfUISeatId) continue;
          gfConstant.PlayerState.NoLook != this.playerState[i] && gfConstant.PlayerState.HaveSeen != this.playerState[i] || UISeatIds.push(i);
        }
        return UISeatIds;
      },
      getNeedShowCardUISeatIds: function getNeedShowCardUISeatIds() {
        cc.log("this.playerState", this.playerState);
        var UISeatIds = [];
        for (var i = 0; i < this.playerState.length; i++) {
          if (i == constant.SelfUISeatId) continue;
          null != this.playerState[i] && gfConstant.PlayerState.Fold != this.playerState[i] && gfConstant.PlayerState.Wait != this.playerState[i] && UISeatIds.push(i);
        }
        return UISeatIds;
      },
      getNotOpenCardUISeatIds: function getNotOpenCardUISeatIds() {
        var UISeatIds = [];
        for (var i = 0; i < this.playerState.length; i++) {
          if (i == constant.SelfUISeatId) continue;
          null != this.playerState[i] && gfConstant.PlayerState.NoLook == this.playerState[i] && UISeatIds.push(i);
        }
        return UISeatIds;
      },
      setFollowChipNum: function setFollowChipNum(baseChipNum) {
        this.haveSeen ? this.followChipNum = 2 * baseChipNum : this.followChipNum = baseChipNum;
      },
      setHandCard: function setHandCard(cards) {
        cc.log("setHandCard", cards);
        var sortedCard = this.sortCard(cards);
        this.handCard = kf.clone(sortedCard);
      },
      setAllPlayerCards: function setAllPlayerCards(cards) {
        this.cards = kf.clone(cards);
      },
      setPKState: function setPKState(state) {
        this.isPking = state;
      },
      popMsgList: function popMsgList() {
        return this.msgList.shift();
      },
      pushMsgList: function pushMsgList(msg) {
        this.msgList.push(msg);
      },
      runNextMsg: function runNextMsg() {
        if (0 == this.msgList.length) return false;
        var msg = gfDataLogic.popMsgList();
        clientEvent.dispatchEvent(msg.eventName, msg);
        return true;
      },
      setSettlementChipNum: function setSettlementChipNum(data) {
        this.settlementChipNum = kf.clone(data);
      },
      setAutoFollow: function setAutoFollow(bool) {
        this.autoFollow = bool;
      },
      fold: function fold() {
        this.isFold = true;
      },
      seeCard: function seeCard() {
        this.haveSeen = true;
      },
      setSeeCardState: function setSeeCardState(state) {
        this.haveSeen = state;
      },
      seeCardFail: function seeCardFail() {
        this.haveSeen = false;
      },
      setChipRoundNum: function setChipRoundNum(num) {
        cc.log("setChipRoundNum", num);
        this.chipRoundNum = num;
      },
      sortCard: function sortCard(cards) {
        var cardList = kf.clone(cards);
        var v1 = void 0, v2 = void 0, color1 = void 0, color2 = void 0;
        cardList.sort(function(card1, card2) {
          v1 = dataLogic.getCardValue(card1);
          v2 = dataLogic.getCardValue(card2);
          color1 = dataLogic.getCardCorol(card1);
          color2 = dataLogic.getCardCorol(card2);
          if (v1 != v2) return v2 - v1;
          if (color1 != color2) return color2 - color1;
          cc.error("\u4e24\u5f20\u4e00\u6837\u7684\u724c", card1, card2);
          return 0;
        });
        var cardType = this.getOptimalCardType(cards);
        if (cardType == gfConstant.CardType.Pair) {
          var _v = dataLogic.getCardValue(cardList[1]);
          var _v2 = dataLogic.getCardValue(cardList[2]);
          if (_v == _v2) {
            var t = cardList[0];
            cardList[0] = cardList[2];
            cardList[2] = t;
          }
        } else if (cardType == gfConstant.CardType.StraightFlush || cardType == gfConstant.CardType.Straight) {
          var _v3 = dataLogic.getCardValue(cardList[0]);
          var _v4 = dataLogic.getCardValue(cardList[1]);
          var v3 = dataLogic.getCardValue(cardList[2]);
          if (14 == _v3 && 3 == _v4 && 2 == v3) {
            var _t = cardList.shift();
            cardList.push(_t);
          }
        }
        return cardList;
      },
      isPair: function isPair(cards) {
        if (cards[0][0] === cards[1][0]) return cards;
        if (cards[0][0] === cards[2][0]) return [ cards[0], cards[2], cards[1] ];
        if (cards[1][0] === cards[2][0]) return [ cards[1], cards[2], cards[0] ];
        return false;
      },
      isSet: function isSet(cards) {
        if (cards[0][0] === cards[1][0] && cards[0][0] === cards[2][0]) return cards;
        return false;
      },
      isStraight: function isStraight(cards) {
        if (cards[0][0] === cards[1][0] + 1 && cards[0][0] === cards[2][0] + 2) return cards;
        if (14 == cards[0][0] && 3 == cards[1][0] && 2 == cards[2][0]) return [ cards[1], cards[2], cards[0] ];
        return false;
      },
      isFlush: function isFlush(cards) {
        if (cards[0][1] === cards[1][1] && cards[0][1] === cards[2][1]) return cards;
        return false;
      },
      isStraightFlush: function isStraightFlush(cards) {
        if (!this.isFlush(cards)) return false;
        var result = this.isStraight(cards);
        if (!result) return false;
        return result;
      },
      getOptimalCardType: function getOptimalCardType(cards) {
        if (3 !== cards.length) {
          cc.error("\u724c\u7684\u5f20\u6570\u9519\u8bef", cards.length);
          return;
        }
        var cardList = [];
        for (var i = 0; i < 3; i++) cardList[i] = dataLogic.getCardValueAndColor(cards[i]);
        cardList.sort(function(card1, card2) {
          if (card1[0] != card2[0]) return card2[0] - card1[0];
          if (card1[1] != card2[1]) return card2[1] - card1[1];
          cc.error("\u4e24\u5f20\u4e00\u6837\u7684\u724c", card1, card2);
          return 0;
        });
        var result = this.isSet(cardList);
        if (result) return gfConstant.CardType.Set;
        result = this.isStraightFlush(cardList);
        if (result) return gfConstant.CardType.StraightFlush;
        result = this.isFlush(cardList);
        if (result) return gfConstant.CardType.Flush;
        result = this.isStraight(cardList);
        if (result) return gfConstant.CardType.Straight;
        result = this.isPair(cardList);
        if (result) return gfConstant.CardType.Pair;
        return gfConstant.CardType.Single;
      },
      randomIntBySeed: function randomIntBySeed(min, max, seed) {
        "number" != typeof seed && cc.error("\u53c2\u6570seed\u5fc5\u987b\u662f\u6570\u503c\u7c7b\u578b", seed, "undefined" === typeof seed ? "undefined" : _typeof(seed));
        var v = this.randomBySeed(min, max + 1, seed);
        return Math.floor(v);
      },
      randomBySeed: function randomBySeed(min, max, seed) {
        if (max < min || void 0 === max || void 0 === min) {
          cc.error("\u53c2\u6570\u9519\u8bef,min:", min, " max:", max);
          return;
        }
        seed = (9301 * seed + 49297) % 233280;
        var rnd = seed / 233280;
        return min + rnd * (max - min);
      }
    };
    gfDataLogic.init();
    cc._RF.pop();
  }, {} ],
  goldenFraudHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "9466dT0MdNG5qjSAP5SimH9", "goldenFraudHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.GoldenFraud);
      },
      start: function start() {},
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "goldenFraud/gameBg", "common/UI/table", "card", "common/effect/ef_shengli/glow2", "goldenFraud/effect/autoFollow/zjh_zdgz_k_00000", "goldenFraud/effect/juesheng/zjh_juesheng_zi", "goldenFraud/effect/playerWin/zjh_tsl_lz_00019" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
        cc.loader.loadResDir("goldenFraud/effect/PK", function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  goldenFraud: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b07e0gfIZBPQYheCG0DMAgI", "goldenFraud");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var packUpActionTime = .1;
    var reqFold = false;
    var PKTime = 3;
    var desperateTime = 1.3;
    var isDesperatePlaying = false;
    var _firstUIseatId = -1;
    var _winnerUISeatId = -1;
    var _matching = false;
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        dispenseCardNode: cc.Node,
        compareCardLayer: cc.Node,
        addChipBg: cc.Node,
        seeCard: cc.Node,
        chipParent: cc.Node,
        player: [ cc.Node ],
        playOption: cc.Node,
        timer: cc.Node,
        compareLayerTop: cc.Node,
        compareLayerBottom: cc.Node,
        autoFollowEf: cc.Node,
        visitingEf: [ cc.Node ],
        selfWinEf: cc.Node,
        fristFlag: cc.Node,
        launchPlayer: cc.Node,
        rivalPlayer: cc.Node,
        bomb: cc.Node,
        efMatchingLoad: cc.Node,
        efDetermineWin: cc.Animation,
        efDesperate: cc.Animation,
        anteBg: cc.Node,
        playIdBg: cc.Node,
        roundBg: cc.Node,
        btFold: cc.Button,
        btMatching: cc.Button,
        btShowAddChip: cc.Button,
        btCompare: cc.Button,
        btFollow: cc.Button,
        btAutoFollow: cc.Button,
        btCancelMatching: cc.Button,
        backCardPf: cc.Prefab,
        chipPf: cc.Prefab,
        totalBetNumTxt: cc.Label,
        playIdTxt: cc.Label,
        anteTxt: cc.Label,
        chipRoundTxt: cc.Label,
        addChipBtnTxt: [ cc.Label ],
        awardPotTxt: cc.Label,
        followBtnTxt: cc.Label,
        autoFollowBtnTxt: cc.Label,
        compareBtnTxt: cc.Label,
        cardTypeTxt: cc.Label,
        winnerCardTypeTxt: cc.Label,
        matchingToastLayerTxt: cc.Label,
        stateSF: [ cc.SpriteFrame ],
        cardAtlas: cc.SpriteAtlas,
        btnAudio: {
          default: null,
          type: cc.AudioClip
        },
        addChipAudio: {
          default: [],
          type: cc.AudioClip
        },
        compareAudio: {
          default: [],
          type: cc.AudioClip
        },
        followAudio: {
          default: [],
          type: cc.AudioClip
        },
        giveUpAudio: {
          default: [],
          type: cc.AudioClip
        },
        myturnAudio: {
          default: null,
          type: cc.AudioClip
        },
        lightingAudio: {
          default: null,
          type: cc.AudioClip
        },
        pkboomAudio: {
          default: null,
          type: cc.AudioClip
        },
        showAudio: {
          default: null,
          type: cc.AudioClip
        },
        chipAudio: {
          default: null,
          type: cc.AudioClip
        },
        chipsAudio: {
          default: null,
          type: cc.AudioClip
        },
        watchCardAudio: {
          default: [],
          type: cc.AudioClip
        },
        winAudio: {
          default: null,
          type: cc.AudioClip
        },
        determineWinAudio: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        audioDesperate: {
          default: null,
          type: cc.AudioClip
        },
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onSeeCard", this.onSeeCard.bind(this) ], [ "onFold", this.onFold.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "onCompareCard", this.onCompareCard.bind(this) ], [ "seeCardCb", this.seeCardCb.bind(this) ], [ "foldCb", this.foldCb.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "compareCardCb", this.compareCardCb.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "intoGameRoom", this.intoGameRoom.bind(this) ], [ "intoRoom", this.intoRoom.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow(hideTime) {
        isDesperatePlaying = false;
        this.efDesperate.stop();
        this.efDesperate.node.active = false;
        this.unscheduleAllCallbacks();
        var UISeatId = gfDataLogic.curOperationUISeatId;
        if (UISeatId == constant.SelfUISeatId && this.performAutoFollow()) gfDataLogic.setCurOpeartionUIseatId(-1); else if (-1 != UISeatId) {
          this.updateOperationBtn(UISeatId);
          this.alterCountDown();
        } else this.removeTimer();
        if (this.isGameOver || _matching) null != gfDataLogic.gameEndData ? this.gameEnd(gfDataLogic.gameEndData, true) : this.hideAllPlayerState(); else if (gfDataLogic.haveSeen) {
          if (this.haveCardData && !dataLogic.isOnlooker()) {
            this.doneShowCardAmin = true;
            this.setHandCardView(constant.SelfUISeatId, true);
          }
        } else dataLogic.isOnlooker() || (this.seeCard.active = true);
      },
      gameHide: function gameHide() {
        this.efDesperate.stop();
        this.efDesperate.node.active = false;
        isDesperatePlaying = false;
        this.unscheduleAllCallbacks();
        this.compareLayerBottom.stopAllActions();
        this.compareLayerTop.stopAllActions();
        -1 != this.curPkLoseUIseatId && this.PKLosePlayerUI();
        this.removePkUI();
        gfDataLogic.setPKState(false);
        while (gfDataLogic.runNextMsg()) ;
        for (var i = 0; i < this.player.length; i++) this.setVisitingCardOpacity(i, 255);
        this.node.stopAllActions();
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.GoldenFraud);
        dataLogic.setLimitPlayerNum(gfConstant.maxPlayerNum);
        this.registerEvent();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        kf.createPool(constant.PoolId.Chip, 30, this.chipPf);
        for (var i = 1; i < gfConstant.maxPlayerNum; i++) {
          this.player[i].getChildByName("choiceCompareFrame").on("touchend", this.choiceComparePlayer.bind(this, i));
          this.player[i].active = false;
        }
        this.backCard = [];
        for (var _i = 0; _i < 3 * gfConstant.maxPlayerNum; _i++) {
          this.backCard[_i] = cc.instantiate(this.backCardPf);
          this.backCard[_i].parent = this.dispenseCardNode;
          this.backCard[_i].opacity = 0;
          this.backCard[_i].y = 2e3;
        }
        this.handCardSp = [];
        for (var _i2 = 0; _i2 < gfConstant.maxPlayerNum; _i2++) {
          this.handCardSp[_i2] = [];
          for (var j = 0; j < 3; j++) this.handCardSp[_i2][j] = this.player[_i2].getChildByName("card" + j).getChildByName("bg").getComponent(cc.Sprite);
        }
        this.headSp = [];
        for (var _i3 = 0; _i3 < gfConstant.maxPlayerNum; _i3++) this.headSp[_i3] = this.player[_i3].getChildByName("bg").getChildByName("head").getComponent(cc.Sprite);
        this.resultChipNumTxt = [];
        for (var _i4 = 0; _i4 < gfConstant.maxPlayerNum; _i4++) {
          this.resultChipNumTxt[_i4] = this.player[_i4].getChildByName("resultChipNumTxt").getComponent(cc.Label);
          this.resultChipNumTxt[_i4].node.opacity = 0;
        }
        this.chipNode = [];
        this.isGameOver = true;
        this.haveCardData = false;
        this.doneShowCardAmin = false;
        this.setCardTypeView(false);
        this.curPkLoseUIseatId = -1;
        this.isPlayShowCardAmin = false;
        if (dataLogic.needRecover) {
          this.doneGameRecover = false;
          this.seeCard.active = false;
          this.showAndUpdateSelfUI();
          this.setHandCardView(constant.SelfUISeatId, false);
          this.btMatching.node.active = false;
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        } else this.initMatchingView(false, false);
        var selRoomKey = dataLogic.curRoomKey;
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + selRoomKey);
        this.setAnteBgState();
        this.isSetLosePlayerUI = true;
        this.setAwardPot(0);
        var playerPos = [ {
          x: 255,
          y: -100
        }, {
          x: 190,
          y: 13
        }, {
          x: 27,
          y: 54
        }, {
          x: -27,
          y: 54
        }, {
          x: -190,
          y: 13
        } ];
        for (var _i5 = 0; _i5 < this.player.length; _i5++) {
          this.player[_i5].playerPos = playerPos[_i5];
          this.bindLongTouchEvent(this.player[_i5]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      start: function start() {
        var list = [ {
          path: "goldenFraud/effect/PK",
          resType: "dir"
        }, {
          path: "goldenFraud/effect/desperate",
          resType: "dir"
        }, {
          path: "goldenFraud/effect/juesheng",
          resType: "dir"
        } ];
        resMgr.loadRes(list);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        this.isSetLosePlayerUI = true;
        kf.killObj(this.recoverLoad);
        gfDataLogic.resetData();
        reqFold = false;
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
          this.setAnteBgState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          dataLogic.gameEnd();
          this.isGameOver = true;
          this.cleanView();
          dataLogic.isFriendRoom ? this.btReady.node.active = true : this.btMatching.node.active = true;
          _winnerUISeatId = -1;
          this.setFristFlag(-1);
          constant.HttpCode.GameOver == msg.Code && (dataLogic.isFriendRoom ? this.dissolutionRoom(msg.StrCode) : dataLogic.setReqRecoverState(false));
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        this.btMatching.node.active = false;
        gfDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        var roomKey = dataLogic.curRoomKey;
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setAnteBgState();
        if (0 == msg.state) {
          if (dataLogic.isFriendRoom) {
            this.hideOperationBtn();
            this.setAllPlayerInfo(msg.playerInfo);
            this.hideAllHandCard();
            this.hideAllBackCard();
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            this.initMatchingView(true, true);
            this.btMatching.node.active = false;
          }
          return;
        }
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        dataLogic.matching();
        this.setMatchingToastView(false);
        this.isGameOver = false;
        this.showAllPlayerState();
        this.killAllChip();
        this.chipNode = [];
        if (msg.cards && msg.cards.length > 0) {
          gfDataLogic.seeCard();
          this.seeCard.active = false;
          this.haveCardData = true;
          this.doneShowCardAmin = true;
          gfDataLogic.setHandCard(msg.cards);
          this.setHandCardView(constant.SelfUISeatId, true);
          this.setPlayerHandCard(constant.SelfUISeatId, msg.cards);
        } else {
          gfDataLogic.seeCardFail();
          this.seeCard.active = true;
          this.setHandCardView(constant.SelfUISeatId, false);
          var key = void 0, bg = void 0;
          for (var i = 0; i < 3; i++) {
            key = 3 * constant.SelfUISeatId + i;
            bg = this.backCard[key].getChildByName("bg");
            bg.getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
            bg.scaleX = 1;
            bg.skewY = 0;
            this.backCard[key].position = this.getHandCardPos(constant.SelfUISeatId, i);
            this.backCard[key].rotation = 0;
            this.backCard[key].opacity = 255;
            this.backCard[key].scale = 1.2;
          }
        }
        dataLogic.setRoomConfig("betConfig", msg.betConfig);
        var seed = msg.playId.substr(-4);
        dataLogic.setSeed(Number(seed));
        this.setAllPlayerInfo(msg.playerInfo);
        this.updateBetBtnConfig();
        this.updateTips();
        var state = gfDataLogic.playerState[constant.SelfUISeatId];
        cc.log("\u73a9\u5bb6\u51c6\u5907\u72b6\u6001", msg.playerInfo[dataLogic.selfSeatId].InvUserState, state);
        if (dataLogic.isOnlooker() && state != gfConstant.PlayerState.Fold && state != gfConstant.PlayerState.Failed) {
          this.setHandCardView(constant.SelfUISeatId, false);
          this.hideBackCard(constant.SelfUISeatId);
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(msg.nextSeatId);
        this.countDown(UISeatId, msg.endTime);
        this.setAwardPot(msg.awardPot);
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + msg.playId;
        this.setPlayIdBgState();
        gfDataLogic.setFollowChipNum(msg.baseChipNum);
        this.setRoundNum(msg.round);
        this.updateOperationBtn(UISeatId);
        var betList = [];
        for (var _i6 = 0; _i6 < msg.playerInfo.length; _i6++) msg.playerInfo[_i6].InvUserState == constant.FriendRoomPlayerState.Gaming && betList.push(msg.ante);
        for (var _i7 = 0; _i7 < msg.betList.length; _i7++) betList.push(msg.betList[_i7]);
        for (var _i8 = 0; _i8 < betList.length; _i8++) this.tableAddChip(betList[_i8]);
        UISeatId = dataLogic.getUISeatIdBySeatId(0);
        this.setFristFlag(UISeatId);
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId, isNewJoin) {
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        this.player[UISeatId].userId = info.userId;
        if (dataLogic.isFriendRoom) {
          cc.log("UISeatId", UISeatId, info.InvUserState);
          if (info.InvUserState == constant.FriendRoomPlayerState.Gaming) {
            gfDataLogic.setPlayerState(UISeatId, info.state);
            info.state != gfConstant.PlayerState.Fold && info.state != gfConstant.PlayerState.Failed || dataLogic.setFriendRoomPlayerState(seatId, constant.FriendRoomPlayerState.Unready);
          } else {
            info.state = gfConstant.PlayerState.Wait;
            gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.Wait);
            this.setHandCardView(UISeatId, false);
          }
        } else gfDataLogic.setPlayerState(UISeatId, info.state);
        this.player[UISeatId].active || (this.player[UISeatId].active = true);
        if (isNewJoin) {
          this.resultChipNumTxt[UISeatId].node.opacity = 0;
          this.setHandCardView(UISeatId, false);
        }
        this.setPlayerUIInfo(UISeatId, info);
      },
      setAllPlayerInfo: function setAllPlayerInfo(playerInfo) {
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (null == playerInfo[i].headUrl) {
            this.player[UISeatId].active && (this.player[UISeatId].active = false);
            continue;
          }
          this.setPlayerInfo(playerInfo[i], UISeatId);
        }
        for (var _i9 = playerInfo.length; _i9 < this.player.length; _i9++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i9);
          this.player[UISeatId].active && (this.player[UISeatId].active = false);
        }
        this.initAllPlayerReadyStateUI();
        this.updatePlayerUI();
      },
      playerLeave: function playerLeave(seatId) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        _firstUIseatId == UISeatId && this.setFristFlag(-1);
        if (_winnerUISeatId == UISeatId) {
          this.visitingEf[0].getComponent(cc.Animation).stop();
          this.visitingEf[1].getComponent(cc.Animation).stop();
          this.visitingEf[0].x = 1e3;
          this.visitingEf[1].x = 1e3;
          this.winnerCardTypeTxt.node.parent.x = 1e3;
        }
      },
      playerJoin: function playerJoin(info, seatId) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        gfDataLogic.setPlayerState(UISeatId, gfConstant.PlayerState.Wait);
      },
      hideAllPlayer: function hideAllPlayer() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) {
          this.setHandCardView(i, false);
          this.player[i].active = false;
        }
      },
      hideAllBackCard: function hideAllBackCard() {
        for (var i = 0; i < this.backCard.length; i++) this.backCard[i].opacity = 0;
      },
      hideBackCard: function hideBackCard(UISeatId) {
        for (var i = 0; i < 3; i++) this.backCard[3 * UISeatId + i].opacity = 0;
      },
      showAndUpdateSelfUI: function showAndUpdateSelfUI() {
        this.player[constant.SelfUISeatId].active || (this.player[constant.SelfUISeatId].active = true);
        this.setPlayerHead(constant.SelfUISeatId, dataLogic.userHeadUrl);
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        this.setPlayerState(constant.SelfUISeatId, gfDataLogic.playerState[constant.SelfUISeatId]);
        var nicknameNode = this.player[constant.SelfUISeatId].getChildByName("bg").getChildByName("nickname");
        nicknameNode.getComponent(cc.Label).string = dataLogic.userName;
      },
      stopAllActions: function stopAllActions() {
        this.node.stopAllActions();
        this.compareLayerTop.stopAllActions();
        this.compareLayerBottom.stopAllActions();
      },
      cleanView: function cleanView() {
        this.efDesperate.stop();
        this.efDesperate.node.active = false;
        this.efDetermineWin.node.y = 1e3;
        this.removePkUI();
        this.hideAllPlayer();
        this.setHandCardView(constant.SelfUISeatId, false);
        this.hideAllPlayerState();
        this.showAndUpdateSelfUI();
        this.hideOperationBtn();
        this.resultChipNumTxt[constant.SelfUISeatId].node.opacity = 0;
        this.recoverPlayerColor(constant.SelfUISeatId);
        this.hideAllBackCard();
        this.setRoundNum(1);
        this.setFristFlag(-1);
        this.selfWinEf.x = 1e3;
        this.visitingEf[0].getComponent(cc.Animation).stop();
        this.visitingEf[1].getComponent(cc.Animation).stop();
        this.visitingEf[0].x = 1e3;
        this.visitingEf[1].x = 1e3;
        this.winnerCardTypeTxt.node.parent.x = 1e3;
        this.seeCard.active = false;
        this.cardTypeTxt.node.parent.active = false;
        this.removeTimer();
        this.killAllChip();
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a";
        this.setPlayIdBgState();
        this.setAwardPot(0);
        this.setPlayerState(constant.SelfUISeatId, gfConstant.PlayerState.Wait);
        this.setMatchingToastView(false);
        this.roundBg.active = false;
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        this.setVisitingCardOpacity(constant.SelfUISeatId, 255);
        this.cleanView();
        if (isWaitMatching) {
          _matching = true;
          this.setMatchingToastView(true, canCancel);
          this.btMatching.node.active = false;
        } else {
          _matching = false;
          this.btMatching.node.active = true;
        }
      },
      onGameStart: function onGameStart(data) {
        var _this = this;
        _matching = false;
        reqFold = false;
        dataLogic.matching();
        dataLogic.setPlayerInfo(data.playerInfo);
        if (dataLogic.isFriendRoom) {
          _winnerUISeatId = -1;
          this.updateTips();
          this.gameStartCommonHandle();
          this.cleanView();
        }
        this.setMatchingToastView(false);
        this.showAllPlayerState();
        this.isPlayShowCardAmin = false;
        this.curPkLoseUIseatId = -1;
        this.isGameOver = false;
        this.setAutoFollow(false);
        this.killAllChip();
        this.chipNode = [];
        this.haveCardData = false;
        this.doneShowCardAmin = false;
        this.setCardTypeView(false);
        this.roundBg.active = true;
        var seed = data.playId.substr(-4);
        dataLogic.setSeed(Number(seed));
        dataLogic.setRoomConfig("betConfig", data.betConfig);
        this.updateBetBtnConfig();
        var playerInfo = dataLogic.playerInfo, UISeatId = void 0;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          this.setPlayerUIInfo(UISeatId, playerInfo[i]);
          this.recoverPlayerColor(UISeatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[i].userId;
          this.player[UISeatId]._playerInfo = playerInfo[i];
          this.resultChipNumTxt[UISeatId].node.opacity = 0;
          this.tableAddChip(data.ante);
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
        this.countDown(UISeatId, data.endTime);
        this.setFristFlag(UISeatId);
        this.setAwardPot(data.awardPot);
        gfDataLogic.setFollowChipNum(data.ante);
        this.updateOperationBtn(UISeatId);
        this.setRoundNum(1);
        this.playIdTxt.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + data.playId;
        this.setPlayIdBgState();
        dataLogic.isHide ? this.seeCard.active = true : this.scheduleOnce(function() {
          _this.seeCard.active = true;
        }, .2);
        this.dispenseCardAction();
      },
      setAnteBgState: function setAnteBgState() {
        this.anteBg.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.anteBg.width = this.anteBg.getChildByName("txt").width + 40;
        this.playIdBg.x = this.anteBg.x + this.anteBg.width + 20;
      },
      setPlayIdBgState: function setPlayIdBgState() {
        this.playIdBg.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.playIdBg.width = this.playIdBg.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.playIdBg.x + this.playIdBg.width + 20);
      },
      gameEnd: function gameEnd(data, atOnceRun) {
        var _this2 = this;
        cc.log("\u6e38\u620f\u7ed3\u675f");
        dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
        gfDataLogic.setCurOpeartionUIseatId(-1);
        this.seeCard.active = false;
        this.isGameOver = true;
        this.removeTimer();
        this.seeCard.active && (this.seeCard.active = false);
        this.addChipBg.active && (this.addChipBg.active = false);
        this.playOption.active = false;
        var winUISeatId = dataLogic.getUISeatIdBySeatId(data.winner);
        var delayTime = 0, UISeatId = void 0;
        if (atOnceRun) {
          gfDataLogic.setGameEndData(null);
          this.efDetermineWin.node.y = 1e3;
          this.efDetermineWin.stop();
        } else {
          gfDataLogic.setGameEndData(data);
          switch (data.eventName) {
           case "onCompareCard":
            delayTime = PKTime;
            UISeatId = dataLogic.getUISeatIdBySeatId(data.launchSeatId);
            cc.log("data.desperate ", data.desperate, UISeatId);
            1 == data.desperate && UISeatId != constant.SelfUISeatId && (delayTime += desperateTime);
          }
          if (1 == data.isFinal) {
            this.scheduleOnce(function() {
              _this2.efDetermineWin.node.y = 340;
              _this2.efDetermineWin.play();
              audioMgr.playEffect(_this2.determineWinAudio);
            }, delayTime);
            delayTime += 1.2;
          }
        }
        var func1 = cc.callFunc(function() {
          _this2.setAwardPot(-1);
          var move = void 0, seq = void 0, endPos = _this2.player[winUISeatId].position;
          endPos.y -= 70;
          var _loop = function _loop(i) {
            move = cc.moveTo(.5, endPos);
            seq = cc.sequence(move, cc.callFunc(function() {
              kf.killObj(_this2.chipNode[i]);
            }));
            _this2.chipNode[i].stopAllActions();
            _this2.chipNode[i].runAction(seq);
          };
          for (var i = 0; i < _this2.chipNode.length; i++) _loop(i);
          audioMgr.playEffect(_this2.chipsAudio);
          var seatId = 0, state = void 0;
          for (var i = 0; i < gfConstant.maxPlayerNum; i++) {
            state = gfDataLogic.playerState[i];
            state != gfConstant.PlayerState.Wait && winUISeatId != i && _this2.setAshPlayer(i);
          }
          var needShowCardUISeatIds = gfDataLogic.getNeedShowCardUISeatIds();
          for (var _i10 = 0; _i10 < needShowCardUISeatIds.length; _i10++) {
            UISeatId = needShowCardUISeatIds[_i10];
            seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
            _this2.setPlayerHandCard(UISeatId, data.cards[seatId]);
            _this2.showCardAnim(UISeatId);
          }
          if (data.cards[dataLogic.selfSeatId]) {
            gfDataLogic.haveSeen || _this2.showCardAnim(constant.SelfUISeatId);
            gfDataLogic.setHandCard(data.cards[dataLogic.selfSeatId]);
            _this2.setPlayerHandCard(constant.SelfUISeatId, data.cards[dataLogic.selfSeatId]);
            _this2.haveCardData = true;
            _this2.setHandCardView(constant.SelfUISeatId, true);
          }
          _this2.setWinnerCardType(winUISeatId, data.cards[data.winner]);
        }, this);
        var func2 = cc.callFunc(function() {
          var balance = void 0;
          if (data.desperate > 0) for (var i = 0; i < data.repay.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            balance = _this2.getPlayerBalance(UISeatId);
            _this2.setPlayerBalance(UISeatId, balance.add(data.repay[i]));
          }
          UISeatId = dataLogic.getUISeatIdBySeatId(data.winner);
          _winnerUISeatId = UISeatId;
          _this2.setPlayerBalance(UISeatId, data.winnerBalance);
          _this2.settlementChipNumAction(data.endData);
          _this2.visitingWinAnim(UISeatId);
          _this2.updateOperationBtn();
          _this2.gamingPlayerToUnready();
          _this2.updateTips();
          _this2.hideAllPlayerState();
        }, this);
        var func3 = cc.callFunc(function() {
          gfDataLogic.setGameEndData(null);
          if (constant.SelfUISeatId == UISeatId) {
            audioMgr.playEffect(_this2.winAudio);
            _this2.selfWinAnim();
          }
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(delayTime + .5), func1, cc.delayTime(.1), func2, cc.delayTime(.1), func3));
      },
      setRoundNum: function setRoundNum(n) {
        if (null != n) {
          gfDataLogic.setChipRoundNum(n);
          this.chipRoundTxt.string = "\u7b2c" + n + "/10\u8f6e";
        }
      },
      onSeeCard: function onSeeCard(data) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        if (!this.player[UISeatId].active) {
          cc.log("\u6ca1\u6709\u8fd9\u4e2a\u73a9\u5bb6", data);
          return;
        }
        this.setPlayerState(UISeatId, gfConstant.PlayerState.HaveSeen);
        if (UISeatId == constant.SelfUISeatId) {
          this.haveCardData = true;
          gfDataLogic.setHandCard(data.cards);
          this.setHandCardView(UISeatId, true);
          this.setPlayerHandCard(UISeatId, data.cards);
        } else {
          var audioKey = this.randomAudioKey(UISeatId);
          audioMgr.playEffect(this.watchCardAudio[audioKey]);
        }
      },
      seeCardCb: function seeCardCb(data, reqFontState) {
        if (data.Code == constant.HttpCode.GameOver) {
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
      },
      foldCb: function foldCb(data, reqFontState) {
        if (data.Code == constant.HttpCode.GameOver) {
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
        if (data.Code == constant.HttpCode.Succeed) ; else if (data.Code == constant.HttpCode.error) {
          reqFold = false;
          var state = dataLogic.playerState[constant.SelfUISeatId];
          reqFontState == state && this.setPlayerUIState(constant.SelfUISeatId, state);
        }
      },
      betCb: function betCb(data, chipNum) {
        if (data.Code == constant.HttpCode.GameOver) {
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
        if (constant.HttpCode.Succeed != data.Code) {
          var balance = this.getPlayerBalance(constant.SelfUISeatId);
          this.setPlayerBalance(constant.SelfUISeatId, balance.add(chipNum));
          var chip = this.chipNode.pop();
          kf.killObj(chip);
          return;
        }
      },
      compareCardCb: function compareCardCb(data, localCbArg) {
        if (data.Code == constant.HttpCode.GameOver) {
          this.efDesperate.stop();
          this.efDesperate.node.active = false;
          this.stopAllActions();
          this.initMatchingView();
          return;
        }
        switch (data.Code) {
         case -1:
          var balance = this.getPlayerBalance(constant.SelfUISeatId);
          this.setPlayerBalance(constant.SelfUISeatId, balance.add(localCbArg.chipNum));
          var chip = this.chipNode.pop();
          kf.killObj(chip);
          this.compareLayerTop.stopAllActions();
          this.compareLayerBottom.stopAllActions();
          this.removePkUI();
          this.setVisitingCardOpacity(constant.SelfUISeatId, 255);
          if (!localCbArg.isDesperate) {
            this.efDesperate.stop();
            this.efDesperate.node.active = false;
            this.setVisitingCardOpacity(localCbArg.rivalUISeatId, 255);
          }
          if (this.isGameOver) return;
          this.updateOperationBtn(constant.SelfUISeatId);
          this.alterCountDown();
        }
      },
      updateBetBtnConfig: function updateBetBtnConfig() {
        var multi = 1;
        gfDataLogic.haveSeen && (multi = 2);
        for (var i = 0; i < 6; i++) this.addChipBtnTxt[i].string = dataLogic.roomConfig.betConfig[i] * multi;
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.btMatching.node.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.isGameOver = true;
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        dataLogic.setDeskId(data.Data.deskId);
        this.setMatchingToastUI(true);
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.GameOver) {
          _matching = false;
          this.isGameOver = true;
          this.btMatching.node.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      socketJoinMsg: function socketJoinMsg() {
        this.btCancelMatching.node.active = true;
        this.matchingToastLayer.stopAllActions();
      },
      onFold: function onFold(data) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        if (!this.player[UISeatId].active) {
          cc.log("\u6ca1\u6709\u8fd9\u4e2a\u73a9\u5bb6", data);
          return;
        }
        if ((isDesperatePlaying || gfDataLogic.isPking) && !dataLogic.isHide) {
          gfDataLogic.pushMsgList(data);
          cc.log("\u6b63\u5728PK\u5ef6\u8fdf\u5904\u7406", data.eventName);
          return;
        }
        var nextUISeatId = void 0;
        if (null != data.nextSeatId) {
          nextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
          gfDataLogic.setCurOpeartionUIseatId(nextUISeatId);
        } else gfDataLogic.setCurOpeartionUIseatId(-1);
        this.setChoiceCompareFrameView(false, UISeatId);
        this.fold(UISeatId);
        this.setFriendRoomPlayerState(data.seatId, constant.FriendRoomPlayerState.Unready);
        if (constant.SelfUISeatId == UISeatId) {
          dataLogic.isFriendRoom || (this.btMatching.node.active = true);
          gfDataLogic.fold();
          var selfCards = [];
          if (constant.IsEnd == data.isEnd) {
            this.removeTimer();
            selfCards = kf.clone(data.cards[dataLogic.selfSeatId]);
          } else {
            this.updateTips();
            selfCards = data.cards;
          }
          this.setChoiceCompareFrameView(false);
          gfDataLogic.setHandCard(selfCards);
          this.haveCardData = true;
          this.setPlayerHandCard(UISeatId, selfCards);
          this.setHandCardView(UISeatId, true);
        }
        if (constant.IsEnd == data.isEnd) this.gameEnd(data); else {
          this.setRoundNum(data.round);
          if (nextUISeatId == constant.SelfUISeatId && this.performAutoFollow()) gfDataLogic.setCurOpeartionUIseatId(-1); else if (null != data.nextSeatId) {
            UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
            this.countDown(UISeatId, data.endTime);
            this.updateOperationBtn(UISeatId);
          }
          gfDataLogic.runNextMsg();
        }
      },
      onBet: function onBet(data) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        if (!this.player[UISeatId].active) {
          cc.log("\u6ca1\u6709\u8fd9\u4e2a\u73a9\u5bb6", data);
          return;
        }
        if ((isDesperatePlaying || gfDataLogic.isPking) && !dataLogic.isHide) {
          gfDataLogic.pushMsgList(data);
          cc.log("\u6b63\u5728PK\u5ef6\u8fdf\u5904\u7406", data.eventName);
          return;
        }
        this.setAwardPot(data.awardPot);
        var nextUISeatId = null;
        if (null != data.nextSeatId) {
          var _nextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
          gfDataLogic.setCurOpeartionUIseatId(_nextUISeatId);
        } else gfDataLogic.setCurOpeartionUIseatId(-1);
        if (constant.SelfUISeatId != UISeatId) {
          this.bet(UISeatId, data.chipNum);
          var sex = dataLogic.getSex(UISeatId);
          1 == data.isFollow ? audioMgr.playEffect(this.followAudio[sex]) : audioMgr.playEffect(this.addChipAudio[sex]);
        }
        if (constant.IsEnd == data.isEnd) gfDataLogic.isPking ? gfDataLogic.pushMsgList(data) : this.gameEnd(data); else {
          this.setRoundNum(data.round);
          gfDataLogic.setFollowChipNum(data.baseChipNum);
          UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
          if (UISeatId == constant.SelfUISeatId && this.performAutoFollow()) gfDataLogic.setCurOpeartionUIseatId(-1); else {
            this.countDown(UISeatId, data.endTime);
            this.updateOperationBtn(UISeatId);
          }
          gfDataLogic.runNextMsg();
        }
      },
      onCompareCard: function onCompareCard(data) {
        var _this3 = this;
        var UISeatId = dataLogic.getUISeatIdBySeatId(data.launchSeatId);
        if (!this.player[UISeatId].active) {
          cc.log("\u6ca1\u6709\u8fd9\u4e2a\u73a9\u5bb6", data);
          return;
        }
        if ((isDesperatePlaying || gfDataLogic.isPking) && !dataLogic.isHide) {
          gfDataLogic.pushMsgList(data);
          cc.log("\u6b63\u5728\u64ad\u653e\u5b64\u6ce8\u4e00\u63b7", isDesperatePlaying, "\u6b63\u5728\u64ad\u653epk\u52a8\u753b", gfDataLogic.isPking, "\u5ef6\u8fdfpk\u52a8\u753b");
          return;
        }
        gfDataLogic.setPKState(true);
        this.removeTimer();
        this.setAwardPot(data.awardPot);
        var UISeatId1 = dataLogic.getUISeatIdBySeatId(data.launchSeatId);
        var UISeatId2 = dataLogic.getUISeatIdBySeatId(data.rivalSeatId);
        var winSeatId = dataLogic.getUISeatIdBySeatId(data.winSeatId);
        var loseUISeatId = UISeatId1 == winSeatId ? UISeatId2 : UISeatId1;
        gfDataLogic.setPlayerState(loseUISeatId, gfConstant.PlayerState.Failed);
        var nextUISeatId = null;
        if (null != data.nextSeatId) {
          nextUISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
          gfDataLogic.setCurOpeartionUIseatId(nextUISeatId);
        } else gfDataLogic.setCurOpeartionUIseatId(-1);
        if (!gfDataLogic.haveSeen && this.isPlayShowCardAmin) {
          this.isPlayShowCardAmin = false;
          this.seeCard.active = true;
          var key = void 0;
          for (var i = 0; i < 3; i++) {
            key = 3 * constant.SelfUISeatId + i;
            this.backCard[key].stopAllActions();
            this.backCard[key].getComponent(cc.Animation).stop();
            this.backCard[key].getChildByName("bg").scaleX = 1;
            this.backCard[key].getChildByName("bg").skewY = 0;
            this.backCard[key].position = this.getHandCardPos(constant.SelfUISeatId, i);
            this.backCard[key].rotation = 0;
            this.backCard[key].opacity = 255;
          }
          if (null == data.nextSeatId) {
            var _UISeatId = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
            this.updateOperationBtn(_UISeatId);
          }
        }
        this.bomb.x = loseUISeatId == UISeatId1 ? -280 : 280;
        this.curPkLoseUIseatId = loseUISeatId;
        if (constant.SelfUISeatId == loseUISeatId) {
          var cards = void 0;
          cards = constant.IsEnd == data.isEnd ? data.cards[dataLogic.selfSeatId] : data.cards;
          this.haveCardData = true;
          gfDataLogic.setHandCard(cards);
          this.setPlayerHandCard(constant.SelfUISeatId, cards);
        }
        if (constant.SelfUISeatId == UISeatId1) if (!this.isSetLosePlayerUI || dataLogic.isHide) {
          this.PKLosePlayerUI();
          this.updateTips();
        } else data.desperate > 0 && this.performCompareAction(UISeatId1, UISeatId2); else {
          0 == data.desperate ? this.bet(UISeatId1, data.chipNum) : 1 == data.desperate && this.bet(UISeatId1, data.chipNum, true);
          if (1 == data.desperate) {
            cc.log("\u64ad\u653e\u5b64\u6ce8\u4e00\u63b7");
            audioMgr.playEffect(this.audioDesperate);
            this.efDesperate.node.active = true;
            this.efDesperate.play();
            this.scheduleOnce(function() {
              _this3.efDesperate.stop();
              _this3.efDesperate.node.active = false;
              _this3.performCompareAction(UISeatId1, UISeatId2);
            }, desperateTime);
          } else this.performCompareAction(UISeatId1, UISeatId2);
        }
        if (constant.IsEnd == data.isEnd) this.gameEnd(data); else {
          var _UISeatId2 = dataLogic.getUISeatIdBySeatId(data.nextSeatId);
          gfDataLogic.setFollowChipNum(data.baseChipNum);
          var delayTime = PKTime + .5;
          1 == data.desperate && UISeatId1 != constant.SelfUISeatId && (delayTime += desperateTime);
          if (_UISeatId2 == constant.SelfUISeatId && this.performAutoFollow(delayTime)) gfDataLogic.setCurOpeartionUIseatId(-1); else if (dataLogic.isHide) {
            this.countDown(_UISeatId2, data.endTime);
            this.updateOperationBtn(_UISeatId2);
          } else this.scheduleOnce(function() {
            _this3.countDown(_UISeatId2, data.endTime);
            _this3.updateOperationBtn(_UISeatId2);
          }, delayTime);
          this.setRoundNum(data.round);
          if (dataLogic.isHide) {
            gfDataLogic.setPKState(false);
            gfDataLogic.runNextMsg();
          } else this.scheduleOnce(function() {
            gfDataLogic.setPKState(false);
            gfDataLogic.runNextMsg();
          }, PKTime + .51);
        }
      },
      countDown: function countDown(UISeatId, endTime) {
        if (null == UISeatId) return;
        dataLogic.setTimerData(endTime);
        gfDataLogic.setCurOpeartionUIseatId(UISeatId);
        this.timer.position = this.player[UISeatId].position;
        var animState = this.timer.getComponent(cc.Animation).play();
        var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
        cc.log("remainingTime", remainingTime);
        if (remainingTime >= 15) animState.speed = 10 / dataLogic.timerTotalTime; else {
          animState.speed = 2 / 3;
          var curTime = 10 * (1 - remainingTime / 15);
          this.timer.getComponent(cc.Animation).setCurrentTime(curTime);
        }
        if (constant.SelfUISeatId == UISeatId) {
          audioMgr.playEffect(this.myturnAudio);
          this.scheduleOnce(this.timeOutFold, dataLogic.timerTotalTime);
        }
      },
      alterCountDown: function alterCountDown() {
        this.unschedule(this.timeOutFold);
        var remainingTime = (dataLogic.timerEndTimestamp - new Date().getTime()) / 1e3;
        if (remainingTime <= 0) gfDataLogic.curOperationUISeatId != constant.SelfUISeatId || gfDataLogic.isFold || this.timeOutFold(); else {
          this.timer.position = this.player[gfDataLogic.curOperationUISeatId].position;
          gfDataLogic.curOperationUISeatId == constant.SelfUISeatId && this.scheduleOnce(this.timeOutFold, remainingTime);
          var curTime = 10 * (1 - remainingTime / 15);
          var animState = this.timer.getComponent(cc.Animation).play();
          animState.speed = 10 / dataLogic.timerTotalTime;
          this.timer.getComponent(cc.Animation).setCurrentTime(curTime);
        }
      },
      timeOutFold: function timeOutFold() {
        cc.log("\u8d85\u65f6\u5f03\u724c");
        this.btnEvent("", "fold");
      },
      removeTimer: function removeTimer() {
        this.unschedule(this.timeOutFold);
        this.timer.x = 1e3;
      },
      choiceComparePlayer: function choiceComparePlayer(UISeatId) {
        this.removeTimer();
        this.bet(constant.SelfUISeatId, gfDataLogic.followChipNum);
        this.setChoiceCompareFrameView(false);
        this.bomb.x = 1e4;
        this.performCompareAction(constant.SelfUISeatId, UISeatId);
        var seatId = dataLogic.getSeatIdByUISeatId(UISeatId);
        gfConstant.PostCompare.rivalSeatId = seatId;
        var localCbArg = {
          chipNum: gfDataLogic.followChipNum,
          rivalUISeatId: seatId
        };
        http.post(gfConstant.PostCompare, "compareCardCb", localCbArg);
      },
      gamble: function gamble(balence) {
        audioMgr.playEffect(this.audioDesperate);
        this.removeTimer();
        this.bet(constant.SelfUISeatId, balence, true);
        if (!dataLogic.isHide) {
          this.efDesperate.node.active = true;
          this.efDesperate.play();
          this.efDesperate.on("finished", this.despearteAnimFinished.bind(this));
          isDesperatePlaying = true;
        }
        gfConstant.PostCompare.rivalSeatId = null;
        var localCbArg = {
          chipNum: balence,
          isDesperate: true
        };
        http.post(gfConstant.PostCompare, "compareCardCb", localCbArg);
      },
      despearteAnimFinished: function despearteAnimFinished() {
        cc.log("\u5b64\u6ce8\u4e00\u63b7\u52a8\u753b\u64ad\u653e\u5b8c\u6210");
        this.efDesperate.node.active = false;
        this.efDesperate.stop();
        isDesperatePlaying = false;
        gfDataLogic.runNextMsg();
      },
      setChoiceCompareFrameView: function setChoiceCompareFrameView(isShow, UISeatIds) {
        if (isShow) {
          var key = 0;
          for (var i = 0; i < UISeatIds.length; i++) {
            key = UISeatIds[i];
            this.player[key].getChildByName("choiceCompareFrame").getChildByName("arrow").y = 127;
            this.player[key].getChildByName("choiceCompareFrame").getChildByName("arrow").stopAllActions();
            this.player[key].getChildByName("choiceCompareFrame").active = true;
            this.player[key].getChildByName("choiceCompareFrame").getChildByName("arrow").runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3, 0, -8), cc.moveBy(.3, 0, 8))));
          }
        } else if (null == UISeatIds) for (var _i11 = 0; _i11 < gfConstant.maxPlayerNum; _i11++) {
          if (_i11 == constant.SelfUISeatId) continue;
          this.player[_i11].getChildByName("choiceCompareFrame").active = false;
        } else UISeatIds != constant.SelfUISeatId && (this.player[UISeatIds].getChildByName("choiceCompareFrame").active = false);
      },
      btnEvent: function btnEvent(eventTouch, eventName) {
        cc.log("===btnEvent", eventName);
        "" != eventTouch && audioMgr.playEffect(this.btnAudio);
        "showAddChip" != eventName && this.addChipBg.active && (this.addChipBg.active = false);
        var state = void 0;
        switch (eventName) {
         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf);
          break;

         case "exitRoom":
          this.tryExitRoom();
          break;

         case "help":
          var help = kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          record.getComponent("record").recordMainShow(constant.GameId.GoldenFraud);
          break;

         case "fold":
          reqFold = true;
          this.setPlayerUIState(constant.SelfUISeatId, gfConstant.PlayerState.Fold);
          gfDataLogic.curOperationUISeatId == constant.SelfUISeatId && this.removeTimer();
          this.updateOperationBtn(-1);
          this.setChoiceCompareFrameView(false);
          this.unschedule(this.timeOutFold);
          var auidoKey = this.randomAudioKey(constant.SelfUISeatId);
          audioMgr.playEffect(this.giveUpAudio[auidoKey]);
          this.seeCard.active && (this.seeCard.active = false);
          this.addChipBg.active && (this.addChipBg.active = false);
          this.playOption.active = false;
          state = gfDataLogic.playerState[constant.SelfUISeatId];
          http.post(gfConstant.PostFold, "foldCb", state);
          break;

         case "matching":
          this.matching();
          break;

         case "showAddChip":
          this.setChoiceCompareFrameView(false);
          this.addChipBg.active ? this.addChipBg.active = false : this.showAddChipView();
          break;

         case "compare":
          this.updateOperationBtn(-1);
          var balence = this.getPlayerBalance(constant.SelfUISeatId);
          if (balence < gfDataLogic.followChipNum) {
            this.gamble(balence);
            break;
          }
          this.setChoiceCompareFrameView(false);
          var UISeatIds = gfDataLogic.getRivalUISeatIds();
          UISeatIds.length > 1 ? this.setChoiceCompareFrameView(true, UISeatIds) : this.choiceComparePlayer(UISeatIds[0]);
          break;

         case "autoFollow":
          var bool = !gfDataLogic.autoFollow;
          this.setAutoFollow(bool);
          break;

         case "seeCard":
          this.setChoiceCompareFrameView(false);
          this.setPlayerUIState(constant.SelfUISeatId, gfConstant.PlayerState.HaveSeen);
          gfDataLogic.seeCard();
          var followChipNum = 2 * gfDataLogic.followChipNum;
          gfDataLogic.setFollowChipNum(gfDataLogic.followChipNum);
          this.showCardAnim(constant.SelfUISeatId);
          this.seeCard.active = false;
          state = gfDataLogic.playerState[constant.SelfUISeatId];
          http.post(gfConstant.PostSeeCard, "seeCardCb", state);
          this.updateBetBtnConfig();
          if (constant.SelfUISeatId == gfDataLogic.curOperationUISeatId) this.updateOperationBtn(gfDataLogic.curOperationUISeatId); else {
            this.compareBtnTxt.string = followChipNum + "\u6bd4\u724c";
            this.followBtnTxt.string = followChipNum + "\u8ddf\u6ce8";
          }
          var audioKey = this.randomAudioKey(constant.SelfUISeatId);
          audioMgr.playEffect(this.watchCardAudio[audioKey]);
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         default:
          cc.warn("\u672a\u77e5\u7684\u4e8b\u4ef6\u540d", eventName);
        }
      },
      btnIntoRoomEvent: function btnIntoRoomEvent(eventTouch, roomId) {
        audioMgr.playEffect(this.btnAudio);
        gfDataLogic.setRoomId(roomId);
        dataLogic.setRoomConfig("roomId", roomId);
        this.matching();
      },
      intoRoom: function intoRoom(bet, roomId) {
        cc.log("bet", bet, "roomid", roomId);
        bet <= dataLogic.userBalance ? this.intoGameRoom(roomId) : this.showRechargeToast(bet);
      },
      intoGameRoom: function intoGameRoom(roomId) {
        gfDataLogic.setRoomId(constant.GameId.GoldenFraud + roomId);
        dataLogic.setRoomConfig("roomId", constant.GameId.GoldenFraud + roomId);
        this.matching();
      },
      killAllChip: function killAllChip() {
        for (var i = 0; i < this.chipNode.length; i++) if (this.chipNode[i].parent) {
          this.chipNode[i].stopAllActions();
          kf.killObj(this.chipNode[i]);
        }
      },
      ready: function ready() {
        gfDataLogic.resetData();
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.leaveTable();
        dataLogic.setNeedRecover(true);
        this.killAllChip();
        gfDataLogic.setGameEndData(null);
        this.compareLayerBottom.stopAllActions();
        this.compareLayerTop.stopAllActions();
        this.removePkUI();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        var roomKey = dataLogic.curRoomKey;
        this.anteTxt.string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setAnteBgState();
        this.initMatchingView(true, false);
        this.btMatching.node.active = false;
        gfConstant.PostMatching.roomId = constant.GameId.GoldenFraud + roomKey;
        gfConstant.PostMatching.new = 1;
        http.post(gfConstant.PostMatching, "matchingCb");
        gfDataLogic.resetData();
      },
      btnBetEvent: function btnBetEvent(eventTouch, key) {
        this.updateOperationBtn(-1);
        this.setChoiceCompareFrameView(false);
        audioMgr.playEffect(this.btnAudio);
        this.unschedule(this.timeOutFold);
        this.removeTimer();
        this.addChipBg.active && (this.addChipBg.active = false);
        key = Number(key);
        var multi = 1;
        gfDataLogic.haveSeen && (multi = 2);
        var chipNum = void 0, sex = dataLogic.getSex(constant.SelfUISeatId);
        if (key > -1) {
          audioMgr.playEffect(this.addChipAudio[sex]);
          gfConstant.PostBet.index = dataLogic.roomConfig.betConfig[key];
          chipNum = dataLogic.roomConfig.betConfig[key] * multi;
        } else {
          audioMgr.playEffect(this.followAudio[sex]);
          chipNum = gfDataLogic.followChipNum;
          gfConstant.PostBet.index = -1;
        }
        this.bet(constant.SelfUISeatId, chipNum);
        http.post(gfConstant.PostBet, "betCb", chipNum);
      },
      showPlayerBackCard: function showPlayerBackCard(UISeatId) {
        var key = void 0, bg = void 0;
        for (var j = 0; j < 3; j++) {
          key = 3 * UISeatId + j;
          this.backCard[key].stopAllActions();
          bg = this.backCard[key].getChildByName("bg");
          bg.getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          bg.scaleX = 1;
          bg.skewY = 0;
          this.backCard[key].position = this.getHandCardPos(UISeatId, j);
          this.backCard[key].rotation = 0;
          this.backCard[key].opacity = 255;
          UISeatId === constant.SelfUISeatId ? this.backCard[key].scale = 1.2 : this.backCard[key].scale = .878;
        }
      },
      dispenseCardAction: function dispenseCardAction() {
        this.recoverHandCardPos();
        var bg = void 0;
        if (dataLogic.isHide) {
          for (var i = 0; i < gfConstant.maxPlayerNum; i++) {
            if (!this.player[i].active) continue;
            this.showPlayerBackCard(i);
          }
          return;
        }
        var startPos = cc.v2(0, 360), endPos = cc.v2(0, 100), actionTime = .2, spawn = void 0, key = void 0, move = void 0, rotation = void 0, scale = void 0;
        for (var _i12 = 0; _i12 < gfConstant.maxPlayerNum; _i12++) {
          if (!this.player[_i12].active) continue;
          for (var j = 0; j < 3; j++) {
            key = 3 * _i12 + j;
            bg = this.backCard[key].getChildByName("bg");
            bg.scaleX = 1;
            bg.skewY = 0;
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .3;
            this.backCard[key].rotation = 0;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(_i12, j);
            move = cc.moveTo(actionTime, endPos);
            rotation = cc.rotateTo(actionTime, 720);
            scale = _i12 === constant.SelfUISeatId ? cc.scaleTo(actionTime, 1.2) : cc.scaleTo(actionTime, .878);
            var fpCallFun = cc.callFunc(function() {
              audioMgr.playEffect(this.sendCard);
            }, this);
            spawn = cc.spawn(move, rotation, scale, fpCallFun);
            this.backCard[key].stopAllActions();
            this.backCard[key].runAction(spawn);
          }
        }
      },
      hideAllHandCard: function hideAllHandCard() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.setHandCardView(i, false);
      },
      setHandCardView: function setHandCardView(UISeatId, isShow) {
        if (!isShow) {
          for (var i = 0; i < 3; i++) this.handCardSp[UISeatId][i].node.opacity = 0;
          return;
        }
        if (constant.SelfUISeatId != UISeatId) {
          this.hideBackCard(UISeatId);
          for (var _i13 = 0; _i13 < 3; _i13++) this.handCardSp[UISeatId][_i13].node.opacity = 255;
          return;
        }
        if (this.haveCardData && this.doneShowCardAmin) {
          this.hideBackCard(UISeatId);
          for (var _i14 = 0; _i14 < 3; _i14++) this.handCardSp[UISeatId][_i14].node.opacity = 255;
          var cardType = gfDataLogic.getOptimalCardType(gfDataLogic.handCard);
          this.setCardTypeView(true, cardType);
        }
      },
      fold: function fold(UISeatId) {
        this.setPlayerState(UISeatId, gfConstant.PlayerState.Fold);
        this.setAshPlayer(UISeatId);
        if (constant.SelfUISeatId != UISeatId) {
          this.foldAction(UISeatId);
          this.setHandCardView(UISeatId, false);
          var auidoKey = this.randomAudioKey(UISeatId);
          audioMgr.playEffect(this.giveUpAudio[auidoKey]);
        } else if (!gfDataLogic.haveSeen) {
          gfDataLogic.seeCard();
          this.showCardAnim(constant.SelfUISeatId);
          this.seeCard.active = false;
        }
      },
      foldAction: function foldAction(UISeatId) {
        var key = void 0, move = void 0, fadeOut = void 0;
        if (dataLogic.isHide) {
          this.setHandCardView(UISeatId, false);
          for (var i = 0; i < 3; i++) {
            key = 3 * UISeatId + i;
            this.backCard[key].opacity = 0;
          }
          return;
        }
        for (var _i15 = 0; _i15 < 3; _i15++) {
          key = 3 * UISeatId + _i15;
          this.backCard[key].stopAllActions();
          this.backCard[key].opacity = 0;
        }
        this.backCard[key].position = this.getHandCardPos(UISeatId, 1);
        this.backCard[key].scale = .3;
        this.backCard[key].opacity = 255;
        fadeOut = cc.fadeOut(.5);
        move = cc.moveTo(.5, cc.v2(0, 360));
        this.backCard[key].runAction(cc.spawn(move, fadeOut));
      },
      packUpCardAction: function packUpCardAction(UISeatId) {
        var key = void 0;
        if (UISeatId < 3 && constant.SelfUISeatId != UISeatId) {
          key = 3 * UISeatId + 2;
          var endPos = this.backCard[key].position;
          for (var i = 0; i < 2; i++) {
            key = 3 * UISeatId + i;
            this.backCard[key].runAction(cc.moveTo(packUpActionTime, endPos));
          }
        } else {
          key = 3 * UISeatId;
          var _endPos = this.backCard[key].position;
          for (var _i16 = 1; _i16 < 3; _i16++) {
            key = 3 * UISeatId + _i16;
            this.backCard[key].runAction(cc.moveTo(packUpActionTime, _endPos));
          }
        }
      },
      recoverHandCardPos: function recoverHandCardPos() {
        var endPos = void 0, card = void 0;
        for (var j = 0; j < this.player.length; j++) if (constant.SelfUISeatId == j) {
          card = this.handCardSp[j][0].node.parent;
          endPos = kf.clone(card.position);
          for (var i = 1; i < 3; i++) {
            endPos.x += 46;
            this.handCardSp[j][i].node.parent.position = endPos;
          }
        } else if (j < 3) {
          card = this.handCardSp[j][2].node.parent;
          endPos = kf.clone(card.position);
          for (var _i17 = 1; _i17 > -1; _i17--) {
            endPos.x -= 12;
            this.handCardSp[j][_i17].node.parent.position = endPos;
          }
        } else {
          card = this.handCardSp[j][0].node.parent;
          endPos = kf.clone(card.position);
          for (var _i18 = 1; _i18 < 3; _i18++) {
            endPos.x += 12;
            this.handCardSp[j][_i18].node.parent.position = endPos;
          }
        }
      },
      spreadCardAction: function spreadCardAction(UISeatId) {
        var card = void 0;
        if (UISeatId < 3 && constant.SelfUISeatId != UISeatId) {
          card = this.handCardSp[UISeatId][2].node.parent;
          var endPos = kf.clone(card.position);
          for (var i = 1; i > -1; i--) {
            this.handCardSp[UISeatId][i].node.parent.position = card.position;
            endPos.x -= 30;
            this.handCardSp[UISeatId][i].node.parent.stopAllActions();
            this.handCardSp[UISeatId][i].node.parent.runAction(cc.moveTo(packUpActionTime, endPos));
          }
        } else {
          var spaceBetween = 30;
          constant.SelfUISeatId == UISeatId && (spaceBetween = 46);
          card = this.handCardSp[UISeatId][0].node.parent;
          var _endPos2 = {
            x: card.x,
            y: card.y
          };
          for (var _i19 = 1; _i19 < 3; _i19++) {
            this.handCardSp[UISeatId][_i19].node.parent.position = card.position;
            _endPos2.x += spaceBetween;
            this.handCardSp[UISeatId][_i19].node.parent.stopAllActions();
            this.handCardSp[UISeatId][_i19].node.parent.runAction(cc.moveTo(packUpActionTime, _endPos2));
          }
        }
      },
      showCardAnim: function showCardAnim(UISeatId) {
        var _this4 = this;
        var key = void 0, amin = void 0;
        if (dataLogic.isHide) {
          constant.SelfUISeatId == UISeatId && (this.doneShowCardAmin = true);
          this.setHandCardView(UISeatId, true);
          this.hideBackCard(UISeatId);
          return;
        }
        audioMgr.playEffect(this.showAudio);
        var delayTime = 0;
        this.packUpCardAction(UISeatId);
        delayTime = packUpActionTime;
        constant.SelfUISeatId == UISeatId && (this.isPlayShowCardAmin = true);
        this.scheduleOnce(function() {
          for (var i = 0; i < 3; i++) {
            key = 3 * UISeatId + i;
            amin = _this4.backCard[key].getComponent(cc.Animation);
            amin.play();
          }
        }, delayTime);
        this.scheduleOnce(function() {
          constant.SelfUISeatId == UISeatId && (_this4.doneShowCardAmin = true);
          _this4.spreadCardAction(UISeatId);
          _this4.setHandCardView(UISeatId, true);
        }, .13 + delayTime);
      },
      setCardTypeView: function setCardTypeView(isShow, cardType) {
        if (isShow) {
          this.cardTypeTxt.node.parent.active = true;
          this.cardTypeTxt.string = gfConstant.CardTypeTxt[cardType];
        } else this.cardTypeTxt.node.parent.active = false;
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var cardList = kf.clone(gfDataLogic.sortCard(cards));
        cc.log("cardList-----------", cardList);
        for (var i = 0; i < 3; i++) this.handCardSp[UISeatId][i].spriteFrame = this.cardAtlas.getSpriteFrame(cardList[i]);
      },
      compareCardAction: function compareCardAction(UISeatId1, UISeatId2, winUISeatId) {
        var loseId = winUISeatId == UISeatId1 ? UISeatId2 : UISeatId1;
        if (constant.SelfUISeatId == loseId && !gfDataLogic.haveSeen) {
          gfDataLogic.seeCard();
          this.showCardAnim(constant.SelfUISeatId);
          this.seeCard.active = false;
          this.haveCardData = true;
        }
      },
      PKLosePlayerUI: function PKLosePlayerUI() {
        cc.log("------PKLosePlayerUI", this.curPkLoseUIseatId);
        if (-1 == this.curPkLoseUIseatId) {
          this.isSetLosePlayerUI = false;
          return;
        }
        var seatId = dataLogic.getSeatIdByUISeatId(this.curPkLoseUIseatId);
        this.setFriendRoomPlayerState(seatId, constant.FriendRoomPlayerState.Unready);
        this.isSetLosePlayerUI = true;
        this.setAshPlayer(this.curPkLoseUIseatId);
        this.setPlayerBackCardOpacity(this.curPkLoseUIseatId, 200);
        this.setPlayerState(this.curPkLoseUIseatId, gfConstant.PlayerState.Failed);
        if (this.curPkLoseUIseatId == constant.SelfUISeatId) {
          if (!gfDataLogic.haveSeen) {
            gfDataLogic.seeCard();
            this.seeCard.active = false;
            this.haveCardData = true;
            this.showCardAnim(constant.SelfUISeatId);
          }
          this.updateOperationBtn();
        }
        this.curPkLoseUIseatId = -1;
      },
      removePkUI: function removePkUI() {
        this.compareLayerTop.x = 2e3;
        this.compareLayerBottom.x = 2e3;
        this.compareLayerTop.getComponent(cc.Animation).stop();
        this.compareLayerBottom.getComponent(cc.Animation).stop();
        this.launchPlayer.stopAllActions();
        this.rivalPlayer.stopAllActions();
        this.launchPlayer.y = 5e3;
        this.rivalPlayer.y = 5e3;
      },
      performCompareAction: function performCompareAction(UISeatId1, UISeatId2) {
        var _this5 = this;
        if (dataLogic.isHide) {
          this.PKLosePlayerUI();
          this.updateTips();
          return;
        }
        var audioKey = this.randomAudioKey(UISeatId1);
        audioMgr.playEffect(this.compareAudio[audioKey]);
        this.PKVisitingCardAction(UISeatId1, UISeatId2);
        var func1 = cc.callFunc(function() {
          _this5.compareLayerTop.x = 0;
          _this5.compareLayerBottom.x = 0;
          _this5.compareLayerTop.getComponent(cc.Animation).play();
          _this5.compareLayerBottom.getComponent(cc.Animation).play();
          audioMgr.playEffect(_this5.lightingAudio);
        }, this);
        var func2 = cc.callFunc(function() {
          audioMgr.playEffect(_this5.pkboomAudio);
        }, this);
        var func3 = cc.callFunc(function() {
          _this5.compareLayerTop.x = 2e3;
          _this5.compareLayerBottom.x = 2e3;
        }, this);
        var func4 = cc.callFunc(function() {
          _this5.PKLosePlayerUI();
          _this5.updateTips();
        }, this);
        this.compareLayerTop.runAction(cc.sequence(cc.delayTime(.3), func1, cc.delayTime(.9), func2, cc.delayTime(PKTime - 1.2), func3, cc.delayTime(.5), func4));
      },
      bet: function bet(UISeatId, chipNum, isDesperate) {
        audioMgr.playEffect(this.chipAudio);
        var balance = this.getPlayerBalance(UISeatId);
        this.setPlayerBalance(UISeatId, balance.minus(chipNum));
        dataLogic.isHide ? this.tableAddChip(chipNum) : this.betAction(UISeatId, chipNum, isDesperate);
      },
      betAction: function betAction(UISeatId, chipNum, isDesperate) {
        var chip = kf.getObj(constant.PoolId.Chip, this.chipParent, this.chipPf);
        var data = {
          chipNum: chipNum,
          isDesperate: isDesperate
        };
        data.pos = this.player[UISeatId].position;
        var endPos = this.genChipEndPos();
        chip.getComponent("chip").init(data);
        chip.getComponent("chip").castAction(endPos);
        this.chipNode.push(chip);
      },
      tableAddChip: function tableAddChip(chipNum) {
        var chip = kf.getObj(constant.PoolId.Chip, this.chipParent, this.chipPf);
        var data = {
          chipNum: chipNum
        };
        data.pos = this.genChipEndPos();
        chip.getComponent("chip").init(data);
        this.chipNode.push(chip);
      },
      genChipEndPos: function genChipEndPos() {
        var pos = {};
        pos.x = dataLogic.randomIntBySeed(-288, 288);
        pos.y = dataLogic.randomIntBySeed(307, 380);
        return pos;
      },
      getHandCardPos: function getHandCardPos(UISeatId, key) {
        var pos = cc.v2(0, 0);
        pos.x = this.player[UISeatId].x + this.player[UISeatId].getChildByName("card" + key).x;
        pos.y = this.player[UISeatId].y + this.player[UISeatId].getChildByName("card" + key).y;
        return pos;
      },
      setPlayerHead: function setPlayerHead(UISeatId, headUrl) {
        var self = this;
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          self.headSp[UISeatId].spriteFrame = res;
        }, cc.SpriteFrame);
      },
      updatePlayerUI: function updatePlayerUI() {
        var state = void 0;
        for (var i = 0; i < gfDataLogic.playerState.length; i++) {
          state = gfDataLogic.playerState[i];
          this.setPlayerState(i, state);
          if (gfConstant.PlayerState.Wait == state) continue;
          switch (state) {
           case gfConstant.PlayerState.Failed:
            this.setAshPlayer(i);
            this.setPlayerBackCardOpacity(i, 200);
            if (i == constant.SelfUISeatId) {
              this.doneShowCardAmin = true;
              this.setHandCardView(i, true);
            }
            break;

           case gfConstant.PlayerState.HaveSeen:
           case gfConstant.PlayerState.NoLook:
            break;

           case gfConstant.PlayerState.Fold:
            if (i == constant.SelfUISeatId) {
              this.doneShowCardAmin = true;
              this.setHandCardView(i, true);
            } else this.setHandCardView(i, false);
          }
        }
      },
      setPlayerUIInfo: function setPlayerUIInfo(UISeatId, data) {
        this.setPlayerHead(UISeatId, data.headUrl);
        if (UISeatId != constant.SelfUISeatId) {
          var nicknameNode = this.player[UISeatId].getChildByName("bg").getChildByName("nickname");
          nicknameNode.getComponent(cc.Label).string = data.nickName;
        }
        this.setPlayerBalance(UISeatId, data.balance);
        this.setVisitingCardOpacity(UISeatId, 255);
        this.setPlayerState(UISeatId, data.state);
      },
      getPlayerBalance: function getPlayerBalance(UISeatId) {
        var balance = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        return Number(balance.string);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        var balanceTxt = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      hideAllPlayerState: function hideAllPlayerState() {
        cc.log("\u9690\u85cf\u6240\u6709\u73a9\u5bb6\u72b6\u6001");
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.player[i].getChildByName("state").opacity = 0;
      },
      showAllPlayerState: function showAllPlayerState() {
        for (var i = 0; i < gfConstant.maxPlayerNum; i++) this.player[i].getChildByName("state").opacity = 255;
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        state = null == state ? gfConstant.PlayerState.NoLook : state;
        gfDataLogic.setPlayerState(UISeatId, state);
        this.setPlayerUIState(UISeatId, state);
      },
      setPlayerUIState: function setPlayerUIState(UISeatId, state) {
        var stateNode = this.player[UISeatId].getChildByName("state");
        if (gfConstant.PlayerState.Wait == state || this.isGameOver) stateNode.opacity = 0; else {
          stateNode.opacity = 255;
          stateNode.getComponent(cc.Sprite).spriteFrame = this.stateSF[state];
        }
      },
      hideOperationBtn: function hideOperationBtn() {
        this.seeCard.active && (this.seeCard.active = false);
        this.addChipBg.active && (this.addChipBg.active = false);
        this.playOption.active = false;
      },
      updateOperationBtn: function updateOperationBtn(curBetUISeatId) {
        cc.log("updateOperationBtn", reqFold, this.isGameOver);
        if (reqFold && !this.isGameOver) {
          this.hideOperationBtn();
          return;
        }
        var balence = this.getPlayerBalance(constant.SelfUISeatId);
        this.followBtnTxt.string = gfDataLogic.followChipNum + "\u8ddf\u6ce8";
        var state = gfDataLogic.playerState[constant.SelfUISeatId];
        cc.log("\u66f4\u65b0\u5237\u65b0\u6309\u94ae\u81ea\u5df1\u72b6\u6001", state, this.isGameOver);
        if (gfDataLogic.isFold || this.isGameOver || state == gfConstant.PlayerState.Failed || state == gfConstant.PlayerState.Wait) {
          dataLogic.isFriendRoom ? this.btReady.node.active = !!this.isGameOver : this.btMatching.node.active || (this.btMatching.node.active = true);
          this.hideOperationBtn();
        } else if (balence < gfDataLogic.followChipNum) {
          this.compareBtnTxt.string = "\u5b64\u6ce8\u4e00\u63b7";
          this.btShowAddChip.interactable = false;
          if (curBetUISeatId == constant.SelfUISeatId) {
            this.btCompare.interactable = true;
            this.btCompare.node.opacity = 255;
            this.btFollow.node.active = true;
            this.btAutoFollow.node.active = false;
          } else {
            this.btCompare.interactable = false;
            this.btCompare.node.opacity = 120;
            this.btFollow.node.active = false;
            this.btAutoFollow.node.active = true;
          }
          this.btFollow.interactable = false;
          this.btAutoFollow.interactable = false;
          this.btShowAddChip.node.opacity = this.btFollow.node.opacity = this.btAutoFollow.node.opacity = 120;
          gfDataLogic.autoFollow && this.setAutoFollow(false);
        } else {
          this.compareBtnTxt.string = gfDataLogic.followChipNum + "\u6bd4\u724c";
          this.playOption.active || (this.playOption.active = true);
          this.btAutoFollow.interactable = true;
          this.btAutoFollow.node.opacity = 255;
          if (constant.SelfUISeatId === curBetUISeatId && gfDataLogic.chipRoundNum > 1) {
            this.btCompare.interactable = true;
            this.btCompare.node.opacity = 255;
          } else {
            this.btCompare.interactable = false;
            this.btCompare.node.opacity = 120;
          }
          if (constant.SelfUISeatId === curBetUISeatId) {
            this.btFollow.node.active = true;
            var minAddchipNum = void 0;
            for (var i = 0; i < this.addChipBtnTxt.length; i++) {
              minAddchipNum = Number(this.addChipBtnTxt[i].string);
              if (minAddchipNum > gfDataLogic.followChipNum) break;
            }
            if (Number(this.addChipBtnTxt[5].string) > gfDataLogic.followChipNum && minAddchipNum <= balence) {
              this.btShowAddChip.interactable = true;
              this.btShowAddChip.node.opacity = 255;
            } else {
              this.btShowAddChip.interactable = false;
              this.btShowAddChip.node.opacity = 120;
            }
            this.btFollow.interactable = true;
            this.btFollow.node.opacity = 255;
            this.btAutoFollow.node.active = false;
          } else {
            this.btShowAddChip.interactable = false;
            this.btShowAddChip.node.opacity = 120;
            this.btFollow.node.active = false;
            this.btAutoFollow.node.active = true;
          }
        }
      },
      showAddChipView: function showAddChipView() {
        this.addChipBg.active = true;
        var chipNum = void 0, balance = this.getPlayerBalance(constant.SelfUISeatId);
        for (var i = 0; i < 6; i++) {
          chipNum = Number(this.addChipBtnTxt[i].string);
          chipNum > gfDataLogic.followChipNum && chipNum <= balance ? this.addChipBtnTxt[i].node.parent.getComponent(cc.Button).interactable = true : this.addChipBtnTxt[i].node.parent.getComponent(cc.Button).interactable = false;
        }
      },
      tryExitRoom: function tryExitRoom() {
        if (dataLogic.isFriendRoom && !this.isGameOver && gfDataLogic.playerState[constant.SelfUISeatId] != gfConstant.PlayerState.Wait) {
          this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6");
          return;
        }
        this.isGameOver || gfDataLogic.isFold || dataLogic.isOnlooker() || gfDataLogic.playerState[constant.SelfUISeatId] == gfConstant.PlayerState.Failed ? this.exitRoom() : this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6\uff0c\u8bf7\u5148\u5f03\u724c\u518d\u9000\u51fa");
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        this.isGameOver = true;
        gfDataLogic.setGameEndData(null);
        this.compareLayerBottom.stopAllActions();
        this.compareLayerTop.stopAllActions();
        this.removePkUI();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      setAwardPot: function setAwardPot(num) {
        num = Number(num);
        var bg = this.awardPotTxt.node.parent;
        if (num <= 0) {
          bg.active = false;
          return;
        }
        bg.active || (bg.active = true);
        this.awardPotTxt.string = num;
        this.awardPotTxt._updateRenderData(true);
        if (num > 100) {
          var width = this.awardPotTxt.node.width;
          bg.width = width + 80;
        } else bg.width = 130;
      },
      setAutoFollow: function setAutoFollow(bool) {
        gfDataLogic.setAutoFollow(bool);
        if (bool) {
          this.autoFollowBtnTxt.string = "\u53d6\u6d88\u8ddf\u6ce8";
          this.autoFollowEf.opacity = 255;
          this.autoFollowEf.getComponent(cc.Animation).play();
        } else {
          this.autoFollowEf.opacity = 0;
          this.autoFollowEf.getComponent(cc.Animation).stop();
          this.autoFollowBtnTxt.string = "\u81ea\u52a8\u8ddf\u6ce8";
        }
      },
      performAutoFollow: function performAutoFollow() {
        var _this6 = this;
        var delayTime = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .5;
        var balance = this.getPlayerBalance(constant.SelfUISeatId);
        if (gfDataLogic.autoFollow && balance >= gfDataLogic.followChipNum) {
          dataLogic.isHide ? this.btnBetEvent("", -1) : this.scheduleOnce(function() {
            cc.log("\u5ef6\u8fdf0.5");
            _this6.btnBetEvent("", -1);
          }, delayTime);
          return true;
        }
        return false;
      },
      randomAudioKey: function randomAudioKey(UISeatId) {
        var sex = dataLogic.getSex(UISeatId);
        var seed = Math.ceil(this.getPlayerBalance(UISeatId));
        gfDataLogic.randomIntBySeed(0, 1, seed);
        var random = Math.ceil(seed / 3) % 2;
        var audioKey = sex + 2 * random;
        return audioKey;
      },
      visitingWinAnim: function visitingWinAnim(UISeatId) {
        var bg = this.player[UISeatId].getChildByName("bg");
        bg.getComponent(cc.Animation).play();
        this.visitingEf[0].position = this.player[UISeatId].position;
        this.visitingEf[1].position = this.player[UISeatId].position;
        this.visitingEf[0].getComponent(cc.Animation).play();
        this.visitingEf[1].getComponent(cc.Animation).play();
      },
      selfWinAnim: function selfWinAnim() {
        this.selfWinEf.x = 0;
        this.selfWinEf.getComponent(cc.Animation).play();
      },
      setFristFlag: function setFristFlag(UISeatId) {
        _firstUIseatId = UISeatId;
        if (-1 == UISeatId) this.fristFlag.x = 1e3; else {
          var pos = this.player[UISeatId].position.add(gfConstant.FristFalgPosOff[UISeatId]);
          this.fristFlag.position = pos;
        }
      },
      setVisitingCardOpacity: function setVisitingCardOpacity(UISeatId, opacity) {
        this.player[UISeatId].getChildByName("bg").opacity = opacity;
        this.player[UISeatId].getChildByName("state").opacity = this.isGameOver ? 0 : opacity;
      },
      PKVisitingCardAction: function PKVisitingCardAction(launchUISeatId, rivalUISeatId) {
        var _this7 = this;
        this.setPKVisitingCardUI(launchUISeatId, rivalUISeatId);
        var moveTime = .5;
        var seq = void 0;
        this.launchPlayer.runAction(cc.moveTo(moveTime, cc.v2(-280, 341)));
        this.rivalPlayer.runAction(cc.moveTo(moveTime, cc.v2(280, 341)));
        this.setVisitingCardOpacity(launchUISeatId, 0);
        this.setVisitingCardOpacity(rivalUISeatId, 0);
        var pos1 = this.player[launchUISeatId].position;
        var pos2 = this.player[rivalUISeatId].position;
        var func1 = cc.callFunc(function() {
          seq = cc.sequence(cc.moveTo(moveTime, pos1), cc.place(0, 5e3));
          _this7.launchPlayer.runAction(seq);
          seq = cc.sequence(cc.moveTo(moveTime, pos2), cc.place(0, 5e3));
          _this7.rivalPlayer.runAction(seq);
        });
        var func2 = cc.callFunc(function() {
          _this7.setVisitingCardOpacity(launchUISeatId, 255);
          _this7.setVisitingCardOpacity(rivalUISeatId, 255);
        });
        this.compareLayerBottom.runAction(cc.sequence(cc.delayTime(PKTime), func1, cc.delayTime(moveTime), func2));
      },
      setPKVisitingCardUI: function setPKVisitingCardUI(launchUISeatId, rivalUISeatId) {
        var seatId1 = dataLogic.getSeatIdByUISeatId(launchUISeatId);
        var seatId2 = dataLogic.getSeatIdByUISeatId(rivalUISeatId);
        var head = this.launchPlayer.getChildByName("head").getComponent(cc.Sprite);
        head.spriteFrame = this.headSp[launchUISeatId].spriteFrame;
        var balance = this.getPlayerBalance(launchUISeatId);
        this.launchPlayer.getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
        var nickname = dataLogic.playerInfo[seatId1].nickName;
        this.launchPlayer.getChildByName("nickname").getComponent(cc.Label).string = nickname;
        var state = gfDataLogic.playerState[launchUISeatId];
        this.launchPlayer.position = this.player[launchUISeatId].position;
        head = this.rivalPlayer.getChildByName("head").getComponent(cc.Sprite);
        head.spriteFrame = this.headSp[rivalUISeatId].spriteFrame;
        balance = this.getPlayerBalance(rivalUISeatId);
        this.rivalPlayer.getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
        nickname = dataLogic.playerInfo[seatId2].nickName;
        this.rivalPlayer.getChildByName("nickname").getComponent(cc.Label).string = nickname;
        state = gfDataLogic.playerState[rivalUISeatId];
        this.rivalPlayer.position = this.player[rivalUISeatId].position;
      },
      setAshPlayer: function setAshPlayer(UISeatId) {
        this.player[UISeatId].runAction(cc.spawn(cc.scaleTo(.3, 1, 1), cc.fadeTo(.3, 200)));
      },
      setPlayerBackCardOpacity: function setPlayerBackCardOpacity(UISeatId, opacity) {
        cc.log("UISeatId", UISeatId);
        var key = void 0;
        for (var i = 0; i < 3; i++) {
          key = 3 * UISeatId + i;
          this.backCard[key].opacity = opacity;
        }
      },
      recoverPlayerColor: function recoverPlayerColor(UISeatId) {
        this.player[UISeatId].opacity = 255;
        var key = void 0;
        for (var i = 0; i < 3; i++) {
          key = 3 * UISeatId + i;
          this.backCard[key].opacity = 255;
        }
      },
      setWinnerCardType: function setWinnerCardType(UISeatId, cards) {
        var diff = void 0, diffY = void 0;
        var position = this.player[UISeatId].position;
        if (UISeatId == constant.SelfUISeatId) {
          diff = 150;
          diffY = 80;
          return;
        }
        diff = UISeatId > 2 ? 143 : -143;
        diffY = 25;
        var cardType = gfDataLogic.getOptimalCardType(cards);
        this.winnerCardTypeTxt.string = gfConstant.CardTypeTxt[cardType];
        this.winnerCardTypeTxt.node.parent.position = cc.v2(position.x + diff, position.y - diffY);
      },
      settlementChipNumAction: function settlementChipNumAction(chips) {
        var UISeatId = void 0;
        for (var i = 0; i < chips.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = this.getPlayerBalance(UISeatId);
          var _playerInfo = dataLogic.playerInfo[i];
          _playerInfo.balance = balance;
          chips[i] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * chips[i]) / 100);
          _playerInfo.gameTimes += 1;
          this.player[i]._playerInfo = _playerInfo;
          this.resultChipNumTxt[UISeatId].node.opacity = 255;
          if (chips[i] > 0) {
            this.resultChipNumTxt[UISeatId].font = this.winChipNumFont;
            this.resultChipNumTxt[UISeatId].string = "+" + chips[i].toFixed(2);
          } else {
            this.resultChipNumTxt[UISeatId].font = this.loseChipNumFont;
            this.resultChipNumTxt[UISeatId].string = chips[i].toFixed(2);
          }
          this.resultChipNumTxt[UISeatId].node.y = -2;
          this.resultChipNumTxt[UISeatId].node.stopAllActions();
          this.resultChipNumTxt[UISeatId].node.runAction(cc.moveBy(.3, 0, 110));
        }
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        kf.clearPool(constant.PoolId.Chip);
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  guideWatchPlayerCard: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "7272apkfHFCDacJpRgzIlAT", "guideWatchPlayerCard");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        acClick: {
          default: null,
          type: cc.AudioClip
        }
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.acClick);
        switch (name) {
         case "close":
          this.node.destroy();
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  hall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4f853z5CddJSLY1hLR4O8Z1", "hall");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var doneResLoad = false;
    var noticeY = 0;
    var _checkUnreadTime_ms = 0;
    var _checkUnread = {
      Action: "CheckUnread",
      reqExtendArg: {
        timeoutRefresh: false,
        reRequested: true
      }
    };
    var _GetAllAnnouncements = {
      Action: "GetAllAnnouncements",
      Index: 0
    };
    var _AppData = null;
    var _checkUnreadTimerID = null;
    var _checkUnreadTimeSpacing = 18e4;
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        pfRoomCard: cc.Prefab,
        pfGameState: cc.Prefab,
        pfGameCard: cc.Prefab,
        gameRecordPf: cc.Prefab,
        scrollView: cc.Node,
        scrollContent: cc.Node,
        leftArrow: cc.Node,
        rightArrow: cc.Node,
        mailRedDot: cc.Node,
        top: cc.Node,
        service: cc.Node,
        setting: cc.Node,
        record: cc.Node,
        bindPhoneNum: cc.Node,
        loadMask: cc.Node,
        loadIcon: cc.Node,
        firstRechargeIcon: cc.Node,
        signInIcon: cc.Node,
        hallBg: cc.Sprite,
        defaultHallBg: cc.SpriteFrame,
        spHead: cc.Sprite,
        spGameStates: [ cc.SpriteFrame ],
        txtNickname: cc.Label,
        txtUserGrade: cc.Label,
        txtBalance: cc.Label,
        downloadApp: cc.Node,
        activityCenterPf: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqSelectRoomConfigCb", this.reqSelectRoomConfigCb.bind(this) ], [ "checkGameStateCb", this.checkGameStateCb.bind(this) ], [ "reqUserBalanceCb", this.reqUserBalanceCb.bind(this) ], [ "reqUnreadLetterNumCb", this.reqUnreadLetterNumCb.bind(this) ], [ "getInitDataCb", this.getInitDataCb.bind(this) ], [ "getLettersByJudgeIsPop", this.getLettersByJudgeIsPop.bind(this) ], [ "checkRecoverCb", this.checkRecoverCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        var _this = this;
        this.sceneName = constant.SceneName.Hall;
        dataLogic.setCurGameId(constant.GameId.Hall);
        dataLogic.reqServerTime();
        this.initSceneBase();
        this.registerEvent();
        this.len = 5;
        this.doneResLoad = false;
        noticeY = cc.winSize.height / 2 - 130;
        this.updatePlayerInfoUI();
        kf.createPool(constant.PoolId.GameCard, 6, this.pfGameCard, "gameEntrance");
        kf.createPool(constant.PoolId.activityCenter, 1, this.activityCenterPf, "activityCenter");
        this.gameCard = [];
        dataLogic.doneGameListSyne && this.initGameCardUI();
        cc.log("\u662f\u5426\u662fapp", window._App);
        this.downloadApp.active = !window._App;
        http.post({
          action: "GetInitData",
          Requirement: JSON.stringify([ "SiteConfig", "Announcements", "NewMessage", "GetAppData" ]),
          reqExtendArg: {
            timeoutRefresh: false,
            reRequested: false
          }
        }, "getInitDataCb");
        if (dataLogic.isNewRegister) {
          if (dataLogic.userPhoneNum && dataLogic.userBalance > 0) {
            dataLogic.setRegisterCashGift(dataLogic.userBalance);
            resMgr.loadSingleRes("prefab/baoWang/registerCashGift", function(res) {
              var node = cc.instantiate(res);
              node.parent = _this.toastLayer[1];
              node.getComponent("registerCashGift").init("register", dataLogic.registerCashGift);
            }, cc.Prefab);
          } else !dataLogic.userPhoneNum && dataLogic.regGift > 0 && resMgr.loadSingleRes("prefab/baoWang/hintBindPhone", function(res) {
            var node = cc.instantiate(res);
            node.parent = _this.toastLayer[1];
            var data = {
              cashGift: dataLogic.regGift,
              cb: _this.createBindPhoneDialog.bind(_this, "\u7ed1\u5b9a\u624b\u673a\u53f7\u5373\u53ef\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\uff0c\u540e\u7eed\u53ef\u4f7f\u7528\u624b\u673a\u53f7\u767b\u5f55\u3002", function() {
                _this.bindPhoneNum.active = false;
                _this.txtBalance.string = dataLogic.userBalance.toFixed(2);
              })
            };
            node.getComponent("hintBindPhone").init(data);
          }, cc.Prefab);
          dataLogic.setIsNewRegister(false);
        }
        this.bindPhoneNum.active = !dataLogic.userPhoneNum;
        this.firstRechargeIcon.active = dataLogic.firstRechargeGiftState;
        this.signInIcon.active = dataLogic.signInState;
        dataLogic.signInState ? this.firstRechargeIcon.x = cc.winSize.width / 2 - 425 : this.firstRechargeIcon.x = cc.winSize.width / 2 - 340;
        dataLogic.firstRechargeGiftState && http.post(constant.PostCheckForMatch, "checkRecoverCb");
      },
      checkRecoverCb: function checkRecoverCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed) {
          dataLogic.setFirstRechargeGiftState(msg.Data.hasFirstGift);
          dataLogic.setRechargeState(msg.Data.isSend);
          this.firstRechargeIcon.active = dataLogic.firstRechargeGiftState;
          dataLogic.signInState ? this.firstRechargeIcon.x = cc.winSize.width / 2 - 425 : this.firstRechargeIcon.x = cc.winSize.width / 2 - 340;
        }
      },
      getInitDataCb: function getInitDataCb(data) {
        var _this2 = this;
        if (data.Code != constant.HttpCode.Succeed) return;
        var backData = data.BackData;
        var curTime = new Date().getTime();
        curTime - _checkUnreadTime_ms > _checkUnreadTimeSpacing ? this.reqUnreadLetterNum() : null == _checkUnreadTimerID && (_checkUnreadTimerID = setTimeout(function() {
          _this2.reqUnreadLetterNum();
        }, _checkUnreadTimeSpacing - (curTime - _checkUnreadTime_ms)));
        if (data.BackData.SiteConfig) {
          data.BackData.SiteConfig.WebDTBG ? kf.loadNetImg(constant.imgServer + data.BackData.SiteConfig.WebDTBG, this.hallBg) : this.hallBg.spriteFrame = this.defaultHallBg;
          dataLogic.setServiceAddr(data.BackData.SiteConfig.Service);
          dataLogic.needPopActivityID = data.BackData.SiteConfig.ActPopUps;
        }
        backData.SiteConfig && null != backData.SiteConfig.IsTransfer && dataLogic.setTransferFunc(backData.SiteConfig.IsTransfer);
        null != backData.NewMessage && (this.mailRedDot.opacity = backData.NewMessage.length > 0 ? 255 : 0);
        if (null != backData.Announcements) {
          dataLogic.setNoticeContent(backData.Announcements.notice);
          this.showGlobalNotice(noticeY, true);
          var showWin = cc.sys.localStorage.getItem("baoWangNewestAnnounceShowWin") || null;
          var announcements = backData.Announcements.announcement;
          for (var i = 0; i < announcements.length; i++) if (announcements[i].ShowWin && showWin != announcements[i].ShowWin) {
            dataLogic.popsObjSwitchObj.globalNotice = true;
            cc.sys.localStorage.setItem("baoWangNewestAnnounceShowWin", announcements[i].ShowWin);
            kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
              path: "prefab/baoWang/mailDetails",
              js: "mailDetails",
              initArg: {
                id: announcements[i].ID,
                isBulletin: true,
                cb: this.cbBeforeToastClose.bind(this)
              },
              hideLoadingToast: true
            });
            break;
          }
        }
        if (null != backData.GetAppData) {
          _AppData = kf.clone(backData.GetAppData);
          delete _AppData.appTip;
        }
      },
      reqUnreadLetterNum: function reqUnreadLetterNum() {
        _checkUnreadTime_ms = new Date().getTime();
        http.post(_checkUnread, "reqUnreadLetterNumCb");
      },
      reqUnreadLetterNumCb: function reqUnreadLetterNumCb(msg) {
        var _this3 = this;
        if (msg.Code != constant.HttpCode.Succeed) return;
        1 == msg.BackData ? http.post({
          Action: "GetLetters",
          Index: 0,
          msgType: 1
        }, "getLettersByJudgeIsPop") : dataLogic.popsObjSwitchObj.globalNotice || -1 == dataLogic.needPopActivityID || this.popActivityDialog();
        1 == msg.BackData ? this.mailRedDot.opacity = 255 : this.mailRedDot.opacity = 0;
        _checkUnreadTimerID = setTimeout(function() {
          _this3.reqUnreadLetterNum();
        }, _checkUnreadTimeSpacing);
      },
      popActivityDialog: function popActivityDialog() {
        var _this4 = this;
        dataLogic.needPopDialogIDArr = [];
        if (dataLogic.isHasPopedActivityPanel) return;
        resMgr.loadRes(constant.initActivityRes, function() {
          var node = kf.getObj(constant.PoolId.activityCenter, _this4.toastLayer[0], _this4.activityCenterPf);
          node.getComponent("activityCenter").init({
            id: dataLogic.needPopActivityID
          });
          dataLogic.isHasPopedActivityPanel = true;
        });
      },
      getLettersByJudgeIsPop: function getLettersByJudgeIsPop(data) {
        if (1 == data.Code) {
          var BackData = data.BackData;
          var _local_popsIdArr = cc.sys.localStorage.getItem("posLetterIdArr");
          _local_popsIdArr = _local_popsIdArr ? JSON.parse(_local_popsIdArr) : [];
          dataLogic.needPopDialogIDArr = [];
          for (var i = 0; i < BackData.length; i++) if (BackData[i].Is_PopUps && "1" != BackData[i].Is_Read && (!_local_popsIdArr.length || -1 == _local_popsIdArr.indexOf(BackData[i].ID))) {
            _local_popsIdArr.push(BackData[i].ID);
            dataLogic.popsObjSwitchObj.personalNotice = true;
            dataLogic.needPopDialogIDArr.push(BackData[i].ID);
          }
          cc.sys.localStorage.setItem("posLetterIdArr", JSON.stringify(_local_popsIdArr));
          !dataLogic.popsObjSwitchObj.globalNotice && dataLogic.popsObjSwitchObj.personalNotice ? this.cbBeforeToastClose("Bulletin") : dataLogic.popsObjSwitchObj.globalNotice || dataLogic.popsObjSwitchObj.personalNotice || -1 != dataLogic.needPopActivityID && this.popActivityDialog();
        }
      },
      cbBeforeToastClose: function cbBeforeToastClose(closeTag, cbArg) {
        var _this5 = this;
        if ("Bulletin" == closeTag) {
          if (dataLogic.needPopDialogIDArr.length) resMgr.loadRes(constant.initMailDetailsRes, function() {
            kf.getObj(constant.PoolId.DialogComonLayer, _this5.toastLayer[0], _this5.pfDialogCommonLayer, {
              path: "prefab/baoWang/mailDetails",
              js: "mailDetails",
              initArg: {
                id: dataLogic.needPopDialogIDArr[0],
                cb: _this5.cbBeforeToastClose.bind(_this5)
              },
              hideLoadingToast: true
            });
          }); else if (-1 != dataLogic.needPopActivityID) {
            dataLogic.needPopDialogIDArr = [];
            resMgr.loadRes(constant.initActivityRes, function() {
              var node = kf.getObj(constant.PoolId.activityCenter, _this5.toastLayer[0], _this5.activityCenterPf);
              node.getComponent("activityCenter").init({
                id: dataLogic.needPopActivityID
              });
              dataLogic.isHasPopedActivityPanel = true;
            });
          }
        } else if ("Letter" == closeTag) {
          var nowPopIndex = dataLogic.needPopDialogIDArr.indexOf(cbArg.id);
          if (nowPopIndex != dataLogic.needPopDialogIDArr.length - 1) {
            nowPopIndex++;
            resMgr.loadRes(constant.initMailDetailsRes, function() {
              kf.getObj(constant.PoolId.DialogComonLayer, _this5.toastLayer[0], _this5.pfDialogCommonLayer, {
                path: "prefab/baoWang/mailDetails",
                js: "mailDetails",
                initArg: {
                  id: dataLogic.needPopDialogIDArr[nowPopIndex],
                  cb: _this5.cbBeforeToastClose.bind(_this5)
                },
                hideLoadingToast: true
              });
            });
          } else {
            this.reqUnreadLetterNum();
            -1 != dataLogic.needPopActivityID && this.popActivityDialog();
          }
        }
      },
      start: function start() {
        kf.createPool(constant.PoolId.GameState, 6, this.pfGameState);
        kf.createPool(constant.PoolId.gameRecord, 1, this.gameRecordPf, "gameRecord");
        this.leftArrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4, 5, 0), cc.moveBy(.4, -5, 0))));
        this.rightArrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4, -5, 0), cc.moveBy(.4, 5, 0))));
        this.leftArrow.active = false;
        var roomX = Number(cc.sys.localStorage.getItem("hall"));
        if (roomX) {
          this.scrollContent.x = Number(roomX);
          if (roomX < -10 && roomX > -(this.scrollContent.width - this.scrollView.width - 10)) {
            this.leftArrow.active = true;
            this.rightArrow.active = true;
          } else if (roomX < -(this.scrollContent.width - this.scrollView.width - 10)) {
            this.leftArrow.active = true;
            this.rightArrow.active = false;
          } else {
            this.leftArrow.active = false;
            this.rightArrow.active = true;
          }
        } else {
          this.scrollContent.x = 0;
          this.leftArrow.active = false;
          this.rightArrow.active = true;
        }
        var sceneName = constant.SceneName.BaseGame;
        constant.GameId.King != dataLogic.gameList[0].gameTypeId && (sceneName = dataLogic.getSelectRoomSceneNameByGameId(dataLogic.gameList[0].gameTypeId));
        this.top.runAction(cc.moveBy(.25, 0, -115));
        this.service.runAction(cc.sequence(cc.delayTime(.25), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.record.runAction(cc.sequence(cc.delayTime(.35), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.setting.runAction(cc.sequence(cc.delayTime(.45), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
      },
      loadSceneFrontDispose: function loadSceneFrontDispose() {
        http.abortAllReq();
        cc.sys.localStorage.setItem("hall", this.scrollContent.x);
      },
      reqUserBalance: function reqUserBalance(gameId) {
        var isPlayerClick = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
        if (isPlayerClick) {
          constant.PostReqUserBalance.gameTypeId = gameId;
          var reqArg = kf.clone(constant.PostReqUserBalance);
          reqArg.reqExtendArg = {
            timeoutRefresh: false,
            reRequested: false
          };
          http.post(reqArg, "reqUserBalanceCb", {
            gameId: gameId,
            isPlayerClick: isPlayerClick
          });
        } else {
          constant.PostReqUserBalance.gameTypeId = gameId;
          var _reqArg = kf.clone(constant.PostReqUserBalance);
          _reqArg.reqExtendArg = {
            timeoutRefresh: false,
            reRequested: true
          };
          http.post(_reqArg, "reqUserBalanceCb", {
            gameId: gameId,
            isPlayerClick: isPlayerClick
          });
        }
      },
      reqUserBalanceCb: function reqUserBalanceCb(msg, cbArg) {
        if (msg.code == constant.HttpCode.Timeout) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          cbArg.isPlayerClick || this.reqUserBalance(cbArg.gameId, cbArg.isPlayerClick);
          return;
        }
        if (msg.Code != constant.HttpCode.Succeed || !cbArg) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          return;
        }
        var nextSceneName = dataLogic.getSelectRoomSceneNameByGameId(cbArg.gameId);
        var Json = cc.sys.localStorage.getItem("gameSelectRoomConfig" + nextSceneName);
        var nextSceneInfo = {
          sceneName: nextSceneName,
          gameId: cbArg.gameId
        };
        if (null == Json) dataLogic.reqSelectRoomConfig(cbArg.gameId, nextSceneInfo); else {
          var data = JSON.parse(Json);
          null == data || data.BackData != msg.BackData ? dataLogic.reqSelectRoomConfig(cbArg.gameId, nextSceneInfo) : this.reqSelectRoomConfigCb(data, nextSceneInfo);
        }
      },
      btnIntoSubGameHallEvent: function btnIntoSubGameHallEvent(eventTouch, gameId) {
        "" != eventTouch && audioMgr.playEffect(this.audioBtn);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        this.reqUserBalance(gameId);
      },
      btnIntoGameEvent: function btnIntoGameEvent(eventTouch, gameId) {
        "" != eventTouch && audioMgr.playEffect(this.audioBtn);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        switch (gameId) {
         case constant.GameId.King:
          kingDataLogic.reqCheckGameState();
          this.setNextSceneInfo(constant.SceneName.BaseGame);
          break;

         default:
          cc.log("\u672a\u77e5\u7684\u6309\u94ae\u4e8b\u4ef6\u540d:", gameId);
        }
      },
      reqSelectRoomConfigCb: function reqSelectRoomConfigCb(msg, nextSceneInfo) {
        if (msg.Code == constant.HttpCode.Succeed && nextSceneInfo) {
          cc.sys.localStorage.setItem("gameSelectRoomConfig" + nextSceneInfo.sceneName, JSON.stringify(msg));
          dataLogic.reqSelectRoomConfigCb(msg);
          this.loadScene(nextSceneInfo.sceneName, nextSceneInfo.gameId);
        } else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
        }
      },
      checkGameStateCb: function checkGameStateCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed) {
          if (msg.Code == constant.HttpCode.Timeout) {
            kf.killObj(this.loadToast);
            this.loadToast = null;
            if (dataLogic.loadSceneTimeout) return;
          }
          return;
        }
        if (dataLogic.loadSceneTimeout) return;
        dataLogic.setBetConfig(msg.Data.betConfig);
        kingDataLogic.setCurChoiceLineNum(msg.Data.betLineNum);
        var key = kf.getArrIndexByValue(dataLogic.betConfig, msg.Data.cellBetNum);
        kingDataLogic.setCurChoiceBetKey(key);
        dataLogic.setCheckRecoverState(true);
        msg.Data.freeCount > 0 && kingDataLogic.setFreeNum(msg.Data.freeCount);
        kingDataLogic.setJackpotNum(msg.Data.jackpotNum);
        kingDataLogic.setJackpotEndTime(msg.Data.endTime);
        dataLogic.setUserBalance(msg.Data.balance);
        this.loadScene(constant.SceneName.BaseGame);
      },
      initGameCardUI: function initGameCardUI() {
        var _this6 = this;
        var data = kf.clone(dataLogic.gameList);
        var gameCard = void 0, n = void 0;
        for (var _i = 0; _i < data.length; _i++) {
          gameCard = kf.getObj(constant.PoolId.GameCard, this.scrollContent, this.pfGameCard, {
            clickCb: this.tryIntoGame.bind(this, data[_i]),
            gameId: data[_i].gameTypeId,
            state: data[_i].state,
            gameImg: data[_i].gameImg
          });
          n = Math.floor(_i / 2);
          if (0 != _i % 2) {
            gameCard.x = 267 * n - 6;
            gameCard.y = -111;
          } else {
            gameCard.x = 267 * n - 6;
            gameCard.y = 108;
          }
          this.gameCard.push(gameCard);
        }
        this.scrollContent.width = 267 * Math.ceil(data.length / 2) - 8;
        var fileName = {
          "00": "zhajinhua",
          "01": "qiangzhuangniuniu",
          "02": "dezhoupuke",
          "03": "kansanzhang",
          "04": "tongbiniuniu",
          "05": "wangzherongyao",
          "06": "sangong",
          "07": "dahuatou",
          "08": "qiangzhuangpaijiu",
          "09": "jisuzhajinhua",
          10: "erbagang",
          11: "bairenniuniu",
          12: "longhudou",
          14: "doudizhu",
          15: "baijiale",
          16: "kansizhang",
          17: "baoma",
          19: "senlin",
          21: "shibei",
          24: "hongbao"
        };
        var i = 0, skeleton = null, spineNode = void 0;
        var load = function load() {
          if (!fileName.hasOwnProperty(data[i].gameTypeId)) {
            i++;
            i < _this6.gameCard.length && load();
            return;
          }
          resMgr.loadSingleRes("hallSpine/" + data[i].gameTypeId + "/" + fileName[data[i].gameTypeId], function(res) {
            if (_this6.sceneName != constant.SceneName.Hall) return;
            spineNode = _this6.gameCard[i].getChildByName("btn").getChildByName("spine");
            try {
              skeleton = _this6.gameCard[i].getChildByName("btn").getChildByName("spine").getComponent(sp.Skeleton);
              skeleton.skeletonData = res;
              skeleton.premultipliedAlpha = false;
              skeleton.setAnimation(0, "animation", true);
            } catch (e) {
              i++;
              i < _this6.gameCard.length && load();
              return;
            }
            spineNode.opacity = 255;
            _this6.gameCard[i].getChildByName("btn").getChildByName("bg").getComponent(cc.Sprite).spriteFrame = null;
            i++;
            if (!(i < _this6.gameCard.length)) return;
            load();
          }, sp.SkeletonData);
        };
        load();
      },
      cbFromEditPersonalInfo: function cbFromEditPersonalInfo() {
        this.updatePlayerInfoUI();
      },
      btnEvent: function btnEvent(event, key) {
        var _this7 = this;
        cc.log("btnEvent", key);
        audioMgr.playEffect(this.audioBtn);
        switch (key) {
         case "signIn":
          this.loadMask.active = true;
          this.loadIcon.active = true;
          this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
          resMgr.loadSingleRes("prefab/baoWang/signIn", function(res) {
            var node = cc.instantiate(res);
            node.parent = _this7.toastLayer[0];
            node.getComponent("signIn").init(function() {
              _this7.txtBalance.string = dataLogic.userBalance.toFixed(2);
            });
            _this7.loadMask.active = false;
            _this7.loadIcon.stopAllActions();
            _this7.loadIcon.active = false;
          }, cc.Prefab);
          break;

         case "payCenter":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/payCenter",
            js: "payCenter",
            initArg: 1
          });
          break;

         case "personalCenter":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/personalCenter",
            js: "personalCenter",
            initArg: {
              callBack: this.cbFromEditPersonalInfo.bind(this)
            }
          });
          break;

         case "levelRule":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/levelRule",
            js: "levelRule",
            initArg: 1
          });
          break;

         case "seeAgent":
          this.loadScene(constant.SceneName.Spread);
          break;

         case "rankingList":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/rankingList",
            js: "rankingList",
            initArg: 1
          });
          break;

         case "seeMail":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/mailCentre",
            js: "mailCentre",
            initArg: 1
          });
          break;

         case "activity":
          var node = kf.getObj(constant.PoolId.activityCenter, this.toastLayer[0], this.activityCenterPf);
          node.getComponent("activityCenter").init();
          break;

         case "bank":
          dataLogic.hasSafePassword ? this.loadScene(constant.SceneName.Bank) : kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/setPassword",
            js: "setPassword",
            initArg: {
              callBack: function callBack(hintStr) {
                _this7.showLayerTip(hintStr, _this7.layerTipPos, true, false);
                _this7.loadSceneRelevantRes(constant.SceneName.Bank);
                _this7.scheduleOnce(function() {
                  _this7.loadScene(constant.SceneName.Bank);
                }, 1.5);
              },
              passwordType: 0,
              isFirstUseBank: true
            }
          });
          break;

         case "offerPk":
          this.loadScene(constant.SceneName.OfferPk);
          break;

         case "rule":
          var help = kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, "help");
          var sceneName = dataLogic.getGameSceneNameByGameId(dataLogic.curGameId);
          help.getComponent("help").helpMainShow(sceneName);
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.gameRecord, this.toastLayer[0], this.gameRecordPf, "gameRecord");
          break;

         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "left":
          this.scrollView.parent.getComponent(cc.ScrollView).stopAutoScroll();
          this.scrollContent.runAction(cc.moveTo(.15, 0, 0));
          this.leftArrow.active = false;
          this.rightArrow.active = true;
          break;

         case "right":
          this.scrollView.parent.getComponent(cc.ScrollView).stopAutoScroll();
          this.scrollContent.runAction(cc.moveTo(.15, -(this.scrollContent.width - this.scrollContent.parent.width), 0));
          this.leftArrow.active = true;
          this.rightArrow.active = false;
          break;

         case "firstRecharge":
          this.loadMask.active = true;
          this.loadIcon.active = true;
          this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
          resMgr.loadSingleRes("prefab/baoWang/firstRechargeGift", function(res) {
            var node = cc.instantiate(res);
            node.parent = _this7.toastLayer[0];
            _this7.loadMask.active = false;
            _this7.loadIcon.stopAllActions();
            _this7.loadIcon.active = false;
          }, cc.Prefab);
          break;

         case "service":
          if ("" == dataLogic.serviceAddr) {
            this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
            return;
          }
          dataLogic.openWindow(dataLogic.serviceAddr);
          break;

         case "bindPhoneNum":
          dataLogic.regGift > 0 ? resMgr.loadSingleRes("prefab/baoWang/hintBindPhone", function(res) {
            var node = cc.instantiate(res);
            node.parent = _this7.toastLayer[1];
            var data = {
              cashGift: dataLogic.regGift,
              cb: _this7.createBindPhoneDialog.bind(_this7, "\u7ed1\u5b9a\u624b\u673a\u53f7\u5373\u53ef\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\uff0c\u540e\u7eed\u53ef\u4f7f\u7528\u624b\u673a\u53f7\u767b\u5f55\u3002", function() {
                _this7.bindPhoneNum.active = false;
                _this7.txtBalance.string = dataLogic.userBalance.toFixed(2);
              })
            };
            node.getComponent("hintBindPhone").init(data);
          }, cc.Prefab) : this.createBindPhoneDialog("\u7ed1\u5b9a\u624b\u673a\u53f7\u5373\u53ef\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\uff0c\u540e\u7eed\u53ef\u4f7f\u7528\u624b\u673a\u53f7\u767b\u5f55\u3002", function() {
            _this7.bindPhoneNum.active = false;
            _this7.txtBalance.string = dataLogic.userBalance.toFixed(2);
          });
          break;

         case "downloadApp":
          cc.sys.os == cc.sys.OS_IOS ? 0 == _AppData.appType ? window.location.href = _AppData.iosLink : "7456" == window.location.port ? dataLogic.openWindow("./build/download/index.html?param=" + encodeURIComponent(JSON.stringify(_AppData))) : dataLogic.openWindow("./download/index.html?param=" + encodeURIComponent(JSON.stringify(_AppData))) : window.location.href = _AppData.androidLink;
          break;

         default:
          cc.warn("\u672a\u77e5\u7684 key,", key);
        }
      },
      tryIntoGame: function tryIntoGame(data) {
        null == data && (data = {
          state: constant.GameState.Wait
        });
        if (data.state == constant.GameState.Disable) {
          var arg = {
            type: constant.ToastType.RequestError,
            extend: {
              hintStr: "\u6e38\u620f\u7ef4\u62a4\u4e2d"
            }
          };
          kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
          return;
        }
        if (data.state == constant.GameState.Wait) {
          var _arg = {
            type: constant.ToastType.RequestError,
            extend: {
              hintStr: "\u5373\u5c06\u4e0a\u7ebf\uff0c\u656c\u8bf7\u671f\u5f85"
            }
          };
          kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg);
          return;
        }
        if (constant.GameId.King == data.gameTypeId) {
          this.loadSceneRelevantRes(constant.SceneName.BaseGame, null, false);
          this.btnIntoGameEvent("", data.gameTypeId);
        } else this.btnIntoSubGameHallEvent("", data.gameTypeId);
      },
      onScrollingEvent: function onScrollingEvent(event) {
        if (this.len > 4) if (event.content.x >= -2) {
          this.leftArrow.active = false;
          this.rightArrow.active = true;
        } else if (event.content.x <= -(this.scrollContent.width - this.scrollContent.parent.width - 2)) {
          this.leftArrow.active = true;
          this.rightArrow.active = false;
        } else {
          this.leftArrow.active = true;
          this.rightArrow.active = true;
        }
      },
      updatePlayerInfoUI: function updatePlayerInfoUI() {
        dataLogic.loadNativeAvatar(dataLogic.userHeadUrl, this.spHead);
        this.txtNickname.string = dataLogic.userName;
        this.txtBalance.string = dataLogic.userBalance.toFixed(2);
        this.txtUserGrade.string = dataLogic.userGrade;
      },
      switchSceneFrontDispose: function switchSceneFrontDispose() {
        hotUpdateMgr.delDelegate();
        var skeleton = null;
        for (var i = 0; i < this.gameCard.length; i++) {
          skeleton = this.gameCard[i].getChildByName("btn").getChildByName("spine").getComponent(sp.Skeleton);
          skeleton.skeletonData = null;
          skeleton.node.opacity = 0;
          kf.killObj(this.gameCard[i]);
        }
        _checkUnreadTimerID = null;
        clearTimeout(_checkUnreadTimerID);
      },
      preloadRes: function preloadRes() {
        var list = [ "common/UI/preLoad/balanceBg", "card", "font/betChipNum_0", "selectRoom/effect/zjh_xf_sg_00014", "selectRoom/xuanfang" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i]);
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  hintBindPhone: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "459ceEepddLAYwe/LOX2QWz", "hintBindPhone");
    "use strict";
    var _bindPhoneCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        txt: cc.Label,
        audioClick: {
          default: null,
          type: cc.AudioClip
        }
      },
      start: function start() {},
      init: function init(data) {
        this.txt.string = data.cashGift;
        _bindPhoneCb = data.cb;
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.audioClick);
        switch (name) {
         case "close":
          this.node.destroy();
          break;

         case "bindPhone":
          _bindPhoneCb();
          this.node.destroy();
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  hotUpdateDialog: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4f255e8tlNAkqBdXXDb0lnr", "hotUpdateDialog");
    "use strict";
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        progressBar: cc.Node,
        txt: cc.Label
      },
      init: function init(initData) {
        this.txt.string = "\u6e38\u620f\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u5019";
        this.progressBar.width = 0;
        this.toastShow();
        initData.initCb();
      },
      setProgress: function setProgress(progress) {
        cc.log("progress", progress);
        progress > 1 && (progress = 1);
        this.progressBar.width = 463 * progress;
        1 == progress && (this.txt.string = "\u6e38\u620f\u66f4\u65b0\u5b8c\u6210\uff0c\u5373\u5c06\u4e3a\u60a8\u91cd\u542f");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  hotUpdateMgr: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "08ecdGpWp9IkaIe/xE82vlM", "hotUpdateMgr");
    "use strict";
    window.hotUpdateMgr = window.hotUpdateMgr || {
      extends: cc.Component
    };
    var _isDownloading = false;
    var _downloadingModule = "";
    var _subModuleVersionList = {};
    var _mainModuleVersion = "";
    hotUpdateMgr.init = function() {
      this.delegate = null;
      var url = jsb.reflection ? jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getUrl", "()Ljava/lang/String;") : null;
      this.url = "http://jack.kfcs123.com/" == url ? "http://192.168.10.154/" : url;
      this.url || (this.url = "http://192.168.10.154/");
      var json = cc.sys.localStorage.getItem("subPackVersionList");
      var mainPackVersion = cc.sys.localStorage.getItem("mainPackVersion");
      cc.log("mainPackVersion", mainPackVersion);
      mainPackVersion && (_mainModuleVersion = '"' == mainPackVersion[0] ? JSON.parse(mainPackVersion) : mainPackVersion);
      cc.log("_mainModuleVersion", _mainModuleVersion);
      json && (_subModuleVersionList = JSON.parse(json));
      if (!json || !_mainModuleVersion) {
        window._game_res_version || (window._game_res_version = "2.0");
        var path = jsb.fileUtils.getWritablePath() + window._game_res_version;
        var _url = path + "/main_project.manifest";
        var _setVersion = function _setVersion() {
          var str = jsb.fileUtils.getStringFromFile(_url);
          var data = JSON.parse(str);
          if (!json) {
            _subModuleVersionList = data.subPackVersionList;
            cc.sys.localStorage.setItem("subPackVersionList", JSON.stringify(_subModuleVersionList));
          }
          if (!_mainModuleVersion) {
            _mainModuleVersion = data.version;
            cc.sys.localStorage.setItem("mainPackVersion", _mainModuleVersion);
          }
        };
        cc.loader.md5Pipe && (_url = cc.loader.md5Pipe.transformURL(_url));
        cc.log("main_project.manifest", _url);
        if (jsb.fileUtils.isFileExist(_url)) _setVersion(); else {
          _url = "main_project.manifest";
          cc.loader.md5Pipe && (_url = cc.loader.md5Pipe.transformURL(_url));
          if (jsb.fileUtils.isFileExist(_url)) _setVersion(); else {
            _mainModuleVersion = "1.0.0";
            cc.error(_mainModuleVersion, "\u627e\u4e0d\u5230main_project.manifest", _url);
          }
        }
      }
    };
    hotUpdateMgr.isDownloading = function() {
      return _isDownloading;
    };
    hotUpdateMgr.setDownloadState = function(isDownloading) {
      _isDownloading = isDownloading;
    };
    hotUpdateMgr.setDownloadingModule = function(module) {
      _downloadingModule = module;
    };
    hotUpdateMgr.getDownloadingModule = function() {
      return _downloadingModule;
    };
    hotUpdateMgr.getMainModuleVersion = function() {
      return _mainModuleVersion;
    };
    hotUpdateMgr.getSubModuleVersion = function(module) {
      return _subModuleVersionList[module] || "1.0.1";
    };
    hotUpdateMgr.getLocalSubModuleVersion = function(module) {
      var version = cc.sys.localStorage.getItem(module + "ModuleVersion");
      if (!version) {
        var path = jsb.fileUtils.getWritablePath() + window._game_res_version;
        var file = path + "/" + module + "_project.manifest";
        cc.log("manifest file:", file);
        if (jsb.fileUtils.isFileExist(file)) {
          var str = jsb.fileUtils.getStringFromFile(file);
          version = JSON.parse(str).version;
          cc.sys.localStorage.setItem(module + "ModuleVersion", version);
          cc.log("----module", module, "version", version);
        } else version = "1.0";
      }
      return version;
    };
    hotUpdateMgr.setSubModuleVersionList = function(list) {
      _subModuleVersionList = kf.clone(list);
    };
    hotUpdateMgr.check_update = function(delegate, mod) {
      this.delegate = delegate;
      window._game_res_version || (window._game_res_version = "2.0");
      this.updir = window._game_res_version;
      this.file_module = mod || "";
      this.file_version = "version.manifest";
      this.file_project = "project.manifest";
      if ("" != this.file_module) {
        this.file_version = this.file_module + "_version.manifest";
        this.file_project = this.file_module + "_project.manifest";
      }
      this.file_manifest = "";
      var temp = jsb.fileUtils.getWritablePath() + this.updir + "/" + this.file_project;
      jsb.fileUtils.isFileExist(temp) ? this.file_manifest = jsb.fileUtils.getStringFromFile(temp) : "" != mod && "main" != mod || (this.file_manifest = jsb.fileUtils.getStringFromFile(this.file_project));
      this.check_before(mod);
      this.hotup && this.hotup.release();
      var d = {
        delegate: delegate,
        file_version: this.file_version,
        file_project: this.file_project,
        file_module: this.file_module,
        file_manifest: this.file_manifest,
        module: mod,
        cbs: {
          ALREADY_UP_TO_DATE: this.ALREADY_UP_TO_DATE.bind(this),
          UPDATE_FINISHED: this.UPDATE_FINISHED.bind(this),
          UPDATE_FAILED: this.UPDATE_FAILED.bind(this),
          UPDATE_ERROR: this.UPDATE_ERROR.bind(this),
          UPDATE_PROGRESSION: this.UPDATE_PROGRESSION.bind(this)
        }
      };
      this.hotup = new (require("hotUpdate"))();
      this.hotup.init(d);
      this.hotup.check_update(this.url, this.updir);
    };
    hotUpdateMgr.check_before = function(module) {
      this.setDownloadingModule(module);
      this.setDownloadState(true);
      var path = jsb.fileUtils.getWritablePath() + this.updir + "_temp";
      var file = path + "/project.manifest.temp";
      if (jsb.fileUtils.isFileExist(file)) {
        var str = jsb.fileUtils.getStringFromFile(file);
        "" == str && (str = "{}");
        var mod = JSON.parse(str).module;
        mod != this.file_module && cc.log("remove temp file:" + jsb.fileUtils.removeFile(file));
      }
    };
    hotUpdateMgr.setDelegate = function(delegate) {
      this.delegate = delegate;
      this.hotup.setDelegate(delegate);
    };
    hotUpdateMgr.delDelegate = function() {
      delete this.delegate;
      this.hotup.delDelegate();
    };
    hotUpdateMgr.updateUnionSetManifest = function(assets) {
      var unionSet = {}, url = jsb.fileUtils.getWritablePath() + "2.0/unionSetManifest.manifest";
      cc.loader.md5Pipe && (url = cc.loader.md5Pipe.transformURL(url));
      jsb.fileUtils.isFileExist(url) && (unionSet = JSON.parse(jsb.fileUtils.getStringFromFile(url)));
      for (var key in assets) unionSet[key] = assets[key];
      jsb.fileUtils.writeStringToFile(JSON.stringify(unionSet), url);
    };
    hotUpdateMgr.check_after = function(finish) {
      this.setDownloadState(false);
      this.setDownloadingModule("");
      var path = jsb.fileUtils.getWritablePath() + this.updir;
      var file = path + "/version.manifest";
      var newfile = path + "/" + this.file_version;
      if (jsb.fileUtils.isFileExist(file)) {
        cc.log("version file exist");
        var str = jsb.fileUtils.getStringFromFile(file);
        var mod = JSON.parse(str).module;
        mod && mod == this.file_module ? file == newfile ? cc.log("rename same,so dont need to do, version.manifest") : cc.log("rename version:" + jsb.fileUtils.renameFile(file, newfile)) : cc.log("remove version file:" + jsb.fileUtils.removeFile(file));
      }
      file = path + "/project.manifest";
      cc.log("project", file, path);
      newfile = path + "/" + this.file_project;
      if (jsb.fileUtils.isFileExist(file)) {
        cc.log("project file exist");
        var _str = jsb.fileUtils.getStringFromFile(file);
        var obj = JSON.parse(_str);
        if ("main" == obj.module) {
          cc.sys.localStorage.setItem("subPackVersionList", JSON.stringify(obj.subPackVersionList));
          cc.sys.localStorage.setItem("mainPackVersion", JSON.stringify(obj.version));
        } else {
          this.updateUnionSetManifest(obj.assets);
          cc.sys.localStorage.setItem(obj.module + "ModuleVersion", obj.version);
        }
        obj.module && obj.module == this.file_module ? file == newfile ? cc.log("rename same,so dont need to do") : cc.log("rename project:" + jsb.fileUtils.renameFile(file, newfile)) : cc.log("remove project file:" + jsb.fileUtils.removeFile(file));
      } else cc.log("\u6587\u4ef6\u4e0d\u5b58\u5728", file);
    };
    hotUpdateMgr.UPDATE_PROGRESSION = function(event) {
      var p = event ? event.getPercent() : null;
      p;
    };
    hotUpdateMgr.ALREADY_UP_TO_DATE = function() {
      cc.log("-----\u5df2\u7ecf\u662f\u6700\u65b0\u6570\u636e");
      this.check_after(true);
    };
    hotUpdateMgr.UPDATE_FINISHED = function() {
      this.check_after(true);
    };
    hotUpdateMgr.UPDATE_FAILED = function() {
      this.check_after();
    };
    hotUpdateMgr.UPDATE_ERROR = function(event) {
      cc.log("update error ---------------------");
      var path = jsb.fileUtils.getWritablePath() + this.updir;
      jsb.fileUtils.isFileExist(path + "/project.manifest") && cc.log("project file exist ============");
      jsb.fileUtils.isFileExist(path + "/version.manifest") && cc.log("version file exist ============");
    };
    hotUpdateMgr.init();
    cc._RF.pop();
  }, {
    hotUpdate: "hotUpdate"
  } ],
  hotUpdate: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d903ezYwoJCCZfb9OGw1vtT", "hotUpdate");
    "use strict";
    var _newestVersion = "";
    cc.Class({
      properties: {
        _am: null,
        file_version: "version.manifest",
        file_project: "project.manifest",
        file_module: "",
        file_manifest: "",
        _version: "1.0.0",
        _times: 0
      },
      init: function init(data) {
        if (!data) return;
        data.file_version && (this.file_version = data.file_version);
        data.file_project && (this.file_project = data.file_project);
        data.file_module && (this.file_module = data.file_module);
        data.file_manifest && (this.file_manifest = data.file_manifest);
        data._version && (this._version = data._version);
        data.cbs && (this._cbs = data.cbs);
        data.delegate && (this._delegate = data.delegate);
        data.module && (this._module = data.module);
      },
      checkCb: function checkCb(event) {
        var _this = this;
        cc.log(event.getEventCode() + "  check cb=-------------------------------");
        var error = false, over = false;
        switch (event.getEventCode()) {
         case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
          error = true;
          break;

         case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
         case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
          error = true;
          break;

         case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
          over = true;
          this.emit("ALREADY_UP_TO_DATE");
          break;

         case jsb.EventAssetsManager.NEW_VERSION_FOUND:
          cc.log("NEW_VERSION_FOUND", _newestVersion, "module", this._module);
          var upgradeFunc = function upgradeFunc() {
            _this._am.setEventCallback(_this.updateCb.bind(_this));
            _this._am.update();
          };
          this._delegate.checkUpgradeCondition ? this._delegate.checkUpgradeCondition(_newestVersion, this._module, upgradeFunc) : upgradeFunc();
        }
        (error || over) && this._am.setEventCallback(null);
        error && this.emit("UPDATE_ERROR");
        this._delegate && this._delegate.updateCb(event, this._module);
      },
      setDelegate: function setDelegate(delegate) {
        this._delegate = delegate;
      },
      delDelegate: function delDelegate() {
        delete this._delegate;
      },
      updateCb: function updateCb(event) {
        var error = false, over = false;
        switch (event.getEventCode()) {
         case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
          error = true;
          break;

         case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
         case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
          error = true;
          break;

         case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
          over = true;
          this.emit("ALREADY_UP_TO_DATE");
          break;

         case jsb.EventAssetsManager.ERROR_DECOMPRESS:
          break;

         case jsb.EventAssetsManager.ERROR_UPDATING:
          cc.log("ERROR_UPDATING", "Asset update error: " + event.getAssetId() + ", " + event.getMessage());
          break;

         case jsb.EventAssetsManager.UPDATE_FINISHED:
          cc.log("upgrade finished\uff0cTotalFiles", event.getTotalFiles(), "TotalSize", event.getTotalBytes() / 1024 / 1024, "m");
          var newPaths = this._am.getLocalManifest().getSearchPaths();
          over = true;
          this.emit("UPDATE_FINISHED");
          break;

         case jsb.EventAssetsManager.UPDATE_FAILED:
          cc.log("UPDATE_FAILED--------------------------------");
          this._times++;
          if (this._times < 2) {
            this._am.downloadFailedAssets();
            return;
          }
          this._times = 0;
          over = true;
          this.emit("UPDATE_FAILED");
          break;

         case jsb.EventAssetsManager.UPDATE_PROGRESSION:
          this.emit("UPDATE_PROGRESSION", event);
        }
        (error || over) && this._am.setEventCallback(null);
        error && this.emit("UPDATE_ERROR");
        this._delegate && this._delegate.updateCb(event, this._module);
      },
      updateManifestFromUnionSet: function updateManifestFromUnionSet(url, unionSetUrl) {
        var data = JSON.parse(jsb.fileUtils.getStringFromFile(url));
        var unionSetData = JSON.parse(jsb.fileUtils.getStringFromFile(unionSetUrl));
        for (var key in data.assets) {
          unionSetData[key] || cc.error("\u5e76\u96c6\u8d44\u6e90\u6e05\u5355\u4e0d\u5b58\u5728\u5bf9\u8c61\uff1a", key);
          data.assets[key] = unionSetData[key];
        }
        jsb.fileUtils.writeStringToFile(JSON.stringify(data), url);
      },
      replaceManifestUrl: function replaceManifestUrl(fileDir, newUrl, module) {
        var data = JSON.parse(jsb.fileUtils.getStringFromFile(fileDir));
        data.packageUrl = newUrl + "remote-assets/";
        data.remoteManifestUrl = newUrl + "remote-assets/" + module + "_project.manifest";
        data.remoteVersionUrl = newUrl + "remote-assets/" + module + "_version.manifest";
        jsb.fileUtils.writeStringToFile(JSON.stringify(data), fileDir);
        cc.log("\u4fee\u6539\u540e\u7684Manifest", data);
      },
      check_update: function check_update(upurl, dir) {
        var _this2 = this;
        var path = jsb.fileUtils.getWritablePath() + dir;
        this._am = new jsb.AssetsManager("", path);
        this._am.setVersionCompareHandle(function(versionA, versionB) {
          cc.log("JS Custom Version Compare: version A is " + versionA + ", version B is " + versionB);
          _newestVersion = versionB;
          var vA = versionA.split(".");
          var vB = versionB.split(".");
          for (var i = 0; i < vA.length; ++i) {
            var a = parseInt(vA[i]);
            var b = parseInt(vB[i] || 0);
            if (a === b) continue;
            return a - b;
          }
          return vB.length > vA.length ? -1 : 0;
        }.bind(this));
        cc.sys.os === cc.sys.OS_ANDROID && this._am.setMaxConcurrentTask(2);
        this._am.setEventCallback(this.checkCb.bind(this));
        if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
          var url = path + "/" + this.file_project, unionSetManifestUrl = path + "/unionSetManifest.manifest";
          cc.log("url of project file:" + url, "; unionSetManifestUrl", unionSetManifestUrl);
          if (cc.loader.md5Pipe) {
            url = cc.loader.md5Pipe.transformURL(url);
            unionSetManifestUrl = cc.loader.md5Pipe.transformURL(unionSetManifestUrl);
          }
          var createManifest = function createManifest() {
            var assets = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            var fileurl = upurl + "/remote-assets/";
            var fileversion = fileurl + _this2.file_version;
            var fileproject = fileurl + _this2.file_project;
            var str = JSON.stringify({
              packageUrl: fileurl,
              remoteManifestUrl: fileproject,
              remoteVersionUrl: fileversion,
              version: _this2._version,
              assets: assets,
              searchPaths: [],
              module: _this2.file_module
            });
            return new jsb.Manifest(str, path);
          };
          if ("main" == this._module) if (jsb.fileUtils.isFileExist(url)) {
            this.replaceManifestUrl(url, hotUpdateMgr.url, this._module);
            this._am.loadLocalManifest(url);
          } else {
            url = this.file_project;
            cc.loader.md5Pipe && (url = cc.loader.md5Pipe.transformURL(url));
            if (jsb.fileUtils.isFileExist(url)) {
              var assets = JSON.parse(jsb.fileUtils.getStringFromFile(url)).assets;
              this._am.loadLocalManifest(createManifest(assets), path);
            } else this._am.loadLocalManifest(createManifest(), path);
          } else {
            var getExistAssets = function getExistAssets() {
              var assets = {}, assetsUrl = path + "/" + _this2.file_module + "_assets.manifest";
              cc.log("assetsUrl", assetsUrl);
              if (!jsb.fileUtils.isFileExist(assetsUrl)) {
                assetsUrl = _this2.file_module + "_assets.manifest";
                cc.log("assetsUrl=", assetsUrl, "\u662f\u5426\u5b58\u5728:", jsb.fileUtils.isFileExist(assetsUrl));
                if (!jsb.fileUtils.isFileExist(assetsUrl)) return assets;
              }
              var moduleAllAssets = JSON.parse(jsb.fileUtils.getStringFromFile(assetsUrl));
              var unionSetData = JSON.parse(jsb.fileUtils.getStringFromFile(unionSetManifestUrl));
              for (var key in moduleAllAssets) unionSetData[key] && (assets[key] = unionSetData[key]);
              return assets;
            };
            if (jsb.fileUtils.isFileExist(unionSetManifestUrl)) if (jsb.fileUtils.isFileExist(url)) {
              this.updateManifestFromUnionSet(url, unionSetManifestUrl);
              this.replaceManifestUrl(url, hotUpdateMgr.url, this._module);
              this._am.loadLocalManifest(url);
            } else {
              var _assets = getExistAssets();
              this._am.loadLocalManifest(createManifest(_assets), path);
            } else this._am.loadLocalManifest(createManifest(), path);
          }
        }
        if (!this._am.getLocalManifest() || !this._am.getLocalManifest().isLoaded()) {
          this.emit("UPDATE_ERROR");
          return;
        }
        this._am.checkUpdate();
      },
      get_manifest: function get_manifest() {
        return this._am.getLocalManifest();
      },
      release: function release() {
        this._am && this._am.setEventCallback(null);
      },
      emit: function emit(id, msg) {
        this._cbs[id](msg);
      }
    });
    cc._RF.pop();
  }, {} ],
  http: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e3c3euE36JHxLHiMcVfJCsX", "http");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    var _url = void 0;
    window._App = !!kf.getUrlArg("isApp");
    var _action = "";
    var _xhrList = [];
    var _key = 0;
    var _cookie = !!cc.sys.isNative && cc.sys.localStorage.getItem("_pokerGameCookie");
    var _domainName = jsb.reflection ? jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getUrl", "()Ljava/lang/String;") : "http://jack.kfcs123.com/";
    _domainName || (_domainName = "http://jack.kfcs123.com/");
    window.http = {
      init: function init() {
        _url = _domainName + "gameApi/";
      },
      setDomainName: function setDomainName(domainName) {
        _url = domainName + "gameApi/";
        return _domainName = domainName;
      },
      getDomainName: function getDomainName() {
        return _domainName;
      },
      get: function get(reqArg, cbEventName) {
        var url = "";
        this.connect(url, "GET", reqArg, cbEventName);
      },
      post: function post(reqArg, cbEventName, cbArg) {
        if ("DoPlay" == reqArg.action || "DoPlay" == reqArg.Action) {
          reqArg.roomId = "" + dataLogic.curGameId + dataLogic.curRoomKey;
          dataLogic.roomConfig.deskId ? reqArg.deskId = dataLogic.roomConfig.deskId : delete reqArg.deskId;
        }
        if ("GetInitData" == reqArg.action) {
          var arr = JSON.parse(reqArg.Requirement);
          arr = arr.concat("SiteConfig");
          var cacheData;
          for (var i = 0; i < arr.length; i++) if (dataLogic.CacheData[arr[i]]) {
            cacheData || (cacheData = {});
            cacheData[arr[i]] = dataLogic.CacheData[arr[i]];
          }
          cacheData && (reqArg.CacheData = JSON.stringify(cacheData));
        }
        reqArg.SourceType = _App ? cc.sys.os === cc.sys.OS_IOS ? "5" : "3" : cc.sys.os === cc.sys.OS_IOS ? "4" : "2";
        var start = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
          var r = 16 * Math.random() | 0, v = "x" == c ? r : 3 & r | 8;
          return v.toString(16);
        });
        reqArg.isNew = start + String.fromCharCode((start[0].charCodeAt() + start[0].charCodeAt()) % 10 + 99);
        cbEventName && cc.log("-----http\u8bf7\u6c42\uff1a----", cbEventName, reqArg);
        var msgData = {};
        var reqExtendArg = {
          timeoutRefresh: true,
          timeout: constant.httpTimeout,
          reRequested: false,
          allowAbort: true
        };
        for (var i in reqArg) {
          if ("reqExtendArg" == i) {
            for (var key in reqArg[i]) reqExtendArg[key] = reqArg[i][key];
            continue;
          }
          msgData[i] = reqArg[i];
        }
        _action = reqArg.action;
        null == _action && (_action = reqArg.Action);
        msgData = this.params(msgData);
        this.connect(_url + _action, "POST", msgData, cbEventName, cbArg, reqExtendArg, reqArg);
      },
      params: function params(data) {
        var arr = [];
        for (var i in data) arr.push(encodeURIComponent(i) + "=" + encodeURIComponent(data[i]));
        return arr.join("&");
      },
      connect: function connect(url, method, reqArg, cbEventName, cbArg, reqExtendArg, originalReqArg) {
        var _this = this;
        var xhr = new XMLHttpRequest();
        reqExtendArg.allowAbort && _xhrList.push(xhr);
        xhr.cbEventName = cbEventName;
        xhr.cbArg = kf.clone(cbArg);
        xhr.reqArg = reqArg;
        xhr.withCredentials = true;
        xhr.open(method, url, true);
        _cookie && xhr.setRequestHeader("Cookie", _cookie);
        xhr.onload = function() {
          _key = _xhrList.indexOf(xhr);
          _key > -1 && _xhrList.splice(_key, 1);
          var data = void 0;
          try {
            data = JSON.parse(xhr.responseText);
          } catch (e) {
            cc.warn(xhr.responseText, e.name + ": " + e.message);
            data = {
              Code: constant.HttpCode.error,
              StrCode: "\u8bf7\u6c42\u51fa\u9519"
            };
          }
          if (cc.sys.isNative) {
            var str = xhr.getAllResponseHeaders().split("set-cookie: ")[1];
            if (str) {
              _cookie = -1 == str.indexOf("HttpOnly") ? str.split(";")[0] + ";" + _cookie : str.split("HttpOnly")[0] + "HttpOnly";
              cc.sys.localStorage.setItem("_pokerGameCookie", _cookie);
            }
          }
          xhr.cbEventName && cc.log("Http action:", url.split("/")[1], xhr.cbEventName, data);
          var cb = {
            eventName: xhr.cbEventName,
            arg: xhr.cbArg
          };
          if ("object" == ("undefined" === typeof data ? "undefined" : _typeof(data)) && data.Code == constant.HttpCode.error) {
            data.isLightHint = reqExtendArg.isLightHint;
            data.hintPos = reqExtendArg.lightHintPos;
          }
          clientEvent.dispatchEvent("httpCbRepeater", data, cb, originalReqArg);
        };
        xhr.onerror = function(e) {
          console.log("\u8bf7\u6c42\u9519\u8bef", e, xhr.status);
          _key = _xhrList.indexOf(xhr);
          _key > -1 && _xhrList.splice(_key, 1);
          xhr.abort();
          if (reqExtendArg.reRequested) "POST" === method && _this.post(originalReqArg, cbEventName, cbArg); else if (cbEventName) {
            var cb = {
              eventName: xhr.cbEventName,
              arg: xhr.cbArg
            };
            var data = {
              Code: constant.HttpCode.Disconnect,
              StrCode: "\u8bf7\u6c42\u9519\u8bef"
            };
            clientEvent.dispatchEvent("httpCbRepeater", data, cb);
          }
        };
        cc.sys.isNative && 0 == reqExtendArg.timeout ? xhr.timeout = 36e5 : xhr.timeout = reqExtendArg.timeout;
        xhr.ontimeout = function(e) {
          xhr.abort();
          if (reqExtendArg.reRequested) "POST" === method && _this.post(originalReqArg, cbEventName, cbArg); else {
            cc.log("\u8bf7\u6c42\u8d85\u65f6", xhr.cbEventName);
            var cb = {
              eventName: xhr.cbEventName,
              arg: xhr.cbArg
            };
            var data = {
              Code: constant.HttpCode.Timeout,
              StrCode: "\u8bf7\u6c42\u8d85\u65f6",
              needRefresh: reqExtendArg.timeoutRefresh
            };
            clientEvent.dispatchEvent("httpCbRepeater", data, cb);
          }
        };
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        "POST" === method ? xhr.send(reqArg) : xhr.send(null);
      },
      abortAllReq: function abortAllReq() {
        for (var i = 0; i < _xhrList.length; i++) _xhrList[i].abort();
        _xhrList = [];
      }
    };
    http.init();
    cc._RF.pop();
  }, {} ],
  informAward: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c119fi8CqpC/KP6i8zNE2oO", "informAward");
    "use strict";
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txt: cc.Label
      },
      start: function start() {},
      init: function init() {
        this.toastShow();
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.clickAudio);
        switch (name) {
         case "contactService":
          if ("" == dataLogic.serviceAddr) {
            this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
            return;
          }
          dataLogic.openWindow(dataLogic.serviceAddr);
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  inputRoomNumber: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "21a62QZu5xIWakmUr2XpfEM", "inputRoomNumber");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loadGameResCb = null;
    var _loadGameResFailedCb = null;
    var _alterBalanceCb = null;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        inputRoomNumberBox: cc.Node,
        numberBtn_pf: cc.Prefab,
        inputBox: [ cc.Label ],
        numberSpriteAtlas: cc.SpriteAtlas,
        btnSprite: [ cc.SpriteFrame ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "tryJoinPKRoomCb", this.tryJoinPKRoomCb.bind(this) ], [ "reqRoomIdCb", this.reqRoomIdCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        this.createBtn();
        this.hasInputIndex = 0;
        _loadGameResCb = initArg.loadGameResCb;
        _loadGameResFailedCb = initArg.loadGameResFailedCb;
        _alterBalanceCb = initArg.alterBalanceCb;
      },
      createBtn: function createBtn() {
        var renderTxt = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, "\u6e05\u7a7a", 0, "\u5220\u9664" ];
        for (var i = 0; i < renderTxt.length; i++) {
          var node = cc.instantiate(this.numberBtn_pf);
          node.getChildByName("txt").getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.numberSpriteAtlas, i + 1);
          node.getComponent(cc.Sprite).spriteFrame = 9 == i || 11 == i ? 9 == i ? this.btnSprite[1] : this.btnSprite[2] : this.btnSprite[0];
          node.x = i % 3 * (node.width + 17) + node.width / 2 + 23;
          node.y = Math.floor(i / 3) * (-node.height - 8) - node.height / 2 - 18;
          node.parent = this.inputRoomNumberBox;
          var clickEventHandler = new cc.Component.EventHandler();
          clickEventHandler.target = this.node;
          clickEventHandler.component = "inputRoomNumber";
          clickEventHandler.handler = "inputNumber";
          clickEventHandler.customEventData = renderTxt[i];
          node.getComponent(cc.Button).clickEvents[0] = clickEventHandler;
        }
      },
      clearRoomBox: function clearRoomBox() {
        for (var i = 0; i < this.inputBox.length; i++) {
          this.inputBox[i].string = [ "\u8bf7", "\u8f93", "\u5165", "\u623f", "\u95f4", "\u53f7" ][i];
          this.inputBox[i].node.color = new cc.Color(183, 159, 147);
        }
        this.hasInputIndex = 0;
      },
      inputNumber: function inputNumber(event, val) {
        audioMgr.playEffect(this.clickAudio);
        if ("\u6e05\u7a7a" == val) {
          if (!this.hasInputIndex) return;
          this.clearRoomBox();
        } else if ("\u5220\u9664" == val) {
          if (!this.hasInputIndex) return;
          this.hasInputIndex--;
          for (var i = this.hasInputIndex; i < this.inputBox.length; i++) {
            this.inputBox[i].string = [ "\u8bf7", "\u8f93", "\u5165", "\u623f", "\u95f4", "\u53f7" ][i];
            this.inputBox[i].node.color = new cc.Color(183, 159, 147);
          }
        } else {
          6 == this.hasInputIndex && this.clearRoomBox();
          this.inputBox[this.hasInputIndex].string = val;
          this.inputBox[this.hasInputIndex].node.color = new cc.Color(145, 85, 56);
          this.hasInputIndex++;
          if (6 == this.hasInputIndex) {
            constant.PostJoinFriendRoom.roomNum = "";
            for (var _i = 0; _i < 6; _i++) constant.PostJoinFriendRoom.roomNum += this.inputBox[_i].string;
            var reqData = kf.clone(constant.PostJoinFriendRoom);
            reqData.type = 1;
            this.reqDateAndShowLoadView(reqData, "reqRoomIdCb", constant.PostJoinFriendRoom.roomNum, true);
          }
        }
      },
      reqRoomIdCb: function reqRoomIdCb(msg, roomNum) {
        var _this = this;
        cc.log("--------------reqRoomIdCb");
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) {
          if (constant.HttpCode.NotSufficientFunds == msg.Code) {
            this.showLayerTip(msg.StrCode);
            _alterBalanceCb(msg.Data);
          }
          return;
        }
        var gameId = msg.Data.roomId.substr(0, 2);
        var localVersion = hotUpdateMgr.getLocalSubModuleVersion(gameId);
        var version = hotUpdateMgr.getSubModuleVersion(gameId);
        if (kf.compareVersion(localVersion, version) < 0) {
          var hintStr = "1.0" == localVersion ? "\u60a8\u672a\u4e0b\u8f7d\u8be5\u6e38\u620f\uff0c\u8bf7\u5148\u524d\u5f80\u5927\u5385\u4e0b\u8f7d\u6e38\u620f\u540e\u518d\u64cd\u4f5c\u54e6\uff01" : "\u8be5\u6e38\u620f\u6709\u66f4\u65b0\u5305\uff0c\u8bf7\u5148\u524d\u5f80\u5927\u5385\u66f4\u65b0\u6e38\u620f\u540e\u518d\u64cd\u4f5c\u54e6\uff01";
          clientEvent.dispatchEvent("showLayerToast", {
            contentTxt: hintStr,
            btnTxt: [ null, "\u786e\u5b9a" ],
            btnEventName: [ null, "toastClose" ]
          }, 1);
          return;
        }
        var key = kf.getObjIndexByValue(dataLogic.friendRoomList, gameId, "gameTypeId");
        dataLogic.setSelectRoomConfig(dataLogic.friendRoomList[key].gameRoom);
        var sceneName = dataLogic.getGameSceneNameByGameId(msg.Data.roomId.substr(0, 2));
        cc.log(sceneName, "sceneName");
        constant.PostJoinFriendRoom.roomId = msg.Data.roomId;
        if (sceneName == constant.SceneName.Dzpk) {
          var Roomkey = msg.Data.roomId.replace("02", "");
          var balance = dataLogic.userBalance;
          if (dataLogic.carryChipNumData.length) constant.PostJoinFriendRoom.bringCoin = dataLogic.userBalance > dataLogic.carryChipNumData[Roomkey - 1] ? dataLogic.carryChipNumData[Roomkey - 1] : balance; else {
            var gameRoomConfig = dataLogic.friendRoomList[key].gameRoom;
            for (var j = 0; j < gameRoomConfig.length; j++) {
              var arr = [ gameRoomConfig[j].joinAmount, 20 * gameRoomConfig[j].joinAmount ];
              dataLogic.carryChipNumRange.push(arr);
              dataLogic.carryChipNumData.push(10 * gameRoomConfig[j].joinAmount);
            }
            constant.PostJoinFriendRoom.bringCoin = dataLogic.userBalance > dataLogic.carryChipNumData[Roomkey - 1] ? dataLogic.carryChipNumData[Roomkey - 1] : balance;
          }
        }
        _loadGameResCb(sceneName, function() {
          _this.reqData(constant.PostJoinFriendRoom, "tryJoinPKRoomCb", roomNum);
        });
      },
      tryJoinPKRoomCb: function tryJoinPKRoomCb(data, roomNum) {
        if (constant.HttpCode.Succeed != data.Code) {
          _loadGameResFailedCb();
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.showLayerTip(data.StrCode);
            _alterBalanceCb(data.Data);
          }
          return;
        }
        dataLogic.setRoomType(true);
        dataLogic.setRoomNum(roomNum);
        dataLogic.setNeedRecover(true);
        dataLogic.setReqRecoverState(true);
        dataLogic.setDeskId(data.Data.deskId);
        var gameId = data.Data.roomId.substr(0, 2);
        var sceneName = dataLogic.getGameSceneNameByGameId(gameId);
        dataLogic.setCurRoomKey(data.Data.roomId.substr(2, 1));
        dataLogic.setRoomConfig("roomId", data.Data.roomId);
        clientEvent.dispatchEvent("loadScene", sceneName, gameId);
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  joinRoomTip: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a0addk4YyBGc6mWfuwRa5JM", "joinRoomTip");
    "use strict";
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtContent: cc.Label
      },
      init: function init(initArg) {
        this.toastShow();
        var json = cc.sys.localStorage.getItem("SiteConfig");
        var siteConfig = JSON.parse(json);
        if (siteConfig.FriendRoomLimit) {
          var str = this.txtContent.string;
          str = str.replace("5. ", "5. \u5728\u597d\u53cb\u623f\u8fdb\u884c\u6e38\u620f\uff0c\u9700\u4fdd\u8bc1\u4f59\u989d\u81f3\u5c11\u4e3a" + siteConfig.FriendRoomLimit + "\u5143\u3002\n6. ");
          this.txtContent.string = str;
        }
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  kingConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "296fa1GDrFDzoF8+TZ2yqVa", "kingConstant");
    "use strict";
    window.kingConstant = window.kingConstant || {};
    kingConstant.MaxCollectNum = 8;
    var n = 0;
    kingConstant.IconId = {
      Hero1: n++,
      Hero2: n++,
      Hero3: n++,
      Hero4: n++,
      Hero5: n++,
      Hero6: n++,
      Hero7: n++,
      Hero8: n++,
      Wild: n++,
      Scatter: n++,
      Jackpot: n++
    };
    kingConstant.IconName = [ "hero1", "hero2", "hero3", "hero4", "hero5", "hero6", "hero7", "hero8", "wild", "scatter", "jackpot" ];
    kingConstant.ConstituteLineArrIndex = [ [ [ [ 1 ], [ 0 ] ], [ [ 1 ], [ 1 ] ], [ [ 1 ], [ 2 ] ], [ [ 1 ], [ 3 ] ], [ [ 1 ], [ 4 ] ] ], [ [ [ 0 ], [ 0 ] ], [ [ 0 ], [ 1 ] ], [ [ 0 ], [ 2 ] ], [ [ 0 ], [ 3 ] ], [ [ 0 ], [ 4 ] ] ], [ [ [ 2 ], [ 0 ] ], [ [ 2 ], [ 1 ] ], [ [ 2 ], [ 2 ] ], [ [ 2 ], [ 3 ] ], [ [ 2 ], [ 4 ] ] ], [ [ [ 0 ], [ 0 ] ], [ [ 1 ], [ 1 ] ], [ [ 2 ], [ 2 ] ], [ [ 1 ], [ 3 ] ], [ [ 0 ], [ 4 ] ] ], [ [ [ 2 ], [ 0 ] ], [ [ 1 ], [ 1 ] ], [ [ 0 ], [ 2 ] ], [ [ 1 ], [ 3 ] ], [ [ 2 ], [ 4 ] ] ], [ [ [ 1 ], [ 0 ] ], [ [ 0 ], [ 1 ] ], [ [ 0 ], [ 2 ] ], [ [ 0 ], [ 3 ] ], [ [ 1 ], [ 4 ] ] ], [ [ [ 1 ], [ 0 ] ], [ [ 2 ], [ 1 ] ], [ [ 2 ], [ 2 ] ], [ [ 2 ], [ 3 ] ], [ [ 1 ], [ 4 ] ] ], [ [ [ 0 ], [ 0 ] ], [ [ 0 ], [ 1 ] ], [ [ 1 ], [ 2 ] ], [ [ 2 ], [ 3 ] ], [ [ 2 ], [ 4 ] ] ], [ [ [ 2 ], [ 0 ] ], [ [ 2 ], [ 1 ] ], [ [ 1 ], [ 2 ] ], [ [ 0 ], [ 3 ] ], [ [ 0 ], [ 4 ] ] ] ];
    kingConstant.Spacing = 24.5;
    kingConstant.RollingStartY = 5;
    kingConstant.TotalRollingDistance = 5695;
    kingConstant.TotalRollingTime = 4;
    kingConstant.Columns = 5;
    kingConstant.Row = 3;
    kingConstant.ToastName = {
      InfoToast: "infoToast"
    };
    kingConstant.PreloadRes = {};
    n = 0;
    kingConstant.CollectState = {
      WaitStart: n++,
      Collecting: n++,
      Done: n++,
      Failed: n++
    };
    kingConstant.PostCheckGameState = {
      action: "DoDrawLottery",
      eventName: "checkGameState"
    };
    kingConstant.PostGetJackpot = {
      action: "DoDrawLottery",
      eventName: "getReward"
    };
    kingConstant.PostBaseGameBet = {
      action: "DoDrawLottery",
      eventName: "bet",
      betNum: null,
      betLine: null
    };
    kingConstant.PostBonusGameBet = {
      action: "DoDrawLottery",
      eventName: "bonusGame",
      betSeat: null,
      reqExtendArg: {
        timeoutRefresh: true,
        timeout: 5e3,
        reRequested: false
      }
    };
    kingConstant.PostExitBonusGame = {
      action: "DoDrawLottery",
      eventName: "leaveBonusGame"
    };
    cc._RF.pop();
  }, {} ],
  kingDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "672cbKsJgdKLpHR4ZIg7Cul", "kingDataLogic");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    window.kingDataLogic = {
      init: function init() {
        this.totalBetNum = 0;
        this.jackpotNum = 0;
        this.curBetLineNum = 0;
        this.curChoiceLineNum = 5;
        this.curChoiceBetKey = 0;
        this.lotteryIcon = [];
        this.lotteryLine = [ 5, 5, 5, 5, 5, 5, 5, 5, 5 ];
        this.jackpotEndTime = 0;
        this.isAutoStart = false;
        this.eanringsNum = 0;
        this.freeNum = 0;
        this.timeRemaining = 300;
        this.collectState = kingConstant.CollectState.WaitStart;
        this.isTriggerBonusGame = false;
        this.isReqServerTimeGoBackGameShow = false;
        this.bonusGameMultiNum = [];
        this.loadedDialogRes = false;
      },
      reqCheckGameState: function reqCheckGameState() {
        kingConstant.PostCheckGameState.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false
        };
        http.post(kingConstant.PostCheckGameState, "checkGameStateCb");
      },
      setReqServerTimeGoBackGameShow: function setReqServerTimeGoBackGameShow(isReq) {
        this.isReqServerTimeGoBackGameShow = isReq;
      },
      setTriggerBonusGame: function setTriggerBonusGame(isTrigger) {
        this.isTriggerBonusGame = isTrigger;
      },
      setEanringsNum: function setEanringsNum(num) {
        this.eanringsNum = num;
      },
      setDailogResLoadState: function setDailogResLoadState(state) {
        this.loadedDialogRes = state;
      },
      setBonusGameMulti: function setBonusGameMulti(multi) {
        this.bonusGameMultiNum[0] = multi[0];
        this.bonusGameMultiNum[1] = multi[1];
        this.bonusGameMultiNum[2] = multi[0];
      },
      setJackpotNum: function setJackpotNum(num) {
        cc.log("\u8bbe\u7f6e\u94ed\u6587\u6570", num);
        num > kingConstant.MaxCollectNum && (num = kingConstant.MaxCollectNum);
        this.jackpotNum = num;
        switch (num) {
         case kingConstant.MaxCollectNum:
          this.collectState = kingConstant.CollectState.Done;
          break;

         case 0:
          this.collectState = kingConstant.CollectState.WaitStart;
          break;

         default:
          this.collectState = kingConstant.CollectState.Collecting;
        }
      },
      setLotteryLine: function setLotteryLine(data) {
        this.lotteryLine = kf.clone(data);
      },
      setLotteryIcon: function setLotteryIcon(data) {
        this.lotteryIcon = kf.clone(data);
      },
      setTimeRemaining: function setTimeRemaining(time) {
        time = time < 0 ? 0 : time;
        this.timeRemaining = time;
      },
      setJackpotEndTime: function setJackpotEndTime(time) {
        this.jackpotEndTime = time;
      },
      setFreeNum: function setFreeNum(num) {
        this.freeNum = num;
      },
      setAutoStartState: function setAutoStartState(state) {
        this.isAutoStart = state;
      },
      setCurBetLineNum: function setCurBetLineNum(num) {
        this.curBetLineNum = num;
      },
      setCurChoiceLineNum: function setCurChoiceLineNum(num) {
        this.curChoiceLineNum = num;
        this.totalBetNum = num * dataLogic.betConfig[this.curChoiceBetKey];
      },
      setCurChoiceBetKey: function setCurChoiceBetKey(key) {
        this.curChoiceBetKey = key;
        this.totalBetNum = dataLogic.betConfig[key] * this.curChoiceLineNum;
      },
      getSecondTimeFomate: function getSecondTimeFomate(time) {
        var m = parseInt(time / 60);
        1 == m.toString().length && (m = "0" + m);
        var s = time % 60;
        1 == s.toString().length && (s = "0" + s);
        return m + ":" + s;
      }
    };
    kingDataLogic.init();
    cc._RF.pop();
  }, {} ],
  kingHelp: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4d44efzd1JKboPIyeqh4GzB", "kingHelp");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loadProcessCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        closeBtn: cc.Button,
        bg: cc.Node,
        helpMain: cc.Node,
        loadIconPf: cc.Prefab,
        sfHelp: [ cc.SpriteFrame ],
        spContent: cc.Sprite,
        toggleContainer: cc.ToggleContainer,
        spContentTxt: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getAboutCb", this.getAboutCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.bg.width = cc.winSize.width;
        this.bg.height = cc.winSize.height;
        this.registerEvent();
        this.bg.on(cc.Node.EventType.TOUCH_END, function() {});
      },
      loadResource: function loadResource() {
        var _this = this;
        if (kingDataLogic.loadedDialogRes) this.toastShow(); else {
          var arg = {
            type: constant.ToastType.Loading
          };
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var txt = load.getChildByName("txt").getComponent(cc.Label);
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
          var n = 0;
          _loadProcessCb = function _loadProcessCb() {
            n++;
            txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
          };
          this.schedule(_loadProcessCb, .1, 98);
          cc.log("===helpMain", this.helpMain.opacity);
          var preloadRes = [ {
            path: "king/common/UI/delayLoad",
            resType: "dir"
          } ];
          var loadDone = function loadDone() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            _this.toastShow();
            dataLogic.isToastLoad = true;
          };
          var loadTimeout = function loadTimeout() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            kf.killObj(_this.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      toastShow: function toastShow() {
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(.08, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.helpMain.runAction(seq);
        this.bg.active = true;
      },
      reuse: function reuse() {
        this.loadResource(constant.ToastName.InfoToast);
      },
      getAboutCb: function getAboutCb(msgData) {
        this.loadIcon && this.loadIcon.destroy();
        if (1 != msgData.Code || "" == msgData.Data.content) {
          this.aboutTit.string = "\u5173\u4e8e\u6211\u4eec";
          this.aboutContent.string = "\u656c\u8bf7\u671f\u5f85";
        } else {
          this.aboutTit.string = msgData.Data.title;
          this.aboutContent.string = msgData.Data.content;
          this.aboutContentParent.height = this.aboutContent.node.height;
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "closeBtn":
          this.helpMainClose();
        }
      },
      helpMainShow: function helpMainShow() {
        var toggleItems = this.toggleContainer.toggleItems;
        for (var i = 0; i < toggleItems.length; i++) if (toggleItems[i].isChecked) {
          this.toggleBind("content" + i);
          break;
        }
      },
      helpMainClose: function helpMainClose() {
        var _this2 = this;
        var seq = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0), cc.callFunc(function() {
          kf.killObj(_this2.node);
        }));
        this.helpMain.runAction(seq);
        this.bg.active = false;
      },
      toggleBtnEvent: function toggleBtnEvent(event, key) {
        this.toggleBind(key);
      },
      toggleBind: function toggleBind(sceneName) {
        this.loadIcon && this.loadIcon.destroy();
        this.loadIcon = cc.instantiate(this.loadIconPf);
        var delay = cc.delayTime(.125);
        var repeatForever = cc.repeatForever(cc.sequence(cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45), delay, cc.rotateBy(0, 45)));
        this.loadIcon.runAction(repeatForever);
        switch (sceneName) {
         case "content0":
          this.spContent.spriteFrame = this.sfHelp[0];
          this.spContentTxt.active = false;
          this.spContent.node.active = true;
          break;

         case "content1":
          this.spContent.spriteFrame = this.sfHelp[1];
          this.spContentTxt.active = false;
          this.spContent.node.active = true;
          break;

         case "content2":
          this.spContent.spriteFrame = this.sfHelp[2];
          this.spContentTxt.active = false;
          this.spContent.node.active = true;
          break;

         case "content3":
          this.spContent.spriteFrame = this.sfHelp[3];
          this.spContentTxt.active = false;
          this.spContent.node.active = true;
          break;

         case "content4":
          this.spContentTxt.active = true;
          this.spContentTxt.getComponent(cc.Label).string = "\u4e3a\u4e86\u7ed9\u73a9\u5bb6\u63d0\u4f9b\u957f\u671f\u7a33\u5b9a\u3001\u516c\u5e73\u3001\u6109\u5feb\u7684\u6e38\u620f\u73af\u5883\uff0c\u5e73\u53f0\u4f1a\u5728\u6bcf\u5c40\u6e38\u620f\u7ed3\u675f\u65f6\u6536\u53d6\u8d62\u5bb6\u5956\u91d1\u7684" + dataLogic.feeRate + "%\u4f5c\u4e3a\u623f\u8d39\u3002";
          this.spContent.node.active = false;
          break;

         default:
          cc.log("\u672a\u77e5\u4e8b\u4ef6\u540d", sceneName);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  kingRecordItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d1b94F0nD1D35wShbb7KiOj", "kingRecordItem");
    "use strict";
    var gameType = [ "Base game", "Bonus game", "Free game", "Jackpot" ];
    cc.Class({
      extends: cc.Component,
      properties: {
        bg: cc.Node,
        idNum: cc.Label,
        number: cc.Label,
        room: cc.Label,
        profit: cc.Label,
        dateTime: cc.Label
      },
      onLoad: function onLoad() {},
      init: function init(data, i) {
        this.bg.opacity = 0 == i % 2 ? 255 : 0;
        this.idNum.string = i + 1;
        this.number.string = data.deskNo;
        this.room.string = gameType[data.moduleId - 1];
        this.dateTime.string = data.createTime;
        if (0 == data.type) {
          this.profit.string = "-" + data.amount.toFixed(2);
          this.profit.node.color = new cc.color(115, 254, 239);
        } else {
          this.profit.string = "+" + data.amount.toFixed(2);
          this.profit.node.color = new cc.color(255, 143, 143);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  kingRecord: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "248c6wFj4VCYovyRoZrqQJm", "kingRecord");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loadProcessCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        closeBtn: cc.Button,
        bg: cc.Node,
        recordMain: cc.Node,
        nullRecord: cc.Label,
        itemPf: cc.Prefab,
        view: cc.Node,
        content: cc.Node,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        loadIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "syncRecordCb", this.syncRecordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      unregisterEvent: function unregisterEvent() {
        if (null == this.registerHandler) return;
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.bg.width = cc.winSize.width;
        this.bg.height = cc.winSize.height;
        this.bg.on(cc.Node.EventType.TOUCH_END, function() {});
        this.initCount = 10;
        this.content.y = this.view.height / 2;
        this.initRecordItem(this.initCount);
      },
      loadResource: function loadResource() {
        var _this = this;
        if (kingDataLogic.loadedDialogRes) this.toastShow(); else {
          var arg = {
            type: constant.ToastType.Loading
          };
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var txt = load.getChildByName("txt").getComponent(cc.Label);
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
          var n = 0;
          _loadProcessCb = function _loadProcessCb() {
            n++;
            txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
          };
          this.schedule(_loadProcessCb, .1, 98);
          var preloadRes = [ {
            path: "king/common/UI/delayLoad",
            resType: "dir"
          } ];
          var loadDone = function loadDone() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            _this.toastShow();
            kingDataLogic.setDailogResLoadState(true);
          };
          var loadTimeout = function loadTimeout() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            kf.killObj(_this.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      toastShow: function toastShow() {
        var _this2 = this;
        var seq = cc.sequence(cc.scaleTo(.08, 1.1, 1.1), cc.scaleTo(.03, 1, 1), cc.callFunc(function() {
          var repeatForever = cc.repeatForever(cc.rotateBy(1, 360));
          _this2.loadIcon.opacity = 255;
          _this2.loadIcon.runAction(repeatForever);
          var reqExtendArg = {
            timeoutRefresh: false
          };
          http.post({
            action: "GetUserFlowList",
            gameTypeId: constant.GameId.King,
            reqExtendArg: reqExtendArg
          }, "syncRecordCb", {
            timeoutRefresh: false
          });
        }));
        this.recordMain.scale = .7;
        this.recordMain.runAction(seq);
        this.recordMain.opacity = 255;
        this.bg.active = true;
      },
      unuse: function unuse() {
        this.unregisterEvent();
      },
      reuse: function reuse() {
        this.registerEvent();
        this.loadResource();
      },
      btnEvent: function btnEvent(event, key) {
        switch (key) {
         case "closeBtn":
          audioMgr.playEffect(this.clickAudio);
          this.recordMainClose();
        }
      },
      syncRecordCb: function syncRecordCb(msg) {
        this.loadIcon.opacity = 0;
        this.loadIcon.stopAllActions();
        1 == msg.Code ? this.showRecordItem(msg.Data) : kf.killObj(this.node);
      },
      recordMainClose: function recordMainClose() {
        var _this3 = this;
        var seq = cc.sequence(cc.scaleTo(.05, .7, .7), cc.callFunc(function() {
          _this3.hideRecordItem();
          kf.killObj(_this3.node);
        }));
        this.recordMain.runAction(seq);
        this.bg.active = false;
      },
      initRecordItem: function initRecordItem(initCount) {
        if (initCount == this.content.childrenCount) {
          this.hideRecordItem();
          return;
        }
        for (var i = 0; i < initCount; i++) {
          var item = cc.instantiate(this.itemPf);
          item.parent = this.content;
          item.name = "item" + i;
          item.opacity = 0;
          item.y = -(item.height / 2 + item.height * i);
          i % 2 === 1 && (item.getChildByName("bg").opacity = 0);
        }
      },
      hideRecordItem: function hideRecordItem() {
        var item = void 0;
        for (var i = 0; i < this.initCount; i++) {
          item = this.content.getChildByName("item" + i);
          item.opacity = 0;
        }
      },
      showRecordItem: function showRecordItem(data) {
        this.loadIcon.opacity = 0;
        this.loadIcon.stopAllActions();
        this.hideRecordItem();
        if (data.length > this.initCount) data.length = this.initCount; else if (0 == data.length) {
          this.nullRecord.node.active = true;
          return;
        }
        if (0 != data.length) {
          this.nullRecord.node.active = false;
          this.content.height = data.length * this.content.getChildByName("item0").height;
        }
        var item = void 0;
        for (var i = 0; i < data.length; i++) {
          item = this.content.getChildByName("item" + i);
          item.opacity = 255;
          item.getComponent("kingRecordItem").init(data[i], i);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  landlordsConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "bef27IcCNZB9Ly3TMtBJYSS", "landlordsConstant");
    "use strict";
    window.DDZConstant = window.DDZConstant || {};
    var n = 0;
    DDZConstant.CardType = {
      KingBomb: n++,
      Bomb: n++,
      Airplane: n++,
      Line: n++,
      DoubleLine: n++,
      FourWithTwo: n++,
      ThreeWithTwo: n++,
      ThreeWithOne: n++,
      ThreeLine: n++,
      Three: n++,
      Double: n++,
      Single: n++
    };
    DDZConstant.Stage = {
      CallScore: n++,
      ShowCard: n++,
      Matching: n++,
      GameOver: n++
    };
    DDZConstant.PostAutoPlay = {
      Action: "DoPlay",
      EventName: "autoPlay"
    };
    DDZConstant.PostCancelAutoPlay = {
      Action: "DoPlay",
      EventName: "cancelAutoPlay"
    };
    cc._RF.pop();
  }, {} ],
  landlordsDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "14193LypNlFFJN91Tg5nzJ6", "landlordsDataLogic");
    "use strict";
    function _toConsumableArray(arr) {
      if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
        return arr2;
      }
      return Array.from(arr);
    }
    var _remainder = 0;
    var _v1 = 0;
    var _v2 = 0;
    var _key = 0;
    var _card_A_Value = 14;
    var _card_2_Value = 15;
    var _card_Min_King_Value = 16;
    var _card_Max_King_Value = 17;
    var _notSortCardType = [ DDZConstant.CardType.ThreeWithOne, DDZConstant.CardType.ThreeWithTwo, DDZConstant.CardType.Airplane, DDZConstant.CardType.FourWithTwo ];
    var dataLogic = {
      getCardCorol: function getCardCorol(cardKey) {
        return Math.floor(cardKey / 13);
      }
    };
    var _getkeyByValue = function _getkeyByValue(value) {
      return _card_Max_King_Value - value;
    };
    window.DDZDataLogic = {
      init: function init() {
        this.resetData();
        this.unknownCardCount = [ 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4 ];
        this.cardData = [ 10, 20, 30, 40, 5, 6, 7, 2, 13, 21, 52, 11, 12, 15, 17, 1, 53 ];
        this.handCard = [ [ 53 ], [ 52 ], [ 1, 1, 1, 1 ], [ 0, 0, 0, 0 ], [ 12, 12, 12, 12 ], [ 11, 11, 11, 11 ], [ 10, 10, 10, 10 ], [ 9, 9, 9, 9 ], [ 8, 8, 8, 8 ], [ 7, 7, 7, 7 ], [ 6, 6, 6, 6 ], [ 5, 5, 5, 5 ], [ 4, 4, 4, 4 ], [ 3, 3, 3, 3 ], [ 2, 2, 2, 2 ] ];
        this.isLandlord = false;
        this.landlordUISeatId = 0;
        this.curStage = DDZConstant.Stage.GameOver;
        this.isAutoPlay = false;
      },
      resetCardData: function resetCardData() {
        var cards = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
        this.unknownCardCount = [ 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4 ];
        this.setCardData(cards);
      },
      setLandlord: function setLandlord(landlordUISeatId) {
        this.landlordUISeatId = landlordUISeatId;
        this.isLandlord = landlordUISeatId == constant.SelfUISeatId;
      },
      setCurStage: function setCurStage(stage) {
        this.curStage = stage;
      },
      setAutoPlayState: function setAutoPlayState(state) {
        this.isAutoPlay = state;
      },
      subUnknownCardCount: function subUnknownCardCount(cards) {
        var key = 0;
        for (var i = 0; i < cards.length; i++) {
          _v1 = this.getCardValue(cards[i]);
          key = _getkeyByValue(_v1);
          this.unknownCardCount[key]--;
        }
      },
      setCardData: function setCardData(data) {
        this.cardData = this.sortCard(data);
        for (var i = 0; i < 15; i++) this.handCard[i] = [];
        for (var _i = 0; _i < this.cardData.length; _i++) {
          _v1 = this.getCardValue(this.cardData[_i]);
          this.handCard[_card_Max_King_Value - _v1].push(this.cardData[_i]);
        }
      },
      delCardData: function delCardData(data) {
        for (var i = 0; i < data.length; i++) {
          _key = this.cardData.indexOf(data[i]);
          -1 == _key && cc.error("\u627e\u4e0d\u5230\u724c", data[i]);
          _v1 > -1 && this.cardData.splice(_key, 1);
          _v1 = this.getCardValue(data[i]);
          _key = this.handCard[_card_Max_King_Value - _v1].indexOf(data[i]);
          this.handCard[_card_Max_King_Value - _v1].splice(_key, 1);
        }
      },
      setUnknownCardCount: function setUnknownCardCount(list) {
        this.unknownCardCount = list;
      },
      resetData: function resetData() {
        this.unknownCardCount = [ 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4 ];
      },
      isBiggerCard: function isBiggerCard(selfCards, lastPlayerCards, selfCardType, lastPlayerCardType) {
        if (DDZConstant.CardType.KingBomb == selfCardType) return true;
        if (DDZConstant.CardType.KingBomb == lastPlayerCardType) return false;
        if (selfCardType == lastPlayerCardType) {
          if (selfCards.length == lastPlayerCards.length) {
            _v1 = this.getCardValue(selfCards[0]);
            _v2 = this.getCardValue(lastPlayerCards[0]);
            return _v1 > _v2;
          }
          return false;
        }
        if (selfCardType == DDZConstant.CardType.Bomb) return true;
        return false;
      },
      getLargerBomb: function getLargerBomb(card) {
        var isFilterKing = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        var _v1 = null == card ? this.handCard.length - 1 : this.handCard.length - (this.getCardValue(card) - 1);
        var schemes = [];
        for (var i = _v1; i > 1; i--) 4 == this.handCard[i].length && schemes.push(this.handCard[i]);
        isFilterKing || 1 == this.handCard[0].length && 1 == this.handCard[1].length && schemes.push([ this.handCard[0][0], this.handCard[1][0] ]);
        return schemes;
      },
      getLargerSingleCards: function getLargerSingleCards(card) {
        var _v1 = null == card ? this.handCard.length - 1 : this.handCard.length - (this.getCardValue(card) - 1), schemes = [];
        var endKey = this.handCard[0].length + this.handCard[1].length == 1 ? -1 : 1;
        for (var i = _v1; i > endKey; i--) 1 == this.handCard[i].length && schemes.push([ this.handCard[i][0] ]);
        if (0 == schemes.length) for (var _i2 = _v1; _i2 > 1; _i2--) 2 == this.handCard[_i2].length && schemes.push([ this.handCard[_i2][0] ]);
        if (0 == schemes.length) for (var _i3 = _v1; _i3 > 1; _i3--) 3 == this.handCard[_i3].length && schemes.push([ this.handCard[_i3][0] ]);
        return schemes;
      },
      getLargerLineCards: function getLargerLineCards(cards) {
        if (this.getCardValue(cards[0]) == _card_A_Value) return [];
        var _v1 = this.handCard.length - (this.getCardValue(cards[0]) - 1), schemes = [], LineCount = cards.length, line = [];
        var j = void 0, n = void 0;
        for (var i = _v1; i > 2; i--) {
          j = i, n = 0;
          while (n < LineCount) {
            if (!(this.handCard[j].length > 0)) break;
            line.push(this.handCard[j][0]);
            n++, j++;
          }
          LineCount == line.length && schemes.push(line);
          line = [];
        }
        return schemes;
      },
      getLargerDoubleLineCards: function getLargerDoubleLineCards(cards) {
        if (this.getCardValue(cards[0]) == _card_A_Value) return [];
        var _v1 = this.handCard.length - (this.getCardValue(cards[0]) - 1), schemes = [], LineCount = cards.length / 2, line = [];
        var j = void 0, n = void 0;
        for (var i = _v1; i > 2; i--) {
          j = i, n = 0;
          while (n < LineCount) {
            if (!(this.handCard[j].length > 1)) break;
            var _line;
            (_line = line).push.apply(_line, _toConsumableArray(this.handCard[j].slice(0, 2)));
            n++, j++;
          }
          LineCount == line.length / 2 && schemes.push(line);
          line = [];
        }
        return schemes;
      },
      getLargerThreeCards: function getLargerThreeCards(cards) {
        var _v1 = this.handCard.length - (this.getCardValue(cards[0]) - 1), schemes = [];
        for (var i = _v1; i > 1; i--) 3 == this.handCard[i].length && schemes.push(this.handCard[i]);
        return schemes;
      },
      getLargerThreeLineCards: function getLargerThreeLineCards(cards) {
        if (this.getCardValue(cards[0]) == _card_A_Value) return [];
        var _v1 = this.handCard.length - (this.getCardValue(cards[0]) - 1), schemes = [], LineCount = cards.length / 3, line = [];
        var j = 0, n = 0;
        for (var i = _v1; i > 2; i--) {
          j = i, n = 0;
          while (n < LineCount) {
            if (!(this.handCard[j].length > 2)) break;
            var _line2;
            (_line2 = line).push.apply(_line2, _toConsumableArray(this.handCard[j].slice(0, 3)));
            n++, j++;
          }
          LineCount == line.length / 3 && schemes.push(line);
          line = [];
        }
        return schemes;
      },
      getLargerDoubleCards: function getLargerDoubleCards(cards) {
        var _v1 = null == cards ? this.handCard.length - 1 : this.handCard.length - (this.getCardValue(cards[0]) - 1), schemes = [];
        for (var i = _v1; i > -1; i--) 2 == this.handCard[i].length && schemes.push(this.handCard[i]);
        if (0 == schemes.length) for (var _i4 = _v1; _i4 > -1; _i4--) 3 == this.handCard[_i4].length && schemes.push(this.handCard[_i4].slice(0, 2));
        return schemes;
      },
      getLargerThreeWithOneCards: function getLargerThreeWithOneCards(cards) {
        var schemes = [], threeCardSchemes = void 0, singleCardSchemes = void 0;
        threeCardSchemes = this.getLargerThreeCards(cards.slice(0, 3));
        if (0 == threeCardSchemes.length) return threeCardSchemes;
        singleCardSchemes = this.getLargerSingleCards();
        for (var i = 0; i < threeCardSchemes.length; i++) for (var j = 0; j < singleCardSchemes.length; j++) {
          _v1 = this.getCardValue(threeCardSchemes[i][0]);
          _v2 = this.getCardValue(singleCardSchemes[j][0]);
          if (_v1 != _v2) {
            schemes.push(threeCardSchemes[i].concat(singleCardSchemes[j]));
            break;
          }
        }
        return schemes;
      },
      getLargerThreeWithDoubleCards: function getLargerThreeWithDoubleCards(cards) {
        var schemes = [], threeCardSchemes = void 0, doubleCardSchemes = void 0;
        threeCardSchemes = this.getLargerThreeCards(cards.slice(0, 3));
        if (0 == threeCardSchemes.length) return threeCardSchemes;
        doubleCardSchemes = this.getLargerDoubleCards();
        for (var i = 0; i < threeCardSchemes.length; i++) for (var j = 0; j < doubleCardSchemes.length; j++) {
          _v1 = this.getCardValue(threeCardSchemes[i][0]);
          _v2 = this.getCardValue(doubleCardSchemes[j][0]);
          if (_v1 != _v2) {
            schemes.push(threeCardSchemes[i].concat(doubleCardSchemes[j]));
            break;
          }
        }
        return schemes;
      },
      getAirplaneWithSingleCards: function getAirplaneWithSingleCards(threeLine, threeLineCount) {
        var schemes = [], _v3 = void 0, _v4 = void 0;
        for (var i = this.handCard.length - 1; i > 1; i--) if (1 == this.handCard[i].length) schemes.push(this.handCard[i]); else if (4 == this.handCard[i].length) {
          _v1 = this.getCardValue(this.handCard[i][0]);
          for (var _j = 0; _j < threeLineCount; _j++) {
            _v2 = this.getCardValue(threeLine[3 * _j]);
            _v1 == _v2 && schemes.push([ this.handCard[i][3] ]);
          }
        }
        1 == this.handCard[0].length && 0 == this.handCard[1].length ? schemes.push(this.handCard[0]) : 0 == this.handCard[0].length && 1 == this.handCard[1].length && schemes.push(this.handCard[1]);
        if (2 == threeLineCount) {
          _v1 = this.getCardValue(threeLine[0]);
          _v2 = this.getCardValue(threeLine[3]);
          _v3 = this.getCardValue(schemes[0][0]);
          _v4 = this.getCardValue(schemes[1][0]);
          _v1 == _v4 && _v2 == _v3 && schemes.splice(1, 1);
        }
        if (schemes.length >= threeLineCount) return schemes;
        var j = 0, isAddFailed = void 0;
        for (var _i5 = this.handCard.length - 1; _i5 > 1; _i5--) if (2 == this.handCard[_i5].length) for (var k = 0; k < 2; k++) {
          schemes.push([ this.handCard[_i5][k] ]);
          if (threeLineCount == schemes.length) return schemes;
        }
        for (var _i6 = this.handCard.length - 1; _i6 > 1; _i6--) if (3 == this.handCard[_i6].length) {
          _v1 = this.getCardValue(this.handCard[_i6][0]);
          for (j = 0; j < threeLineCount; j++) {
            _v2 = this.getCardValue(threeLine[3 * j]);
            if (_v1 == _v2) break;
          }
          if (j == threeLineCount) for (var _k = 0; _k < 3; _k++) {
            schemes.push([ this.handCard[_i6][_k] ]);
            if (threeLineCount == schemes.length) return schemes;
          }
        }
        return schemes;
      },
      getAirplaneWithDoubleCards: function getAirplaneWithDoubleCards(threeLine, threeLineCount) {
        var schemes = [];
        for (var i = this.handCard.length - 1; i > -1; i--) 2 == this.handCard[i].length && schemes.push(this.handCard[i]);
        if (schemes.length >= threeLineCount) return schemes;
        var j = 0;
        for (var _i7 = this.handCard.length - 1; _i7 > 1; _i7--) if (2 == this.handCard[_i7].length) {
          _v1 = this.getCardValue(this.handCard[_i7][0]);
          for (j = 0; j < threeLineCount; j++) {
            _v2 = this.getCardValue(threeLine[3 * j]);
            if (_v1 == _v2) break;
          }
          if (j == threeLineCount) {
            schemes.push(this.handCard[_i7].slice(0, 2));
            if (schemes.length == threeLineCount) return schemes;
          }
        }
        for (var _i8 = this.handCard.length - 1; _i8 > 1; _i8--) if (3 == this.handCard[_i8].length) {
          _v1 = this.getCardValue(this.handCard[_i8][0]);
          for (j = 0; j < threeLineCount; j++) {
            _v2 = this.getCardValue(threeLine[3 * j]);
            if (_v1 == _v2) break;
          }
          if (j == threeLineCount) {
            schemes.push(this.handCard[_i8].slice(0, 2));
            if (schemes.length == threeLineCount) return schemes;
          }
        }
        return schemes;
      },
      getLargerAirplaneCards: function getLargerAirplaneCards(cards) {
        var threeLineCardSchemes = void 0, withCardSchemes = void 0, isWithSingle = cards.length % 4 == 0;
        var threeLineCount = isWithSingle ? cards.length / 4 : cards.length / 5;
        var threeLine = cards.slice(0, 3 * threeLineCount);
        threeLineCardSchemes = this.getLargerThreeLineCards(threeLine);
        if (0 == threeLineCardSchemes.length) return [];
        var getWithCardSchemes = isWithSingle ? this.getAirplaneWithSingleCards.bind(this) : this.getAirplaneWithDoubleCards.bind(this);
        var k = 0, schemes = [], withCards = void 0, arr = void 0;
        for (var i = 0; i < threeLineCardSchemes.length; i++) {
          withCardSchemes = getWithCardSchemes(threeLineCardSchemes[i], threeLineCount);
          if (withCardSchemes.length < threeLineCount) continue;
          arr = withCardSchemes.slice(0, threeLineCount);
          withCards = this.sortCard(kf.flattenArr(arr));
          schemes.push(threeLineCardSchemes[i].concat(withCards));
        }
        return schemes;
      },
      getLargerFourWithTwoCards: function getLargerFourWithTwoCards(cards) {
        var schemes = [], fourCardSchemes = void 0, withCardSchemes = void 0;
        fourCardSchemes = this.getLargerBomb(cards[0], true);
        if (0 == fourCardSchemes.length) return [];
        var isWithSingle = 6 == cards.length;
        withCardSchemes = isWithSingle ? this.getLargerSingleCards() : this.getLargerDoubleCards();
        if (withCardSchemes.length < 2) return [];
        cc.log("\u5e26\u724c\u65b9\u6848", withCardSchemes);
        var arr = null;
        for (var i = 0; i < fourCardSchemes.length; i++) for (var j = 0; j < withCardSchemes.length - 1; j++) {
          arr = withCardSchemes.slice(j, j + 2);
          arr = kf.flattenArr(arr);
          cc.log("=====arr", arr);
          isWithSingle, schemes.push(fourCardSchemes[i].concat(arr));
        }
        return schemes;
      },
      getLargerCards: function getLargerCards(cards, cardType) {
        cc.log("\u83b7\u53d6\u8f83\u5927\u7684\u724c\u578b", cards, cardType);
        if (null == cardType) {
          cc.error("\u724c\u578b\u4e0d\u80fd\u4e3a\u7a7a");
          return;
        }
        var schemes = [];
        if (cardType == DDZConstant.CardType.KingBomb) return schemes;
        if (cards.length <= this.cardData.length) switch (cardType) {
         case DDZConstant.CardType.Single:
          schemes = this.getLargerSingleCards(cards[0]);
          break;

         case DDZConstant.CardType.Double:
          schemes = this.getLargerDoubleCards(cards);
          break;

         case DDZConstant.CardType.Line:
          schemes = this.getLargerLineCards(cards);
          break;

         case DDZConstant.CardType.DoubleLine:
          schemes = this.getLargerDoubleLineCards(cards);
          break;

         case DDZConstant.CardType.Three:
          schemes = this.getLargerThreeCards(cards);
          break;

         case DDZConstant.CardType.ThreeLine:
          schemes = this.getLargerThreeLineCards(cards);
          break;

         case DDZConstant.CardType.ThreeWithOne:
          schemes = this.getLargerThreeWithOneCards(cards);
          break;

         case DDZConstant.CardType.ThreeWithTwo:
          schemes = this.getLargerThreeWithDoubleCards(cards);
          break;

         case DDZConstant.CardType.Airplane:
          schemes = this.getLargerAirplaneCards(cards);
          break;

         case DDZConstant.CardType.FourWithTwo:
          schemes = this.getLargerFourWithTwoCards(cards);
        }
        var list = void 0;
        list = DDZConstant.CardType.Bomb == cardType ? this.getLargerBomb(cards[0]) : this.getLargerBomb();
        list.length > 0 && (schemes = schemes.concat(list));
        if (0 == schemes.length) cc.log("\u6ca1\u6709\u53ef\u4ee5\u5927\u7684\u724c"); else for (var i = 0; i < schemes.length; i++) cc.log("\u63d0\u793a\u65b9\u6848", schemes[i]);
        return schemes;
      },
      sortCard: function sortCard(cards) {
        var _this = this;
        var cardList = kf.clone(cards);
        var color1 = void 0, color2 = void 0;
        cardList.sort(function(card1, card2) {
          _v1 = _this.getCardValue(card1);
          _v2 = _this.getCardValue(card2);
          color1 = dataLogic.getCardCorol(card1);
          color2 = dataLogic.getCardCorol(card2);
          return _v1 != _v2 ? _v2 - _v1 : color1 != color2 ? color2 - color1 : 0;
        });
        return cardList;
      },
      getCardType: function getCardType(cards) {
        cards = this.sortCard(cards);
        if (53 == cards[0] && 52 == cards[1] && cards.length > 2) {
          cc.log("\u5927\u5c0f\u738b\u540c\u65f6\u51fa\u73b0,\u4e0d\u80fd\u51fa\u73b0\u5176\u4ed6\u7684\u724c", cards);
          return {
            cardType: -1,
            cards: cards
          };
        }
        if (1 == cards.length) return {
          cardType: DDZConstant.CardType.Single,
          cards: cards
        };
        if (this.isKingBomb(cards)) return {
          cardType: DDZConstant.CardType.KingBomb,
          cards: cards
        };
        if (this.isBomb(cards)) return {
          cardType: DDZConstant.CardType.Bomb,
          cards: cards
        };
        var yes = this.isFourWithTwo(cards);
        if (yes) return {
          cardType: DDZConstant.CardType.FourWithTwo,
          cards: yes
        };
        if (this.isThreeLine(cards)) return {
          cardType: DDZConstant.CardType.ThreeLine,
          cards: cards
        };
        yes = this.isAirplane(cards);
        if (yes) return {
          cardType: DDZConstant.CardType.Airplane,
          cards: yes
        };
        yes = this.isThreeWithDouble(cards);
        if (yes) return {
          cardType: DDZConstant.CardType.ThreeWithTwo,
          cards: yes
        };
        yes = this.isThreeWithOne(cards);
        if (yes) return {
          cardType: DDZConstant.CardType.ThreeWithOne,
          cards: yes
        };
        if (this.isThree(cards)) return {
          cardType: DDZConstant.CardType.Three,
          cards: cards
        };
        if (this.isDoubleLine(cards)) return {
          cardType: DDZConstant.CardType.DoubleLine,
          cards: cards
        };
        if (this.isLine(cards)) return {
          cardType: DDZConstant.CardType.Line,
          cards: cards
        };
        return this.isDouble(cards) ? {
          cardType: DDZConstant.CardType.Double,
          cards: cards
        } : {
          cardType: -1,
          cards: cards
        };
      },
      isKingBomb: function isKingBomb(cards) {
        if (2 == cards.length && 53 == cards[0] && 52 == cards[1]) return true;
        return false;
      },
      isBomb: function isBomb(cards) {
        if (4 == cards.length) return this.isAllValueSame(cards);
        return false;
      },
      isFourWithTwo: function isFourWithTwo(cards) {
        var _cardList, _cardList2, _cardList4, _cardList5;
        var index = this.getSameCardValueIndexOf(cards, 4);
        if (-1 == index) return false;
        if (6 == cards.length) {
          var cardList = [];
          switch (index) {
           case 0:
            cardList = cards;
            break;

           case 1:
            cardList = cards.slice(1, 5);
            cards.splice(1, 4);
            (_cardList = cardList).push.apply(_cardList, _toConsumableArray(cards));
            break;

           case 2:
            cardList = cards.slice(2, 6);
            cards.splice(2, 4);
            (_cardList2 = cardList).push.apply(_cardList2, _toConsumableArray(cards));
          }
          return cardList;
        }
        if (8 == cards.length && 0 == index % 2) {
          var _cardList3 = [];
          switch (index) {
           case 0:
            _v1 = this.getCardValue(cards[4]);
            _v2 = this.getCardValue(cards[5]);
            if (_v1 != _v2) return false;
            _v1 = this.getCardValue(cards[6]);
            _v2 = this.getCardValue(cards[7]);
            if (_v1 != _v2) return false;
            _cardList3 = cards;
            break;

           case 2:
            _v1 = this.getCardValue(cards[0]);
            _v2 = this.getCardValue(cards[1]);
            if (_v1 != _v2) return false;
            _v1 = this.getCardValue(cards[6]);
            _v2 = this.getCardValue(cards[7]);
            if (_v1 != _v2) return false;
            _cardList3 = cards.slice(2, 6);
            cards.splice(2, 4);
            (_cardList4 = _cardList3).push.apply(_cardList4, _toConsumableArray(cards));
            break;

           case 4:
            _v1 = this.getCardValue(cards[0]);
            _v2 = this.getCardValue(cards[1]);
            if (_v1 != _v2) return false;
            _v1 = this.getCardValue(cards[2]);
            _v2 = this.getCardValue(cards[3]);
            if (_v1 != _v2) return false;
            _cardList3 = cards.slice(4, 8);
            cards.splice(4, 4);
            (_cardList5 = _cardList3).push.apply(_cardList5, _toConsumableArray(cards));
          }
          return _cardList3;
        }
        return false;
      },
      isThreeLine: function isThreeLine(cards) {
        if (cards.length < 5 || 0 != cards.length % 3 || this.getCardValue(cards[0]) > _card_A_Value) return false;
        var mod = 0;
        for (var i = 0; i < cards.length - 2; i++) {
          mod = i % 3;
          if (1 == mod) continue;
          _v1 = this.getCardValue(cards[i]);
          if (0 == mod) {
            _v2 = this.getCardValue(cards[i + 2]);
            if (_v1 != _v2) return false;
          } else {
            _v2 = this.getCardValue(cards[i + 1]);
            if (_v1 != _v2 + 1) return false;
          }
        }
        return true;
      },
      _isAirplaneWithOne: function _isAirplaneWithOne(cards) {
        if (20 == cards.length) {
          _v1 = this.getCardValue(cards[0]);
          _v2 = this.getCardValue(cards[19]);
          if (_v1 != _card_2_Value && _v1 == _v2 + 4) return true;
          return false;
        }
        0 == cards.length % 4 && (isWithOne = true);
      },
      isAirplane: function isAirplane(cards) {
        if (cards.length < 8) return false;
        if (!(cards.length % 5 == 0 || cards.length % 4 == 0)) return false;
        var threeSameCards = [];
        var otherCards = [];
        var _v3 = 0;
        for (var _i9 = 0; _i9 < cards.length; _i9++) {
          _v1 = this.getCardValue(cards[_i9]);
          if (_v1 > _card_A_Value) {
            otherCards.push(cards[_i9]);
            continue;
          }
          _v2 = this.getCardValue(cards[_i9 + 2]);
          if (_v1 == _v2) {
            for (var j = _i9; j < _i9 + 3; j++) threeSameCards.push(cards[j]);
            _i9 += 2;
          } else otherCards.push(cards[_i9]);
        }
        var a = [];
        for (var _i10 = 0; _i10 < threeSameCards.length; _i10 += 3) a.push(threeSameCards[_i10]);
        var maxLineCount = 0, off = void 0, maxLineStartKey = void 0;
        for (var _i11 = 0; _i11 < a.length; _i11++) {
          _v1 = this.getCardValue(a[_i11]);
          for (var _j2 = a.length - 1; _j2 > _i11; _j2--) {
            _v2 = this.getCardValue(a[_j2]);
            off = _j2 - _i11;
            if (_v1 == _v2 + off && off > maxLineCount) {
              maxLineCount = off + 1;
              maxLineStartKey = _i11;
            }
          }
        }
        var i = 0;
        while (i < 3 * maxLineStartKey) {
          otherCards.push(threeSameCards.shift());
          i++;
        }
        i = 0;
        var n = threeSameCards.length - 3 * maxLineCount;
        while (i < n) {
          otherCards.push(threeSameCards.pop());
          i++;
        }
        var isAirplane = false;
        if (maxLineCount == otherCards.length) isAirplane = true; else if (2 * maxLineCount == otherCards.length) {
          otherCards = this.sortCard(otherCards);
          for (var _j3 = 0; _j3 < otherCards.length; _j3 += 2) {
            _v1 = this.getCardValue(otherCards[_j3]);
            _v2 = this.getCardValue(otherCards[_j3 + 1]);
            if (_v1 != _v2) return false;
          }
          isAirplane = true;
        } else if (maxLineCount - 1 == otherCards.length + 3) {
          for (var _j4 = 0; _j4 < 3; _j4++) otherCards.push(threeSameCards.pop());
          isAirplane = true;
        } else if (maxLineCount - 1 == (otherCards.length + 3) / 2) {
          _v1 = this.getCardValue(otherCards[0]);
          _v2 = this.getCardValue(threeSameCards[0]);
          var _v = this.getCardValue(threeSameCards[threeSameCards.length - 1]);
          if (_v1 == _v2) for (var _j5 = 0; _j5 < 3; _j5++) otherCards.push(threeSameCards.shift()); else {
            if (_v1 != _v) return false;
            for (var _j6 = 0; _j6 < 3; _j6++) otherCards.push(threeSameCards.pop());
          }
          isAirplane = true;
        }
        if (isAirplane) {
          otherCards = this.sortCard(otherCards);
          threeSameCards.push.apply(threeSameCards, _toConsumableArray(otherCards));
          return threeSameCards;
        }
        return false;
      },
      isThreeWithDouble: function isThreeWithDouble(cards) {
        if (5 == cards.length) {
          var index = this.getSameCardValueIndexOf(cards, 3);
          if (0 == index) {
            _v1 = this.getCardValue(cards[3]);
            _v2 = this.getCardValue(cards[4]);
            if (_v1 == _v2) return cards;
            return false;
          }
          if (2 == index) {
            _v1 = this.getCardValue(cards[0]);
            _v2 = this.getCardValue(cards[1]);
            if (_v1 == _v2) {
              cards.push(cards.shift());
              cards.push(cards.shift());
              return cards;
            }
            return false;
          }
        }
        return false;
      },
      isThreeWithOne: function isThreeWithOne(cards) {
        if (4 == cards.length) {
          var index = this.getSameCardValueIndexOf(cards, 3);
          if (-1 == index) return false;
          if (0 == index) return cards;
          cards.push(cards.shift());
          return cards;
        }
        return false;
      },
      isThree: function isThree(cards) {
        if (3 == cards.length) return this.isAllValueSame(cards);
        return false;
      },
      isDoubleLine: function isDoubleLine(cards) {
        _v1 = this.getCardValue(cards[0]);
        if (_v1 > _card_A_Value) return false;
        if (cards.length < 6 || 0 != cards.length % 2) return false;
        var mod = 0;
        for (var i = 0; i < cards.length - 1; i++) {
          _v1 = this.getCardValue(cards[i]);
          _v2 = this.getCardValue(cards[i + 1]);
          mod = i % 2;
          if (0 == mod) {
            if (_v1 != _v2) return false;
          } else if (_v1 != _v2 + 1) return false;
        }
        return true;
      },
      isLine: function isLine(cards) {
        _v1 = this.getCardValue(cards[0]);
        if (cards.length > 4 && _v1 < _card_2_Value) {
          for (var i = 0; i < cards.length - 1; i++) {
            _v1 = this.getCardValue(cards[i]);
            _v2 = this.getCardValue(cards[i + 1]);
            if (_v1 == _v2 + 1) continue;
            return false;
          }
          return true;
        }
        return false;
      },
      isDouble: function isDouble(cards) {
        if (2 == cards.length) return this.isAllValueSame(cards);
        return false;
      },
      getSameCardValueIndexOf: function getSameCardValueIndexOf(cards, n, value) {
        if (null != value) {
          var strList = "";
          for (var _i12 = 0; _i12 < cards.length; _i12++) strList += this.getCardValue(cards[_i12]) + ",";
          var condition = (value + ",").repeat(n);
          var key = strList.indexOf(condition);
          if (-1 == key) return key;
          return key / 2;
        }
        for (var i = 0; i < cards.length - n + 1; i++) {
          _v1 = this.getCardValue(cards[i]);
          _v2 = this.getCardValue(cards[i + n - 1]);
          if (_v1 == _v2) return i;
        }
        return -1;
      },
      sortCardByCardType: function sortCardByCardType(cards, cardType) {
        if (!(_notSortCardType.indexOf(cardType) > -1)) return cards;
      },
      isAllValueSame: function isAllValueSame(cards) {
        if (cards.length < 2) return false;
        _v1 = this.getCardValue(cards[0]);
        _v2 = this.getCardValue(cards[cards.length - 1]);
        return _v1 == _v2;
      },
      getCardValue: function getCardValue(cardKey) {
        if (null == cardKey) return -1;
        if (cardKey > 51) return 52 == cardKey ? _card_Min_King_Value : _card_Max_King_Value;
        _remainder = cardKey % 13;
        if (0 == _remainder) return _card_A_Value;
        if (1 == _remainder) return _card_2_Value;
        return cardKey % 13 + 1;
      }
    };
    DDZDataLogic.init();
    cc._RF.pop();
  }, {} ],
  landlordsHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d8d12SwJKlIcKzrzFezqtO3", "landlordsHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.Landlords);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "landlords/bg", "landlords/table", "landlords/gameUI/cardRecordBg", "landlords/effect/shunZi/ld_lz_00004", "landlords/effect/pdk_feiji/pdk_feiji_body", "landlords/effect/pdk_zhadan/glow3", "landlords/effect/chunTian/ct_d1", "landlords/effect/kingBomb/wz_glow", "landlords/effect/kingBomb/wz_bao_00024" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  landlords: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "911c2o1b5lLMJyqCAxZ6UnS", "landlords");
    "use strict";
    function _toConsumableArray(arr) {
      if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
        return arr2;
      }
      return Array.from(arr);
    }
    var clientEvent = kf.require("basic.clientEvent");
    var _animName = [ "dizhushengli", "nongminshengli", "dizhushibai", "nongminshibai" ];
    var _resultAnimKey = -1;
    var _LineAnimPos = [ cc.v2(0, -5), cc.v2(517, 130), cc.v2(-517, 130) ];
    var _postCallScore = {
      Action: "DoPlay",
      eventName: "electionLandlord",
      landlordNum: 0
    };
    var _postShowCard = {
      Action: "DoPlay",
      eventName: "playCards",
      cards: ""
    };
    var _postPass = {
      Action: "DoPlay",
      eventName: "playPass"
    };
    var _handCardSpacingX = 45;
    var _tableCardSpacingX = 36;
    var _tableCardScale = .92;
    var _selfCardOnTableY = 149;
    var _UISeatId = 0;
    var _centerX = 505;
    var _unCheckCardY = -5;
    var _checkCardY = 15;
    var _checkCardOpacity = 253;
    var _cardWidth = 117.5;
    var _lastPlayerCardType = null;
    var _lastPlayerCards = [ 1, 3, 3, 3, 4, 1, 1, 1, 1 ];
    var _hintSchemes = [];
    var _card20ParentX = _centerX - 9.5 * _handCardSpacingX;
    var _card17ParentX = _centerX - 8 * _handCardSpacingX;
    var _isRegistered = false;
    var _cardTouchStart = null;
    var _cardTouchMove = null;
    var _cardTouchEnd = null;
    var _schemesKey = 0;
    var _isPlayingCardTypeAnim = false;
    var _curOperationUISeatId = -1;
    var _landlordCards = [];
    var _curMaxScore = 0;
    var _isTimeoutAutoPlay = false;
    var _isServerOperation = false;
    var _cardTypeFinishCb = null;
    var _tableCardData = [ [], [], [] ];
    var _isPlayingShowCardAction = false;
    var _isDispensingCard = false;
    var _isShowScoreTime = false;
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        cardAtlas: cc.SpriteAtlas,
        matchingToastLayer: cc.Node,
        anteBg: cc.Node,
        playIdBg: cc.Node,
        recordCardBg: cc.Node,
        player: [ cc.Node ],
        callScoreBtn: [ cc.Node ],
        passBtn: cc.Node,
        hintBtn: cc.Node,
        showCardBtn: cc.Node,
        incapableBtn: cc.Node,
        landlordsCardsParent: cc.Node,
        autoPlayMask: cc.Node,
        efMatchingLoad: cc.Node,
        headOfLandlordsIcon: cc.Node,
        tableCardOfLandlordsIcon: cc.Node,
        handCardLandlordsIcon: cc.Node,
        otherPlayerAutoPlay: [ cc.Node ],
        txtMatchingToastLayer: cc.Label,
        txtTimer: cc.Label,
        txtAnte: cc.Label,
        txtPlayId: cc.Label,
        txtMulti: cc.Label,
        txtShowCardError: cc.Label,
        resultChipNumTxt: [ cc.Label ],
        txtOtherCardCount: [ cc.Label ],
        btMatching: cc.Button,
        btCancelMatching: cc.Button,
        sfScore: [ cc.SpriteFrame ],
        sfPass: cc.SpriteFrame,
        sfAutoPlay: cc.SpriteFrame,
        sfCancelAutoPlay: cc.SpriteFrame,
        sfCardType: [ cc.SpriteFrame ],
        spAutoBtn: cc.Sprite,
        spScores: [ cc.Sprite ],
        spCardType: [ cc.Sprite ],
        pfCard: cc.Prefab,
        animSpring: cc.Animation,
        animCardType: [ cc.Animation ],
        animWarningLight: [ cc.Animation ],
        spineResult: sp.Skeleton,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        jpqSpriteFrame: cc.SpriteFrame,
        acPass: {
          default: [],
          type: cc.AudioClip
        },
        acCrush: {
          default: [],
          type: cc.AudioClip
        },
        acRemainingOne: {
          default: [],
          type: cc.AudioClip
        },
        acRemainingTwo: {
          default: [],
          type: cc.AudioClip
        },
        acCallScore: {
          default: [],
          type: cc.AudioClip
        },
        acSingle: {
          default: [],
          type: cc.AudioClip
        },
        acPair: {
          default: [],
          type: cc.AudioClip
        },
        acThree: {
          default: [],
          type: cc.AudioClip
        },
        acThreeWithOne: {
          default: [],
          type: cc.AudioClip
        },
        acThreeWithPair: {
          default: [],
          type: cc.AudioClip
        },
        acThreeLine: {
          default: [],
          type: cc.AudioClip
        },
        acLine: {
          default: [],
          type: cc.AudioClip
        },
        acPairLine: {
          default: [],
          type: cc.AudioClip
        },
        acAirplane: {
          default: [],
          type: cc.AudioClip
        },
        acFourWithTwo: {
          default: [],
          type: cc.AudioClip
        },
        acKingBomb: {
          default: [],
          type: cc.AudioClip
        },
        acBomb: {
          default: [],
          type: cc.AudioClip
        },
        aceAirplane: {
          default: null,
          type: cc.AudioClip
        },
        aceBomb: {
          default: null,
          type: cc.AudioClip
        },
        aceCheckCard: {
          default: null,
          type: cc.AudioClip
        },
        aceConfirmLandlord: {
          default: null,
          type: cc.AudioClip
        },
        aceDispenseCard: {
          default: null,
          type: cc.AudioClip
        },
        aceFailed: {
          default: null,
          type: cc.AudioClip
        },
        aceLine: {
          default: null,
          type: cc.AudioClip
        },
        acePairLine: {
          default: null,
          type: cc.AudioClip
        },
        aceShowCard: {
          default: null,
          type: cc.AudioClip
        },
        aceTimer: {
          default: null,
          type: cc.AudioClip
        },
        aceWarn: {
          default: null,
          type: cc.AudioClip
        },
        aceWin: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "callScoreCb", this.callScoreCb.bind(this) ], [ "passCb", this.passCb.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onLandlord", this.onLandlord.bind(this) ], [ "onPlayCards", this.onShowCard.bind(this) ], [ "onPass", this.onPass.bind(this) ], [ "showCardCb", this.showCardCb.bind(this) ], [ "onGameEnd", this.onGameEnd.bind(this) ], [ "onAutoPlay", this.onAutoPlay.bind(this) ], [ "cancelAutoPlayCb", this.cancelAutoPlayCb.bind(this) ], [ "autoPlayCb", this.autoPlayCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      gameShow: function gameShow() {
        _isPlayingShowCardAction = false;
        _isPlayingCardTypeAnim = false;
        this.unscheduleAllCallbacks();
        if (this.socketIO.isConnected()) if (DDZDataLogic.curStage == DDZConstant.Stage.GameOver) {
          this.runOverAction();
          this.unregisterCardEvent();
          for (var i = 0; i < 3; i++) this.setCardOnTable(i, _tableCardData[i], false);
        } else if (DDZDataLogic.curStage == DDZConstant.Stage.Matching) ; else {
          if (DDZDataLogic.curStage == DDZConstant.Stage.ShowCard) {
            this.hideCallScore();
            this.showLandlordsCardsBg();
            this.showLandlordsCards(_landlordCards, false);
          } else _curOperationUISeatId == constant.SelfUISeatId && 0 == _curMaxScore && this.showCallScoreBtn(0);
          this.resetHandCardView();
          for (var _i = 0; _i < 3; _i++) {
            if (_i == _curOperationUISeatId) continue;
            this.setCardOnTable(_i, _tableCardData[_i]);
          }
          this.registerCardEvent();
          this.countDown(_curOperationUISeatId, dataLogic.timerEndTimestamp - dataLogic.timeOff);
        }
      },
      gameHide: function gameHide() {
        _isShowScoreTime = false;
        _isPlayingShowCardAction = false;
        _isPlayingCardTypeAnim = false;
        _isDispensingCard = false;
        this.unscheduleAllCallbacks();
        this.clearCardTypeAnim();
        this.handCardParent[0].stopAllActions();
        for (var i = 0; i < 3; i++) for (var j = 0; j < 20; j++) this.handCard[i][j].stopAllActions();
        _cardTypeFinishCb && _cardTypeFinishCb();
        _cardTypeFinishCb = null;
        constant.SelfUISeatId == _curOperationUISeatId && DDZDataLogic.isAutoPlay && this.autoOperation();
        while (dataLogic.runNextMsg()) ;
      },
      onLoad: function onLoad() {
        this.leastPlayerCount = 3;
        _isPlayingShowCardAction = false;
        _isPlayingCardTypeAnim = false;
        _lastPlayerCardType = null;
        _lastPlayerCards = [];
        _tableCardData = [ [], [], [] ];
        this.baseInit(constant.GameId.Landlords);
        dataLogic.setLimitPlayerNum(3);
        this.registerEvent();
        this.txtRecordCards = [];
        for (var i = 0; i < 15; i++) this.txtRecordCards[i] = this.recordCardBg.getChildByName("txt" + i).getComponent(cc.Label);
        this.threeLandlordsCards = [];
        for (var _i2 = 0; _i2 < 3; _i2++) {
          this.threeLandlordsCards[_i2] = cc.instantiate(this.pfCard);
          this.threeLandlordsCards[_i2].scale = .6;
          this.threeLandlordsCards[_i2].opacity = 0;
          this.threeLandlordsCards[_i2].x = 30 * _i2 - 30;
          this.threeLandlordsCards[_i2].parent = this.landlordsCardsParent;
        }
        this.headOfLandlordsIcon.opacity = 0;
        this.headSp = [];
        for (var _i3 = 0; _i3 < 3; _i3++) this.headSp[_i3] = this.player[_i3].getChildByName("bg").getChildByName("head").getComponent(cc.Sprite);
        this.handCard = [];
        this.handCard[0] = [];
        this.handCardParent = [];
        this.handCardParent[0] = this.player[0].getChildByName("cardParent");
        var card = void 0;
        for (var _i4 = 0; _i4 < 20; _i4++) {
          card = cc.instantiate(this.pfCard);
          card.scale = 1.2;
          card.anchorX = 0;
          this.handCard[0][_i4] = card;
          card.parent = this.handCardParent[0];
          card.y = _unCheckCardY;
          card.opacity = 0;
          card.getChildByName("bg").anchorX = 0;
        }
        DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
        if (dataLogic.needRecover) {
          this.cleanView();
          this.showAndUpdateSelfUI();
          this.btMatching.node.active = false;
          this.reqRecover();
        } else this.initMatchingView(false, false);
        var ante = dataLogic.getAnteByRoomId(dataLogic.curGameId + dataLogic.curRoomKey);
        this.setAnte(ante);
        this.spCardType[1].node.zIndex = 1;
        this.spCardType[2].node.zIndex = 1;
        this.tableCardOfLandlordsIcon.y = 30;
        DDZDataLogic.resetData();
        this.updateRecordCard();
        dataLogic.isFriendRoom && this.genReadyStateFlag();
        var playerPos = [ {
          x: -198,
          y: -145
        }, {
          x: 198,
          y: 139
        }, {
          x: -198,
          y: 139
        } ];
        for (var _i5 = 0; _i5 < this.player.length; _i5++) {
          this.player[_i5].playerPos = playerPos[_i5];
          this.bindLongTouchEvent(this.player[_i5]);
        }
        var state = cc.sys.localStorage.getItem("landlordRecordCardState") || "true";
        this.recordCardBg.active = "true" == state;
        if (dataLogic.rechargeState) {
          this.recordCardBg.getComponent(cc.Sprite).spriteFrame = this.jpqSpriteFrame;
          for (var _i6 = 0; _i6 < 15; _i6++) this.recordCardBg.getChildByName("txt" + _i6).opacity = 0;
        }
      },
      reqRecover: function reqRecover() {
        this.doneGameRecover = false;
        dataLogic.setReqRecoverState(true);
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      start: function start() {
        var card = void 0, anchorX = void 0;
        for (var j = 1; j < 3; j++) {
          this.handCardParent[j] = this.player[j].getChildByName("cardParent");
          this.handCard[j] = [];
          anchorX = 1 == j ? 1 : 0;
          for (var i = 0; i < 20; i++) {
            card = cc.instantiate(this.pfCard);
            card.scale = _tableCardScale;
            card.anchorX = anchorX;
            card.opacity = 0;
            card.getChildByName("bg").anchorX = anchorX;
            card.parent = this.handCardParent[j];
            this.handCard[j][i] = card;
          }
        }
        this.hideCallScoreBtn();
        cc.loader.loadResDir("landlords/effect/shunZi", function(err, res) {
          err && cc.log("err", err);
        });
        cc.loader.loadResDir("landlords/effect/chunTian", function(err, res) {
          err && cc.log("err", err);
        });
      },
      unregisterCardEvent: function unregisterCardEvent() {
        if (!_isRegistered) return;
        _isRegistered = false;
        this.handCardParent[0].off(cc.Node.EventType.TOUCH_START, _cardTouchStart);
        this.handCardParent[0].off(cc.Node.EventType.TOUCH_MOVE, _cardTouchMove);
        this.handCardParent[0].off(cc.Node.EventType.TOUCH_CANCEL, _cardTouchEnd);
        this.handCardParent[0].off(cc.Node.EventType.TOUCH_END, _cardTouchEnd);
      },
      registerCardEvent: function registerCardEvent() {
        var _this = this;
        if (_isRegistered) return;
        _isRegistered = true;
        var pos = void 0, touchStartKey = -1, curTouchCardKey = -1;
        _cardTouchStart = function _cardTouchStart(e) {
          e.stopPropagation();
          pos = _this.handCardParent[0].convertToNodeSpaceAR(e.getLocation());
          touchStartKey = -1;
          for (var i = 19; i > -1; i--) if (255 == _this.handCard[0][i].opacity && _this.handCard[0][i].y <= _checkCardY && _this.handCard[0][i].x < pos.x && _cardWidth + _this.handCard[0][i].x > pos.x) {
            _this.handCard[0][i].getChildByName("bg").color = kf.fromHEX("#A0A0A0");
            _this.handCard[0][i].opacity = _checkCardOpacity;
            touchStartKey = i;
            return;
          }
        };
        _cardTouchMove = function _cardTouchMove(e) {
          e.stopPropagation();
          if (-1 == touchStartKey) return;
          pos = _this.handCardParent[0].convertToNodeSpaceAR(e.getLocation());
          curTouchCardKey = -1;
          for (var i = 19; i > -1; i--) if (0 != _this.handCard[0][i].opacity && _this.handCard[0][i].y <= _checkCardY && _this.handCard[0][i].x < pos.x) {
            curTouchCardKey = i;
            break;
          }
          for (var _i7 = 0; _i7 < 20; _i7++) if (0 != _this.handCard[0][_i7].opacity && _this.handCard[0][_i7].y <= _checkCardY) if (curTouchCardKey > touchStartKey) if (_i7 < touchStartKey || _i7 > curTouchCardKey) {
            _this.handCard[0][_i7].getChildByName("bg").color = kf.fromHEX("#FFFFFF");
            _this.handCard[0][_i7].opacity = 255;
          } else {
            _this.handCard[0][_i7].getChildByName("bg").color = kf.fromHEX("#A0A0A0");
            _this.handCard[0][_i7].opacity = _checkCardOpacity;
          } else if (_i7 < curTouchCardKey || _i7 > touchStartKey) {
            _this.handCard[0][_i7].getChildByName("bg").color = kf.fromHEX("#FFFFFF");
            _this.handCard[0][_i7].opacity = 255;
          } else {
            _this.handCard[0][_i7].getChildByName("bg").color = kf.fromHEX("#A0A0A0");
            _this.handCard[0][_i7].opacity = _checkCardOpacity;
          }
        };
        _cardTouchEnd = function _cardTouchEnd(e) {
          e.stopPropagation();
          if (-1 == touchStartKey) return;
          pos = _this.handCardParent[0].convertToNodeSpaceAR(e.getLocation());
          var needAce = false;
          for (var i = 0; i < 20; i++) if (_checkCardOpacity == _this.handCard[0][i].opacity) {
            _this.handCard[0][i].y = _this.handCard[0][i].y == _checkCardY ? _unCheckCardY : _checkCardY;
            _this.handCard[0][i].getChildByName("bg").color = kf.fromHEX("#FFFFFF");
            _this.handCard[0][i].opacity = 255;
            needAce = true;
          }
          needAce && audioMgr.playEffect(_this.aceCheckCard);
        };
        this.handCardParent[0].on(cc.Node.EventType.TOUCH_START, _cardTouchStart);
        this.handCardParent[0].on(cc.Node.EventType.TOUCH_MOVE, _cardTouchMove);
        this.handCardParent[0].on(cc.Node.EventType.TOUCH_CANCEL, _cardTouchEnd);
        this.handCardParent[0].on(cc.Node.EventType.TOUCH_END, _cardTouchEnd);
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        if (msg.Code == constant.HttpCode.Disconnect && !this.socketIO.isConnected()) return;
        this.txtMulti.string = 1;
        dataLogic.clearMsgList();
        this.unscheduleAllCallbacks();
        _cardTypeFinishCb = null;
        kf.killObj(this.recoverLoad);
        DDZDataLogic.resetCardData();
        if (constant.HttpCode.Succeed != msg.Code) {
          this.switchAutoPlay(false, true);
          this.updateRecordCard();
          var roomKey = dataLogic.curRoomKey;
          this.setAnte(dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey));
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          dataLogic.gameEnd();
          DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
          this.cleanView();
          dataLogic.isFriendRoom ? this.btReady.node.active = true : this.btMatching.node.active = true;
          constant.HttpCode.GameOver == msg.Code && (dataLogic.isFriendRoom ? this.dissolutionRoom(msg.StrCode) : dataLogic.setReqRecoverState(false));
          return;
        }
        this.gameRecover(msg.Data);
      },
      gameRecover: function gameRecover(msg) {
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        this.btMatching.node.active = false;
        this.hideCallScore();
        this.hideShowCardBtn();
        _isPlayingShowCardAction = false;
        _isDispensingCard = false;
        _isPlayingCardTypeAnim = false;
        if (0 == msg.state) {
          var roomKey = dataLogic.curRoomKey;
          this.setAnte(dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey));
          this.headOfLandlordsIcon.opacity = 0;
          this.updateRecordCard();
          if (dataLogic.isFriendRoom) {
            DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
            this.setAllPlayerInfo(msg.playerInfo);
            this.hideAllPlayerCard();
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            DDZDataLogic.setCurStage(DDZConstant.Stage.Matching);
            this.initMatchingView(true, true);
            this.btMatching.node.active = false;
          }
          return;
        }
        var score = Math.max.apply(null, msg.callScore);
        score < 1 ? this.setAnte(msg.ante) : this.setAnte(msg.ante.multi(score));
        this.registerCardEvent();
        this.setPlayIdBgState(msg.playId);
        DDZDataLogic.setCardData(msg.cards);
        this.resetHandCardView();
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        dataLogic.matching();
        this.setMatchingToastView(false);
        _lastPlayerCards = null;
        _lastPlayerCardType = null;
        this.setAllPlayerInfo(msg.playerInfo);
        var UISeatId = void 0;
        if (-1 == msg.landlord) {
          this.showLandlordsCardsBg();
          this.showLandlordsCards([ "backCard", "backCard", "backCard" ], false);
          _tableCardData = [ [], [], [] ];
          DDZDataLogic.setCurStage(DDZConstant.Stage.CallScore);
          this.setOtherPlayerCardCount(1, 17);
          this.setOtherPlayerCardCount(2, 17);
          for (var i = 0; i < 3; i++) {
            if (-1 == msg.callScore[i]) continue;
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            this.showCallScore(UISeatId, msg.callScore[i]);
          }
          UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
          this.nextPlayerOption(UISeatId, msg.endTime, score + 1);
        } else {
          this.setLandlord(dataLogic.getUISeatIdBySeatId(msg.landlord));
          this.txtMulti.string = msg.boomSpringPunish;
          _tableCardData = kf.clone(msg.playedCards);
          DDZDataLogic.setCurStage(DDZConstant.Stage.ShowCard);
          this.showLandlordsCards(msg.landlordAttachCards, false);
          for (var _i8 = 0; _i8 < 3; _i8++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(_i8);
            var result = DDZDataLogic.getCardType(msg.playedCards[_i8]);
            this.setCardOnTable(UISeatId, result.cards);
            if (_i8 == dataLogic.selfSeatId) {
              DDZDataLogic.setAutoPlayState(1 == msg.autoPlay[_i8]);
              this.setAutoPlayUI(1 == msg.autoPlay[_i8]);
            } else {
              this.setOtherPlayerAutoPlayState(UISeatId, msg.autoPlay[_i8]);
              this.setOtherPlayerCardCount(UISeatId, msg.leftCards[_i8]);
            }
          }
          if (msg.seatId != (dataLogic.selfSeatId + 1) % 3) {
            var n = dataLogic.selfSeatId;
            n = (n - 1 + 3) % 3;
            while (n != dataLogic.selfSeatId) {
              if (0 != msg.playedCards[n].length && -1 != msg.playedCards[n][0]) {
                var _result = DDZDataLogic.getCardType(msg.playedCards[n]);
                _lastPlayerCards = _result.cards;
                _lastPlayerCardType = _result.cardType;
                break;
              }
              n = (n - 1 + 3) % 3;
            }
          }
          cc.log("\u684c\u4e0a\u6700\u5927\u7684\u724c\u578b", _lastPlayerCardType);
          cc.log("\u684c\u4e0a\u6700\u5927\u7684\u724c", _lastPlayerCards);
          UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
          var endTime = msg.endTime;
          UISeatId == constant.SelfUISeatId && 1 == msg.autoPlay[dataLogic.selfSeatId] && (endTime = endTime - dataLogic.timeOff + 20);
          this.nextPlayerOption(UISeatId, endTime);
        }
        msg.counter.splice(12, 1);
        msg.counter.splice(13, 1);
        DDZDataLogic.setUnknownCardCount(msg.counter.reverse());
        this.updateRecordCard();
        this.updateTips();
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId, isNewJoin) {
        this.player[UISeatId].userId = info.userId;
        this.player[UISeatId].active || (this.player[UISeatId].active = true);
        isNewJoin && (this.resultChipNumTxt[UISeatId].node.opacity = 0);
        this.setPlayerUIInfo(UISeatId, info);
      },
      setAllPlayerInfo: function setAllPlayerInfo(playerInfo) {
        cc.log("\u8bbe\u7f6e\u6240\u6709\u73a9\u5bb6\u4fe1\u606f");
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          if (null == playerInfo[i].headUrl) {
            this.player[UISeatId].active && (this.player[UISeatId].active = false);
            continue;
          }
          this.setPlayerInfo(playerInfo[i], UISeatId, true);
        }
        for (var _i9 = playerInfo.length; _i9 < this.player.length; _i9++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(_i9);
          this.player[UISeatId].active && (this.player[UISeatId].active = false);
        }
        this.initAllPlayerReadyStateUI();
      },
      countDownOver: function countDownOver() {
        _curOperationUISeatId == constant.SelfUISeatId && (_isTimeoutAutoPlay ? this.switchAutoPlay(true) : this.autoOperation());
      },
      autoOperation: function autoOperation() {
        DDZDataLogic.curStage == DDZConstant.Stage.ShowCard ? this.showCardTimeout() : this.callScoreTimeout();
      },
      countDown: function countDown(UISeatId, endTime) {
        var _this2 = this;
        if (null == UISeatId || -1 == UISeatId) return;
        _curOperationUISeatId = UISeatId;
        dataLogic.setTimerData(endTime);
        if (UISeatId == constant.SelfUISeatId) {
          this.txtTimer.node.parent.parent.x = 0;
          this.txtTimer.node.parent.y = -140;
        } else {
          this.txtTimer.node.parent.y = 0;
          this.txtTimer.node.parent.parent.x = 1 == UISeatId ? 372.5 : -372.5;
        }
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        cc.log("\u5012\u8ba1\u65f6", UISeatId, "\u5269\u4f59\u65f6\u95f4", remainingTime);
        if (!(remainingTime > 0)) {
          this.txtTimer.node.parent.active = false;
          this.countDownOver();
          return;
        }
        this.txtTimer.node.parent.active = true;
        this.txtTimer.string = remainingTime;
        cc.log("\u5269\u4f59\u65f6\u95f4", remainingTime, new Date().getTime() / 1e3);
        this.callback && this.unschedule(this.callback);
        this.callback = function() {
          remainingTime--;
          _this2.txtTimer.string = remainingTime;
          remainingTime < 4 && 0 != remainingTime && audioMgr.playEffect(_this2.aceTimer);
          if (remainingTime <= 0) {
            remainingTime < 0 && cc.warn("remainingTime", remainingTime);
            _this2.unschedule(_this2.callback);
            _this2.txtTimer.node.parent.active = false;
            if (dataLogic.isOnlooker()) return;
            cc.log("\u5012\u8ba1\u65f6\u7ed3\u675f", new Date().getTime() / 1e3);
            _this2.countDownOver();
          }
        };
        this.schedule(this.callback, 1);
      },
      removeTimer: function removeTimer() {
        this.unschedule(this.callback);
        this.txtTimer.node.parent.active = false;
      },
      onGameStart: function onGameStart(data) {
        var _this3 = this;
        DDZDataLogic.setLandlord(-1);
        _isPlayingCardTypeAnim = false;
        this.switchAutoPlay(false, true);
        DDZDataLogic.setAutoPlayState(false);
        _curMaxScore = 0;
        DDZDataLogic.setCurStage(DDZConstant.Stage.CallScore);
        dataLogic.matching();
        dataLogic.setPlayerInfo(data.playerInfo);
        _lastPlayerCardType = null;
        _lastPlayerCards = [];
        if (dataLogic.isFriendRoom) {
          this.updateTips();
          this.gameStartCommonHandle();
          this.cleanView();
        }
        this.setMatchingToastView(false);
        var playerInfo = dataLogic.playerInfo, UISeatId = void 0;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          this.setPlayerUIInfo(UISeatId, playerInfo[i]);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[i].userId;
          this.player[UISeatId]._playerInfo = playerInfo[i];
          this.resultChipNumTxt[UISeatId].node.opacity = 0;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(data.seatId);
        this.setPlayIdBgState(data.playId);
        DDZDataLogic.resetCardData(data.cards);
        _isTimeoutAutoPlay = false;
        _curOperationUISeatId = UISeatId;
        dataLogic.setTimerData(data.endTime);
        this.playDispenseLandlordCard();
        this.dispenseCardAction(function() {
          _this3.countDown(UISeatId, data.endTime);
          UISeatId == constant.SelfUISeatId ? _this3.showCallScoreBtn(0) : dataLogic.runNextMsg();
        });
        this.setOtherPlayerCardCount(1, 17);
        this.setOtherPlayerCardCount(2, 17);
        this.hideCallScore();
        this.hideOtherPlayerAutoPlayIcon();
        this.txtMulti.string = 1;
        DDZDataLogic.subUnknownCardCount(data.cards);
        this.updateRecordCard();
      },
      onLandlord: function onLandlord(msg) {
        if (_isDispensingCard) {
          cc.log("\u6b63\u5728\u53d1\u724c\uff0c\u5ef6\u8fdf\u6267\u884c\u6d88\u606f");
          dataLogic.pushMsgList(msg);
          return;
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        if (UISeatId == constant.SelfUISeatId) this.hideCallScoreBtn(); else {
          this.removeTimer();
          var sex = dataLogic.getSex(UISeatId);
          audioMgr.playEffect(this.acCallScore[4 * sex + msg.landlordNum]);
        }
        this.showCallScore(UISeatId, msg.landlordNum);
        if (msg.landlordNum > 0) {
          var roomKey = dataLogic.curRoomKey;
          var ante = dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey).multi(msg.landlordNum);
          this.setAnte(ante);
        }
        if (msg.landlordAttachCards) {
          audioMgr.playEffect(this.aceConfirmLandlord);
          DDZDataLogic.setCurStage(DDZConstant.Stage.ShowCard);
          this.showLandlordsCards(msg.landlordAttachCards);
          UISeatId = dataLogic.getUISeatIdBySeatId(msg.landlordSeatId);
          this.setLandlord(UISeatId);
          if (UISeatId == constant.SelfUISeatId) {
            this.joinLandlordsCard(msg.landlordAttachCards);
            DDZDataLogic.subUnknownCardCount(msg.landlordAttachCards);
            this.updateRecordCard();
          } else this.setOtherPlayerCardCount(UISeatId, 20);
          if (dataLogic.isHide) {
            this.hideCallScore();
            this.nextPlayerOption(UISeatId, msg.endTime);
          } else {
            _isShowScoreTime = true;
            _curOperationUISeatId = UISeatId;
            dataLogic.setTimerData(msg.endTime);
            this.scheduleOnce(this.waitLandlordShowCard, .5);
          }
        } else {
          UISeatId = dataLogic.getUISeatIdBySeatId(msg.nextSeatId);
          _curMaxScore = msg.landlordNum > _curMaxScore ? msg.landlordNum : _curMaxScore;
          if (UISeatId == constant.SelfUISeatId) {
            var leastScore = 0 == _curMaxScore ? _curMaxScore : _curMaxScore + 1;
            this.nextPlayerOption(UISeatId, msg.endTime, leastScore);
          } else this.nextPlayerOption(UISeatId, msg.endTime);
        }
        dataLogic.runNextMsg();
      },
      waitLandlordShowCard: function waitLandlordShowCard() {
        _isShowScoreTime = false;
        this.hideCallScore();
        this.nextPlayerOption(_curOperationUISeatId, dataLogic.timerEndTimestamp - dataLogic.timeOff);
      },
      playShowCardAudio: function playShowCardAudio(UISeatId, cards, cardType, isCrush) {
        audioMgr.playEffect(this.aceShowCard);
        var sex = dataLogic.getSex(UISeatId), key = void 0;
        if (isCrush && cardType != DDZConstant.CardType.KingBomb && cardType != DDZConstant.CardType.Bomb && cardType != DDZConstant.CardType.Single && cardType != DDZConstant.CardType.Double) {
          key = 3 * sex + dataLogic.randomInt(0, 2);
          audioMgr.playEffect(this.acCrush[key]);
        } else {
          var v = void 0;
          switch (cardType) {
           case DDZConstant.CardType.Single:
            v = DDZDataLogic.getCardValue(cards[0]);
            key = 17 * sex + v;
            audioMgr.playEffect(this.acSingle[key]);
            break;

           case DDZConstant.CardType.Double:
            v = DDZDataLogic.getCardValue(cards[0]);
            key = 15 * sex + v;
            audioMgr.playEffect(this.acPair[key]);
            break;

           case DDZConstant.CardType.Three:
            audioMgr.playEffect(this.acThree[sex]);
            break;

           case DDZConstant.CardType.ThreeWithOne:
            audioMgr.playEffect(this.acThreeWithOne[sex]);
            break;

           case DDZConstant.CardType.ThreeWithTwo:
            audioMgr.playEffect(this.acThreeWithPair[sex]);
            break;

           case DDZConstant.CardType.ThreeLine:
            audioMgr.playEffect(this.acThreeLine[sex]);
            break;

           case DDZConstant.CardType.DoubleLine:
            audioMgr.playEffect(this.acPairLine[sex]);
            break;

           case DDZConstant.CardType.Line:
            audioMgr.playEffect(this.acLine[sex]);
            break;

           case DDZConstant.CardType.Airplane:
            audioMgr.playEffect(this.acAirplane[sex]);
            break;

           case DDZConstant.CardType.FourWithTwo:
            audioMgr.playEffect(this.acFourWithTwo[sex]);
            break;

           case DDZConstant.CardType.KingBomb:
            audioMgr.playEffect(this.acKingBomb[sex]);
            break;

           case DDZConstant.CardType.Bomb:
            audioMgr.playEffect(this.acBomb[sex]);
          }
        }
      },
      onShowCard: function onShowCard(msg) {
        var _this4 = this;
        if (_isDispensingCard || _isPlayingShowCardAction || _isPlayingCardTypeAnim) {
          cc.log("\u5ef6\u8fdf\u6267\u884c\u6d88\u606f", _isDispensingCard, _isPlayingShowCardAction, _isPlayingCardTypeAnim);
          dataLogic.pushMsgList(msg);
          return;
        }
        null != msg.isAutoPlay && 1 == msg.isAutoPlay && this.updateAutoPlayState(msg.seatId, msg.isAutoPlay);
        if (_isShowScoreTime) {
          _isShowScoreTime = false;
          this.hideCallScore();
          this.unschedule(this.waitLandlordShowCard);
        }
        var nextSeatId = msg.nextSeatId, endTime = msg.endTime;
        _cardTypeFinishCb = function _cardTypeFinishCb() {
          var UISeatId = dataLogic.getUISeatIdBySeatId(nextSeatId);
          _this4.nextPlayerOption(UISeatId, endTime);
        };
        var UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        _curOperationUISeatId = UISeatId;
        UISeatId == constant.SelfUISeatId && this.hideShowCardBtn();
        var result = DDZDataLogic.getCardType(msg.cards);
        cc.log("UISeatId", UISeatId, "===\u83b7\u53d6\u724c\u578b", result);
        result.cardType != DDZConstant.CardType.KingBomb && result.cardType != DDZConstant.CardType.Bomb || this.txtMulti.string < 8 && (this.txtMulti.string *= 2);
        if (UISeatId == constant.SelfUISeatId) {
          _lastPlayerCardType = null;
          _lastPlayerCards = [];
          cc.log("\u662f\u5426\u670d\u52a1\u7aef\u89e6\u53d1\u7684", _isServerOperation);
          if (_isServerOperation) {
            DDZDataLogic.delCardData(msg.cards);
            this.hideShowCardBtn();
            this.removeTimer();
            _tableCardData[constant.SelfUISeatId] = kf.clone(result.cards);
            this.resetHandCardView();
            this.setCardOnTable(constant.SelfUISeatId, result.cards);
            this.playCardTypeAnim(UISeatId, result.cardType);
          } else {
            _cardTypeFinishCb();
            _cardTypeFinishCb = null;
            dataLogic.runNextMsg();
          }
        } else {
          this.playShowCardAudio(UISeatId, result.cards, result.cardType, 0 == msg.isFreePlay);
          this.removeTimer();
          _tableCardData[UISeatId] = kf.clone(result.cards);
          _lastPlayerCardType = result.cardType;
          _lastPlayerCards = result.cards;
          this.otherPlayerShowCard(UISeatId, result.cards, result.cardType);
        }
      },
      onPass: function onPass(msg) {
        if (_isDispensingCard || _isPlayingShowCardAction || _isPlayingCardTypeAnim) {
          cc.log("\u5ef6\u8fdf\u6267\u884c\u6d88\u606f", _isDispensingCard, _isPlayingShowCardAction, _isPlayingCardTypeAnim);
          dataLogic.pushMsgList(msg);
          return;
        }
        null != msg.isAutoPlay && 1 == msg.isAutoPlay && this.updateAutoPlayState(msg.seatId, msg.isAutoPlay);
        var UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        if (UISeatId == constant.SelfUISeatId) _isServerOperation && this.pass(); else {
          this.removeTimer();
          var sex = dataLogic.getSex(UISeatId);
          var key = 3 * sex + dataLogic.randomInt(0, 2);
          audioMgr.playEffect(this.acPass[key]);
          _tableCardData[UISeatId] = [ -1 ];
          this.spScores[UISeatId].node.opacity = 255;
          this.spScores[UISeatId].spriteFrame = this.sfPass;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(msg.nextSeatId);
        this.nextPlayerOption(UISeatId, msg.endTime);
        dataLogic.runNextMsg();
      },
      nextPlayerOption: function nextPlayerOption(UISeatId, endTime, leastScore) {
        this.hideCardOnTable(UISeatId);
        this.spScores[UISeatId].node.opacity = 0;
        if (UISeatId == constant.SelfUISeatId && DDZDataLogic.isAutoPlay) {
          this.unschedule(this.doneShowCardAction);
          if (null != _lastPlayerCardType) {
            _schemesKey = 0;
            _hintSchemes = DDZDataLogic.getLargerCards(_lastPlayerCards, _lastPlayerCardType);
          }
          var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
          if (dataLogic.isHide || remainingTime < 20) this.autoOperation(); else {
            _curOperationUISeatId = UISeatId;
            dataLogic.setTimerData(endTime);
            this.scheduleOnce(this.autoOperation, 1);
          }
          return;
        }
        UISeatId == constant.SelfUISeatId && (endTime = this.giveOperationRight(endTime, leastScore));
        this.countDown(UISeatId, endTime);
      },
      giveOperationRight: function giveOperationRight(endTime, leastScore) {
        this.unschedule(this.doneShowCardAction);
        _isServerOperation = true;
        if (DDZDataLogic.curStage == DDZConstant.Stage.ShowCard) {
          _isTimeoutAutoPlay = true;
          if (null != _lastPlayerCardType) {
            _schemesKey = 0;
            _hintSchemes = DDZDataLogic.getLargerCards(_lastPlayerCards, _lastPlayerCardType);
          }
          this.showShowCardBtn();
          if (null != _lastPlayerCardType && 0 == _hintSchemes.length) {
            var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
            if (_lastPlayerCards.length > DDZDataLogic.cardData.length) {
              _isTimeoutAutoPlay = false;
              remainingTime > 3e3 && (endTime -= remainingTime - 3e3);
            } else remainingTime > 1e4 && (endTime -= remainingTime - 1e4);
          }
        } else {
          _isTimeoutAutoPlay = false;
          this.showCallScoreBtn(leastScore);
        }
        return endTime;
      },
      setAutoPlay: function setAutoPlay(UISeatId, isAutoPlay) {
        UISeatId == constant.SelfUISeatId ? this.switchAutoPlay(isAutoPlay) : this.otherPlayerAutoPlay[UISeatId].active = isAutoPlay;
      },
      onGameEnd: function onGameEnd(msg) {
        var _this5 = this;
        if (_isPlayingShowCardAction || _isPlayingCardTypeAnim) {
          cc.log("\u5ef6\u8fdf\u6267\u884c\u6d88\u606f", _isPlayingShowCardAction, _isPlayingCardTypeAnim);
          dataLogic.pushMsgList(msg);
          return;
        }
        this.switchAutoPlay(false, true);
        this.removeTimer();
        var UISeatId = dataLogic.getUISeatIdBySeatId(msg.seatId);
        this.hideCallScore();
        for (var i = 1; i < 3; i++) this.hideCardOnTable(i);
        if (1 == msg.isMaxTimes) {
          this.hideCallScoreBtn();
          this.hideLandlordsCards();
          DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
          this.hideAllPlayerCard();
          if (dataLogic.isFriendRoom) {
            this.btReady.node.active = true;
            dataLogic.setPlayState(false);
            this.gamingPlayerToUnready();
            this.updateTips();
          } else {
            dataLogic.gameEnd();
            this.btMatching.node.active = true;
          }
          return;
        }
        var result = DDZDataLogic.getCardType(msg.cards);
        result.cardType != DDZConstant.CardType.KingBomb && result.cardType != DDZConstant.CardType.Bomb || this.txtMulti.string < 8 && (this.txtMulti.string *= 2);
        if (constant.SelfUISeatId == UISeatId) {
          if (_isServerOperation) {
            DDZDataLogic.delCardData(msg.cards);
            this.hideShowCardBtn();
            this.removeTimer();
            _tableCardData[constant.SelfUISeatId] = kf.clone(result.cards);
            this.resetHandCardView();
            this.setCardOnTable(constant.SelfUISeatId, result.cards);
            this.playCardTypeAnim(UISeatId, result.cardType);
          }
        } else {
          _tableCardData[UISeatId] = kf.clone(result.cards);
          this.otherPlayerShowCard(UISeatId, result.cards, result.cardType);
          this.playShowCardAudio(UISeatId, result.cards, result.cardType, 0 == msg.isFreePlay);
        }
        this.unregisterCardEvent();
        var cards = [];
        for (var _i10 = 0; _i10 < 3; _i10++) {
          if (0 == msg.leftCards[_i10].length) continue;
          if (dataLogic.selfSeatId == _i10) {
            this.resetHandCardView();
            _tableCardData[constant.SelfUISeatId] = [];
          } else {
            UISeatId = dataLogic.getUISeatIdBySeatId(_i10);
            cards = DDZDataLogic.sortCard(msg.leftCards[_i10]);
            _tableCardData[UISeatId] = kf.clone(cards);
            this.otherPlayerShowCard(UISeatId, cards, null, true, false);
          }
        }
        for (var _i11 = 0; _i11 < 3; _i11++) {
          _UISeatId = dataLogic.getUISeatIdBySeatId(_i11);
          this.setPlayerBalance(_UISeatId, msg.balances[_i11]);
        }
        DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
        if (dataLogic.isFriendRoom) {
          dataLogic.setPlayState(false);
          this.gamingPlayerToUnready();
          this.updateTips();
        } else dataLogic.gameEnd();
        msg.endData[dataLogic.selfSeatId] > 0 ? audioMgr.playEffect(this.aceWin) : audioMgr.playEffect(this.aceFailed);
        this.settlementChipNumAction(msg.endData);
        if (1 == msg.isSpring) {
          _resultAnimKey = -1;
          this.txtMulti.string < 8 && (this.txtMulti.string *= 2);
          _cardTypeFinishCb = function _cardTypeFinishCb() {
            _this5.animSpring.node.opacity = 255;
            _this5.animSpring.play();
            _this5.animSpring.on("finished", function() {
              _this5.runOverAction();
            });
          };
          if (msg.seatId == dataLogic.selfSeatId) {
            _cardTypeFinishCb();
            _cardTypeFinishCb = null;
          }
        } else {
          _resultAnimKey = msg.endData[dataLogic.selfSeatId] > 0 ? DDZDataLogic.isLandlord ? 0 : 1 : DDZDataLogic.isLandlord ? 2 : 3;
          msg.seatId == dataLogic.selfSeatId ? this.runOverAction() : _cardTypeFinishCb = function _cardTypeFinishCb() {
            cc.warn("\u724c\u578b\u7ed3\u675f\u52a8\u753b, \u6267\u884c\u7ed3\u7b97\u52a8\u753b");
            _this5.runOverAction();
          };
        }
      },
      runOverAction: function runOverAction() {
        dataLogic.isFriendRoom ? this.btReady.node.active = true : this.btMatching.node.active = true;
        if (-1 == _resultAnimKey) return;
        this.spineResult.node.opacity = 255;
        this.spineResult.setAnimation(0, _animName[_resultAnimKey], false);
        _resultAnimKey = -1;
      },
      settlementChipNumAction: function settlementChipNumAction(chips) {
        var UISeatId = void 0;
        for (var i = 0; i < chips.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = this.getPlayerBalance(UISeatId);
          var _playerInfo = dataLogic.playerInfo[i];
          _playerInfo.balance = balance;
          chips[i] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * chips[i]) / 100);
          _playerInfo.gameTimes += 1;
          this.player[i]._playerInfo = _playerInfo;
          this.resultChipNumTxt[UISeatId].node.opacity = 255;
          if (chips[i] > 0) {
            this.resultChipNumTxt[UISeatId].font = this.winChipNumFont;
            this.resultChipNumTxt[UISeatId].string = "+" + chips[i].toFixed(2);
          } else {
            this.resultChipNumTxt[UISeatId].font = this.loseChipNumFont;
            this.resultChipNumTxt[UISeatId].string = chips[i].toFixed(2);
          }
          this.resultChipNumTxt[UISeatId].node.y = -2;
          this.resultChipNumTxt[UISeatId].node.stopAllActions();
          this.resultChipNumTxt[UISeatId].node.runAction(cc.moveBy(.3, 0, 110));
        }
      },
      joinLandlordsCard: function joinLandlordsCard(cards) {
        var _DDZDataLogic$cardDat, _this6 = this;
        (_DDZDataLogic$cardDat = DDZDataLogic.cardData).push.apply(_DDZDataLogic$cardDat, _toConsumableArray(cards));
        DDZDataLogic.setCardData(DDZDataLogic.cardData);
        if (dataLogic.isHide) {
          this.resetHandCardView();
          return;
        }
        this.handCardParent[0].x = _card20ParentX;
        this.unregisterCardEvent();
        var n = 0, offX = 3 * _handCardSpacingX / 2;
        var _loop = function _loop(i) {
          _this6.handCard[0][i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = _this6.cardAtlas.getSpriteFrame(DDZDataLogic.cardData[i]);
          _this6.handCard[0][i].cardData = DDZDataLogic.cardData[i];
          _this6.handCard[0][i].opacity = 255;
          if (cards.indexOf(DDZDataLogic.cardData[i]) > -1) {
            _this6.handCard[0][i].x = _handCardSpacingX * i;
            _this6.handCard[0][i].y = _checkCardY + 15;
            _this6.handCard[0][i].runAction(cc.sequence(cc.delayTime(.5), cc.moveTo(.1, _this6.handCard[0][i].x, _unCheckCardY), cc.callFunc(function() {
              _this6.handCard[0][i].y = _unCheckCardY;
            })));
            n++;
          } else {
            _this6.handCard[0][i].x = _handCardSpacingX * (i - n) + offX;
            _this6.handCard[0][i].y = _unCheckCardY;
            _this6.handCard[0][i].runAction(cc.moveTo(.1, _handCardSpacingX * i, _unCheckCardY));
          }
        };
        for (var i = 0; i < 20; i++) _loop(i);
        this.scheduleOnce(this.registerCardEvent, .8);
      },
      setOtherPlayerCardCount: function setOtherPlayerCardCount(UISeatId, count) {
        cc.log("setOtherPlayerCardCount, ", UISeatId, count);
        if (constant.SelfUISeatId == UISeatId || count < 0) return;
        if (0 == count) {
          this.txtOtherCardCount[UISeatId].node.parent.opacity = 0;
          this.animWarningLight[UISeatId].stop();
          this.animWarningLight[UISeatId].node.opacity = 0;
        } else {
          this.txtOtherCardCount[UISeatId].node.parent.opacity = 255;
          this.txtOtherCardCount[UISeatId].string = count;
          if (count < 3 && 0 == this.animWarningLight[UISeatId].node.opacity) {
            this.animWarningLight[UISeatId].node.opacity = 255;
            this.animWarningLight[UISeatId].play();
          }
        }
      },
      setLandlord: function setLandlord(UISeatId) {
        DDZDataLogic.setLandlord(UISeatId);
        if (UISeatId == constant.SelfUISeatId) {
          this.handCardLandlordsIcon.opacity = 255;
          this.handCardLandlordsIcon.parent = this.handCard[0][19];
        }
        this.headOfLandlordsIcon.opacity = 255;
        this.headOfLandlordsIcon.x = this.player[UISeatId].x + 25;
        this.headOfLandlordsIcon.y = this.player[UISeatId].y + 49;
      },
      showLandlordsCards: function showLandlordsCards(cards) {
        var _this7 = this;
        var action = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
        dataLogic.isHide && (action = false);
        var animState = void 0, bg = void 0;
        _landlordCards = cards;
        var _loop2 = function _loop2(i) {
          _this7.threeLandlordsCards[i].opacity = 255;
          bg = _this7.threeLandlordsCards[i].getChildByName("bg");
          if (action) {
            bg.getComponent(cc.Sprite).spriteFrame = _this7.cardAtlas.getSpriteFrame("backCard");
            animState = _this7.threeLandlordsCards[i].getComponent(cc.Animation).play();
            animState.speed = .7;
            _this7.threeLandlordsCards[i].getComponent(cc.Animation).on("finished", function() {
              bg = _this7.threeLandlordsCards[i].getChildByName("bg");
              bg.scaleX = 1;
              bg.skewY = 0;
              bg.getComponent(cc.Sprite).spriteFrame = _this7.cardAtlas.getSpriteFrame(cards[i]);
            });
          } else {
            bg.scaleX = 1;
            bg.skewY = 0;
            bg.getComponent(cc.Sprite).spriteFrame = _this7.cardAtlas.getSpriteFrame(cards[i]);
          }
        };
        for (var i = 0; i < 3; i++) _loop2(i);
      },
      playDispenseLandlordCard: function playDispenseLandlordCard() {
        if (dataLogic.isHide) {
          this.showLandlordsCardsBg();
          this.showLandlordsCards([ "backCard", "backCard", "backCard" ], false);
          return;
        }
        var bg = void 0;
        for (var i = 0; i < 3; i++) {
          this.threeLandlordsCards[i].opacity = 255;
          this.threeLandlordsCards[i].x = -this.threeLandlordsCards[i].parent.x;
          this.threeLandlordsCards[i].y = -113;
          bg = this.threeLandlordsCards[i].getChildByName("bg");
          bg.getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.threeLandlordsCards[i].runAction(cc.moveTo(.5, 30 * i - 30, 0));
        }
      },
      showLandlordsCardsBg: function showLandlordsCardsBg() {
        for (var i = 0; i < 3; i++) {
          this.threeLandlordsCards[i].opacity = 255;
          this.threeLandlordsCards[i].stopAllActions();
          this.threeLandlordsCards[i].x = 30 * i - 30;
          this.threeLandlordsCards[i].y = 4;
        }
      },
      hideLandlordsCards: function hideLandlordsCards() {
        for (var i = 0; i < 3; i++) this.threeLandlordsCards[i].opacity = 0;
      },
      showCallScoreBtn: function showCallScoreBtn(leastScore) {
        this.callScoreBtn[0].active = true;
        for (var i = leastScore; i < 4; i++) this.callScoreBtn[i].active = true;
      },
      showShowCardBtn: function showShowCardBtn() {
        if (null == _lastPlayerCardType) this.showCardBtn.active = true; else if (0 == _hintSchemes.length) this.incapableBtn.active = true; else {
          this.passBtn.active = true;
          this.hintBtn.active = true;
          this.showCardBtn.active = true;
        }
      },
      hideShowCardBtn: function hideShowCardBtn() {
        this.showCardBtn.active = false;
        this.incapableBtn.active = false;
        this.passBtn.active = false;
        this.hintBtn.active = false;
      },
      showCardTimeout: function showCardTimeout() {
        cc.warn("\u8d85\u65f6\u81ea\u52a8\u51fa\u724c", _lastPlayerCardType, _hintSchemes);
        this.hideShowCardBtn();
        for (var i = 19; i > -1; i--) if (0 != this.handCard[0][i].opacity) {
          this.handCard[0][i].getChildByName("bg").color = kf.fromHEX("#FFFFFF");
          this.handCard[0][i].opacity = 255;
          this.handCard[0][i].y = _unCheckCardY;
        }
        if (null == _lastPlayerCardType) {
          for (var _i12 = 19; _i12 > -1; _i12--) if (0 != this.handCard[0][_i12].opacity) {
            this.handCard[0][_i12].opacity = 255;
            this.handCard[0][_i12].y = _checkCardY;
            break;
          }
        } else {
          if (0 == _hintSchemes.length) {
            this.btnEvent("", "pass");
            return;
          }
          for (var _i13 = 19; _i13 > -1; _i13--) {
            if (0 == this.handCard[0][_i13].opacity) continue;
            if (_hintSchemes[0].indexOf(this.handCard[0][_i13].cardData) > -1) {
              cc.log("===\u81ea\u52a8\u51fa", this.handCard[0][_i13].cardData);
              this.handCard[0][_i13].opacity = 255;
              this.handCard[0][_i13].y = _checkCardY;
            }
          }
        }
        this.showCard();
      },
      setOtherPlayerAutoPlayState: function setOtherPlayerAutoPlayState(UISeatId, state) {
        cc.log("setOtherPlayerAutoPlayState, UISeatId==", UISeatId, state);
        if (UISeatId == constant.SelfUISeatId) return;
        this.otherPlayerAutoPlay[UISeatId].opacity = 1 == state ? 255 : 0;
      },
      callScoreTimeout: function callScoreTimeout() {
        this.btCallScoreEvent("", 0);
      },
      callScoreCb: function callScoreCb(msg) {
        if (constant.HttpCode.Succeed != msg.Code) {
          this.reqRecover();
          return;
        }
      },
      showCardCb: function showCardCb(msg) {
        if (constant.HttpCode.Succeed != msg.Code) {
          if (!this.socketIO.isConnected()) return;
          this.reqRecover();
          return;
        }
      },
      passCb: function passCb(msg) {
        if (constant.HttpCode.Succeed != msg.Code) {
          if (!this.socketIO.isConnected()) return;
          this.reqRecover();
          return;
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      setPlayerHead: function setPlayerHead(UISeatId, headUrl) {
        var self = this;
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          self.headSp[UISeatId].spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerUIInfo: function setPlayerUIInfo(UISeatId, data) {
        this.setPlayerHead(UISeatId, data.headUrl);
        if (UISeatId != constant.SelfUISeatId) {
          var nicknameNode = this.player[UISeatId].getChildByName("bg").getChildByName("nickname");
          nicknameNode.getComponent(cc.Label).string = data.nickName;
        }
        this.setPlayerBalance(UISeatId, data.balance);
      },
      getPlayerBalance: function getPlayerBalance(UISeatId) {
        var balance = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        return Number(balance.string);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        var balanceTxt = this.player[UISeatId].getChildByName("bg").getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      resetHandCardStyle: function resetHandCardStyle() {
        var bg = void 0;
        for (var i = 0; i < 20; i++) {
          this.handCard[0][i].scale = 1.2;
          bg = this.handCard[0][i].getChildByName("bg");
          bg.color = kf.fromHEX("#FFFFFF");
          bg.scaleX = 1;
          bg.skewY = 0;
        }
      },
      resetHandCardView: function resetHandCardView() {
        this.handCardParent[0].stopAllActions();
        this.resetHandCardStyle();
        this.hidePlayerCard(constant.SelfUISeatId);
        var cards = DDZDataLogic.cardData;
        cc.log("\u91cd\u7f6e\u624b\u724c\u89c6\u56fe", cards, "\u662f\u5426\u5730\u4e3b", DDZDataLogic.isLandlord);
        this.handCardParent[0].x = _centerX - .5 * (cards.length - 1) * _handCardSpacingX;
        for (var i = 0; i < cards.length; i++) {
          this.handCard[0][i].cardData = cards[i];
          this.handCard[0][i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame(cards[i]);
          this.handCard[0][i].x = _handCardSpacingX * i;
          this.handCard[0][i].y = _unCheckCardY;
          this.handCard[0][i].opacity = 255;
        }
        if (DDZDataLogic.isLandlord) {
          this.tableCardOfLandlordsIcon.opacity = 0;
          this.setSelfHandCardLandlordIcon();
        }
      },
      setHandCardUnCheck: function setHandCardUnCheck() {
        var hasChange = false;
        for (var i = 0; i < 20; i++) if (this.handCard[0][i].y == _checkCardY) {
          this.handCard[0][i].y = _unCheckCardY;
          hasChange = true;
        }
        return hasChange;
      },
      dispenseCardAction: function dispenseCardAction(doneCb) {
        var _this8 = this;
        if (dataLogic.isHide) {
          this.resetHandCardView();
          doneCb();
          return;
        }
        _isDispensingCard = true;
        audioMgr.playEffect(this.aceDispenseCard);
        this.unregisterCardEvent();
        this.resetHandCardStyle();
        this.hidePlayerCard(constant.SelfUISeatId);
        var spacingTime = .1;
        this.handCardParent[0].stopAllActions();
        this.handCardParent[0].x = _centerX;
        this.handCardParent[0].runAction(cc.moveTo(17 * spacingTime, cc.v2(_card17ParentX, 2)));
        var _loop3 = function _loop3(i) {
          _this8.handCard[0][i].cardData = DDZDataLogic.cardData[i];
          _this8.handCard[0][i].opacity = 0;
          _this8.handCard[0][i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = _this8.cardAtlas.getSpriteFrame(DDZDataLogic.cardData[i]);
          _this8.scheduleOnce(function() {
            _this8.handCard[0][i].x = _handCardSpacingX * (i - 1);
            _this8.handCard[0][i].y = _unCheckCardY;
            _this8.handCard[0][i].opacity = 255;
            _this8.handCard[0][i].runAction(cc.moveTo(spacingTime, _handCardSpacingX * i, _unCheckCardY));
          }, spacingTime * i);
        };
        for (var i = 0; i < 17; i++) _loop3(i);
        this.scheduleOnce(function() {
          _isDispensingCard = false;
          _this8.registerCardEvent();
          doneCb();
        }, 18 * spacingTime);
      },
      btCallScoreEvent: function btCallScoreEvent(event, score) {
        event && audioMgr.playEffect(this.audioBtn);
        score = Number(score);
        this.showCallScore(constant.SelfUISeatId, score);
        this.hideCallScoreBtn();
        var sex = dataLogic.getSex(constant.SelfUISeatId);
        cc.log("\u64ad\u653e\u53eb\u5206\u97f3\u6548", 4 * sex + score);
        audioMgr.playEffect(this.acCallScore[4 * sex + score]);
        this.removeTimer();
        _postCallScore.landlordNum = score;
        _curOperationUISeatId = -1;
        http.post(_postCallScore, "callScoreCb");
      },
      showShowCardError: function showShowCardError(str) {
        this.txtShowCardError.node.opacity = 255;
        this.txtShowCardError.string = str;
        this.txtShowCardError.node.runAction(cc.sequence(cc.delayTime(2), cc.fadeOut(0)));
      },
      showCard: function showCard() {
        var cards = [], cardNodes = [];
        for (var i = 0; i < 20; i++) if (this.handCard[0][i].y == _checkCardY && 255 == this.handCard[0][i].opacity) {
          cc.log("\u9009\u51fa\u7684\u724c,", this.handCard[0][i].cardData);
          cards.push(this.handCard[0][i].cardData);
          cardNodes.push(this.handCard[0][i]);
        }
        var result = DDZDataLogic.getCardType(cards);
        if (-1 == result.cardType) {
          cc.warn("\u60a8\u7684\u9009\u724c\u4e0d\u7b26\u5408\u89c4\u5219", result);
          this.showShowCardError("\u60a8\u7684\u9009\u724c\u4e0d\u7b26\u5408\u89c4\u5219");
          cards.length > 0 && audioMgr.playEffect(this.aceCheckCard);
          this.setHandCardUnCheck();
          return;
        }
        if (null != _lastPlayerCardType) {
          var isWin = DDZDataLogic.isBiggerCard(result.cards, _lastPlayerCards, result.cardType, _lastPlayerCardType);
          if (!isWin) {
            cc.warn("\u60a8\u7684\u9009\u724c\u4e0d\u7b26\u5408\u89c4\u5219", result);
            this.showShowCardError("\u60a8\u7684\u9009\u724c\u4e0d\u7b26\u5408\u89c4\u5219");
            cards.length > 0 && audioMgr.playEffect(this.aceCheckCard);
            this.setHandCardUnCheck();
            return;
          }
        }
        _curOperationUISeatId = -1;
        this.playShowCardAudio(constant.SelfUISeatId, cards, result.cardType, _lastPlayerCardType);
        _isServerOperation = false;
        _tableCardData[constant.SelfUISeatId] = kf.clone(cards);
        DDZDataLogic.delCardData(cards);
        this.showCardAction(cardNodes, result.cardType, cards);
        this.hideShowCardBtn();
        this.removeTimer();
        _postShowCard.cards = cards.join(",");
        _postShowCard.isAutoPlay = DDZDataLogic.isAutoPlay ? 1 : 0;
        http.post(_postShowCard, "showCardCb", cards);
      },
      hideCardOnTable: function hideCardOnTable(UISeatId) {
        this.spCardType[UISeatId] && (this.spCardType[UISeatId].spriteFrame = null);
        if (UISeatId == constant.SelfUISeatId) {
          cc.log("\u9690\u85cf\u684c\u5b50\u4e0a\u7684\u724c", _isPlayingShowCardAction);
          if (_isPlayingShowCardAction) this.resetHandCardView(); else for (var i = 0; i < 20; i++) _selfCardOnTableY == this.handCard[0][i].y && (this.handCard[0][i].opacity = 0);
        } else this.hidePlayerCard(UISeatId);
      },
      setCardOnTable: function setCardOnTable(UISeatId, cards) {
        cc.log("\u8bbe\u7f6e\u684c\u5b50\u4e0a\u7684\u724c", UISeatId, cards);
        this.hideCardOnTable(UISeatId);
        if (0 == cards.length) return;
        if (-1 == cards[0]) {
          this.spScores[UISeatId].spriteFrame = this.sfPass;
          this.spScores[UISeatId].node.opacity = 255;
          return;
        }
        if (UISeatId == constant.SelfUISeatId) {
          var key = 0;
          var startX = _centerX - this.handCardParent[0].x + .5 * (cards.length - 1) * -_tableCardSpacingX;
          startX += 11;
          for (var i = 0; i < 20; i++) {
            if (0 != this.handCard[0][i].opacity) continue;
            this.handCard[0][i].opacity = 255;
            this.handCard[0][i].y = _selfCardOnTableY;
            this.handCard[0][i].scale = _tableCardScale;
            this.handCard[0][i].x = key * _tableCardSpacingX + startX;
            this.handCard[0][i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame(cards[key]);
            key++;
            if (key == cards.length) {
              DDZDataLogic.isLandlord && this.setSelfTableCardLandlordIcon(this.handCard[0][i]);
              break;
            }
          }
        } else this.otherPlayerShowCard(UISeatId, cards, null, false, false);
      },
      hint: function hint(schemesKey) {
        audioMgr.playEffect(this.aceCheckCard);
        this.setHandCardUnCheck();
        var n = 0;
        for (var i = 0; i < 20; i++) {
          if (_hintSchemes[schemesKey].indexOf(this.handCard[0][i].cardData) > -1) {
            this.handCard[0][i].y = _checkCardY;
            n++;
          }
          if (_hintSchemes[schemesKey].length == n) break;
        }
      },
      showCardAction: function showCardAction(cardNodes, cardType, cardDataList) {
        var _this9 = this;
        if (dataLogic.isHide) {
          this.resetHandCardView();
          this.setCardOnTable(constant.SelfUISeatId, cardDataList);
          return;
        }
        _isPlayingShowCardAction = true;
        var spacingX = _tableCardSpacingX, startX = _centerX - this.handCardParent[0].x + .5 * (cardNodes.length - 1) * -spacingX;
        0 == cardNodes.length % 2 ? startX += 14 : startX += 13;
        this.unregisterCardEvent();
        this.scheduleOnce(function() {
          for (var i = 0; i < cardNodes.length; i++) {
            cardNodes[i].y = _selfCardOnTableY;
            cardNodes[i].scale = _tableCardScale;
            cardNodes[i].x = i * spacingX + startX;
          }
          _this9.playCardTypeAnim(constant.SelfUISeatId, cardType);
          spacingX = _handCardSpacingX;
          var len = DDZDataLogic.cardData.length;
          startX = _centerX - _this9.handCardParent[0].x + .5 * (len - 1) * -spacingX;
          cc.log("startX", startX, DDZDataLogic.cardData);
          var n = 0;
          for (var _i14 = 0; _i14 < 20; _i14++) if (_unCheckCardY == _this9.handCard[0][_i14].y && 255 == _this9.handCard[0][_i14].opacity) {
            _this9.handCard[0][_i14].runAction(cc.moveTo(.07, n * spacingX + startX, _unCheckCardY));
            n++;
          }
        }, .2);
        this.scheduleOnce(this.doneShowCardAction, .3);
        if (DDZDataLogic.isLandlord) {
          this.setSelfTableCardLandlordIcon(cardNodes[cardNodes.length - 1]);
          this.setSelfHandCardLandlordIcon();
        }
      },
      doneShowCardAction: function doneShowCardAction() {
        cc.log("\u51fa\u724c\u52a8\u753b\u64ad\u653e\u5b8c\u6210");
        _isPlayingShowCardAction = false;
        this.registerCardEvent();
        if (!_isPlayingCardTypeAnim) {
          _cardTypeFinishCb && _cardTypeFinishCb();
          _cardTypeFinishCb = null;
          dataLogic.runNextMsg();
        }
      },
      setSelfTableCardLandlordIcon: function setSelfTableCardLandlordIcon(parent) {
        if (!DDZDataLogic.isLandlord) return;
        if (null == parent) {
          parent = this.getSelfTableCardLandlordIconParent();
          if (!parent) return;
        }
        this.tableCardOfLandlordsIcon.x = 62;
        this.tableCardOfLandlordsIcon.opacity = 255;
        this.tableCardOfLandlordsIcon.parent = parent;
      },
      setSelfHandCardLandlordIcon: function setSelfHandCardLandlordIcon() {
        for (var i = 19; i > -1; i--) if (this.handCard[0][i].y == _unCheckCardY && 255 == this.handCard[0][i].opacity) {
          this.handCardLandlordsIcon.opacity = 255;
          this.handCardLandlordsIcon.parent = this.handCard[0][i];
          break;
        }
      },
      getSelfTableCardLandlordIconParent: function getSelfTableCardLandlordIconParent() {
        for (var i = 19; i > -1; i--) if (this.handCard[0][i].y == _selfCardOnTableY && 255 == this.handCard[0][i].opacity) return this.handCard[0][i];
      },
      playCardTypeAnim: function playCardTypeAnim(UISeatId, cardType) {
        var _this10 = this;
        if (null == cardType || null == this.animCardType[cardType]) {
          _isPlayingCardTypeAnim = false;
          if (!_isPlayingShowCardAction) {
            _cardTypeFinishCb && _cardTypeFinishCb();
            _cardTypeFinishCb = null;
            dataLogic.runNextMsg();
          }
          return false;
        }
        _isPlayingCardTypeAnim = true;
        cardType == DDZConstant.CardType.Bomb || cardType == DDZConstant.CardType.Airplane || (this.animCardType[cardType].node.opacity = 255);
        switch (cardType) {
         case DDZConstant.CardType.Bomb:
          this.animCardType[cardType].node.active = true;
          break;

         case DDZConstant.CardType.Line:
         case DDZConstant.CardType.DoubleLine:
          this.animCardType[cardType].node.position = _LineAnimPos[UISeatId];
          this.animCardType[cardType].node.getChildByName("sz_zi").getComponent(cc.Sprite).spriteFrame = this.sfCardType[cardType];
        }
        switch (cardType) {
         case DDZConstant.CardType.Airplane:
          audioMgr.playEffect(this.aceAirplane);
          break;

         case DDZConstant.CardType.Bomb:
         case DDZConstant.CardType.KingBomb:
          audioMgr.playEffect(this.aceBomb);
          break;

         case DDZConstant.CardType.Line:
          audioMgr.playEffect(this.aceLine);
          break;

         case DDZConstant.CardType.DoubleLine:
          audioMgr.playEffect(this.acePairLine);
        }
        var finishCb = function finishCb() {
          _this10.clearCardTypeAnim();
          _isPlayingCardTypeAnim = false;
          _cardTypeFinishCb && _cardTypeFinishCb();
          _cardTypeFinishCb = null;
          dataLogic.runNextMsg();
        };
        if (dataLogic.isHide) finishCb(); else {
          this.animCardType[cardType].play();
          this.animCardType[cardType].off("finished");
          this.animCardType[cardType].on("finished", finishCb);
        }
        return true;
      },
      clearCardTypeAnim: function clearCardTypeAnim() {
        for (var i = 0; i < this.animCardType.length; i++) if (this.animCardType[i]) {
          this.animCardType[i].stop();
          switch (i) {
           case DDZConstant.CardType.Bomb:
            this.animCardType[i].node.active = false;
            break;

           default:
            this.animCardType[i].node.opacity = 0;
          }
        }
      },
      updateRecordCard: function updateRecordCard() {
        for (var i = 0; i < 15; i++) {
          this.txtRecordCards[i].string = DDZDataLogic.unknownCardCount[i];
          if (0 == this.txtRecordCards[i].string) {
            this.txtRecordCards[i].node.color = kf.fromHEX("#AA8B7E");
            this.txtRecordCards[i].node.getComponent(cc.LabelOutline).color = kf.fromHEX("#AA8B7E");
          } else {
            this.txtRecordCards[i].node.color = kf.fromHEX("#D23F00");
            this.txtRecordCards[i].node.getComponent(cc.LabelOutline).color = kf.fromHEX("#D23F00");
          }
        }
      },
      otherPlayerShowCard: function otherPlayerShowCard(UISeatId, cards, cardType, needAnim) {
        var _this11 = this;
        var isUpdateCardCount = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];
        null == needAnim && (needAnim = !dataLogic.isHide);
        if (isUpdateCardCount) {
          var len = this.txtOtherCardCount[UISeatId].string - cards.length;
          this.setOtherPlayerCardCount(UISeatId, len);
          var sex = dataLogic.getSex(UISeatId);
          this.scheduleOnce(function() {
            switch (len) {
             case 1:
              audioMgr.playEffect(_this11.acRemainingOne[sex]);
              audioMgr.playEffect(_this11.aceWarn);
              break;

             case 2:
              audioMgr.playEffect(_this11.acRemainingTwo[sex]);
              audioMgr.playEffect(_this11.aceWarn);
            }
          }, .5);
          DDZDataLogic.subUnknownCardCount(cards);
          this.updateRecordCard();
        }
        var spacingX = 1 == UISeatId ? -_tableCardSpacingX : _tableCardSpacingX;
        var y = cards.length < 10 ? -33 : 30;
        var maxLineCount = cards.length < 19 ? 9 : 10;
        var n = 0;
        1 == UISeatId && (n = cards.length < 10 ? cards.length - 1 : maxLineCount - 1);
        var step = 1 == UISeatId ? -1 : 1;
        for (var i = 0; i < cards.length; i++) {
          if (i == maxLineCount) {
            y = -33;
            n = 1 == UISeatId ? cards.length - maxLineCount - 1 : 0;
          }
          this.handCard[UISeatId][i].opacity = 255;
          this.handCard[UISeatId][i].getChildByName("bg").getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame(cards[i]);
          this.handCard[UISeatId][i].y = y;
          if (needAnim) {
            this.handCard[UISeatId][i].x = -spacingX;
            this.handCard[UISeatId][i].runAction(cc.moveTo(.15, spacingX * n, y));
          } else {
            this.handCard[UISeatId][i].stopAllActions();
            this.handCard[UISeatId][i].x = spacingX * n;
          }
          n += step;
        }
        if (DDZDataLogic.landlordUISeatId == UISeatId) {
          this.tableCardOfLandlordsIcon.x = 1 == UISeatId ? -36 : 62;
          this.tableCardOfLandlordsIcon.opacity = 255;
          this.tableCardOfLandlordsIcon.parent = this.handCard[UISeatId][cards.length - 1];
        }
        this.spCardType[UISeatId].spriteFrame = null;
        if (needAnim) {
          _isPlayingCardTypeAnim = true;
          isUpdateCardCount && this.scheduleOnce(function() {
            _this11.spCardType[UISeatId].spriteFrame = _this11.sfCardType[cardType];
            cc.log("======\u51c6\u5907\u64ad\u653e\u724c\u578b\u52a8\u753b", UISeatId, cardType);
            _this11.playCardTypeAnim(UISeatId, cardType);
          }, .17);
        } else {
          this.spCardType[UISeatId].spriteFrame = this.sfCardType[cardType];
          _cardTypeFinishCb && _cardTypeFinishCb();
          _cardTypeFinishCb = null;
          dataLogic.runNextMsg();
        }
      },
      showCallScore: function showCallScore(UISeatId, score) {
        this.spScores[UISeatId].spriteFrame = this.sfScore[score];
        this.spScores[UISeatId].node.opacity = 255;
      },
      hideCallScore: function hideCallScore() {
        for (var i = 0; i < 3; i++) this.spScores[i].node.opacity = 0;
      },
      hideOtherPlayerAutoPlayIcon: function hideOtherPlayerAutoPlayIcon(UISeatId) {
        if (null == UISeatId) for (var i = 1; i < 3; i++) this.player[i].getChildByName("trusteeshipIcon").opacity = 0; else this.player[UISeatId].getChildByName("trusteeshipIcon").opacity = 0;
      },
      showOtherPlayerAutoPlayIcon: function showOtherPlayerAutoPlayIcon(UISeatId) {
        if (UISeatId == constant.SelfUISeatId) return;
        this.player[UISeatId].getChildByName("trusteeshipIcon").opacity = 255;
      },
      setAutoPlayUI: function setAutoPlayUI(isAutoPlay) {
        this.autoPlayMask.active = isAutoPlay;
        this.spAutoBtn.spriteFrame = isAutoPlay ? this.sfCancelAutoPlay : this.sfAutoPlay;
      },
      switchAutoPlay: function switchAutoPlay(state) {
        var onlyUpdateUI = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        var open = null == state ? !DDZDataLogic.isAutoPlay : state;
        if (DDZDataLogic.isAutoPlay == open) return;
        if (open) {
          this.unregisterCardEvent();
          this.setAutoPlayUI(true);
          DDZDataLogic.setAutoPlayState(true);
          constant.SelfUISeatId == _curOperationUISeatId && this.autoOperation();
          onlyUpdateUI || http.post(DDZConstant.PostAutoPlay, "autoPlayCb");
        } else {
          this.registerCardEvent();
          this.setAutoPlayUI(false);
          DDZDataLogic.setAutoPlayState(false);
          if (!onlyUpdateUI) {
            if (constant.SelfUISeatId == _curOperationUISeatId) {
              this.unschedule(this.autoOperation);
              var endTime = dataLogic.timerEndTimestamp - dataLogic.timeOff;
              endTime = this.giveOperationRight(endTime, _curMaxScore + 1);
              this.countDown(_curOperationUISeatId, endTime);
            }
            http.post(DDZConstant.PostCancelAutoPlay, "cancelAutoPlayCb");
          }
        }
      },
      autoPlayCb: function autoPlayCb() {},
      cancelAutoPlayCb: function cancelAutoPlayCb() {},
      onAutoPlay: function onAutoPlay(msg) {
        this.updateAutoPlayState(msg.seatId, msg.state);
      },
      updateAutoPlayState: function updateAutoPlayState(seatId, state) {
        if (seatId == dataLogic.selfSeatId) this.switchAutoPlay(1 == state, true); else {
          _UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
          1 == state ? this.showOtherPlayerAutoPlayIcon(_UISeatId) : this.hideOtherPlayerAutoPlayIcon(_UISeatId);
        }
      },
      btnEvent: function btnEvent(eventTouch, eventName) {
        "" != eventTouch && audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "switchAutoPlay":
          _isShowScoreTime || DDZDataLogic.curStage != DDZConstant.Stage.ShowCard || this.switchAutoPlay();
          break;

         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf);
          break;

         case "exitGame":
          this.tryExitRoom();
          break;

         case "help":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf);
          record.getComponent("record").recordMainShow(constant.GameId.Landlords);
          break;

         case "matching":
          this.matching();
          break;

         case "showCard":
          this.showCard();
          break;

         case "hint":
          this.hint(_schemesKey);
          _schemesKey = (_schemesKey + 1) % _hintSchemes.length;
          break;

         case "pass":
          _isServerOperation = false;
          _curOperationUISeatId = -1;
          this.pass();
          _postPass.isAutoPlay = DDZDataLogic.isAutoPlay ? 1 : 0;
          http.post(_postPass, "passCb");
          break;

         case "alterCardRecordView":
          this.recordCardBg.active = !this.recordCardBg.active;
          cc.sys.localStorage.setItem("landlordRecordCardState", this.recordCardBg.active);
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.txtMatchingToastLayer.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         default:
          cc.warn("\u672a\u77e5\u7684\u4e8b\u4ef6\u540d", eventName);
        }
      },
      pass: function pass() {
        var sex = dataLogic.getSex(constant.SelfUISeatId);
        var key = 3 * sex + dataLogic.randomInt(0, 2);
        audioMgr.playEffect(this.acPass[key]);
        _tableCardData[constant.SelfUISeatId] = [ -1 ];
        var needAudio = this.setHandCardUnCheck();
        needAudio && audioMgr.playEffect(this.aceCheckCard);
        this.spScores[0].spriteFrame = this.sfPass;
        this.spScores[0].node.opacity = 255;
        this.hideShowCardBtn();
        this.removeTimer();
      },
      tryExitRoom: function tryExitRoom() {
        if (!(DDZConstant.Stage.GameOver == DDZDataLogic.curStage || dataLogic.isFriendRoom && DDZConstant.Stage.Matching == DDZDataLogic.curStage)) {
          this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\u54e6");
          return;
        }
        this.exitRoom();
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        this.unscheduleAllCallbacks();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      setMatchingToastUI: function setMatchingToastUI(canCancel) {
        if (canCancel) {
          this.btCancelMatching.node.active = true;
          this.txtMatchingToastLayer.string = "\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u52a0\u5165...";
        } else {
          this.btCancelMatching.node.active = false;
          this.txtMatchingToastLayer.string = "\u6b63\u5728\u8bf7\u6c42\u5339\u914d...";
        }
      },
      setAnte: function setAnte(ante) {
        this.txtAnte.string = "\u5e95\u6ce8\uff1a" + ante;
        this.txtAnte._updateRenderData(true);
        this.anteBg.width = this.txtAnte.node.width + 40;
        this.playIdBg.x = this.anteBg.x + this.anteBg.width + 20;
      },
      setPlayIdBgState: function setPlayIdBgState() {
        var playId = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
        this.txtPlayId.string = "\u724c\u5c40\u7f16\u53f7\uff1a" + playId;
        this.txtPlayId._updateRenderData(true);
        this.playIdBg.width = this.playIdBg.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.playIdBg.x + this.playIdBg.width + 20);
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.btMatching.node.active = true;
          this.setMatchingToastView(false);
          DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        dataLogic.setDeskId(data.Data.deskId);
        this.setMatchingToastUI(true);
      },
      ready: function ready() {
        DDZDataLogic.setCurStage(DDZConstant.Stage.Matching);
        this.txtMulti.string = 1;
        _resultAnimKey = -1;
        DDZDataLogic.resetData();
        this.updateRecordCard();
        var roomKey = dataLogic.curRoomKey;
        this.setAnte(dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey));
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        _tableCardData = [ [], [], [] ];
        DDZDataLogic.setCurStage(DDZConstant.Stage.Matching);
        DDZDataLogic.resetData();
        this.updateRecordCard();
        dataLogic.leaveTable();
        dataLogic.setNeedRecover(true);
        this.unscheduleAllCallbacks();
        var roomKey = dataLogic.curRoomKey;
        this.setAnte(dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey));
        this.initMatchingView(true, false);
        this.btMatching.node.active = false;
        gfConstant.PostMatching.roomId = dataLogic.curGameId + roomKey;
        http.post(gfConstant.PostMatching, "matchingCb");
      },
      hideCallScoreBtn: function hideCallScoreBtn() {
        for (var i = 0; i < this.callScoreBtn.length; i++) this.callScoreBtn[i].active = false;
      },
      hidePlayerCard: function hidePlayerCard(UISeatId) {
        if (null == this.handCard[UISeatId]) return;
        for (var i = 0; i < 20; i++) {
          this.handCard[UISeatId][i].stopAllActions();
          this.handCard[UISeatId][i].opacity = 0;
        }
      },
      hideAllPlayerCard: function hideAllPlayerCard() {
        for (var i = 0; i < 3; i++) {
          this.hidePlayerCard(i);
          this.setOtherPlayerCardCount(i, 0);
        }
      },
      hideOtherPlayer: function hideOtherPlayer() {
        for (var i = 1; i < 3; i++) this.player[i].active = false;
      },
      showAndUpdateSelfUI: function showAndUpdateSelfUI() {
        this.player[constant.SelfUISeatId].active || (this.player[constant.SelfUISeatId].active = true);
        this.setPlayerHead(constant.SelfUISeatId, dataLogic.userHeadUrl);
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var nicknameNode = this.player[constant.SelfUISeatId].getChildByName("bg").getChildByName("nickname");
        nicknameNode.getComponent(cc.Label).string = dataLogic.userName;
      },
      cleanView: function cleanView() {
        this.animSpring.stop();
        this.animSpring.node.opacity = 0;
        this.spineResult.node.opacity = 0;
        this.handCardLandlordsIcon.opacity = 0;
        this.headOfLandlordsIcon.opacity = 0;
        this.tableCardOfLandlordsIcon.opacity = 0;
        this.hideCallScoreBtn();
        this.hideLandlordsCards();
        this.hideCallScore();
        this.hideShowCardBtn();
        this.hideOtherPlayer();
        this.hideOtherPlayerAutoPlayIcon();
        this.showAndUpdateSelfUI();
        this.resultChipNumTxt[constant.SelfUISeatId].node.opacity = 0;
        this.hideAllPlayerCard();
        this.removeTimer();
        this.setPlayIdBgState("");
        this.setMatchingToastView(false);
        this.txtMulti.string = 1;
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        this.cleanView();
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.btMatching.node.active = false;
        } else this.btMatching.node.active = true;
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.GameOver) {
          DDZDataLogic.setCurStage(DDZConstant.Stage.GameOver);
          this.btMatching.node.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      cancelMatchingExceptionHandling: function cancelMatchingExceptionHandling(msg) {
        if (msg.Code == constant.HttpCode.Succeed || msg.Code == constant.HttpCode.Timeout) return;
        dataLogic.isPlaying || this.showRefreshToast("\u8bf7\u6c42\u8d85\u65f6\uff0c\u91cd\u542f\u8bd5\u8bd5\u770b\u5427", 4, 3);
      },
      playerLeave: function playerLeave(seatId) {
        cc.log("\u6e05\u7406\u73a9\u5bb6UI", seatId);
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        UISeatId == DDZDataLogic.landlordUISeatId && (this.headOfLandlordsIcon.opacity = 0);
        this.setOtherPlayerAutoPlayState(UISeatId, 0);
        this.hidePlayerCard(UISeatId);
        this.setOtherPlayerCardCount(UISeatId, 0);
        _tableCardData[UISeatId] = [];
      },
      netDisconnect: function netDisconnect() {
        dataLogic.clearMsgList();
        this.unscheduleAllCallbacks();
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  layerMsg: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e482fY+irZPr6pmpjGHsY2c", "layerMsg");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        mask: cc.Node,
        txtTip: cc.Label
      },
      showToast: function showToast() {
        this.node.stopAllActions();
        this.isNeedMask && (this.node.getChildByName("bg").active = true);
        this.node.active = true;
      },
      closeToast: function closeToast() {
        this.isNeedMask && (this.node.getChildByName("bg").active = false);
        this.node.active = false;
        kf.killObj(this.node);
      },
      setTipTxt: function setTipTxt(str) {
        this.txtTip.string = str;
        this.txtTip._updateRenderData(true);
        this.node.getChildByName("tip").width = this.txtTip.node.width + 80;
        this.node.getChildByName("tip").height = this.txtTip.node.height + 28;
      },
      layerTip: function layerTip(tip, isNeedMask) {
        var _this = this;
        var isAutoHide = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        var isListeningClick = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3];
        this.isNeedMask = isNeedMask;
        this.isListeningClick = isListeningClick;
        this.setTipTxt(tip);
        this.showToast();
        isAutoHide && this.scheduleOnce(function() {
          _this.closeToast();
        }, 2);
      },
      onLoad: function onLoad() {
        var _this2 = this;
        this.mask.on(cc.Node.EventType.TOUCH_END, function() {
          if (!_this2.isListeningClick) return;
          _this2.unscheduleAllCallbacks();
          kf.killObj(_this2.node);
        });
        this.mask.height = cc.winSize.height + 200;
        this.mask.width = cc.winSize.width + 200;
      }
    });
    cc._RF.pop();
  }, {} ],
  levelRule: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "051dbbMFYtKzJuy0WzfAEqO", "levelRule");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        levelItem: cc.Prefab,
        level_content: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getGradeListCb", this.getGradeListCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        var sendData = {
          action: "GetInitData",
          Requirement: JSON.stringify([ "GradeList" ])
        };
        this.reqDateAndShowLoadView(sendData, "getGradeListCb");
      },
      getGradeListCb: function getGradeListCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          dataLogic.setGradeListData(data.BackData.GradeList);
          this.randerGradeList(data.BackData.GradeList);
        }
      },
      randerGradeList: function randerGradeList(data) {
        for (var i = 0; i < data.length; i++) {
          var list = data[i];
          var levelItem = cc.instantiate(this.levelItem);
          levelItem.parent = this.level_content;
          levelItem.getChildByName("userLevel").getChildByName("level").getComponent(cc.Label).string = "VIP" + list.Grade;
          levelItem.getChildByName("level_txt").getComponent(cc.Label).string = list.GradeName;
          levelItem.getChildByName("upLevel_score").getComponent(cc.Label).string = list.GradeGrow;
          levelItem.y = -(levelItem.height / 2 + 3 + levelItem.height * i);
          levelItem.getChildByName("itemBg").color = i % 2 == 0 ? new cc.Color(252, 242, 227) : new cc.Color(252, 250, 243);
        }
        this.level_content.height = data.length * this.level_content.children[0].height + 5;
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  loginOut: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a0b618JdFBBIJY0oP+BP7Ub", "loginOut");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtHint: cc.Label
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getLoginOutCb", this.getLoginOutCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        dataLogic.userPhoneNum || (this.txtHint.string = "\u60a8\u5f53\u524d\u4e3a\u6e38\u5ba2\u8d26\u53f7\uff0c\u6ce8\u9500\u767b\u5f55\u540e\u8d26\u53f7\u6570\u636e\u5c06\u88ab\u6e05\u7a7a\uff0c\u5efa\u8bae\u524d\u5f80\u4e2a\u4eba\u4e3b\u9875-\u5b89\u5168\u4e2d\u5fc3\u7ed1\u5b9a\u624b\u673a\u53f7\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\u3002");
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "loginOut":
          var sendData = {
            action: "LogOut"
          };
          this.reqDateAndShowLoadView(sendData, "getLoginOutCb", null, true);
        }
      },
      getLoginOutCb: function getLoginOutCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          dataLogic.loginOut();
          this.showLayerTip("\u6ce8\u9500\u6210\u529f");
          this.scheduleOnce(function() {
            clientEvent.dispatchEvent("loadScene", constant.SceneName.Login);
          }, 1.5);
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  loginView: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c62f8n52QFBDb5V9EkVchcA", "loginView");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _CheckShowCode = {
      Action: "GetImageCode",
      isJack: 1,
      CheckShowCode: 1
    };
    var _loginSucceedCb = null;
    var _registerSucceedCb = null;
    var _phoneLoginSucceedCb = null;
    var _phoneRegisterSucceedCb = null;
    var _spreadCode = null;
    var loginErrorNum = 0;
    var _hidePassword = true;
    var _checkCodeType = 1;
    var _needCheckCode = false;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebAccount: cc.EditBox,
        ebPassword: cc.EditBox,
        ebCheckCode: cc.EditBox,
        checkCodeParent: cc.Node,
        forgetPassword: cc.Node,
        delAccountIcon: cc.Node,
        delPasswordIcon: cc.Node,
        delCheckCodeIcon: cc.Node,
        top: cc.Node,
        bottom: cc.Node,
        arrow: cc.Node,
        spCheckCode: cc.Sprite,
        spEye: cc.Sprite,
        sfEye: [ cc.SpriteFrame ],
        pfDialogCommonLayer: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ], [ "CheckShowCodeCb", this.CheckShowCodeCb.bind(this) ], [ "loginCb", this.loginCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        var _this = this;
        this.toastShow();
        this.registerEvent();
        _loginSucceedCb = initArg.loginSucceedCb;
        _registerSucceedCb = initArg.registerSucceedCb;
        _phoneLoginSucceedCb = initArg.phoneLoginSucceedCb;
        _phoneRegisterSucceedCb = initArg.phoneRegisterSucceedCb;
        _spreadCode = initArg.spreadCode;
        this.reqDateAndShowLoadView(_CheckShowCode, "CheckShowCodeCb", "loginView");
        this.spCheckCode.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this.btnEvent("", "refreshCheckCode");
        });
      },
      start: function start() {
        var _UserAccount = cc.sys.localStorage.getItem("UserAccount");
        _UserAccount && (this.ebAccount.string = _UserAccount);
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "refreshCheckCode":
          this.reqCheckCode(false, "loginView");
          break;

         case "login":
          this.login();
          break;

         case "forgetPassword":
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/resetPassword",
            js: "resetPassword",
            initArg: {
              doneCb: this.showLayerTip.bind(this),
              isResetLoginPassword: true
            }
          });
          break;

         case "showPhoneLogin":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/phoneLogin",
            js: "phoneLogin",
            initArg: {
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb,
              spreadCode: _spreadCode
            }
          });
          break;

         case "delAccount":
          this.ebAccount.string = "";
          this.delAccountIcon.active = false;
          break;

         case "delPassword":
          this.ebPassword.string = "";
          this.delPasswordIcon.active = false;
          break;

         case "delCheckCode":
          this.ebCheckCode.string = "";
          this.delCheckCodeIcon.active = false;
          break;

         case "alterPasswordView":
          if (this.ebPassword.inputFlag != cc.EditBox.InputFlag.PASSWORD) {
            _hidePassword = true;
            this.ebPassword.inputFlag = cc.EditBox.InputFlag.PASSWORD;
            this.spEye.spriteFrame = this.sfEye[1];
            break;
          }
          _hidePassword = false;
          this.ebPassword.inputFlag = cc.EditBox.InputFlag.DEFAULT;
          this.spEye.spriteFrame = this.sfEye[0];
        }
      },
      CheckShowCodeCb: function CheckShowCodeCb(msg, jsName) {
        if ("loginView" != jsName) return;
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        _needCheckCode = false;
        return;
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this2 = this;
        if ("loginView" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          _checkCodeType = msg.Data;
          if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "loginView") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
            _this2.reqDateAndShowLoadView({
              Action: "Login",
              UserName: _this2.ebAccount.string,
              Password: _this2.ebPassword.string,
              Ticket: ticket
            }, "loginCb", null, true);
          }, this); else {
            var initArg = {
              checkCode: msg.BackData,
              confirmCb: this.reqLogin.bind(this, {
                Action: "Login",
                UserName: this.ebAccount.string,
                Password: this.ebPassword.string
              })
            };
            this.showImgCheckCodeDialog(initArg);
          }
        }
      },
      login: function login() {
        var result = dataLogic.checkFormat(this.ebAccount.string, {
          PhoneNum: true,
          name: "\u624b\u673a\u53f7"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        result = dataLogic.checkFormat(this.ebPassword.string, {
          Password: true,
          name: "\u5bc6\u7801"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        _needCheckCode ? this.reqCheckCode(false, "loginView") : this.reqDateAndShowLoadView({
          Action: "Login",
          UserName: this.ebAccount.string,
          Password: this.ebPassword.string
        }, "loginCb", null, true);
      },
      reqLogin: function reqLogin(reqArg, checkCode, callbacks) {
        reqArg.ImgCode = checkCode;
        this.reqData(reqArg, "loginCb", callbacks);
      },
      loginCb: function loginCb(msg, callbacks) {
        var _this3 = this;
        cc.log("\u767b\u9646\u56de\u8c03");
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          loginErrorNum = 0;
          this.showLayerTip("\u767b\u5f55\u6210\u529f", true, false);
          this.scheduleOnce(function() {
            _this3.toastClose();
            _loginSucceedCb();
            cc.sys.localStorage.setItem("UserAccount", _this3.ebAccount.string);
          }, .5);
          callbacks && callbacks.closeCheckCodeDialog();
        } else if (constant.HttpCode.CheckCodeError == msg.Code) {
          _needCheckCode = true;
          callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode);
        } else if (2 == msg.Code) {
          this.showLayerTip(msg.StrCode);
          _needCheckCode = true;
          callbacks && callbacks.closeCheckCodeDialog();
        } else callbacks && callbacks.closeCheckCodeDialog();
      },
      editChangeEvent: function editChangeEvent(txt, editbox, name) {
        switch (name) {
         case "account":
          this.delAccountIcon.active = "" != txt;
          break;

         case "password":
          this.delPasswordIcon.active = "" != txt;
          break;

         case "checkCode":
          this.delCheckCodeIcon.active = "" != txt;
        }
        editbox.string = txt;
      },
      editEvent: function editEvent(txt, editbox, data) {}
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  login: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "63f57RJXVVMt7DaE+nB8opo", "login");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _nowPercent = 5;
    var _checkRecoverDone = false;
    var _getInitDataDone = false;
    var _resLoadDone = false;
    var btnPos1 = [ -420, 0, 420 ];
    var btnPos2 = [ -420, -200, 200 ];
    var _AppData = null;
    var _updateLoadProgress = null;
    var _progress = 0;
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        spBg: cc.Sprite,
        siteLogo: cc.Sprite,
        loadMask: cc.Node,
        loadIcon: cc.Node,
        people: cc.Node,
        btnArr: [ cc.Node ],
        downloadBtn: cc.Node,
        falseBgMusic: {
          default: null,
          type: cc.AudioClip
        },
        falseBtnAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqSelectRoomConfigCb", this.reqSelectRoomConfigCb.bind(this) ], [ "getInitDataCb", this.getInitDataCb.bind(this) ], [ "checkRecoverCb", this.checkRecoverCb.bind(this) ], [ "visitorRegisterCb", this.visitorRegisterCb.bind(this) ], [ "visitorLoginCb", this.visitorLoginCb.bind(this) ], [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ], [ "reqMainModuleVersionCb", this.reqMainModuleVersionCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        window.retryUpdate = this.retryUpdate.bind(this);
        _updateLoadProgress = this.updateLoadProgress.bind(this);
        dataLogic.addPlayedGameIdList(constant.GameId.Login);
        dataLogic.setCurGameId(constant.GameId.Login);
        this.setStorageData(dataLogic.CacheArr);
        this.sceneName = constant.SceneName.Login;
        this.initSceneBase();
        this.registerEvent();
        for (var i in constant.GameId) cc.sys.localStorage.setItem(constant.GameId[i] + "ModuleVersion", "");
        cc.sys.localStorage.setItem("subPackVersionList", "");
        if (_resLoadDone) this.init(); else {
          cc.log("\u68c0\u67e5\u66f4\u65b0");
          http.post({
            Action: "GetLatestVersion",
            reqExtendArg: {
              timeoutRefresh: false
            }
          }, "reqMainModuleVersionCb");
        }
      },
      reqMainModuleVersionCb: function reqMainModuleVersionCb(msg) {
        cc.log("!!!!!!!!!!!!", msg.Data, hotUpdateMgr.getMainModuleVersion(), kf.compareVersion(msg.Data, hotUpdateMgr.getMainModuleVersion()));
        constant.HttpCode.Succeed == msg.Code ? kf.compareVersion(msg.Data, hotUpdateMgr.getMainModuleVersion()) > 0 ? hotUpdateMgr.check_update(this, "main") : this.init() : jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "showUpdateFailedDialog", "(Ljava/lang/String;)V", "port");
      },
      retryUpdate: function retryUpdate(problem) {
        "port" == problem ? http.post({
          Action: "GetLatestVersion",
          reqExtendArg: {
            timeoutRefresh: false
          }
        }, "reqMainModuleVersionCb") : hotUpdateMgr.check_update(this, "main");
      },
      checkUpgrade: function checkUpgrade(module, cb) {
        cc.log("\u68c0\u67e5\u6062\u590d\u7684\u5b50\u6e38\u620f\u662f\u5426\u9700\u8981\u66f4\u65b0", module);
        var version = cc.sys.localStorage.getItem(module + "ModuleVersion");
        if (!version) {
          var path = jsb.fileUtils.getWritablePath() + window._game_res_version;
          var file = path + "/" + module + "_project.manifest";
          if (jsb.fileUtils.isFileExist(file)) {
            var str = jsb.fileUtils.getStringFromFile(file);
            version = JSON.parse(str).version;
            cc.sys.localStorage.setItem(module + "ModuleVersion", version);
          } else version = "1.0";
        }
        cc.log("\u7248\u672c\u53f7", version, hotUpdateMgr.getSubModuleVersion(module));
        if (kf.compareVersion(version, hotUpdateMgr.getSubModuleVersion(module)) < 0) {
          this.upgradeDoneCb = cb;
          hotUpdateMgr.check_update(this, module);
        } else cb();
      },
      init: function init() {
        var _this = this;
        dataLogic.setCheckRecoverState(false);
        this.downloadBtn.active = !_App;
        if (_resLoadDone) {
          this.spBg.spriteFrame = new cc.SpriteFrame(resMgr.bgTexture);
          _getInitDataDone = false;
          this.reqDateAndShowLoadView({
            action: "GetInitData",
            Requirement: JSON.stringify([ "GetAppData", "SiteConfig", "GetGameList", "SysActivity", "OtherActivity", "DailyRewardConfig", "GradeList" ]),
            reqExtendArg: {
              timeout: 0
            }
          }, "getInitDataCb", null, true);
        } else {
          var gameRes = constant.GameRes[constant.GameId.Login];
          var resList = [];
          for (var i = 0; i < gameRes.length; i++) gameRes[i].useScene == constant.SceneName.Login && resList.push(gameRes[i]);
          var num = 0;
          var resLoadProcessCb = function resLoadProcessCb(process, res, path) {
            num++;
            _this.setLoadingDisplay(process, resList.length);
            "login/bg" == path && (_this.spBg.spriteFrame = new cc.SpriteFrame(res));
          };
          resMgr.loadRes(resList, function() {
            _getInitDataDone = false;
            _this.reqDateAndShowLoadView({
              action: "GetInitData",
              Requirement: JSON.stringify([ "GetAppData", "SiteConfig", "GetGameList", "SysActivity", "OtherActivity", "DailyRewardConfig", "GradeList" ]),
              reqExtendArg: {
                timeout: 0
              }
            }, "getInitDataCb", null, true);
            _checkRecoverDone = false;
            http.post(constant.PostCheckForMatch, "checkRecoverCb");
            _resLoadDone = true;
          }, null, null, null, resLoadProcessCb);
        }
      },
      setStorageData: function setStorageData(key) {
        function getLocalDate(str) {
          var s = cc.sys.localStorage.getItem(str);
          try {
            s = JSON.parse(s);
          } catch (e) {}
          return s;
        }
        for (var i = key.length - 1; i >= 0; i--) {
          var value = getLocalDate(key[i]);
          null != value || void 0 != dataLogic.CacheData[key[i]] && delete dataLogic.CacheData[key[i]];
          dataLogic.storeObj[key[i]] = value;
        }
      },
      syncServerTimeCb: function syncServerTimeCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed || !dataLogic.doneTimeSync) return;
      },
      syncUserInfo: function syncUserInfo(data) {
        dataLogic.setUserInfo(data);
        this.updatePlayerInfoUI && this.updatePlayerInfoUI();
        dataLogic.setLoginState(true);
        dataLogic.doneTimeSync || dataLogic.reqServerTime();
      },
      checkRecoverCb: function checkRecoverCb(msg, checkGameIdOver) {
        if (checkGameIdOver) {
          if (constant.HttpCode.Succeed != msg.Code) {
            http.post(constant.PostCheckForMatch, "checkRecoverCb", checkGameIdOver);
            return;
          }
          this.hideLoadView();
          if (1 == msg.Data.matchData.status) hotUpdateMgr.check_update(this, checkGameIdOver); else {
            dataLogic.setReqRecoverState(false);
            dataLogic.setNeedRecover(false);
            dataLogic.setUndoneGame(false);
            this.setNextSceneInfo(constant.SceneName.Hall);
            this.intoNextScene();
          }
          return;
        }
        _checkRecoverDone = true;
        _getInitDataDone && this.hideLoadView();
        if (msg.Code == constant.HttpCode.LoginOut) {
          resMgr.loadSingleRes("prefab/baoWang/login", function() {
            dataLogic.setLoadedPrefab("prefab/baoWang/login");
          }, cc.Prefab);
          resMgr.loadSingleRes("prefab/baoWang/phoneRegister", function() {
            dataLogic.setLoadedPrefab("prefab/baoWang/register");
            resMgr.loadRes(constant.GameRes[constant.GameId.Hall]);
          }, cc.Prefab);
        }
        if (msg.Code != constant.HttpCode.Succeed) return;
        if (_getInitDataDone && null == this.loadToast) {
          var arg = {
            type: constant.ToastType.Loading
          };
          this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        }
        dataLogic.intervalSendNewMsg();
        var data = msg.Data;
        dataLogic.regGift = data.regGift;
        dataLogic.setCheckRecoverState(true);
        this.syncNetInfo(data.connectInfo);
        this.syncUserInfo(data.userInfo);
        dataLogic.setFirstRechargeGiftState(data.hasFirstGift);
        dataLogic.setRechargeState(data.isSend);
        dataLogic.setSignInState(data.hasSignInEvent);
        if (1 == data.matchData.status) {
          dataLogic.setReqRecoverState(true);
          dataLogic.setNeedRecover(true);
          dataLogic.setUndoneGame(true);
          var config = data.matchData.roomConfig;
          for (var key in config) switch (key) {
           case "seatId":
            break;

           case "roomNum":
            dataLogic.setRoomNum(config[key]);
            dataLogic.setRoomType(0 != config[key]);
            break;

           default:
            dataLogic.setRoomConfig(key, config[key]);
          }
          var gameId = config.roomId.substr(0, 2);
          dataLogic.setCurRoomKey(config.roomId.substr(-1));
          var nextScene = dataLogic.getGameSceneNameByGameId(gameId);
          this.setNextSceneInfo(nextScene, gameId);
          var nextSceneInfo = {
            sceneName: nextScene,
            gameId: gameId
          };
          dataLogic.reqSelectRoomConfig(gameId, nextSceneInfo);
        } else {
          this.setNextSceneInfo(constant.SceneName.Hall);
          this.intoNextScene();
        }
      },
      getInitDataCb: function getInitDataCb(data) {
        cc.log("getInitDataCb===", data);
        _getInitDataDone = true;
        _checkRecoverDone && this.hideLoadView();
        if (1 == data.Code) {
          data.BackData.SiteConfig.LgLogo && kf.loadNetImg(constant.imgServer + data.BackData.SiteConfig.LgLogo, this.siteLogo);
          dataLogic.setInviteCodeType(data.BackData.SiteConfig.InvitecodeType);
          dataLogic.setServiceAddr(data.BackData.SiteConfig.Service);
          if (null != data.BackData.GetGameList) {
            dataLogic.setFriendRoomList(data.BackData.GetGameList.yzGameList);
            dataLogic.setGameList(data.BackData.GetGameList.dtGameList);
            this.intoNextScene();
          }
          if (dataLogic.doneLogin && null == this.loadToast) {
            var arg = {
              type: constant.ToastType.Loading
            };
            this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
          }
          if (Number(data.BackData.SiteConfig.AllowTourist)) for (var i = 0; i < this.btnArr.length; i++) {
            this.btnArr[i].x = btnPos1[i];
            this.btnArr[i].active = true;
          } else {
            this.btnArr[0].active = false;
            this.btnArr[1].x = btnPos2[1];
            this.btnArr[2].x = btnPos2[2];
            this.btnArr[2].active = this.btnArr[1].active = true;
          }
          if (null != data.BackData.GetAppData) {
            _AppData = kf.clone(data.BackData.GetAppData);
            delete _AppData.appTip;
          }
        } else if (data.Code == constant.HttpCode.SystemNotice) {
          this.hideLoadView();
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/systemNotice",
            js: "systemNotice",
            initArg: data.BackData
          });
        } else this.siteLogo.node.opacity = 0;
      },
      syncNetInfo: function syncNetInfo(data) {
        var _this2 = this;
        dataLogic.IOState && this.socketIO.disconnect();
        var cb = {
          connect: this.IOConnect.bind(this)
        };
        this.socketIO.connect(data, {
          path: "/game",
          transports: [ "websocket" ]
        }, cb);
        this.socketIO.addMsgListen("message", "socketMsg");
        this.sceneName == constant.SceneName.Login && setTimeout(function() {
          if (!dataLogic.IOState) {
            _this2.socketIO.disconnect();
            var arg = {
              type: constant.ToastType.RequestError,
              extend: {
                hintStr: "socket\u8fde\u63a5\u5931\u8d25"
              }
            };
            kf.getObj(constant.PoolId.ToastRequestError, _this2.toastLayer[4], _this2.toastRequestErrorPf, arg);
            if (_this2.loadToast) {
              kf.killObj(_this2.loadToast);
              _this2.loadToast = null;
            }
          }
        }, 15e3);
      },
      reqSelectRoomConfigCb: function reqSelectRoomConfigCb(msg, nextSceneInfo) {
        if (msg.Code == constant.HttpCode.Succeed && nextSceneInfo) {
          cc.sys.localStorage.setItem("gameSelectRoomConfig" + nextSceneInfo.sceneName, JSON.stringify(msg));
          dataLogic.reqSelectRoomConfigCb(msg);
          this.loadScene(nextSceneInfo.sceneName, nextSceneInfo.gameId);
        } else {
          kf.killObj(this.loadToast);
          this.loadToast = null;
        }
      },
      reqCheckCode: function reqCheckCode(appointImgType) {
        var jsName = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "login";
        this.showLoadView(true);
        appointImgType ? this.reqDateAndShowLoadView({
          Action: "GetImageCode",
          isJack: 1,
          imgType: 1
        }, "reqCheckCodeCb", jsName, true) : this.reqDateAndShowLoadView({
          Action: "GetImageCode",
          isJack: 1
        }, "reqCheckCodeCb", jsName, true);
      },
      showImgCheckCodeDialog: function showImgCheckCodeDialog(initArg) {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/checkCode",
          js: "checkCode",
          initArg: initArg
        });
      },
      testEvent: function testEvent() {},
      btnEvent: function btnEvent(eventTouch, eventName) {
        cc.log("btnEvent", eventName);
        audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "stopAudio":
          cc.audioEngine.stopMusic();
          break;

         case "playAudio":
          audioMgr.playMusic(this.falseBgMusic);
          break;

         case "showPhoneRegister":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/phoneRegister",
            js: "phoneRegister",
            initArg: {
              loginSucceedCb: this.loginSucceed.bind(this),
              registerSucceedCb: this.registerSucceed.bind(this),
              phoneLoginSucceedCb: this.loginSucceed.bind(this),
              phoneRegisterSucceedCb: this.phoneRegisterSucceed.bind(this)
            }
          });
          break;

         case "service":
          if ("" == dataLogic.serviceAddr) {
            this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
            return;
          }
          dataLogic.openWindow(dataLogic.serviceAddr);
          break;

         case "showLogin":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/login",
            js: "loginView",
            initArg: {
              loginSucceedCb: this.loginSucceed.bind(this),
              registerSucceedCb: this.registerSucceed.bind(this),
              phoneLoginSucceedCb: this.loginSucceed.bind(this),
              phoneRegisterSucceedCb: this.phoneRegisterSucceed.bind(this)
            }
          });
          break;

         case "showRegister":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/register",
            js: "register",
            initArg: {
              registerSucceedCb: this.registerSucceed.bind(this),
              phoneLoginSucceedCb: this.loginSucceed.bind(this),
              phoneRegisterSucceedCb: this.phoneRegisterSucceed.bind(this),
              loginSucceedCb: this.loginSucceed.bind(this)
            }
          });
          break;

         case "visitorLogin":
          cc.sys.localStorage.getItem("hasOfficialAccount") ? this.showLayerTip("\u60a8\u5df2\u6709\u6b63\u5f0f\u8d26\u53f7\uff0c\u8bf7\u7528\u624b\u673a\u53f7\u767b\u5f55") : this.reqCheckCode();
          break;

         case "downloadApp":
          cc.sys.os == cc.sys.OS_IOS ? 0 == _AppData.appType ? window.location.href = _AppData.iosLink : "7456" == window.location.port ? dataLogic.openWindow("./build/download/index.html?param=" + encodeURIComponent(JSON.stringify(_AppData))) : dataLogic.openWindow("./download/index.html?param=" + encodeURIComponent(JSON.stringify(_AppData))) : window.location.href = _AppData.androidLink;
          break;

         default:
          cc.log("\u672a\u77e5\u7684\u6309\u94ae\u4e8b\u4ef6\u540d:", eventName);
        }
      },
      registerSucceed: function registerSucceed() {
        this.phoneRegisterSucceed();
      },
      loginSucceed: function loginSucceed() {
        if (null == this.loadToast) {
          var arg = {
            type: constant.ToastType.Loading
          };
          this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        }
        http.post(constant.PostCheckForMatch, "checkRecoverCb");
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this3 = this;
        if ("login" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "login") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          _this3.visitorLogin(false, ticket);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              _this3.visitorLogin(true, checkCode, callbacks);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      visitorLogin: function visitorLogin(isImgCheckCode, code, callbacks) {
        var num = dataLogic.randomInt(1e14, 999999999999999);
        var b = new kf.Base64();
        var UniKey = b.encode("" + num);
        var token = cc.sys.localStorage.getItem("visitorToken");
        if (token) {
          var reqArg = {
            Action: "Login",
            IsGuest: 1,
            UniKey: UniKey,
            Token: token
          };
          isImgCheckCode ? reqArg.imgCode = code : reqArg.Ticket = code;
          window._spCode ? reqArg.InvitationCode = window._spCode : cc.sys.isNative || (reqArg.InvitationCode = kf.getUrlArg("spreadCode") || "");
          http.post(reqArg, "visitorLoginCb", callbacks);
        } else {
          var _reqArg = {
            Action: "Register",
            IsGuest: 1,
            UniKey: UniKey
          };
          isImgCheckCode ? _reqArg.imgCode = code : _reqArg.Ticket = code;
          window._spCode ? _reqArg.InvitationCode = window._spCode : cc.sys.isNative || (_reqArg.InvitationCode = kf.getUrlArg("spreadCode") || "");
          http.post(_reqArg, "visitorRegisterCb", callbacks);
        }
      },
      imgCheckCodeHandle: function imgCheckCodeHandle(msg, callbacks) {
        msg.Code == constant.HttpCode.Succeed ? callbacks.closeCheckCodeDialog() : msg.Code == constant.HttpCode.CheckCodeError ? callbacks.reqCheckCode(msg.StrCode) : callbacks.closeCheckCodeDialog();
      },
      visitorLoginCb: function visitorLoginCb(msg, callbacks) {
        this.hideLoadView();
        callbacks && this.imgCheckCodeHandle(msg, callbacks);
        constant.HttpCode.Succeed == msg.Code && this.loginSucceed();
      },
      visitorRegisterCb: function visitorRegisterCb(msg, callbacks) {
        this.hideLoadView();
        callbacks && this.imgCheckCodeHandle(msg, callbacks);
        if (constant.HttpCode.Succeed == msg.Code) {
          cc.sys.localStorage.setItem("visitorToken", msg.Data);
          this.phoneRegisterSucceed(false);
        }
      },
      phoneRegisterSucceed: function phoneRegisterSucceed() {
        var needShowLayerTip = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
        dataLogic.setIsNewRegister(true);
        needShowLayerTip && this.showLayerTip("\u6ce8\u518c\u6210\u529f");
        this.loadToast = cc.instantiate(this.toastLoadingPf);
        this.loadToast.parent = this.toastLayer[3];
        this.loadToast.getChildByName("txt").getComponent(cc.Label).string = "\u767b\u5f55\u4e2d";
        this.loginSucceed();
      },
      updateLoadProgress: function updateLoadProgress() {
        _progress += .03;
        if (_progress < 1) {
          cc.log("\u8bbe\u7f6e\u8fdb\u5ea6", _progress);
          jsb.reflection && jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getLoadngingProgressRate", "(F)V", _progress);
        }
      },
      setLoadingDisplay: function setLoadingDisplay(progress, totalNum) {
        if (progress < _progress) return;
        this.unschedule(_updateLoadProgress);
        if (progress >= 1) {
          cc.log("\u9690\u85cf\u5f15\u64ce\u52a0\u8f7d\u9875");
          jsb.reflection && jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getLoadngingProgressRate", "(F)V", 1);
          return;
        }
        _progress = progress;
        this.updateLoadProgress();
        this.schedule(_updateLoadProgress, .05);
      },
      updateCb: function updateCb(event, module) {
        var _this4 = this;
        switch (event.getEventCode()) {
         case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
          "main" == module ? this.init() : this.upgradeDoneCb();
          break;

         case jsb.EventAssetsManager.UPDATE_FINISHED:
          if ("main" == module) {
            jsb.reflection && jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getUpdateProgressRate", "(F)V", 1);
            cc.game.restart();
          } else this.upgradeDoneCb();
          break;

         case jsb.EventAssetsManager.UPDATE_PROGRESSION:
          cc.log("\u9700\u8981\u66f4\u65b0\u7684\u603b\u6587\u4ef6\u6570", event.getTotalFiles());
          var p = event ? event.getPercent() : null;
          if (p && "main" == module) {
            jsb.reflection && jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "getUpdateProgressRate", "(F)V", p);
            cc.log("\u6b63\u5728\u66f4\u65b0\u8d44\u6e90..." + Math.floor(100 * p) + "%");
          }
          break;

         case jsb.EventAssetsManager.NEW_VERSION_FOUND:
          break;

         case jsb.EventAssetsManager.UPDATE_FAILED:
          if ("main" == module) jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "showUpdateFailedDialog", "(Ljava/lang/String;)V", "file"); else {
            kf.killObj(this.loadToast);
            this.loadToast = null;
            this.showLayerToast({
              contentTxt: "\u6062\u590d\u6e38\u620f\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",
              btnTxt: [ null, "\u91cd\u8bd5" ],
              btnEventName: [ null, function() {
                var arg = {
                  type: constant.ToastType.Loading
                };
                _this4.loadToast = kf.getObj(constant.PoolId.ToastLoading, _this4.toastLayer[3], _this4.toastLoadingPf, arg);
                http.post(constant.PostCheckForMatch, "checkRecoverCb", module);
              } ]
            }, 1);
          }
        }
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  mailCentre: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b99225gDghH2ZbuBnzV7jSV", "mailCentre");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    var GetLetters = {
      Action: "GetLetters",
      Index: 0,
      msgType: 1
    };
    var DelLetter = {
      Action: "DelLetter"
    };
    var ReadLetter = {
      Action: "ReadLetter"
    };
    var _curCheckedInfoCount = 0;
    var _infoList = [];
    var _infoCount = -1;
    var _lastInfoList = [];
    var _lastInfoCount = -1;
    var _infoItemSpacing = 120;
    var _infoItemLimit = 7;
    var _itemList = [];
    var _canViewItemList = [];
    var _maxShowItemNum = 5;
    var _y = 0;
    var _key = 0;
    var _item = null;
    var _msgLocalKey = 0;
    var _isInTheRequest = false;
    var _private = 1;
    var _bulletin = 3;
    var _curChoiceInfoKind = _private;
    var GetAllAnnouncements = {
      Action: "GetAllAnnouncements",
      Index: 0
    };
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        msgCorrelation: cc.Node,
        content: cc.Node,
        nullMail: cc.Node,
        shadow: cc.Node,
        pfInfoItem: cc.Prefab,
        txtPrivate: cc.Label,
        txtBulletin: cc.Label,
        txtHint: cc.Label,
        toggleAllCheck: cc.Toggle
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getLettersCb", this.getLettersCb.bind(this) ], [ "getAllAnnouncementsCb", this.getAllAnnouncementsCb.bind(this) ], [ "operationLettersCb", this.operationLettersCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toggleAllCheck.isChecked = false;
        _infoList = [];
        this.registerEvent();
        this.toastShow();
        GetLetters.msgType = 1;
        GetLetters.Index = 0;
        this.infoExtend = {
          checkCb: this.checkInfo.bind(this),
          readCb: this.readInfo.bind(this)
        };
        _isInTheRequest = true;
        this.showLoadView(false);
        this.reqDateAndShowLoadView(GetLetters, "getLettersCb", true);
        this.genInfoItem();
        this.shadow.opacity = 0;
        this.txtHint.node.opacity = 0;
        this.msgCorrelation.active = false;
        this.content.parent.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.scrollEvent.bind(this, this.content.parent.parent.getComponent(cc.ScrollView), cc.ScrollView.EventType.TOUCH_UP));
      },
      closeBeforeHandle: function closeBeforeHandle() {
        http.post({
          action: "GetInitData",
          Requirement: JSON.stringify([ "NewMessage" ])
        }, "getInitDataCb");
        _infoList = [];
        _infoCount = -1;
        _lastInfoList = [];
        _lastInfoCount = -1;
        _itemList = [];
      },
      reqDateAndShowLoadIcon: function reqDateAndShowLoadIcon(reqArg, cbEventName, cbArg) {
        this.txtHint.node.getChildByName("loadIcon").stopAllActions();
        this.txtHint.node.getChildByName("loadIcon").opacity = 255;
        this.txtHint.string = "\u52a0\u8f7d\u4e2d";
        this.txtHint.node.getChildByName("loadIcon").runAction(cc.repeatForever(cc.rotateBy(1, 360)));
        this.txtHint.node.getChildByName("loadIcon").x = -this.txtHint.node.width / 2 - 23;
        this.reqData(reqArg, cbEventName, cbArg);
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "delReaded":
          this.delReaded();
          break;

         case "readAll":
          this.readAll();
          break;

         case "allCheck":
          this.allCheck(event.isChecked);
        }
      },
      genInfoItem: function genInfoItem() {
        for (var i = 0; i < _infoItemLimit; i++) {
          _itemList[i] = cc.instantiate(this.pfInfoItem);
          _itemList[i].parent = this.content;
        }
        this.initInfoItem();
      },
      delReaded: function delReaded() {
        cc.log("delReaded\u5220\u9664\u5df2\u8bfb");
        _lastInfoCount = -1;
        this.reqDateAndShowLoadView(DelLetter, "operationLettersCb", "\u5220\u9664\u6210\u529f", true);
      },
      readAll: function readAll() {
        _lastInfoCount = -1;
        this.reqDateAndShowLoadView(ReadLetter, "operationLettersCb", "\u5df2\u8bfb\u53d6\u5b8c\u6bd5", true);
      },
      allCheck: function allCheck(isCheck) {
        for (var i = 0; i < _itemList.length; i++) _itemList[i].getComponent("mailInfoItem").setCheckState(isCheck);
        for (var _i = 0; _i < _infoList.length; _i++) _infoList[_i].isChecked = isCheck;
        _curCheckedInfoCount = isCheck ? _infoList.length : 0;
      },
      checkInfo: function checkInfo(key, isCheck, msgId, msgLocalKey) {
        _infoList[msgLocalKey].isChecked = isCheck;
        _curCheckedInfoCount = isCheck ? _curCheckedInfoCount + 1 : _curCheckedInfoCount - 1;
        _curCheckedInfoCount == _infoList.length ? this.toggleAllCheck.isChecked = true : this.toggleAllCheck.isChecked = false;
      },
      killAllItem: function killAllItem() {
        for (var i = 0; i < _itemList.length; i++) this.setInfoItemState(i, true);
      },
      setInfoItemState: function setInfoItemState(key, state) {
        _itemList[key].x = state ? 1e3 : 14;
      },
      getLeiSureInfoItemKey: function getLeiSureInfoItemKey() {
        for (var i = 0; i < _itemList.length; i++) if (1e3 == _itemList[i].x) return i;
      },
      readInfo: function readInfo(key, msgLocalKey) {
        null != key && _itemList[key].getComponent("mailInfoItem").setReadState(true);
        _infoList[msgLocalKey].Is_Read = "1";
      },
      delInfo: function delInfo(key, msgLocalKey) {},
      checkInfoKingEvent: function checkInfoKingEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        this.txtPrivate.node.color = new cc.Color(165, 114, 67);
        this.txtPrivate.node.getComponent(cc.LabelOutline).width = 0;
        this.txtPrivate.node.getComponent(cc.LabelOutline).color = new cc.Color(165, 114, 27);
        this.txtBulletin.node.color = new cc.Color(165, 114, 67);
        this.txtBulletin.node.getComponent(cc.LabelOutline).width = 0;
        this.txtBulletin.node.getComponent(cc.LabelOutline).color = new cc.Color(165, 114, 27);
        this.shadow.opacity = 0;
        this.txtHint.node.opacity = 0;
        this.msgCorrelation.active = false;
        this.toggleAllCheck.isChecked = false;
        this.hideAllInfoItem();
        this.content.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        http.abortAllReq();
        var t = _infoList;
        var t1 = _infoCount;
        _infoCount = _lastInfoCount;
        _lastInfoCount = t1;
        cc.log("_infoCount", _infoCount, _lastInfoList);
        switch (eventName) {
         case "privateInfo":
          _curChoiceInfoKind = _private;
          _infoList = [];
          GetLetters.msgType = 1;
          this.content.parent.height = 455;
          this.content.parent.parent.height = 455;
          if (-1 == _infoCount) {
            _isInTheRequest = true;
            GetLetters.Index = 0;
            this.reqDateAndShowLoadView(GetLetters, "getLettersCb", true);
          } else {
            _isInTheRequest = false;
            this.updateInfo(_lastInfoList, false);
            this.initInfoItem();
          }
          this.txtPrivate.node.color = new cc.Color(255, 255, 255);
          this.txtPrivate.node.getComponent(cc.LabelOutline).width = 2;
          this.txtPrivate.node.getComponent(cc.LabelOutline).color = new cc.Color(187, 53, 0);
          break;

         case "bulletinInfo":
          _curChoiceInfoKind = _bulletin;
          _infoList = [];
          this.content.parent.height = 508;
          this.content.parent.parent.height = 508;
          this.txtBulletin.node.color = new cc.Color(255, 255, 255);
          this.txtBulletin.node.getComponent(cc.LabelOutline).width = 2;
          this.txtBulletin.node.getComponent(cc.LabelOutline).color = new cc.Color(187, 53, 0);
          if (-1 == _infoCount) {
            _isInTheRequest = true;
            GetAllAnnouncements.Index = 0;
            this.reqDateAndShowLoadView(GetAllAnnouncements, "getAllAnnouncementsCb", true);
          } else {
            _isInTheRequest = false;
            this.updateInfo(_lastInfoList, true);
            this.initInfoItem();
          }
        }
        _lastInfoList = t;
      },
      initInfoItem: function initInfoItem() {
        cc.log("initInfoItem, _infoList", _infoList.length);
        this.content.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        this.content.y = 0;
        _canViewItemList = [];
        for (var i = 0; i < _infoItemLimit; i++) if (i < _maxShowItemNum && i < _infoList.length) {
          this.infoExtend.itemKey = i;
          this.infoExtend.msgLocalKey = i;
          _itemList[i].getComponent("mailInfoItem").init(_infoList[i], this.infoExtend);
          _canViewItemList[i] = i;
          _itemList[i].y = i * -_infoItemSpacing;
          this.setInfoItemState(i, false);
        } else this.setInfoItemState(i, true);
      },
      getLettersCb: function getLettersCb(msg) {
        var isFirstReq = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        if (constant.HttpCode.Succeed != msg.Code) return;
        this.hideLoadView();
        _isInTheRequest = false;
        GetLetters.Index++;
        if (msg.Code == constant.HttpCode.Succeed) {
          if (isFirstReq) {
            _infoCount = msg.DataCount;
            _infoList = [];
          }
          this.updateInfo(msg.BackData, false);
          isFirstReq ? this.initInfoItem() : this.scrollEvent();
        }
      },
      getAllAnnouncementsCb: function getAllAnnouncementsCb(msg) {
        var isFirstReq = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        this.hideLoadView();
        _isInTheRequest = false;
        GetAllAnnouncements.Index++;
        if (msg.Code == constant.HttpCode.Succeed) {
          if (isFirstReq) {
            _infoList = [];
            _infoCount = msg.DataCount;
          }
          this.updateInfo(msg.BackData, true);
          isFirstReq ? this.initInfoItem() : this.scrollEvent();
        }
      },
      updateInfo: function updateInfo(data, isBulletin) {
        this.toggleAllCheck.isChecked = false;
        if (null != data && "object" == ("undefined" === typeof data ? "undefined" : _typeof(data))) for (var i = 0; i < data.length; i++) _infoList.push(data[i]);
        this.infoExtend.isBulletin = isBulletin;
        if (0 == _infoCount) {
          this.shadow.opacity = 0;
          this.nullMail.opacity = 255;
          this.txtHint.node.opacity = 0;
          this.msgCorrelation.active = false;
        } else {
          this.nullMail.opacity = 0;
          this.txtHint.node.opacity = 255;
          this.txtHint.node.getChildByName("loadIcon").stopAllActions();
          this.txtHint.node.getChildByName("loadIcon").opacity = 0;
          _infoList.length < _infoCount ? this.txtHint.string = "\u7ee7\u7eed\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a" : this.txtHint.string = isBulletin ? "\u5df2\u663e\u793a\u5168\u90e8\u516c\u544a" : "\u5df2\u663e\u793a5\u5929\u5185\u5168\u90e8\u6d88\u606f";
          this.shadow.opacity = 255;
          this.shadow.y = isBulletin ? -293 : -225;
          isBulletin || (this.msgCorrelation.active = true);
        }
        this.txtHint.node.y = -(_infoList.length * _infoItemSpacing + 20);
        this.content.height = 40 - this.txtHint.node.y;
      },
      hideAllInfoItem: function hideAllInfoItem() {
        for (var i = 0; i < _itemList.length; i++) this.setInfoItemState(i, true);
      },
      scrollEvent: function scrollEvent(event, eventName) {
        if (eventName == cc.ScrollView.EventType.TOUCH_UP && this.content.y + this.content.parent.height == this.content.height && _infoList.length < _infoCount) {
          if (!_isInTheRequest) {
            _isInTheRequest = true;
            _curChoiceInfoKind == _private ? this.reqDateAndShowLoadIcon(GetLetters, "getLettersCb") : this.reqDateAndShowLoadIcon(GetAllAnnouncements, "getAllAnnouncementsCb");
          }
          return;
        }
        _key = _canViewItemList[0];
        _item = _itemList[_key];
        _y = _item.y + this.content.y;
        while (_y > _infoItemSpacing) {
          this.setInfoItemState(_key, true);
          _canViewItemList.shift();
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.content.y;
        }
        do {
          _msgLocalKey = _itemList[_key].getComponent("mailInfoItem")._msgLocalKey;
          if (!(_y < 0 && _msgLocalKey > 0)) break;
          _key = this.getLeiSureInfoItemKey();
          if (null == _key) break;
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y + _infoItemSpacing;
          this.infoExtend.itemKey = _key;
          this.infoExtend.msgLocalKey = _msgLocalKey - 1;
          _itemList[_key].getComponent("mailInfoItem").init(_infoList[_msgLocalKey - 1], this.infoExtend);
          _canViewItemList.unshift(_key);
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.content.y;
        } while (_y < 0);
        _key = _canViewItemList[_canViewItemList.length - 1];
        _item = _itemList[_key];
        _y = _item.y + this.content.y;
        while (-_y + _infoItemSpacing < this.content.parent.height) {
          _msgLocalKey = _itemList[_key].getComponent("mailInfoItem")._msgLocalKey;
          if (_msgLocalKey == _infoList.length - 1) break;
          _key = this.getLeiSureInfoItemKey();
          if (null == _key) break;
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y - _infoItemSpacing;
          this.infoExtend.itemKey = _key;
          this.infoExtend.msgLocalKey = _msgLocalKey + 1;
          _itemList[_key].getComponent("mailInfoItem").init(_infoList[_msgLocalKey + 1], this.infoExtend);
          _canViewItemList.push(_key);
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.content.y;
        }
        while (-_y > this.content.parent.height) {
          this.setInfoItemState(_key, true);
          _canViewItemList.pop();
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.content.y;
        }
      },
      operationLettersCb: function operationLettersCb(msg, hintStr) {
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        this.showLayerTip(hintStr);
        _curCheckedInfoCount = 0;
        _infoCount = -1;
        if (_curChoiceInfoKind == _private) {
          GetLetters.Index = 0;
          this.reqDateAndShowLoadView(GetLetters, "getLettersCb", true);
        } else {
          GetAllAnnouncements.Index = 0;
          this.reqDateAndShowLoadView(GetAllAnnouncements, "getAllAnnouncementsCb", true);
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  mailDetails: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5991cDAertH/45ch9zDZF6D", "mailDetails");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _readCb = null;
    var isBulletin = false;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        noticeTitle: cc.Label,
        publishTime: cc.Label,
        noticeContent: cc.Label,
        scrollViewContent: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getNoticeDetailCb", this.getNoticeDetailCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      start: function start() {},
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        this.hideLoadView();
        var sendData = {
          ID: initArg.id
        };
        this.id = initArg.id;
        initArg.cb && (this.cb = initArg.cb);
        if (initArg.isBulletin) {
          isBulletin = true;
          sendData.Action = "GetAnnouncementDetail";
          this.setTitleContent("\u7cfb\u7edf\u516c\u544a");
        } else {
          isBulletin = false;
          sendData.Action = "GetLetterContent";
          this.setTitleContent("\u4e2a\u4eba\u6d88\u606f");
        }
        if (initArg.readCb) {
          _readCb = initArg.readCb;
          var argCb = {
            UIItemKey: initArg.UIItemKey,
            msgLocalKey: initArg.msgLocalKey
          };
          this.reqDateAndShowLoadView(sendData, "getNoticeDetailCb", argCb);
        } else {
          _readCb = null;
          this.reqDateAndShowLoadView(sendData, "getNoticeDetailCb");
        }
      },
      getNoticeDetailCb: function getNoticeDetailCb(data, argCb) {
        this.hideLoadView();
        if (data.Code != constant.HttpCode.Succeed) return;
        var noticeContent = data.BackData;
        noticeContent.Add_Time ? this.publishTime.string = noticeContent.Add_Time : this.publishTime.string = noticeContent.Time;
        this.noticeTitle.string = noticeContent.Title;
        this.noticeContent.string = null == noticeContent.Content ? "" : noticeContent.Content;
        this.noticeContent._updateRenderData(true);
        this.scrollViewContent.height = this.noticeContent.node.height + 20;
        _readCb && _readCb(argCb.UIItemKey, argCb.msgLocalKey);
      },
      closeBeforeHandle: function closeBeforeHandle() {
        this.cb && this.cb(isBulletin ? "Bulletin" : "Letter", {
          id: this.id
        });
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  mailInfoItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e7788T2dzxBqJWTdqmeX4DT", "mailInfoItem");
    "use strict";
    var _isBulletin = false;
    var _key = 0;
    var _msgId = 0;
    var _checkCb = null;
    var _readCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        redDot: cc.Node,
        icon: cc.Node,
        txtInfo: cc.Label,
        txtInfoTime: cc.Label,
        pfDialogCommonLayer: cc.Prefab,
        checkmark: cc.Node,
        audioBtn: {
          default: null,
          type: cc.AudioClip
        },
        spMail: cc.Sprite,
        sfNotice: cc.SpriteFrame,
        sfUnread: cc.SpriteFrame,
        sfReaded: cc.SpriteFrame
      },
      onLoad: function onLoad() {},
      init: function init(data, extendArg) {
        _isBulletin = extendArg.isBulletin;
        this._itemKey = extendArg.itemKey;
        _checkCb = extendArg.checkCb;
        _readCb = extendArg.readCb;
        this._msgId = data.ID;
        this._msgLocalKey = extendArg.msgLocalKey;
        if (extendArg.isBulletin) {
          this.checkmark.parent.active = false;
          this.txtInfoTime.string = data.Add_Time;
          this.redDot.opacity = 0;
          this.spMail.spriteFrame = this.sfNotice;
        } else {
          this.checkmark.parent.active = true;
          this.txtInfoTime.string = data.Post_Time;
          this.redDot.opacity = 1 == data.Is_Read ? 0 : 255;
          this.spMail.spriteFrame = 1 == data.Is_Read ? this.sfReaded : this.sfUnread;
          this.setCheckState(data.isChecked);
        }
        this.txtInfo.string = data.Title;
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "openInfo":
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/mailDetails",
            js: "mailDetails",
            notShowMask: true,
            initArg: {
              id: this._msgId,
              isBulletin: _isBulletin,
              readCb: _readCb,
              msgLocalKey: this._msgLocalKey,
              UIItemKey: this._itemKey
            }
          });
          break;

         case "checkInfo":
          this.setCheckState(!this.isChecked, true);
          break;

         default:
          cc.warn("\u672a\u77e5eventName", eventName);
        }
      },
      setCheckState: function setCheckState(state) {
        var needInformMailCentre = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        this.isChecked = state;
        this.checkmark.opacity = state ? 255 : 0;
        needInformMailCentre && _checkCb(this._itemKey, state, this._msgId, this._msgLocalKey);
      },
      setReadState: function setReadState(state) {
        this.spMail.spriteFrame = state ? this.sfReaded : this.sfUnread;
        this.redDot.opacity = state ? 0 : 255;
      }
    });
    cc._RF.pop();
  }, {} ],
  miniCommon: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b33d0AD5M1PsLPyJsPtCx6g", "miniCommon");
    "use strict";
    window.miniCommon = window.miniCommon || {};
    var clientEvent = null;
    var _module = window.miniCommon;
    _module.init = function() {
      clientEvent = kf.require("basic.clientEvent");
      this.registerViewSwitches();
    };
    _module.registerViewSwitches = function() {
      this.hideTime = 0;
      this.showTime = 0;
      cc.game.on(cc.game.EVENT_HIDE, function(event) {
        if (0 !== this.hideTime) return;
        this.hideTime = new Date().getTime();
        clientEvent.dispatchEvent("gameHide");
      }.bind(this));
      cc.game.on(cc.game.EVENT_SHOW, function(event) {
        if (0 === this.hideTime) return;
        this.showTime = new Date().getTime();
        var hideTime = this.getHideTime();
        clientEvent.dispatchEvent("gameShow", hideTime);
      }.bind(this));
    };
    _module.getHideTime = function() {
      var time = (this.showTime - this.hideTime) / 1e3;
      time < 0 && (time = 0);
      this.showTime = 0;
      this.hideTime = 0;
      return time;
    };
    _module.init();
    cc._RF.pop();
  }, {} ],
  network: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d61261IILJPIb62khZ9PXnd", "network");
    "use strict";
    window["util"]["network"] = function() {
      var protobuf = {};
      var connect_callback = null;
      var close_callback = null;
      var protoList = {};
      var network = {};
      var clientEvent = kf.require("basic.clientEvent");
      network.init = function() {
        var eventListener = kf.require("basic.eventListener");
        this.socket = kf.require("util.socket");
        this.event_listener = eventListener.create();
        this.clear();
      };
      network.registerProto = function() {};
      network.clear = function() {
        this.session = 1;
        this.internal_session = 1;
        this.callbackObjs = {};
        this.socket.clearCallback();
      };
      network.getCurMsgName = function() {
        return this.cur_msg_name;
      };
      network.connect = function(ip, port, cb) {
        if (this.isConnecting()) return;
        if (this.isConnected()) {
          cb && cb();
          return;
        }
        setTimeout(function() {
          try {
            this.socket.connect(ip, port, this.msgCallBack.bind(this));
            connect_callback = cb;
          } catch (e) {
            cc.log(e);
          }
        }.bind(this), 0);
      };
      network.msgCallBack = function(evenType, event) {
        cc.log("msgCallBack", evenType, event);
        switch (evenType) {
         case this.socket.eventType.onopen:
          this.resetSession();
          connect_callback && connect_callback();
          break;

         case this.socket.eventType.onclose:
          if (close_callback) {
            close_callback();
            close_callback = null;
          }
          break;

         case this.socket.eventType.onerror:
          break;

         case this.socket.eventType.onmessage:
          var data = JSON.parse(event);
          clientEvent.dispatchEvent(data.eventName, data);
        }
      };
      network.isConnected = function() {
        return this.socket.isOpen();
      };
      network.isClosed = function() {
        return this.socket.isClosed();
      };
      network.isConnecting = function() {
        return this.socket.isConnecting();
      };
      network.disconnect = function(force, cb) {
        close_callback = cb;
        force && this.socket.close();
        this.clear();
      };
      network.send = function(msg, ignore_session) {
        var jsonMsg = JSON.stringify(msg);
        if (!this.isConnected()) return -1;
        var err = this.socket.send(jsonMsg);
        err && "closed" === err && this.disconnect();
        return err;
      };
      network.registerEvent = function(msg_name, handler) {
        this.event_listener.register(msg_name, handler);
      };
      network.dispatch = function(msg_name, msg_content) {
        this.event_listener.dispatch(msg_name, msg_content);
      };
      network.getProtoList = function() {
        return protoList;
      };
      network.cacheCallback = function(callback) {
        if ("function" !== typeof callback) return;
        this.callbackObjs[this.internal_session] = callback;
      };
      network.processCallback = function(msg_name, msg_content) {
        if (!this.callbackObjs[this.session]) return false;
        this.callbackObjs[this.session](msg_name, msg_content);
        delete this.callbackObjs[this.session];
        return true;
      };
      network.exsitCallback = function() {
        return this.callbackObjs[this.session];
      };
      network.resetSession = function() {
        this.session = this.internal_session;
      };
      network.getIdByName = function(name) {
        if (!this.c2gs) return null;
        var child = this.c2gs["getChild"](name);
        if (child) return child.id;
      };
      network.getNameById = function(id) {
        if (!this.c2gs) return null;
        var child = this.c2gs["getChild"](id);
        if (child) return child.name;
      };
      network.getIdByNameEx = function(name) {
        if (!this.gs2c) return null;
        var child = this.gs2c["getChild"](name);
        if (child) return child.id;
      };
      network.getNameByIdEx = function(id) {
        if (!this.gs2c) return null;
        var child = this.gs2c["getChild"](id);
        if (child) return child.name;
      };
      return network;
    };
    cc._RF.pop();
  }, {} ],
  newHelp: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "610c06tLhFHDYe46yPdwTXv", "newHelp");
    "use strict";
    require("../script/basic/constant");
    var clientEvent = kf.require("basic.clientEvent");
    var _checkHelpTypeLabelColor = new cc.Color(255, 255, 255);
    var _uncheckHelpTypeLabelColor = new cc.Color(161, 108, 56);
    var _checkHelpTypeLabelLineOutColor = new cc.Color(157, 55, 12, 255);
    var _uncheckHelpTypeLabelOutLineColor = new cc.Color(161, 108, 56, 255);
    var _config = null;
    var _allConfig = {};
    var _labelList = [];
    var _richTextList = [];
    var _spriteList = [];
    var _gameIdList = [];
    var _isRegisterEventDone = false;
    var _tabGameBtnList = [];
    var _isLoaded = false;
    var _loadToast = null;
    var _isFirstUse = true;
    var _loadProcessCb = true;
    cc.Class({
      extends: cc.Component,
      properties: {
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        mask: cc.Node,
        helpMain: cc.Node,
        gameTabContent: cc.Node,
        scrollContent: cc.Node,
        helpTypeTab: [ cc.Node ],
        topHelpKindParent: cc.Node,
        aboutUsTitle: cc.Node,
        svContent: cc.ScrollView,
        txtAboutUs: cc.Label,
        sfGameTabCheck: cc.SpriteFrame,
        sfGameTabUncheck: cc.SpriteFrame,
        sfDZPKPlayExplain: cc.SpriteFrame,
        sfDZPKGameOperationNew: cc.SpriteFrame,
        sfDZPKCardTypeIntro: cc.SpriteFrame,
        paiGowCardTypeXxplain1: cc.SpriteFrame,
        paiGowCardTypeXxplain2: cc.SpriteFrame,
        paiGowCardTypeXxplain3: cc.SpriteFrame,
        paiGowCardTypeXxplain4: cc.SpriteFrame,
        paiGowDanCard: cc.SpriteFrame,
        erbagang: cc.SpriteFrame,
        baiJiaLe_xian: cc.SpriteFrame,
        baiJiaLe_zhuang: cc.SpriteFrame,
        baiJiaLe_rebate: cc.SpriteFrame,
        loadIconPf: cc.Prefab,
        pfGameTab: cc.Prefab,
        pfLabel: cc.Prefab,
        pfRichText: cc.Prefab
      },
      registerEvent: function registerEvent() {
        if (_isRegisterEventDone) return;
        this.registerHandler = [ [ "getAboutCb", this.getAboutCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.mask.width = cc.winSize.width;
        this.mask.height = cc.winSize.height;
      },
      getAboutCb: function getAboutCb(data) {
        1 == data.Code ? this.txtAboutUs.string = data.Data.aboutUs : this.txtAboutUs.string = "\u5f00\u5fc3\u68cb\u724c\uff08Happy Board Games\uff09\u6df1\u8015\u68cb\u724c\u6e38\u620f\u5e02\u573a\uff0c\u575a\u6301\u771f\u4eba\u5bf9\u6218\u3001\u516c\u5e73\u7ade\u6280\u7684\u6e38\u620f\u539f\u5219\uff0c\u6ce8\u91cd\u8fd8\u539f\u73a9\u5bb6\u771f\u5b9e\u7684\u7ebf\u4e0b\u6e38\u620f\u4f53\u9a8c\uff0c\u81ea\u4e0a\u7ebf\u4ee5\u6765\u4e00\u76f4\u6df1\u53d7\u5e7f\u5927\u73a9\u5bb6\u559c\u7231\uff0c\u540c\u65f6\u5728\u7ebf\u4eba\u6570\u5c61\u521b\u65b0\u9ad8\u3002\u6211\u4eec\u81f4\u529b\u4e8e\u6253\u9020\u4e00\u6d41\u7684\u6e38\u620f\u5e73\u53f0\uff0c\u63d0\u4f9b\u957f\u671f\u7a33\u5b9a\u3001\u516c\u5e73\u3001\u6109\u5feb\u7684\u6e38\u620f\u73af\u5883\uff0c\u6301\u7eed\u7528\u5fc3\u4e3a\u5e7f\u5927\u73a9\u5bb6\u670d\u52a1\u3002";
      },
      showLoadToast: function showLoadToast() {
        var arg = {
          type: constant.ToastType.Loading
        };
        _loadToast = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
        var txt = _loadToast.getChildByName("txt").getComponent(cc.Label);
        txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
        var n = 0;
        _loadProcessCb = function _loadProcessCb() {
          n++;
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
        };
        this.schedule(_loadProcessCb, .1, 98);
      },
      initFirstUse: function initFirstUse(gameId) {
        var _this = this;
        _isFirstUse = false;
        if (0 == _spriteList.length) {
          this.genSprite(0, 0, this.scrollContent);
          this.genSprite(0, 0, this.scrollContent);
        }
        if (0 == _labelList.length) for (var i = 0; i < 10; i++) this.genLabel(0, 0, this.scrollContent, "");
        var tab = void 0;
        for (var _i = 0; _i < _gameIdList.length; _i++) {
          tab = this.createGameTab(_gameIdList[_i], -125, -88 * _i - 54, this.gameTabContent);
          _tabGameBtnList.push(tab);
        }
        this.scheduleOnce(function() {
          _this.unschedule(_loadProcessCb);
          _this.toastShow(gameId);
          kf.killObj(_loadToast);
          _loadToast = null;
        }, .1);
      },
      loadResource: function loadResource(sceneName, gameId) {
        var _this2 = this;
        if (_isLoaded) {
          _allConfig = JSON.parse(cc.sys.localStorage.getItem("helpConfig"));
          this.toastShow(gameId);
        } else {
          this.showLoadToast();
          var preloadRes = constant.GameRes[sceneName];
          for (var i = 0; i < _gameIdList.length; i++) {
            if ("aboutUs" == _gameIdList[i]) continue;
            preloadRes.push({
              path: "json/help/help" + _gameIdList[i]
            });
          }
          var _gameId = void 0;
          var index = 0;
          this.createGameTab(_gameIdList[index], -125, -88 * index - 54, this.gameTabContent);
          var resLoadProcessCb = function resLoadProcessCb(process, res, path) {
            index++;
            _this2.createGameTab(_gameIdList[index], -125, -88 * index - 54, _this2.gameTabContent);
            _gameId = path.split("json/help/help")[1];
            _gameId && (_allConfig[_gameId] = res.json);
          };
          var loadDone = function loadDone() {
            _isLoaded = true;
            cc.sys.localStorage.setItem("helpConfig", JSON.stringify(_allConfig));
            _this2.initFirstUse(gameId);
          };
          var loadTimeout = function loadTimeout() {
            _this2.unschedule(_loadProcessCb);
            kf.killObj(_loadToast);
            _loadToast = null;
            kf.killObj(_this2.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          this.scheduleOnce(function() {
            resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout, null, resLoadProcessCb);
          }, 0);
        }
      },
      toastShow: function toastShow(gameId) {
        this.helpMain.scale = 1;
        this.helpMain.opacity = 255;
        var childrens = this.gameTabContent.children;
        _tabGameBtnList = [];
        for (var i = 0; i < _gameIdList.length; i++) {
          if (null == childrens[i]) childrens[i] = this.createGameTab(_gameIdList[i], -125, -88 * i - 54, this.gameTabContent); else {
            childrens[i].opacity = 255;
            childrens[i].getComponent(cc.Button).enabled = true;
            childrens[i].getComponent(cc.Button).clickEvents[0].customEventData = _gameIdList[i];
            childrens[i].getChildByName("txt").color = new cc.Color(138, 69, 58);
          }
          childrens[i].getChildByName("txt").getComponent(cc.Label).string = constant.GameNickName[_gameIdList[i]];
          childrens[i].gameId = _gameIdList[i];
          _tabGameBtnList.push(childrens[i]);
        }
        this.gameTabContent.height = 88 * _gameIdList.length + 15;
        for (var _i2 = _gameIdList.length; _i2 < childrens.length; _i2++) {
          childrens[_i2].opacity = 0;
          childrens[_i2].getComponent(cc.Button).enabled = false;
        }
        this.gameTabs = this.gameTabContent.children;
        this.gameTabContent.y = 0;
        var index = _gameIdList.indexOf(gameId);
        _tabGameBtnList[index].y < -462 && (this.gameTabContent.y = -_tabGameBtnList[index].y - 462);
        this.mask.opacity = 153;
        this.tabGameEvent("", gameId);
      },
      setHelpContent: function setHelpContent(config) {
        var content = void 0, y = 0, child = void 0, item = void 0, height = void 0;
        for (var i = 0; i < config.length; i++) {
          content = config[i];
          y = 0 == i ? content.spacing || 0 : item.y - item.height - content.spacing;
          if ("label" == content.componentType) {
            child = this.genLabel(0, y, this.scrollContent, content.str);
            child.color = kf.fromHEX("6a5142");
          } else if ("richText" == content.componentType) {
            child = this.genRichText(0, y, this.scrollContent, content.str);
            height = child.height;
          } else {
            child = this.genSprite(0, y, this.scrollContent, content);
            height = child.height;
          }
          item = child;
        }
        this.scrollContent.height = child.height + -child.y + 10;
      },
      reuse: function reuse(gameId) {
        this.registerEvent();
        _gameIdList = [];
        for (var i = 0; i < dataLogic.gameList.length; i++) {
          if ("05" == dataLogic.gameList[i].gameTypeId || 5 == dataLogic.gameList[i].state) continue;
          _gameIdList.push(dataLogic.gameList[i].gameTypeId);
        }
        _gameIdList.unshift("aboutUs");
        this.loadResource(constant.ToastName.InfoToast, gameId);
        http.post({
          action: "GetAboutUs"
        }, "getAboutCb");
      },
      createGameTab: function createGameTab(gameId, x, y, parent) {
        var tab = cc.instantiate(this.pfGameTab);
        tab.parent = parent;
        tab.anchorX = 0;
        tab.x = x;
        tab.y = y;
        var checkEventHandler = tab.getComponent(cc.Button).clickEvents[0];
        checkEventHandler.target = this.node;
        checkEventHandler.component = "newHelp";
        checkEventHandler.handler = "tabGameEvent";
        checkEventHandler.customEventData = gameId;
        return tab;
      },
      createSprite: function createSprite(parent) {
        var node = new cc.Node("Sprite");
        node.parent = parent;
        node.anchorY = 1;
        node.addComponent(cc.Sprite);
        _spriteList.push(node);
        return node;
      },
      createRichText: function createRichText(x, y, parent, txtStr) {
        var txt = cc.instantiate(this.pfRichText);
        txt.parent = parent;
        txt.y = y;
        txt.x = x;
        txt.getComponent(cc.RichText).string = txtStr;
        _richTextList.push(txt);
        return txt;
      },
      createLabel: function createLabel(x, y, parent, txtStr) {
        var txt = cc.instantiate(this.pfLabel);
        txt.parent = parent;
        txt.y = y;
        txt.x = x;
        txt.getComponent(cc.Label).string = txtStr;
        txtStr && txt.getComponent(cc.Label)._updateRenderData(true);
        _labelList.push(txt);
        return txt;
      },
      tabGameEvent: function tabGameEvent(event, gameId) {
        event && audioMgr.playEffect(this.clickAudio);
        var childrens = this.gameTabContent.children;
        for (var i = 0; i < childrens.length; i++) {
          childrens[i].getComponent(cc.Sprite).spriteFrame = this.sfGameTabUncheck;
          childrens[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
          childrens[i].getChildByName("txt").color = new cc.Color(138, 69, 58);
        }
        if (event) {
          event.target.getComponent(cc.Sprite).spriteFrame = this.sfGameTabCheck;
          event.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
          event.target.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        } else {
          var index = _gameIdList.indexOf(gameId);
          _tabGameBtnList[index].getComponent(cc.Sprite).spriteFrame = this.sfGameTabCheck;
          _tabGameBtnList[index].getChildByName("txt").color = new cc.Color(255, 255, 255);
          _tabGameBtnList[index].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        }
        this.setCurHelpContent(gameId);
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "closeBtn":
          this.helpMainClose();
        }
      },
      helpMainClose: function helpMainClose() {
        this.unscheduleAllCallbacks();
        this.mask.opacity = 0;
        this.leaveUnusedLabel();
        this.leaveUnusedRichText();
        this.leaveUnusedSprite();
        _config = null;
        _allConfig = {};
        kf.killObj(this.node);
      },
      setCurHelpContent: function setCurHelpContent(gameId) {
        if ("aboutUs" == gameId) {
          this.svContent.stopAutoScroll();
          this.scrollContent.y = 0;
          this.topHelpKindParent.active = false;
          this.aboutUsTitle.opacity = 255;
          this.txtAboutUs.node.opacity = 255;
          this.leaveUnusedLabel();
          this.leaveUnusedRichText();
          this.leaveUnusedSprite();
          this.txtAboutUs._updateRenderData(true);
          this.scrollContent.height = this.txtAboutUs.node.height + 10;
        } else {
          this.topHelpKindParent.active = true;
          this.aboutUsTitle.opacity = 0;
          this.txtAboutUs.node.opacity = 0;
          _config = _allConfig[gameId];
          this.initTopHelpType(_config.topHelpKind);
          var tg = this.helpTypeTab[0].getComponent(cc.Toggle);
          if (tg.isChecked) this.tabHelpTypeEvent("", 0); else {
            this.helpTypeTab[0].getChildByName("txt").color = _checkHelpTypeLabelColor;
            this.helpTypeTab[0].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
            this.helpTypeTab[0].getChildByName("checkmark").active = true;
            for (var i = 1; i < 4; i++) {
              if (!this.helpTypeTab[i].active) continue;
              this.helpTypeTab[i].getChildByName("checkmark").active = false;
              this.helpTypeTab[i].getChildByName("txt").color = _uncheckHelpTypeLabelColor;
              this.helpTypeTab[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
            }
            this.scheduleOnce(function() {
              tg.check();
            }, 0);
          }
        }
      },
      initTopHelpType: function initTopHelpType(kindData) {
        for (var i = 0; i < 3; i++) if (kindData[i]) {
          this.helpTypeTab[i].active = true;
          this.helpTypeTab[i].getChildByName("txt").getComponent(cc.Label).string = kindData[i];
        } else this.helpTypeTab[i].active = false;
      },
      tabHelpTypeEvent: function tabHelpTypeEvent(event, key) {
        this.svContent.stopAutoScroll();
        this.scrollContent.y = 0;
        for (var i = 0; i < 4; i++) {
          if (!this.helpTypeTab[i].active || key == i) continue;
          this.helpTypeTab[i].getChildByName("txt").color = _uncheckHelpTypeLabelColor;
          this.helpTypeTab[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
        }
        this.helpTypeTab[key].getChildByName("txt").color = _checkHelpTypeLabelColor;
        this.helpTypeTab[key].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        this.leaveUnusedLabel();
        this.leaveUnusedRichText();
        this.leaveUnusedSprite();
        if (3 == key) {
          var content = [ {
            str: "\u4e3a\u4e86\u7ed9\u73a9\u5bb6\u63d0\u4f9b\u957f\u671f\u7a33\u5b9a\u3001\u516c\u5e73\u3001\u6109\u5feb\u7684\u6e38\u620f\u73af\u5883\uff0c\u5e73\u53f0\u4f1a\u5728\u6bcf\u5c40\u6e38\u620f\u7ed3\u675f\u65f6\u6536\u53d6\u8d62\u5bb6\u5956\u91d1\u7684" + dataLogic.feeRate + "%\u4f5c\u4e3a\u623f\u8d39\u3002",
            color: "#6A5142",
            componentType: "label"
          } ];
          this.setHelpContent(content);
        } else this.setHelpContent(_config["content" + key]);
      },
      genLabel: function genLabel(x, y, parent, txtStr) {
        for (var i = 0; i < _labelList.length; i++) if (0 == _labelList[i].opacity) {
          _labelList[i].opacity = 255;
          _labelList[i].parent = parent;
          _labelList[i].y = y;
          _labelList[i].x = x;
          _labelList[i].getComponent(cc.Label).string = txtStr;
          _labelList[i].getComponent(cc.Label)._updateRenderData(true);
          return _labelList[i];
        }
        return this.createLabel(x, y, parent, txtStr);
      },
      leaveUnusedLabel: function leaveUnusedLabel() {
        for (var i = 0; i < _labelList.length; i++) _labelList[i].opacity = 0;
      },
      genRichText: function genRichText(x, y, parent, txtStr) {
        for (var i = 0; i < _richTextList.length; i++) if (0 == _richTextList[i].opacity) {
          _richTextList[i].opacity = 255;
          _richTextList[i].parent = parent;
          _richTextList[i].y = y;
          _richTextList[i].x = x;
          _richTextList[i].getComponent(cc.RichText).string = txtStr;
          return _richTextList[i];
        }
        return this.createRichText(x, y, parent, txtStr);
      },
      leaveUnusedRichText: function leaveUnusedRichText() {
        for (var i = 0; i < _richTextList.length; i++) _richTextList[i].opacity = 0;
      },
      genSprite: function genSprite(x, y, parent, content) {
        var node = null;
        for (var i = 0; i < _spriteList.length; i++) if (0 == _spriteList[i].opacity) {
          _spriteList[i].opacity = 255;
          node = _spriteList[i];
          break;
        }
        node || (node = this.createSprite(parent));
        if (null == content) return;
        node.y = y;
        node.x = x;
        node.getComponent(cc.Sprite).spriteFrame = this[content.propertyName];
        node.getComponent(cc.Sprite).sizeMode = content.sizeMode;
        if (content.sizeMode == cc.Sprite.SizeMode.CUSTOM) {
          node.height = content.height;
          node.width = content.width;
        }
        return node;
      },
      leaveUnusedSprite: function leaveUnusedSprite() {
        for (var i = 0; i < _spriteList.length; i++) {
          _spriteList[i].opacity = 0;
          _spriteList[i].getComponent(cc.Sprite).spriteFrame = null;
        }
      }
    });
    cc._RF.pop();
  }, {
    "../script/basic/constant": "constant"
  } ],
  notice: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a63b8PS5Q5H35QhYdDOLE+z", "notice");
    "use strict";
    var _noticeIndex = 0;
    var _noticeOff = 166;
    cc.Class({
      extends: cc.Component,
      properties: {
        txt: cc.Label,
        bg: [ cc.SpriteFrame ],
        txtNotice: [ cc.Label ]
      },
      onLoad: function onLoad() {},
      reuse: function reuse(data) {},
      show: function show(data) {
        var _this = this;
        this.node.getComponent(cc.Sprite).spriteFrame = data.isKing ? this.bg[0] : this.bg[1];
        this.txtNotice[0].node.parent.x = 0;
        var startX = 222;
        data.str && (this.txt.string = data.str);
        this.txt.node.x = startX;
        this.isCarousel = data.notHide;
        if (this.isCarousel) {
          this.txtNotice[0].string = dataLogic.notices[0];
          this.txtNotice[0]._updateRenderData(true);
          if (dataLogic.notices.length > 1) {
            _noticeIndex = 1;
            this.txtNotice[1].string = dataLogic.notices[1];
          } else {
            _noticeIndex = 0;
            this.txtNotice[1].string = dataLogic.notices[0];
          }
          this.txtNotice[1].node.x = startX + this.txtNotice[0].node.width + _noticeOff;
        } else {
          this.txt._updateRenderData(true);
          var moveTime = .012 * (444 + this.txt.node.width);
          this.node.opacity = 255;
          this.txt.node.stopAllActions();
          this.txt.node.runAction(cc.sequence(cc.moveTo(moveTime, -startX - this.txt.node.width, 0), cc.callFunc(function() {
            data.notHide || (_this.node.opacity = 0);
          })));
        }
      },
      update: function update(dt) {
        if (this.isCarousel) {
          this.txtNotice[0].node.parent.x -= dt / .012;
          for (var i = 0; i < 2; i++) if (this.txtNotice[i].node.width + this.txtNotice[i].node.x + this.txtNotice[i].node.parent.x < -222) {
            this.txtNotice[i].node.x += this.txtNotice[i].node.width + 2 * _noticeOff;
            this.txtNotice[i].node.x += 0 == i ? this.txtNotice[1].node.width : this.txtNotice[0].node.width;
            _noticeIndex++;
            _noticeIndex == dataLogic.notices.length && (_noticeIndex = 0);
            this.txtNotice[i].string = dataLogic.notices[_noticeIndex];
          }
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  offerPK: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "84f17cmxUJDH6RH/9TzBcDh", "offerPK");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        top: cc.Node,
        gameName: cc.Node,
        settingBtn: cc.Node,
        ruleBtn: cc.Node,
        recordBtn: cc.Node,
        balance: cc.Label,
        pkRule_pf: cc.Prefab
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqFriendRoomListCb", this.reqFriendRoomListCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.initSceneBase();
        this.registerEvent();
        this.sceneFadeIn();
        this.balance.string = dataLogic.userBalance.toFixed(2);
        0 == dataLogic.friendRoomList.length && this.reqData(constant.PostFriendRoomList, "reqFriendRoomListCb", true);
        if (dataLogic.isNotSufficientFundKickedOut) {
          var arg = {
            type: constant.ToastType.Hint,
            extend: {
              contentTxt: dataLogic.notSufficientFundHintStr,
              btnEventName: [ null, "toastClose" ],
              btnTxt: [ null, "\u786e\u5b9a" ]
            }
          };
          this.showHintToast(arg, 0);
          dataLogic.setNotSufficientFundKickOutState(false);
        } else if (dataLogic.isUnreadyKickedOut) {
          var _arg = {
            type: constant.ToastType.Hint,
            extend: {
              contentTxt: "\u60a8\u5728\u9650\u65f6\u5185\u672a\u51c6\u5907\uff0c\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4",
              btnEventName: [ null, "toastClose" ],
              btnTxt: [ null, "\u786e\u5b9a" ]
            }
          };
          this.showHintToast(_arg, 0);
          dataLogic.setUnreadyKickOutState(false);
        }
      },
      alterBalance: function alterBalance(balance) {
        dataLogic.setUserBalance(balance);
        this.balance.string = dataLogic.userBalance.toFixed(2);
      },
      reqFriendRoomListCb: function reqFriendRoomListCb(msg, isInCurJsReq) {
        if (msg.Code != constant.HttpCode.Succeed || !isInCurJsReq) return;
        dataLogic.setFriendRoomList(msg.Data);
      },
      createRoomSucceedCb: function createRoomSucceedCb(sceneName, gameId) {
        this.showLayerTip("\u521b\u5efa\u623f\u95f4\u6210\u529f");
        this.loadSceneRelevantRes(sceneName, null, false, gameId);
        this.scheduleOnce(this.loadScene.bind(this, sceneName, gameId), 1);
      },
      sceneFadeIn: function sceneFadeIn() {
        this.top.runAction(cc.sequence(cc.moveBy(.25, 0, -125), cc.moveBy(.15, 0, 10)));
        this.gameName.runAction(cc.sequence(cc.delayTime(.2), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.ruleBtn.runAction(cc.sequence(cc.delayTime(.25), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.recordBtn.runAction(cc.sequence(cc.delayTime(.35), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.settingBtn.runAction(cc.sequence(cc.delayTime(.45), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
      },
      btnEvent: function btnEvent(event, eventName) {
        var _this = this;
        audioMgr.playEffect(this.audioBtn);
        switch (eventName) {
         case "payCenter":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/payCenter",
            js: "payCenter",
            initArg: 1
          });
          break;

         case "createRoom":
          dataLogic.userPhoneNum ? kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/createRoom",
            js: "createRoom",
            initArg: {
              alterBalanceCb: this.alterBalance.bind(this),
              createRoomSucceedCb: this.createRoomSucceedCb.bind(this)
            }
          }) : this.createBindPhoneDialog(null, function() {
            _this.balance.string = dataLogic.userBalance.toFixed(2);
          });
          break;

         case "joinRoom":
          dataLogic.userPhoneNum ? kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/inputRoomNumber",
            js: "inputRoomNumber",
            initArg: {
              loadGameResCb: this.loadSceneRelevantRes.bind(this),
              alterBalanceCb: this.alterBalance.bind(this),
              loadGameResFailedCb: function loadGameResFailedCb() {
                kf.killObj(_this.loadToast);
                _this.loadToast = null;
              }
            }
          }) : this.createBindPhoneDialog(null, function() {
            _this.balance.string = dataLogic.userBalance.toFixed(2);
          });
          break;

         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "record":
          kf.getObj(constant.PoolId.gameRecord, this.toastLayer[0], this.recordPf, "gameRecord");
          break;

         case "goBackHall":
          this.loadScene(constant.SceneName.Hall);
          break;

         case "showPKRule":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/joinRoomTip",
            js: "joinRoomTip"
          });
        }
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  paiGowConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "f1d4cj87mpN/pJr2FcFJARy", "paiGowConstant");
    "use strict";
    window.paiGowConstant = window.paiGowConstant || {};
    paiGowConstant.maxPlayerNum = 4;
    paiGowConstant.CardType = {
      di9: 10,
      tian9: 11,
      diGang: 12,
      tianGang: 13,
      diWang: 14,
      tianWang: 15,
      zaWu: 16,
      zaQi: 17,
      zaBa: 18,
      zaJiu: 19,
      suang0: 20,
      suangGao: 21,
      suangHong: 22,
      suangFu: 23,
      suangBan: 24,
      suangChang: 25,
      suangMei: 26,
      suangE: 27,
      suangRen: 28,
      suangDi: 29,
      suangTian: 30,
      zhiZhun: 31
    };
    paiGowConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    paiGowConstant.PostMatching = {
      action: "JoinRoom",
      roomId: "081"
    };
    var _action = "DoPlay";
    paiGowConstant.PostVillage = {
      action: _action,
      eventName: "village",
      villageNum: -1
    };
    paiGowConstant.PostBet = {
      action: _action,
      eventName: "bet",
      betNum: -1
    };
    paiGowConstant.OpenCards = {
      action: _action,
      eventName: "openCards"
    };
    cc._RF.pop();
  }, {} ],
  paiGowDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3945cQqYMROhYkkrooN4ve0", "paiGowDataLogic");
    "use strict";
    window.paiGowDataLogic = {
      init: function init() {
        this.selfSeatId = 0;
        this.qzBtnConfig = [];
        this.betBtnConfig = [];
        this.playerState = [];
        this.roomId = "081";
        this.chnNumChar = [ "\u96f6\u70b9", "\u4e00\u70b9", "\u4e8c\u70b9", "\u4e09\u70b9", "\u56db\u70b9", "\u4e94\u70b9", "\u516d\u70b9", "\u4e03\u70b9", "\u516b\u70b9", "\u4e5d\u70b9", "\u5730\u9ad8\u4e5d", "\u5929\u9ad8\u4e5d", "\u5730\u6760", "\u5929\u6760", "\u5730\u738b", "\u5929\u738b", "\u6742\u4e94", "\u6742\u4e03", "\u6742\u516b", "\u6742\u4e5d", "\u53cc\u96f6\u9716", "\u53cc\u9ad8\u811a", "\u53cc\u7ea2\u5934", "\u53cc\u65a7\u5934", "\u53cc\u677f\u51f3", "\u53cc\u957f\u4e09", "\u53cc\u6885", "\u53cc\u9e45", "\u53cc\u4eba", "\u53cc\u5730", "\u53cc\u5929", "\u81f3\u5c0a" ];
        this.paiGowCards = [ {
          value: 3,
          type: 1,
          key: 0,
          cardIndex: 20
        }, {
          value: 6,
          type: 1,
          key: 1,
          cardIndex: 19
        }, {
          value: 5,
          type: 1,
          key: 2,
          cardIndex: 18
        }, {
          value: 5,
          type: 2,
          key: 3,
          cardIndex: 17
        }, {
          value: 7,
          type: 1,
          key: 4,
          cardIndex: 16
        }, {
          value: 7,
          type: 2,
          key: 5,
          cardIndex: 15
        }, {
          value: 8,
          type: 1,
          key: 6,
          cardIndex: 14
        }, {
          value: 8,
          type: 2,
          key: 7,
          cardIndex: 13
        }, {
          value: 9,
          type: 1,
          key: 8,
          cardIndex: 12
        }, {
          value: 9,
          type: 2,
          key: 9,
          cardIndex: 11
        }, {
          value: 6,
          type: 2,
          key: 10,
          cardIndex: 10
        }, {
          value: 6,
          type: 2,
          key: 11,
          cardIndex: 10
        }, {
          value: 7,
          type: 3,
          key: 12,
          cardIndex: 9
        }, {
          value: 7,
          type: 3,
          key: 13,
          cardIndex: 9
        }, {
          value: 10,
          type: 1,
          key: 14,
          cardIndex: 8
        }, {
          value: 10,
          type: 1,
          key: 15,
          cardIndex: 8
        }, {
          value: 11,
          type: 1,
          key: 16,
          cardIndex: 7
        }, {
          value: 11,
          type: 1,
          key: 17,
          cardIndex: 7
        }, {
          value: 4,
          type: 1,
          key: 18,
          cardIndex: 6
        }, {
          value: 4,
          type: 1,
          key: 19,
          cardIndex: 6
        }, {
          value: 6,
          type: 3,
          key: 20,
          cardIndex: 5
        }, {
          value: 6,
          type: 3,
          key: 21,
          cardIndex: 5
        }, {
          value: 10,
          type: 2,
          key: 22,
          cardIndex: 4
        }, {
          value: 10,
          type: 2,
          key: 23,
          cardIndex: 4
        }, {
          value: 4,
          type: 2,
          key: 24,
          cardIndex: 3
        }, {
          value: 4,
          type: 2,
          key: 25,
          cardIndex: 3
        }, {
          value: 8,
          type: 3,
          key: 26,
          cardIndex: 2
        }, {
          value: 8,
          type: 3,
          key: 27,
          cardIndex: 2
        }, {
          value: 2,
          type: 1,
          key: 28,
          cardIndex: 1
        }, {
          value: 2,
          type: 1,
          key: 29,
          cardIndex: 1
        }, {
          value: 12,
          type: 1,
          key: 30,
          cardIndex: 0
        }, {
          value: 12,
          type: 1,
          key: 31,
          cardIndex: 0
        } ];
      },
      getCardValueAndColor: function getCardValueAndColor(cardKey) {
        for (var i in this.paiGowCards) if (cardKey == this.paiGowCards[i].key) return this.paiGowCards[i];
      },
      setVillageMul: function setVillageMul(data) {
        this.qzBtnConfig = kf.clone(data);
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        this.playerState[UISeatId] = state;
        console.log("this.playerState", this.playerState);
      },
      getViewSeat: function getViewSeat(serverSeatId) {
        cc.log("this.seatTable", this.seatTable);
        for (var i = 0; i < this.seatTable.length; i++) if (this.seatTable[i] == serverSeatId) return i;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      getCardTypeByTxt: function getCardTypeByTxt(cardTypeIndex) {
        return this.chnNumChar[cardTypeIndex];
      },
      getSFByImgName: function getSFByImgName(spriteAtlas, imgName) {
        return spriteAtlas.getSpriteFrame(imgName);
      },
      CardJudgment: function CardJudgment(pokers) {
        this.order(pokers);
        var oneCardVal = pokers[0].value, oneCardType = pokers[0].type, twoCardVal = pokers[1].value, twoCardType = pokers[1].type;
        if (6 == oneCardVal && 1 == oneCardType && 3 == twoCardVal && 1 == twoCardType) return paiGowConstant.CardType.zhiZhun;
        if (12 == oneCardVal && 12 == twoCardVal) return paiGowConstant.CardType.suangTian;
        if (2 == oneCardVal && 2 == twoCardVal) return paiGowConstant.CardType.suangDi;
        if (8 == oneCardVal && 3 == oneCardType && 8 == twoCardVal && 3 == twoCardType) return paiGowConstant.CardType.suangRen;
        if (4 == oneCardVal && 2 == oneCardType && 4 == twoCardVal && 2 == twoCardType) return paiGowConstant.CardType.suangE;
        if (10 == oneCardVal && 2 == oneCardType && 10 == twoCardVal && 2 == twoCardType) return paiGowConstant.CardType.suangMei;
        if (6 == oneCardVal && 3 == oneCardType && 6 == twoCardVal && 3 == twoCardType) return paiGowConstant.CardType.suangChang;
        if (4 == oneCardVal && 1 == oneCardType && 4 == twoCardVal && 1 == twoCardType) return paiGowConstant.CardType.suangBan;
        if (11 == oneCardVal && 1 == oneCardType && 11 == twoCardVal && 1 == twoCardType) return paiGowConstant.CardType.suangFu;
        if (10 == oneCardVal && 1 == oneCardType && 10 == twoCardVal && 1 == twoCardType) return paiGowConstant.CardType.suangHong;
        if (7 == oneCardVal && 3 == oneCardType && 7 == twoCardVal && 3 == twoCardType) return paiGowConstant.CardType.suangGao;
        if (6 == oneCardVal && 2 == oneCardType && 6 == twoCardVal && 2 == twoCardType) return paiGowConstant.CardType.suang0;
        if (9 == oneCardVal && 9 == twoCardVal) return paiGowConstant.CardType.zaJiu;
        if (8 == oneCardVal && 3 != oneCardType && 8 == twoCardVal && 3 != twoCardType) return paiGowConstant.CardType.zaBa;
        if (7 == oneCardVal && 3 != oneCardType && 7 == twoCardVal && 3 != twoCardType) return paiGowConstant.CardType.zaQi;
        if (5 == oneCardVal && 5 == twoCardVal) return paiGowConstant.CardType.zaWu;
        if (12 == oneCardVal && 9 == twoCardVal) return paiGowConstant.CardType.tianWang;
        if (2 == oneCardVal && 9 == twoCardVal) return paiGowConstant.CardType.diWang;
        if (12 == oneCardVal && 8 == twoCardVal) return paiGowConstant.CardType.tianGang;
        if (2 == oneCardVal && 8 == twoCardVal) return paiGowConstant.CardType.diGang;
        if (12 == oneCardVal && 7 == twoCardVal && 1 == twoCardType) return paiGowConstant.CardType.tian9;
        if (2 == oneCardVal && 7 == twoCardVal && 3 == twoCardType) return paiGowConstant.CardType.di9;
        var oneVal = void 0, twoVal = void 0, AddVal = void 0;
        if (3 == twoCardVal) {
          oneVal = (oneCardVal + twoCardVal) % 10;
          twoVal = (oneCardVal + 6) % 10;
          AddVal = oneVal > twoVal ? oneVal : twoVal;
        } else if (6 == oneCardVal && 1 == oneCardType) {
          oneVal = (oneCardVal + twoCardVal) % 10;
          twoVal = (3 + twoCardVal) % 10;
          AddVal = oneVal > twoVal ? oneVal : twoVal;
        } else if (6 == twoCardVal && 1 == twoCardType) {
          oneVal = (oneCardVal + twoCardVal) % 10;
          twoVal = (oneCardVal + 3) % 10;
          AddVal = oneVal > twoVal ? oneVal : twoVal;
        } else AddVal = (oneCardVal + twoCardVal) % 10;
        return AddVal;
      },
      order: function order(pokers) {
        pokers && pokers.length > 1 && pokers.sort(function(a, b) {
          return b.key - a.key;
        });
        return pokers;
      }
    };
    paiGowDataLogic.init();
    cc._RF.pop();
  }, {} ],
  paiGowHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "36d9fJGZ7NJOr0DgXwsYvWv", "paiGowHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.PaiGow);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "paiGow/bg", "common/UI/table", "paiGow/cards", "paiGow/effect/qzpj_paixing_di", "cattle/seeThreeCattle/selNormal" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  paiGow: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "02f5cvXE11Pw6YjS+vP7wfX", "paiGow");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        yuPiaBtn: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        betNum: cc.Node,
        roomNum: cc.Node,
        yuPaiView: cc.Node,
        yuPaiContent: cc.Node,
        CardPf: cc.Prefab,
        pokersSf: cc.SpriteFrame,
        cardTypeSf: cc.SpriteFrame,
        showdown: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        villageMultiple: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        grab: cc.Node,
        grabBtn: [ cc.Button ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        villageIcon: cc.Node,
        villageBgBox: cc.Node,
        arrow: cc.Node,
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        round: cc.Node,
        notice: cc.Node,
        gameStartAnim: cc.Node,
        lunShuAnim: cc.Node,
        diceAtlas: cc.SpriteAtlas,
        diceAnim: cc.Node,
        tongChiAnim: cc.Node,
        tongPeiAnim: cc.Node,
        winAnim: cc.Node,
        cardType: [ cc.Node ],
        sgAnimPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        femaleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        },
        diceAudio: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onVillage", this.onVillage.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "village", this.village.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var _i = 0; _i < this.registerHandler.length; _i++) {
          var handler = this.registerHandler[_i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.PaiGow);
        dataLogic.setLimitPlayerNum(4);
        this.registerEvent();
        this.clearOtherPlayer();
        this.clickBind();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        kf.createPool(constant.PoolId.paiGowCardType, 4, this.sgAnimPf);
        var isCheck = cc.sys.localStorage.getItem("game_paiGowAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(constant.GameId.PaiGow);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[selRoomKey - 1].ante;
        this.setBetNumState();
        this.round.active = false;
        this.yuPaiList = [];
        for (var _i2 = 0; _i2 < 32; _i2++) {
          this.yuPaiList[_i2] = cc.instantiate(this.CardPf);
          this.yuPaiList[_i2].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + paiGowDataLogic.paiGowCards[31 - _i2].cardIndex);
          this.yuPaiList[_i2].parent = this.yuPaiContent;
          this.yuPaiList[_i2].opacity = 255;
          this.yuPaiList[_i2].x = _i2 % 8 * 74 * .75 + 10 + _i2 % 8 * 6;
          this.yuPaiList[_i2].y = -144 * Math.floor(_i2 / 8) * .75 - 10 - 6 * Math.floor(_i2 / 8);
        }
        var playerPos = [ {
          x: 99,
          y: -166
        }, {
          x: 157,
          y: 80
        }, {
          x: 226,
          y: 87
        }, {
          x: -157,
          y: 80
        } ];
        for (var _i3 = 0; _i3 < this.player.length; _i3++) {
          this.player[_i3].playerPos = playerPos[_i3];
          this.bindLongTouchEvent(this.player[_i3]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.roomNum.x + this.roomNum.width + 20);
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.villageBgBox.stopAllActions();
        for (var _i4 = 0; _i4 < this.pokers.length; _i4++) {
          for (var j = 0; j < this.pokers[j].childrenCount; j++) {
            this.pokers[_i4].children[j].stopAllActions();
            this.pokers[_i4].children[j].children[0] && this.pokers[_i4].children[j].children[0].destroy();
          }
          this.cardType[_i4].children[1] && this.cardType[_i4].children[1].destroy();
          1 == this.roundNum && this.getBetTxt[_i4].node.stopAllActions();
        }
        this.diceAnim.active && (this.diceAnim.active = false);
        if (2 != this.roundNum) {
          this.winTxt.stopAllActions();
          this.gameLayer.stopAllActions();
        }
        if (this.notice.opacity || this.notice.active) {
          this.notice.opacity = 0;
          this.notice.y = cc.winSize.height / 2 + this.notice.height / 2;
        }
      },
      gameShow: function gameShow() {
        var UISeatId = void 0;
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        this.lunShuAnim.active = false;
        if (this.progress >= 2) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.getVillage(this.confirmVillage);
          2 == this.progress && this.showVillageCallFun(UISeatId);
          if (3 == this.progress) {
            this.diceAnim.active = false;
            this.showdown.active = true;
          }
          if (this.progress >= 3) {
            for (var _i5 = 0; _i5 < this.pokers.length; _i5++) this.pokers[_i5].active = true;
            for (var k = 0; k < this.openCardsArr.length; k++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(k);
              if (this.openCardsArr[k].length > 0) {
                this.setPlayerHandCard(UISeatId, this.openCardsArr[k]);
                var cardTypeNum = this.showPokers(UISeatId, this.openCardsArr[k]);
                this.cardType[UISeatId].active = true;
                this.cardType[UISeatId].getComponent(cc.Sprite).spriteFrame = this.cardTypeSf;
                this.cardType[UISeatId].getChildByName("txt").getComponent(cc.Label).string = paiGowDataLogic.getCardTypeByTxt(cardTypeNum);
                if (0 == cardTypeNum) {
                  this.cardType[UISeatId].getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
                  this.cardType[UISeatId].getChildByName("txt").color = new cc.Color(255, 255, 255);
                }
              }
            }
            if (this.progress > 3 && 1 == this.isEnd) {
              this.winTxt.opacity = 255;
              for (var j = 0; j < this.endData.length; j++) {
                this.updateUserBalance();
                UISeatId = dataLogic.getUISeatIdBySeatId(j);
                if (this.endData[j] >= 0) {
                  this.getBetTxt[UISeatId].font = this.winChipNumFont;
                  this.getBetTxt[UISeatId].string = "+" + this.endData[i].toFixed(2);
                } else {
                  this.getBetTxt[UISeatId].font = this.loseChipNumFont;
                  this.getBetTxt[UISeatId].string = this.endData[i].toFixed(2);
                }
              }
            }
            if (this.progress > 3 && 2 == this.isEnd && this.isResultAnim) {
              this.matchBtn.active = true;
              this.autoMatch.active = true;
            }
            if (this.progress > 3) {
              this.reciprocal.active = false;
              return;
            }
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          cc.log("newDate", newDate);
          if (1 == this.progress && newDate > 0) {
            this.isVillage || (this.grab.active = true);
            this.wait.active = true;
          }
          if (2 == this.progress && newDate > 0) {
            this.isBet || (this.multiple.active = true);
            this.wait.active = true;
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.initMatchingView(true, false);
        this.round.active = false;
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        cc.log("\u5339\u914ding");
        dataLogic.setNeedRecover(true);
        this.clearOtherPlayer();
        this.total = 0;
        var roomKey = dataLogic.curRoomKey;
        paiGowConstant.PostMatching.roomId = constant.GameId.PaiGow + roomKey;
        http.post(paiGowConstant.PostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        this.matchBtn.active = true;
        this.autoMatch.active = true;
        this.setMatchingToastView(false);
        dataLogic.gameEnd();
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.matchingToastLayer.active = false;
          this.efMatchingLoad.getComponent(cc.Animation).stop();
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            var roomKey = dataLogic.curRoomKey;
            cc.log(roomKey, "roomKey");
            this.matchBtn.active = true;
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
            return;
          }
          return;
        }
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setDeskId(data.Data.deskId);
        }
        this.setMatchingToastUI(true);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.setMatchingToastView(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          if (constant.HttpCode.GameOver == msg.Code) {
            dataLogic.setReqRecoverState(false);
            this.round.active = false;
            for (var _i6 = 0; _i6 < 32; _i6++) this.yuPaiList[_i6].opacity = 255;
          }
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
        if (0 == msg.state) {
          cc.log("\u7b49\u5f85\u5339\u914d");
          this.initMatchingView(true, true);
          return;
        }
        dataLogic.setPlayerInfo(msg.playerInfo);
        this.setMatchingToastView(false);
        var playerInfo = kf.clone(msg.playerInfo), UISeatId = void 0;
        void 0 != msg.cards && (this.playerCardsArr = msg.cards);
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        this.playerInfo = playerInfo;
        dataLogic.setLimitPlayerNum(playerInfo.length);
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        for (var _j = 0; _j < playerInfo.length; _j++) playerInfo[_j].seatId = _j;
        for (var _i7 = 0; _i7 < playerInfo.length; _i7++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[_i7].seatId);
          cc.log("UISeatId---", UISeatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i7].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i7].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[_i7].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i7].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i7].headUrl, avatarSp);
          if (1 == msg.state) if (-1 == playerInfo[_i7].state) {
            if (UISeatId == constant.SelfUISeatId) {
              this.isVillage = false;
              this.grab.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
              paiGowDataLogic.setVillageMul(msg.robMultiples[_i7]);
              this.initQzMultipleBtn();
            }
          } else {
            this.isVillage = true;
            0 == playerInfo[_i7].state ? this.villageMultiple[UISeatId].string = "\u4e0d\u62a2" : this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[_i7].state + "\u500d";
          }
          if (msg.state >= 2) if (_i7 == msg.isVillage) {
            this.multipleTxt[UISeatId].string = "";
            this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[_i7].state + "\u500d";
            if (UISeatId == constant.SelfUISeatId && 2 == msg.state) {
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
            }
          } else if (playerInfo[_i7].betMultiple < 0 && UISeatId == paiGowDataLogic.selfSeatId) {
            if (2 == msg.state) {
              dataLogic.setRoomConfig("betConfig", msg.multiples[_i7]);
              this.betMultipleBtn();
              this.isBet = false;
              this.multiple.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
            }
          } else if (playerInfo[_i7].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[_i7].betMultiple + "\u500d";
          }
          if (3 == msg.state) {
            var cards = msg.cards[_i7];
            cc.log("remainingTime--", remainingTime);
            this.pokers[UISeatId].active = true;
            if (UISeatId == constant.SelfUISeatId) if (playerInfo[_i7].isComplete) {
              this.isOpenCard = true;
              this.upturnCards(_i7, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.isOpenCard = false;
              this.showdown.active = true;
            } else if (playerInfo[_i7].isComplete) {
              this.upturnCards(_i7, cards, true);
              this.isOpenState[UISeatId] = true;
            }
          }
          if (4 == msg.state) {
            this.pokers[UISeatId].active = true;
            this.upturnCards(_i7, msg.cards[_i7], true);
            if (msg.endData[_i7] >= 0) {
              this.getBetTxt[UISeatId].font = this.winChipNumFont;
              this.getBetTxt[UISeatId].string = "+" + msg.endData[_i7].toFixed(2);
            } else {
              this.getBetTxt[UISeatId].font = this.loseChipNumFont;
              var _endData = +msg.endData[_i7].toFixed(2);
              this.getBetTxt[UISeatId].string = _endData;
            }
            this.winTxt.opacity = 255;
          }
        }
        for (var h = 0; h < msg.openCard.length; h++) 1 == msg.openCard[h] && (this.yuPaiList[31 - h].opacity = 180);
        this.round.active = true;
        this.roundNum = msg.round;
        this.round.getChildByName("txt").getComponent(cc.Label).string = "\u7b2c" + msg.round + "/2\u8f6e";
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:" + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        this.confirmVillage = msg.isVillage;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        paiGowDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        dataLogic.matching();
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        this.clearOtherPlayer();
        this.round.active = true;
        this.roundNum = msgData.round;
        this.round.getChildByName("txt").getComponent(cc.Label).string = "\u7b2c" + msgData.round + "/2\u8f6e";
        if (1 == msgData.round) for (var _i8 = 0; _i8 < 32; _i8++) this.yuPaiList[_i8].opacity = 255;
        dataLogic.matching();
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.active = true;
          this.lunShuAnim.getComponent(cc.Animation).play();
          this.lunShuAnim.getChildByName("New Label").getComponent(cc.Label).string = msgData.round;
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        var playerInfo = msgData.playerInfo, UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        dataLogic.setPlayerInfo(playerInfo);
        dataLogic.setLimitPlayerNum(playerInfo.length);
        for (var _i9 = 0; _i9 < playerInfo.length; _i9++) playerInfo[_i9].seatId = _i9;
        for (var _i10 = 0; _i10 < playerInfo.length; _i10++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[_i10].seatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i10].userId;
          this.player[UISeatId]._playerInfo = playerInfo[_i10];
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i10].nickName);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i10].balance);
          this.setPlayerBalance(UISeatId, playerInfo[_i10].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i10].headUrl, avatarSp);
          if (UISeatId == constant.SelfUISeatId) {
            balance = playerInfo[_i10].balance;
            paiGowDataLogic.setVillageMul(msgData.robMultiples[_i10]);
            this.initQzMultipleBtn();
          }
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        this.scheduleOnce(function() {
          _this.grab.active = true;
          _this.wait.active = true;
          _this.countDown(msgData.endTime, 1);
        }, 1.67);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.playerCardsArr = [];
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.balanceArr = [];
        this.isVillageNum = 1;
        this.isBetNum = 2;
        this.isVillage = false;
        this.isBet = false;
        this.isOpenCard = false;
        this.send = false;
        this.isResultAnim = false;
        this.villageBgBox.x = 1e4;
        this.villageBgBox.y = 1e4;
        this.villageIcon.x = 1e4;
        this.villageIcon.y = 1e4;
        this.arrow.x = 1e4;
        this.arrow.y = 1e4;
        this.openPokers = [];
        this.grab.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.showdown.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.winTxt.opacity = 0;
        this.grab.active = false;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var l = 0; l < this.grabBtn.length; l++) this.grabBtn[l].node.active = false;
        for (var _i11 = 0; _i11 < this.player.length; _i11++) {
          this.multipleTxt[_i11].string = "";
          this.villageMultiple[_i11].string = "";
          this.pokers[_i11].active = false;
          this.getBetTxt[_i11].string = "";
          if (0 != _i11) {
            this.player[_i11].active = false;
            this.player[_i11].getChildByName("playerName").getComponent(cc.Label).string = "";
            this.player[_i11].getChildByName("balance").getComponent(cc.Label).string = "";
          }
          for (var j = 0; j < 2; j++) this.pokers[_i11].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("back");
          this.cardType[_i11].active = false;
          this.cardType[_i11].getComponent(cc.Sprite).spriteFrame = "";
          this.cardType[_i11].getChildByName("txt").getComponent(cc.Label).string = "";
          this.cardType[_i11].children[1] && this.cardType[_i11].children[1].destroy();
        }
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.grab.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.grab.active = false;
            this.multiple.active = false;
            switch (type) {
             case 1:
              this.grab.active = false;
              this.isVillage || this.scheduleOnce(function() {
                cc.log("\u62a2\u5e84");
                _this2.postGrabVillage(0);
              }, .1 * mySeatId);
              break;

             case 2:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                cc.log("\u4e0b\u6ce8");
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 3:
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                cc.log("\u644a\u724c");
                _this2.openTheCard();
              }, .3 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      initQzMultipleBtn: function initQzMultipleBtn() {
        var multiple = paiGowDataLogic.qzBtnConfig;
        cc.log("multiple", multiple);
        this.grabBtn[0].node.active = true;
        for (var _i12 = 0; _i12 < multiple.length; _i12++) if (_i12 < 4 && multiple[_i12] > 0) {
          this.grabBtn[Number(_i12) + 1].node.active = true;
          this.grabBtn[Number(_i12) + 1].node.getChildByName("Label").getComponent(cc.Label).string = multiple[_i12] + "\u500d";
          this.grabBtn[Number(_i12) + 1].node.x = (Number(_i12) + 1) * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var _i13 = 0; _i13 < multiple.length; _i13++) if (_i13 < 5 && multiple[_i13] > 0) {
          this.multipleBtn[_i13].node.active = true;
          this.multipleBtn[_i13].node.getChildByName("Label").getComponent(cc.Label).string = multiple[_i13] + "\u500d";
          this.multipleBtn[_i13].node.x = _i13 * (this.multiplBtnWidth + 22);
        } else this.multipleBtn[_i13].node.active = false;
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      grabVillage: function grabVillage(event, key) {
        this.grab.active = false;
        audioMgr.playEffect(this.audioBtn);
        this.postGrabVillage(key);
      },
      postGrabVillage: function postGrabVillage(key) {
        paiGowConstant.PostVillage.villageNum = 0 == key ? key : paiGowDataLogic.qzBtnConfig[key - 1];
        http.post(paiGowConstant.PostVillage, "village");
        this.isVillage = true;
        this.grab.active = false;
        this.isVillageNum < this.playerInfo.length ? this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u62a2\u5e84" : this.wait.active = false;
      },
      village: function village(msgData) {
        if (0 == msgData.Code) return;
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      onVillage: function onVillage(msgData) {
        var _this3 = this;
        this.isVillageNum++;
        var lastVillage = msgData.seatId.toString().split(","), multiple = void 0, UISeatId = void 0;
        multiple = 0 == msgData.villageNum ? "\u4e0d\u62a2" : "\u62a2" + msgData.villageNum + "\u500d";
        for (var _i14 = 0; _i14 < lastVillage.length; _i14++) if ("" != lastVillage[_i14]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastVillage[_i14]);
          this.villageMultiple[UISeatId].string = multiple;
          this._village.push({
            seatId: lastVillage[_i14],
            villageNum: msgData.villageNum
          });
        }
        if (void 0 != msgData.confirmVillage) {
          this.progress = 2;
          this.reciprocal.active = false;
          this.grab.active = false;
          this.wait.active = false;
          var seatId = dataLogic.getSeatIdByUISeatId(paiGowDataLogic.selfSeatId);
          if (seatId != msgData.confirmVillage) {
            dataLogic.setRoomConfig("betConfig", msgData.multiples[seatId]);
            this.betMultipleBtn();
          }
          this.confirmVillage = msgData.confirmVillage;
          this.endTime = msgData.endTime;
          UISeatId = dataLogic.getUISeatIdBySeatId(msgData.confirmVillage);
          var max = msgData.dealerMultiple;
          this.unschedule(this.callback);
          dataLogic.isHide ? this.showVillage(UISeatId, max) : this.node.runAction(cc.sequence(cc.delayTime(.6), cc.callFunc(function() {
            var delay = _this3.selVillage(msgData.confirmVillage);
            _this3.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(function() {
              this.showVillage(UISeatId, max);
              audioMgr.playEffect(this.selVillageOver);
            }, _this3)));
          }, this)));
        }
      },
      showVillage: function showVillage(UISeatId, max) {
        var _this4 = this;
        cc.log("max22", max);
        this.villageMultiple[UISeatId].string = "\u62a2" + max + "\u500d";
        this.getVillage(this.confirmVillage);
        var callFunc = cc.callFunc(function() {
          _this4.showVillageCallFun(UISeatId);
        }, this);
        dataLogic.isHide ? this.showVillageCallFun(UISeatId) : this.node.runAction(cc.sequence(cc.delayTime(.8), callFunc));
      },
      showVillageCallFun: function showVillageCallFun(UISeatId) {
        for (var _i15 = 0; _i15 < this.player.length; _i15++) UISeatId != _i15 && (this.villageMultiple[_i15].string = "");
        this.wait.active = true;
        if (UISeatId != constant.SelfUISeatId) if (this.isBet) this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8"; else {
          this.multiple.active = true;
          this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
        } else this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
        this.countDown(this.endTime, 2);
        cc.log("run callFunc");
      },
      selVillage: function selVillage(confirmVillage) {
        var _this5 = this;
        var len = void 0, UISeatId = void 0, time = .15, num = 4, delay = void 0, delay1 = void 0;
        var newVillage = [];
        var max = Math.max.apply(Math, this._village.map(function(o) {
          return o.villageNum;
        }));
        for (var _i16 = 0; _i16 < this._village.length; _i16++) {
          this._village[_i16].villageNum == max && newVillage.push(Number(this._village[_i16].seatId));
          newVillage.sort(function(a, b) {
            return a - b;
          });
        }
        var aArr = [], aArr1 = [];
        for (var k = 0; k < newVillage.length; k++) newVillage[k] <= confirmVillage ? aArr.push(newVillage[k]) : aArr1.push(newVillage[k]);
        newVillage = aArr1.concat(aArr);
        len = newVillage.length;
        if (len > 1) {
          var _loop = function _loop(j) {
            delay = cc.delayTime(time * len);
            delay1 = cc.delayTime(j * time);
            UISeatId = dataLogic.getUISeatIdBySeatId(newVillage[j]);
            var pos = _this5.player[UISeatId].position;
            var callFun = cc.callFunc(function() {
              _this5.selTheVillage(pos, delay, num);
            }, _this5);
            _this5.node.runAction(cc.sequence(delay1, callFun));
          };
          for (var j = 0; j < newVillage.length; j++) _loop(j);
          return time * len * num;
        }
        return 0;
      },
      selTheVillage: function selTheVillage(pos, delay, num) {
        var sequence = void 0, repeat = void 0;
        var AudioCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.selVillageAudio);
        }, this);
        sequence = cc.sequence(AudioCallFun, cc.moveTo(0, pos.x, pos.y), delay);
        repeat = cc.repeat(sequence, num);
        this.villageBgBox.runAction(repeat);
      },
      getVillage: function getVillage(confirmVillage) {
        var UISeatId = dataLogic.getUISeatIdBySeatId(confirmVillage);
        this.villageBgBox.x = this.player[UISeatId].x;
        this.villageBgBox.y = this.player[UISeatId].y;
        if (1 == UISeatId) {
          this.villageIcon.x = this.player[UISeatId].x + 54;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        } else {
          this.villageIcon.x = this.player[UISeatId].x - 53;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        }
        for (var _i17 = 0; _i17 < this.player.length; _i17++) UISeatId != _i17 && (this.villageMultiple[_i17].string = "");
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.audioBtn);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        paiGowConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(paiGowConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.playerInfo.length > 2 && this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this6 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        for (var _i18 = 0; _i18 < lastBet.length; _i18++) if ("" != lastBet[_i18]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[_i18]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + msgData.betNum + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
          this.progress = 3;
          this.endTime = msgData.endTime;
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.playerCardsArr = msgData.cards;
          this.shakeDice(msgData.dice, msgData.startSeatId);
          this.scheduleOnce(function() {
            _this6.sendCardAnim();
            _this6.scheduleOnce(function() {
              _this6.countDown(_this6.endTime, 3);
              _this6.showdown.active = true;
            }, 1.2);
          }, 3.48);
          this.startSeatId = msgData.startSeatId;
        }
      },
      sendCardAnim: function sendCardAnim() {
        var _this7 = this;
        var userSeatId = [ 0, 1, 2, 3 ], sliceArr = [], spliceArr = [], newArr = [];
        if (this.startSeatId > 0) {
          sliceArr = userSeatId.slice(0, this.startSeatId);
          spliceArr = userSeatId.slice(this.startSeatId);
          newArr = spliceArr.concat(sliceArr);
        } else newArr = userSeatId;
        cc.log("newArr", newArr);
        var _loop2 = function _loop2(_i19) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(newArr[_i19]);
          if (dataLogic.isHide) {
            _this7.pokers[UISeatId].active = true;
            _this7.showdown.active = true;
          } else _this7.node.runAction(cc.sequence(cc.delayTime(.2 * _i19), cc.callFunc(function() {
            _this7.pokers[UISeatId].active = true;
            audioMgr.playEffect(_this7.sendCard);
            _this7.arrow.x = 1e4;
            _this7.arrow.y = 1e4;
            _this7.diceAnim.active = false;
          }, _this7)));
        };
        for (var _i19 = 0; _i19 < newArr.length; _i19++) _loop2(_i19);
      },
      shakeDice: function shakeDice(diceData, startSeatId) {
        var _this8 = this;
        if (!dataLogic.isHide) {
          audioMgr.playEffect(this.diceAudio);
          this.diceAnim.active = true;
          this.diceAnim.getChildByName("dice1").getComponent(cc.Sprite).spriteFrame = paiGowDataLogic.getSFByImgName(this.diceAtlas, diceData[0]);
          this.diceAnim.getChildByName("dice2").getComponent(cc.Sprite).spriteFrame = paiGowDataLogic.getSFByImgName(this.diceAtlas, diceData[1]);
          this.diceAnim.getComponent(cc.Animation).play();
          var _UISeatId = dataLogic.getUISeatIdBySeatId(startSeatId), _pos = this.player[_UISeatId].position;
          this.scheduleOnce(function() {
            _this8.arrow.x = _pos.x;
            _this8.arrow.y = _pos.y + 95;
            _this8.arrow.stopAllActions();
            _this8.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3, 0, -8), cc.moveBy(.3, 0, 8))));
          }, 2.48);
        }
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this9 = this;
        var cards = void 0, UISeatId = void 0, txt = "", endAudio = void 0, lastArr = [], win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          var _UISeatId2 = dataLogic.getUISeatIdBySeatId(msgData.seatId);
          _UISeatId2 != constant.SelfUISeatId && this.upturnCards(msgData.seatId, cards);
        }
        if (1 == msgData.isEnd || 2 == msgData.isEnd) {
          for (var _h = 0; _h < msgData.openCard.length; _h++) 1 == msgData.openCard[_h] && (this.yuPaiList[31 - _h].opacity = 180);
          this.isEnd = msgData.isEnd;
          this.endData = msgData.endData;
          this.progress = 4;
          this.showdown.active = false;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          var max = Math.max.apply(null, msgData.endData);
          var min = Math.min.apply(null, msgData.endData);
          var isMeMax = 0;
          var isMeMin = 0;
          var newEndData = [];
          for (var _j2 = 0; _j2 < msgData.endData.length; _j2++) {
            newEndData[_j2] = Math.abs(msgData.endData[_j2]);
            msgData.endData[_j2] >= 0 && isMeMax++;
            msgData.endData[_j2] <= 0 && isMeMin++;
          }
          var absMax = Math.max.apply(null, newEndData);
          cc.log("isMeMin", isMeMin, "isMeMax", isMeMax);
          for (var _i20 = 0; _i20 < msgData.endData.length; _i20++) {
            var _playerInfo = dataLogic.playerInfo[_i20];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[_i20]) / 100;
            msgData.endData[_i20] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[_i20]) / 100);
            _playerInfo.gameTimes += 1;
            this.player[_i20]._playerInfo = _playerInfo;
            UISeatId = dataLogic.getUISeatIdBySeatId(_i20);
            if (UISeatId == constant.SelfUISeatId) if (msgData.endData[_i20] > 0) {
              if (this.confirmVillage == _i20 && msgData.endData[_i20] == max && absMax == max && 1 == isMeMax) if (msgData.endData.length < 3) {
                txt = 1;
                cc.log("\u4e24\u4eba\u5bf9\u5c40\u52dd\u5229");
                endAudio = this.winGold;
              } else {
                txt = 0;
                cc.log("\u901a\u5403");
                endAudio = this.allWin;
              } else {
                txt = 1;
                cc.log("\u52dd\u5229");
                endAudio = this.winGold;
              }
              win = false;
            } else {
              if (this.confirmVillage == _i20 && msgData.endData[_i20] < 0 && msgData.endData[_i20] == min && 1 == isMeMin) {
                if (msgData.endData.length >= 3 && Math.abs(min) == absMax) {
                  txt = 2;
                  cc.log("\u901a\u8d54");
                }
              } else cc.log("\u5931\u8d25");
              endAudio = this.lose;
              win = true;
            }
          }
          var scrollNumCallFunc = cc.callFunc(function() {
            cc.log("msgData.endData", msgData.endData);
            for (var _i21 = 0; _i21 < msgData.endData.length; _i21++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i21);
              if (msgData.endData[_i21] >= 0) {
                _this9.getBetTxt[UISeatId].font = _this9.winChipNumFont;
                _this9.scrollNum(msgData.endData[_i21].toFixed(2), UISeatId);
              } else {
                _this9.getBetTxt[UISeatId].font = _this9.loseChipNumFont;
                _this9.getBetTxt[UISeatId].string = msgData.endData[_i21].toFixed(2);
              }
            }
          }, this);
          time = dataLogic.isHide ? 0 : lastArr.length + .8;
          cc.log("time======", time);
          if (dataLogic.isHide && 2 == msgData.isEnd || !dataLogic.isHide) {
            var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc, cc.delayTime(msgData[dataLogic.selfSeatId] >= 0 ? 2.1 : 1), cc.callFunc(function() {
              _this9.updateUserBalance();
            }, this));
            this.winTxt.runAction(sequence);
            sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
            this.winTxt.runAction(sequence);
            this.resultAnim(txt, time, endAudio, win, dataLogic.isHide);
          }
        }
        2 == msgData.isEnd && dataLogic.gameEnd();
      },
      updateUserBalance: function updateUserBalance() {
        var selfBalance;
        for (var _i22 = 0; _i22 < this.endData.length; _i22++) {
          var _UISeatId3 = dataLogic.getUISeatIdBySeatId(_i22);
          var balance = Number(this.endData[_i22] + this.balanceArr[_i22]);
          balance = balance <= 0 ? 0 : balance;
          this.player[_UISeatId3].getChildByName("balance").getComponent(cc.Label).string = balance.toFixed(2);
          _UISeatId3 == constant.SelfUISeatId && (selfBalance = balance);
        }
        dataLogic.setUserBalance(selfBalance);
        if (1 == this.roundNum && 2 == this.isEnd) {
          cc.log("\u63d0\u524d\u7ed3\u675f");
          if (selfBalance <= 0) {
            this.gameOver(1);
            this.autoMatch.getComponent(cc.Toggle).isChecked = false;
            cc.sys.localStorage.setItem("game_paiGowAutoMatch", false);
          } else this.gameOver();
        }
      },
      gameOver: function gameOver(isMe) {
        var _this10 = this;
        var noticeTxt = "";
        noticeTxt = 1 == isMe ? "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u672c\u5c40\u6e38\u620f\u63d0\u524d\u7ed3\u675f" : "\u6709\u73a9\u5bb6\u4f59\u989d\u4e0d\u8db3\uff0c\u672c\u5c40\u6e38\u620f\u63d0\u524d\u7ed3\u675f";
        this.notice.getChildByName("txt").getComponent(cc.Label).string = noticeTxt;
        this.notice.position = cc.v2(0, cc.winSize.height + this.notice.height / 2);
        this.notice.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3, 1), cc.moveBy(.3, 0, -78)), cc.delayTime(1.8), cc.spawn(cc.fadeOut(.3, 0), cc.moveBy(.3, 0, 78)), cc.callFunc(function() {
          _this10.round.active = false;
          for (var _i23 = 0; _i23 < 32; _i23++) _this10.yuPaiList[_i23].opacity = 255;
        }, this)));
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this11 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this11.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this11.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        dataLogic.isHide && 1 == this.roundNum || this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this11.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this)));
      },
      resultAnim: function resultAnim(type, time, endAudio, win, hide) {
        var delayTime = cc.delayTime(3);
        var showAnimCallFun = cc.callFunc(function() {
          switch (type) {
           case 0:
            this.tongChiAnim.active = true;
            this.tongChiAnim.getComponent(cc.Animation).play();
            break;

           case 1:
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
            break;

           case 2:
            this.tongPeiAnim.active = true;
            this.tongPeiAnim.getComponent(cc.Animation).play();
          }
          audioMgr.playEffect(endAudio);
          win || audioMgr.playEffect(this.scrollNumber);
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.tongChiAnim.active = false;
          this.tongPeiAnim.active = false;
          this.winAnim.active = false;
          2 == this.isEnd && (this.isResultAnim = true);
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (2 == this.isEnd) if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time + .3), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(.3), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr, isOpen) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        if (this.isUserOpenPokers(UISeatId)) return false;
        this.openPokers.push(UISeatId);
        var cardTypeNum = this.showPokers(UISeatId, cards);
        var flopCardsCallFun = cc.callFunc(function() {
          var _this12 = this;
          cc.log(UISeatId, "flopCardsCallFn");
          var pokers = this.pokers[UISeatId].children, fanPaiAnim = void 0;
          var _loop3 = function _loop3(_i24) {
            _this12.scheduleOnce(function() {
              var animation = pokers[_i24].getComponent(cc.Animation);
              animation.play();
              animation.on("finished", function() {
                audioMgr.playEffect(this.sendCard);
                pokers[_i24].scaleX = 1;
                pokers[_i24].skewY = 0;
                var handCardsArr = [];
                for (var j = 0; j < cards.length; j++) handCardsArr.push(paiGowDataLogic.getCardValueAndColor(cards[j]));
                handCardsArr = paiGowDataLogic.order(handCardsArr);
                pokers[_i24].getComponent(cc.Sprite).spriteFrame = paiGowDataLogic.getSFByImgName(this.cardAtlas, handCardsArr[_i24].cardIndex);
                0 == _i24 && this.sgA(UISeatId, cardTypeNum);
              }, _this12);
            }, .25 * _i24 + .25);
          };
          for (var _i24 = 0; _i24 < pokers.length; _i24++) _loop3(_i24);
          this.scheduleOnce(function() {
            var sex = dataLogic.getSex(UISeatId);
            0 == sex ? audioMgr.playEffect(_this12.maleSgAudio[cardTypeNum]) : audioMgr.playEffect(_this12.femaleSgAudio[cardTypeNum]);
          }, .4);
        }, this);
        cc.log("\u724c\u578b", cardTypeNum);
        if (!dataLogic.isHide || isOpen) this.node.runAction(cc.sequence(cc.delayTime(1 * index), flopCardsCallFun)); else {
          this.pokers[UISeatId].active = true;
          this.setPlayerHandCard(UISeatId, cards);
          this.cardType[UISeatId].getComponent(cc.Sprite).spriteFrame = this.cardTypeSf;
          this.cardType[UISeatId].getChildByName("txt").getComponent(cc.Label).string = paiGowDataLogic.getCardTypeByTxt(cardTypeNum);
          if (0 == cardTypeNum) {
            this.cardType[UISeatId].getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
            this.cardType[UISeatId].getChildByName("txt").color = new cc.Color(255, 255, 255);
          }
        }
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, cardTypeNum, cards) {
        var showCardsCallFun = cc.callFunc(function() {
          this.sgA(UISeatId, cardTypeNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleSgAudio[cardTypeNum]) : audioMgr.playEffect(this.femaleSgAudio[cardTypeNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      sgA: function sgA(UISeatId, cardTypeNum) {
        for (var _i25 = 0; _i25 < this.cardType[UISeatId].children.length; _i25++) this.cardType[UISeatId].children[_i25].poolId && kf.killObj(this.cardType[UISeatId].children[_i25]);
        var sgAnim = kf.getObj(constant.PoolId.paiGowCardType, this.cardType[UISeatId], this.sgAnimPf);
        this.cardType[UISeatId].active = true;
        if (0 == cardTypeNum) {
          sgAnim.getChildByName("qzpj_paixing_di").getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);
          sgAnim.getChildByName("New Label").color = new cc.Color(255, 255, 255);
        } else {
          sgAnim.getChildByName("qzpj_paixing_di").getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);
          sgAnim.getChildByName("New Label").color = new cc.Color(255, 253, 104);
        }
        sgAnim.getChildByName("New Label").getComponent(cc.Label).string = paiGowDataLogic.getCardTypeByTxt(cardTypeNum);
        sgAnim.getComponent(cc.Animation).play();
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        cc.log(cards, "cards");
        var pokers = [];
        for (var j = 0; j < cards.length; j++) pokers.push(paiGowDataLogic.getCardValueAndColor(cards[j]));
        pokers = paiGowDataLogic.order(pokers);
        cc.log(pokers, "pokers");
        for (var _i26 = 0; _i26 < pokers.length; _i26++) this.pokers[UISeatId].getChildByName("pokers" + _i26).getComponent(cc.Sprite).spriteFrame = paiGowDataLogic.getSFByImgName(this.cardAtlas, pokers[_i26].cardIndex);
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var _i27 = 0; _i27 < cards.length; _i27++) playerPokersData.push(paiGowDataLogic.getCardValueAndColor(cards[_i27]));
        return paiGowDataLogic.CardJudgment(playerPokersData);
      },
      doSelfOpenCardAction: function doSelfOpenCardAction() {
        cc.log(this.playerCardsArr, dataLogic.selfSeatId, "doSelfOpenCardAction");
        this.upturnCards(dataLogic.selfSeatId, this.playerCardsArr[dataLogic.selfSeatId]);
      },
      openTheCard: function openTheCard() {
        http.post(paiGowConstant.OpenCards, "openCards");
        this.isOpenCard = true;
        this.showdown.active = false;
        this.doSelfOpenCardAction();
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.goBackSelectRoom();
      },
      clickBind: function clickBind() {
        var _this13 = this;
        this.yuPaiView.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this13.yuPaiView.active = false;
        });
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "yuPaiBtn":
          this.yuPaiView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.PaiGow);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "showdown":
          this.openTheCard();
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("game_paiGowAutoMatch", isCheck);
          break;

         case "1":
          this.dispenseCardAction();
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  payCenter: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "02425naRn1Iw7POqEbv3ZkD", "payCenter");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getRechargeWayCb", this.getRechargeWayCb.bind(this) ], [ "customCallBack", this.customCallBack.bind(this) ], [ "getRechargeCb", this.getRechargeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      properties: {
        payToggle_pf: cc.Prefab,
        rechargeWay_toggle_pf: cc.Prefab,
        rechargeWay_parent: cc.Node,
        payIconAtlas: cc.SpriteAtlas,
        bankTip: cc.Label,
        moneyInput: cc.EditBox,
        payNameInput: cc.EditBox,
        rechargeMoneyForm: cc.Node,
        moneyIntervalParent: cc.Node,
        moneyToggle: cc.Prefab,
        step1Panel: cc.Node,
        step2Panel: cc.Node,
        fourthPay: cc.Node,
        underMaintain: cc.Node,
        staticChargeLabel: cc.Node,
        yinShangBottom: cc.Node,
        txtYinShangHint: cc.Label,
        step2WarmTip: cc.Label,
        rtMyAccount: cc.RichText,
        payee: cc.Label,
        accountNumber: cc.Label,
        bankBrancher: cc.Label,
        codeImg: cc.Sprite,
        scrollContent: cc.Node,
        leftMenuBar: cc.Node,
        recommendTag: cc.Node,
        comfirmLabel: cc.Label,
        tutorial: cc.Node,
        payFields: cc.Label,
        accountInfo: cc.Node,
        warmArea: cc.Node,
        pfYinShangItem: cc.Prefab
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        kf.createPool(constant.PoolId.rechargeWay, 10, this.rechargeWay_toggle_pf);
        kf.createPool(constant.PoolId.moneyToggle, 15, this.moneyToggle);
        kf.createPool(constant.PoolId.payToggle, 15, this.payToggle_pf);
        this.payIcon = {
          RechargeWayBank: "card",
          RechargeWayWeixin: "wechat_mobile",
          RechargeWayAlipay: "alipay_mobile",
          RechargeWayQQ: "qq_mobile",
          RechargeWayUnion: "yunshanfu",
          RechargeWayJD: "jd",
          RechargeWayQuick: "card",
          RechargeWayFast: "yinShang",
          RechargeWayForth: "forthPay"
        };
        this.payName = {
          RechargeWayFast: "\u4e13\u4eab\u95ea\u5145",
          RechargeWayBank: "\u516c\u53f8\u5165\u6b3e",
          RechargeWayWeixin: "\u5fae\u4fe1\u652f\u4ed8",
          RechargeWayAlipay: "\u652f\u4ed8\u5b9d",
          RechargeWayQQ: "QQ\u652f\u4ed8",
          RechargeWayUnion: "\u94f6\u8054\u652f\u4ed8",
          RechargeWayJD: "\u4eac\u4e1c\u94b1\u5305",
          RechargeWayQuick: "\u7f51\u94f6\u652f\u4ed8",
          RechargeWayForth: ""
        };
        this.moneyInterval = [ 100, 500, 1e3, 5e3, 1e4 ];
        this.appType = {
          RechargeWayBank: "",
          RechargeWayWeixin: "\u5fae\u4fe1",
          RechargeWayAlipay: "\u652f\u4ed8\u5b9d",
          RechargeWayQQ: "QQ\u94b1\u5305",
          RechargeWayUnion: "\u4e91\u95ea\u4ed8/\u94f6\u884cApp",
          RechargeWayJD: "\u4eac\u4e1c\u94b1\u5305",
          RechargeWayQuick: ""
        };
        this.allRechargeWay = [ "RechargeWayFast", "RechargeWayBank", "RechargeWayWeixin", "RechargeWayAlipay", "RechargeWayQQ", "RechargeWayUnion", "RechargeWayJD", "RechargeWayQuick", "RechargeWayForth" ];
        this.curRechargeWay = {};
        this.bankData = [];
        this.userSelChargeMoney = 0;
        this.rechargeStep = 1;
        this.allRechargeWayBackData = {};
        var sendData = {
          action: "GetInitData",
          Requirement: JSON.stringify(this.allRechargeWay)
        };
        this.reqDateAndShowLoadView(sendData, "getRechargeWayCb");
      },
      changePayType: function changePayType(event, type) {
        var _this = this;
        var isFirstEnter = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
        this.hideLoadView();
        isFirstEnter || audioMgr.playEffect(this.clickAudio);
        this.userSelChargeMoney = 0;
        var nowChargeWayData = this.allRechargeWayBackData[type];
        if (nowChargeWayData && nowChargeWayData.length) {
          var BackData = nowChargeWayData;
          this.bankData = BackData;
          if ("RechargeWayFast" == type) {
            this.step1Panel.active = false;
            this.step2Panel.active = false;
            this.fourthPay.active = false;
            this.underMaintain.active = false;
            this.rtMyAccount.string = "<color=#593F2D>\u6211\u7684\u8d26\u53f7\uff1a</c><color=#C95E1D>" + dataLogic.account + "</color>";
            this.curRechargeWay = BackData[0];
            this.setYinShangView(true);
            this.scrollContent.height = 145 * nowChargeWayData.length + 35;
            this.scrollContent.parent.height = 440;
            this.scrollContent.parent.parent.height = 440;
          } else {
            this.scrollContent.parent.height = 518;
            this.scrollContent.parent.parent.height = 548;
            this.setYinShangView(false);
            for (var i = 0; i < BackData.length; i++) {
              var newNode = this.rechargeWay_parent.children[i];
              newNode ? newNode.active = true : newNode = kf.getObj(constant.PoolId.rechargeWay, this.rechargeWay_parent, this.rechargeWay_toggle_pf);
              var checkEventHandler = new cc.Component.EventHandler();
              checkEventHandler.target = 0 == i ? null : this.node;
              checkEventHandler.component = "payCenter";
              checkEventHandler.handler = "toggleBankOrChannel";
              checkEventHandler.customEventData = BackData[i].Id;
              var toggleComponent = newNode.getComponent(cc.Toggle);
              toggleComponent.checkEvents[0] = checkEventHandler;
              newNode.getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
              newNode.getChildByName("txt").color = new cc.Color(158, 109, 60);
              newNode.getChildByName("txt").getComponent(cc.Label).string = "RechargeWayBank" == this.curChargeWayType ? BackData[i].BankName.replace("\u4e8c\u7ef4", "\u626b\u7801") : "\u901a\u9053" + (i + 1);
              newNode.x = i % 4 * newNode.width + newNode.width / 2;
              newNode.y = Math.floor(i / 4) * -newNode.height - newNode.height / 2;
            }
            this.scheduleOnce(function() {
              var toggle = _this.rechargeWay_parent.children[0].getComponent(cc.Toggle);
              toggle.checkEvents[0].target = null;
              toggle.check();
              toggle.checkEvents[0].target = _this.node;
              _this.rechargeWay_parent.children[0].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
              _this.rechargeWay_parent.children[0].getChildByName("txt").color = new cc.Color(255, 255, 255);
            }, 0);
            this.curRechargeWay = BackData[0];
            this.renderChargePanel();
            this.rechargeWay_parent.height = this.rechargeWay_parent.children[0].height * Math.ceil(BackData.length / 4) + 13;
          }
        } else {
          this.scrollContent.parent.height = 518;
          this.scrollContent.parent.parent.height = 548;
          this.step1Panel.active = this.step2Panel.active = this.fourthPay.active = false;
          this.underMaintain.active = true;
        }
      },
      createToggleEvent: function createToggleEvent(payType, count, icon, payName) {
        var payToggleNode = kf.getObj(constant.PoolId.payToggle, this.leftMenuBar, this.payToggle_pf);
        var checkEventHandler = new cc.Component.EventHandler();
        checkEventHandler.target = this.node;
        checkEventHandler.component = "payCenter";
        checkEventHandler.handler = "toggleRechargeMethod";
        checkEventHandler.customEventData = payType;
        var payToggle_toggleComp = payToggleNode.getComponent(cc.Toggle);
        payToggle_toggleComp.checkEvents[0] = checkEventHandler;
        payToggleNode.y = - +count * (payToggleNode.height - 5) - payToggleNode.height / 2 - 3;
        payToggleNode.getChildByName("txt").getComponent(cc.Label).string = payName;
        payToggle_toggleComp.isChecked = false;
        var payIcon = payToggleNode.getChildByName("payIcon").getComponent(cc.Sprite);
        payIcon.spriteFrame = kf.getSFByImgName(this.payIconAtlas, this.payIcon[payType]);
        if (payType == this.firstRechargeWayType) {
          this.recommendTag.position = cc.v2(-132, payToggleNode.y + 10);
          payToggle_toggleComp.isChecked = true;
        }
        if (payToggle_toggleComp.isChecked) {
          payToggleNode.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
          payToggleNode.getChildByName("txt").color = new cc.Color(255, 255, 255);
        } else payToggleNode.getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
      },
      setYinShangView: function setYinShangView(isShow) {
        if (!this.yinShangItemList) return;
        for (var i = 0; i < this.yinShangItemList.length; i++) this.yinShangItemList[i].active = isShow;
        this.yinShangBottom.active = isShow;
        this.txtYinShangHint.node.opacity = isShow ? 255 : 0;
      },
      getRechargeWayCb: function getRechargeWayCb(data) {
        this.hideLoadView();
        var isHasData = false;
        for (var i in data.BackData) data.BackData[i] && data.BackData[i].length && (isHasData = true);
        if (1 == data.Code && isHasData) {
          this.allRechargeWayBackData = data.BackData;
          var count = 0;
          this.firstRechargeWayType = null;
          if (data.BackData["RechargeWayFast"] && data.BackData["RechargeWayFast"].length) {
            var list = data.BackData["RechargeWayFast"], item = void 0;
            this.yinShangItemList = [];
            for (var _i = 0; _i < list.length; _i++) {
              item = cc.instantiate(this.pfYinShangItem);
              item.parent = this.scrollContent;
              item.x = -10;
              item.y = -145 * _i - 105;
              item.active = false;
              item.getComponent("yinShangItem").reuse(list[_i]);
              this.yinShangItemList.push(item);
            }
          }
          for (var i in data.BackData) if (data.BackData[i] && data.BackData[i].length) {
            0 != count || this.firstRechargeWayType || (this.firstRechargeWayType = i);
            if ("RechargeWayForth" != i) {
              this.createToggleEvent(i, count, this.payIcon[i], this.payName[i]);
              count++;
            } else for (var j = 0; j < data.BackData[i].length; j++) {
              this.createToggleEvent("RechargeWayForth", count, "forthPay.png", data.BackData[i][j].payName);
              count++;
            }
          }
          this.leftMenuBar.parent.height = this.leftMenuBar.height = count * (this.leftMenuBar.children[0].height - 5) + 3;
          this.curChargeWayType = this.firstRechargeWayType;
          this.changePayType("", this.firstRechargeWayType, true);
        } else {
          this.step1Panel.active = this.step2Panel.active = this.fourthPay.active = false;
          this.underMaintain.active = true;
        }
      },
      renderChargePanel: function renderChargePanel() {
        var _this2 = this;
        for (var i = this.moneyIntervalParent.children.length - 1; i >= 0; i--) this.moneyIntervalParent.children[i].active = false;
        this.isBank = this.curRechargeWay.BankName && (this.curRechargeWay.BankName.indexOf("\u94f6\u884c") > -1 || this.curRechargeWay.BankName.indexOf("\u90ae\u653f") > -1 || this.curRechargeWay.BankName.indexOf("\u4fe1\u7528\u793e") > -1);
        this.renderCardNum = "RechargeWayBank" == this.curChargeWayType ? this.isBank ? this.curRechargeWay.CardNum : "" : this.curRechargeWay.AliNo;
        var url = "RechargeWayBank" == this.curChargeWayType ? this.isBank ? "" : this.curRechargeWay.CardNum : this.curRechargeWay.CodeImg;
        this.renderCodeImg = url && 0 != url.toLowerCase().indexOf("http") ? constant.imgServer + url : url;
        this.appName = this.curRechargeWay && this.curRechargeWay.BankName && this.curRechargeWay.BankName.indexOf("\u4e8c\u7ef4") > -1 ? this.curRechargeWay.BankName.replace("\u4e8c\u7ef4", "") : this.appType[this.curChargeWayType] || "\u5fae\u4fe1\u6216\u652f\u4ed8\u5b9d";
        if (this.curRechargeWay.Memo) {
          this.bankTip.node.parent.active = true;
          this.bankTip.string = this.curRechargeWay.Memo;
          var maxTxtNum = Math.ceil(this.bankTip.node.width / this.bankTip.fontSize * 3);
          this.curRechargeWay.Memo.length > maxTxtNum && (this.bankTip.string = this.curRechargeWay.Memo.substr(0, maxTxtNum) + "...");
          this.scheduleOnce(function() {
            _this2.bankTip.node.parent.height = _this2.bankTip.node.height + 24;
          }, 0);
        } else this.bankTip.node.parent.active = false;
        if (this.curRechargeWay.PayType && "\u4e00\u822c" != this.curRechargeWay.PayType) if (null != this.curRechargeWay.Amounts && this.curRechargeWay.Amounts.length) {
          this.rechargeMoneyForm.active = false;
          this.staticChargeLabel.active = true;
          this.createMoneyBtn(this.curRechargeWay.Amounts, "thirdPay");
        } else {
          this.rechargeMoneyForm.active = true;
          this.staticChargeLabel.active = false;
          this.createMoneyBtn(this.moneyInterval, null);
        } else {
          this.rechargeMoneyForm.active = true;
          this.staticChargeLabel.active = false;
          this.createMoneyBtn(this.moneyInterval, null);
        }
        this.underMaintain.active = false;
        !this.curRechargeWay.AliNo || "RechargeWayWeixin" != this.curChargeWayType && "RechargeWayAlipay" != this.curChargeWayType ? this.tutorial.active = false : this.tutorial.active = true;
        var name = {
          RechargeWayBank: "\u4ed8\u6b3e\u4eba",
          RechargeWayWeixin: "\u5fae\u4fe1\u6635\u79f0",
          RechargeWayAlipay: "\u4ed8\u6b3e\u4eba",
          RechargeWayQQ: "QQ\u6635\u79f0",
          RechargeWayUnion: "\u4ed8\u6b3e\u4eba",
          RechargeWayJD: "\u4ed8\u6b3e\u4eba",
          RechargeWayQuick: ""
        };
        var method = this.curChargeWayType;
        "\u5fae\u4fe1" == this.appName && (method = "RechargeWayWeixin");
        "\u652f\u4ed8\u5b9d" == this.appName && (method = "RechargeWayAlipay");
        "QQ" == this.appName && (method = "RechargeWayQQ");
        var n = this.curRechargeWay.Field || name[method];
        this.payFields.string = "\u8bf7\u8f93\u5165" + (n || "\u4ed8\u6b3e\u8d26\u53f7") + "\uff1a";
        this.payNameInput.placeholder = "\u8bf7\u8f93\u5165" + (n || "\u4ed8\u6b3e\u8d26\u53f7");
        this.step1Panel.opacity = 255;
        this.step1Panel.active = true;
        this.step2Panel.active = false;
        this.fourthPay.active = false;
        this.underMaintain.active = false;
        this.scheduleOnce(function() {
          _this2.step1Panel.getComponent(cc.Layout).updateLayout();
          _this2.scrollContent.height = _this2.step1Panel.height + 45;
        }, 0);
      },
      goFourthPay: function goFourthPay() {
        audioMgr.playEffect(this.clickAudio);
        dataLogic.openWindow(this.curRechargeWay.payUrl);
      },
      createMoneyBtn: function createMoneyBtn(data, isThirdPay) {
        var _this3 = this;
        var _loop = function _loop(i) {
          money_node = _this3.moneyIntervalParent.children[i];
          money_node ? money_node.active = true : money_node = kf.getObj(constant.PoolId.moneyToggle, _this3.moneyIntervalParent, _this3.moneyToggle);
          money_node.getChildByName("money").getComponent(cc.Label).string = data[i];
          money_node.x = i % 5 * (money_node.width + 4) + money_node.width / 2;
          money_node.y = Math.floor(i / 5) * (-money_node.height - 10) - money_node.height / 2 - 15;
          checkEventHandler = new cc.Component.EventHandler();
          checkEventHandler.target = _this3.node;
          checkEventHandler.component = "payCenter";
          checkEventHandler.handler = "toggleChargeMoney";
          checkEventHandler.customEventData = data[i];
          money_node.getComponent(cc.Toggle).isChecked && _this3.scheduleOnce(function() {
            var toggle = _this3.moneyIntervalParent.children[i].getComponent(cc.Toggle);
            toggle.checkEvents[0].target = null;
            toggle.uncheck();
            toggle.checkEvents[0].target = _this3.node;
          }, 0);
          money_node.getComponent(cc.Toggle).checkEvents[0] = checkEventHandler;
          money_node.getChildByName("money").color = new cc.Color(158, 109, 60);
          money_node.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
        };
        for (var i = 0; i < data.length; i++) {
          var money_node;
          var checkEventHandler;
          _loop(i);
        }
        this.moneyIntervalParent.height = Math.ceil(data.length / 5) * (this.moneyIntervalParent.children[0].height + 10) + 26;
      },
      inputMoneyBegan: function inputMoneyBegan() {
        var node = void 0;
        for (var i = 0; i < this.moneyIntervalParent.children.length; i++) if (this.moneyIntervalParent.children[i].active) {
          node = this.moneyIntervalParent.children[i];
          if (node.getComponent(cc.Toggle).isChecked) {
            node.getComponent(cc.Toggle).checkEvents[0].target = null;
            node.getComponent(cc.Toggle).isChecked = false;
            node.getComponent(cc.Toggle).checkEvents[0].target = this.node;
            node.getChildByName("money").color = new cc.Color(158, 109, 60);
            node.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
          }
        }
      },
      inputMoneyEnded: function inputMoneyEnded() {
        this.userSelChargeMoney = +this.moneyInput.string;
      },
      toggleChargeMoney: function toggleChargeMoney(event, money) {
        cc.log("\u5207\u6362\u5145\u503c\u91d1\u989d", event.isChecked);
        audioMgr.playEffect(this.clickAudio);
        if (!event.isChecked) {
          this.moneyInput.string = "";
          this.userSelChargeMoney = 0;
          event.target.getChildByName("money").color = new cc.Color(158, 109, 60);
          event.target.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
          return;
        }
        for (var i = 0; i < this.moneyIntervalParent.childrenCount; i++) {
          var childNode = this.moneyIntervalParent.children[i];
          if (childNode.active) {
            childNode.getChildByName("money").color = new cc.Color(158, 109, 60);
            childNode.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
          }
        }
        event.target.getChildByName("money").color = new cc.Color(255, 255, 255);
        event.target.getChildByName("money").getComponent(cc.LabelOutline).width = 2;
        event.target.getChildByName("money").getComponent(cc.LabelOutline).enabled = true;
        this.userSelChargeMoney = money;
        this.moneyInput.string = "" + money;
      },
      confirmRecharge: function confirmRecharge() {
        audioMgr.playEffect(this.clickAudio);
        if (+this.userSelChargeMoney > this.curRechargeWay.Max || +this.userSelChargeMoney < this.curRechargeWay.Min || !this.userSelChargeMoney) {
          this.showLayerTip("\u5145\u503c\u91d1\u989d\u5fc5\u987b\u5728" + this.curRechargeWay.Min + "\u4e0e" + this.curRechargeWay.Max + "\u4e4b\u95f4");
          return;
        }
        if (this.curRechargeWay.Amounts && this.curRechargeWay.Amounts.length || !(this.curRechargeWay.autoFloat >= 1) || this.userSelChargeMoney != parseInt(this.userSelChargeMoney)) this.goingNextStep(); else {
          while (this.userSelChargeMoney == parseInt(this.userSelChargeMoney)) this.userSelChargeMoney = parseFloat(this.userSelChargeMoney) + (2 == this.curRechargeWay.autoFloat ? -1 : 1) * (Math.floor(99 * Math.random()) + 1) / 100;
          clientEvent.dispatchEvent("showLayerToast", {
            contentTxt: "\u4e3a\u4e86\u66f4\u51c6\u786e\u5730\u6838\u5bf9\u60a8\u7684\u5145\u503c\u8ba2\u5355\uff0c\u60a8\u7684\u5145\u503c\u91d1\u989d\u5c06\u88ab\u8c03\u6574\u4e3a" + this.userSelChargeMoney,
            btnTxt: [ "\u53d6\u6d88", "\u786e\u5b9a" ],
            btnEventName: [ "toastClose", "customFunc" ]
          }, 1);
        }
      },
      showTutorial: function showTutorial() {
        audioMgr.playEffect(this.clickAudio);
        var url = http.getDomainName() + ("RechargeWayWeixin" == this.curChargeWayType ? "/tutorial/index.html?type=wx" : "/tutorial/index.html?type=zfb");
        dataLogic.openWindow(url);
      },
      customCallBack: function customCallBack() {
        this.goingNextStep();
      },
      goingNextStep: function goingNextStep() {
        var _this4 = this;
        var _scrollView = this.scrollContent.parent.parent.getComponent(cc.ScrollView);
        _scrollView.stopAutoScroll();
        _scrollView.scrollToTop();
        if (this.curRechargeWay.PayType && "\u4e00\u822c" != this.curRechargeWay.PayType) this.payQuickOrder(); else {
          this.rechargeStep = 2;
          this.step1Panel.runAction(cc.sequence(cc.spawn(cc.moveTo(.2, cc.v2(-100, 0)), cc.fadeOut(.2)), cc.callFunc(function() {
            _this4.step1Panel.x = 0;
            _this4.step1Panel.opacity = 255;
            _this4.step1Panel.active = false;
            _this4.step2Panel.active = true;
            _this4.setComfirmBtnState("active");
            _this4.renderPayAccountInfo();
          }, this))).easing(cc.easeBezierAction(.5, .5, 1, 1));
        }
      },
      renderPayAccountInfo: function renderPayAccountInfo() {
        if (this.curRechargeWay.RealName) {
          this.payee.string = this.curRechargeWay.RealName;
          this.payee.node.parent.active = true;
        } else this.payee.node.parent.active = false;
        cc.log(this.appName);
        var renderWarmTipTxt2;
        renderWarmTipTxt2 = this.curRechargeWay.Tip ? this.curRechargeWay.Tip.replace(/<br>/g, "\n") : this.curRechargeWay.CodeImg && this.curRechargeWay.AliNo ? "RechargeWayJD" == this.curChargeWayType ? "1. \u6253\u5f00" + this.appName + "\u626b\u63cf\u4e8c\u7ef4\u7801\u6216\u8f6c\u8d26\u5230\u4eac\u4e1c\u94b1\u5305\u8d26\u6237\u8fdb\u884c\u5145\u503c\uff1b\n2. \u53ef\u5c06\u4e8c\u7ef4\u7801\u622a\u56fe\u4fdd\u5b58\u81f3\u76f8\u518c\uff0c\u7528" + this.appName + "\u8bc6\u522b\u76f8\u518c\u4e2d\u7684\u4e8c\u7ef4\u7801\uff0c\u6bcf\u6b21\u5145\u503c\u65f6\u8bf7\u5728\u672c\u9875\u9762\u83b7\u53d6\u6700\u65b0\u4e8c\u7ef4\u7801\u3002" : "1. \u6253\u5f00" + this.appName + "\u626b\u63cf\u4e8c\u7ef4\u7801/\u8f6c\u8d26\u5230" + ("RechargeWayQQ" == this.curChargeWayType ? "QQ\u53f7\u7801" : "\u94f6\u884c\u5361") + "\u8fdb\u884c\u5145\u503c\uff1b\n2. \u53ef\u5c06\u4e8c\u7ef4\u7801\u622a\u56fe\u4fdd\u5b58\u81f3\u76f8\u518c\uff0c\u7528" + this.appName + "\u8bc6\u522b\u76f8\u518c\u4e2d\u7684\u4e8c\u7ef4\u7801\uff0c\u6bcf\u6b21\u5145\u503c\u65f6\u8bf7\u5728\u672c\u9875\u9762\u83b7\u53d6\u6700\u65b0\u4e8c\u7ef4\u7801\u3002" : this.renderCodeImg ? "1. \u6253\u5f00" + this.appName + "\u626b\u63cf\u4e8c\u7ef4\u7801\u8fdb\u884c\u5145\u503c\uff1b\n2. \u53ef\u5c06\u4e8c\u7ef4\u7801\u622a\u56fe\u4fdd\u5b58\u81f3\u76f8\u518c\uff0c\u7528" + this.appName + "\u8bc6\u522b\u76f8\u518c\u4e2d\u7684\u4e8c\u7ef4\u7801\uff0c\u6bcf\u6b21\u5145\u503c\u65f6\u8bf7\u5728\u672c\u9875\u9762\u83b7\u53d6\u6700\u65b0\u4e8c\u7ef4\u7801\u3002" : "\u8bf7\u8f6c\u8d26\u5230\u4ee5\u4e0a\u6536\u6b3e\u8d26\u6237\uff0c\u8f6c\u8d26\u6210\u529f\u540e\u5de5\u4f5c\u4eba\u5458\u5c06\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u5165\u6b3e\u3002";
        this.step2WarmTip.string = renderWarmTipTxt2;
        this.step2WarmTip._updateRenderData(true);
        this.warmArea.height = this.step2WarmTip.node.height + 32;
        this.accountNumber.node.parent.active = !!this.renderCardNum;
        this.renderCardNum && (this.accountNumber.string = this.renderCardNum);
        this.codeImg.node.parent.active = !!this.renderCodeImg;
        if (this.isBank) {
          this.curRechargeWay.BankStore.length > 12 ? this.bankBrancher.string = this.curRechargeWay.BankStore.substr(0, 11) + "..." : this.bankBrancher.string = this.curRechargeWay.BankStore;
          this.bankBrancher.node.realTxt = this.curRechargeWay.BankStore;
          this.bankBrancher.node.parent.active = true;
          this.resetAccountInfoChildPos(this.accountInfo);
        } else {
          this.bankBrancher.node.parent.active = !("\u4e00\u822c" != this.curRechargeWay.PayType || !this.curRechargeWay.BankStore);
          if (this.bankBrancher.node.parent.active) {
            this.bankBrancher.node.realTxt = this.curRechargeWay.BankStore;
            this.curRechargeWay.BankStore.length > 12 ? this.bankBrancher.string = this.curRechargeWay.BankStore.substr(0, 11) + "..." : this.bankBrancher.string = this.curRechargeWay.BankStore;
          }
          var self = this;
          if (this.renderCodeImg) kf.loadNetImg(this.renderCodeImg, this.codeImg, function(resSprite, avatarNode) {
            var originalSize = null;
            if (resSprite) {
              originalSize = resSprite._originalSize;
              var ratio = originalSize.width / originalSize.height;
              if (originalSize.width >= 200) {
                self.codeImg.node.width = 200;
                self.codeImg.node.height = 200 / ratio;
              } else {
                self.codeImg.node.width = originalSize.width;
                self.codeImg.node.height = originalSize.height;
              }
              self.codeImg.node.parent.height = self.codeImg.node.height + 28;
              self.resetAccountInfoChildPos(self.accountInfo);
            } else {
              originalSize = {
                width: 40,
                height: 36
              };
              self.codeImg.spriteFrame = null;
              self.codeImg.node.parent.active = false;
              self.resetAccountInfoChildPos(self.accountInfo);
            }
          }); else {
            this.codeImg.node.width = 40;
            this.codeImg.node.height = 36;
            this.codeImg.node.parent.height = 36;
            this.resetAccountInfoChildPos(this.accountInfo);
          }
        }
      },
      resetAccountInfoChildPos: function resetAccountInfoChildPos(resetPosParent) {
        var startPos = 14;
        for (var i = 0; i < resetPosParent.children.length; i++) if (resetPosParent.children[i].active) {
          resetPosParent.children[i].y = -startPos;
          startPos += resetPosParent.children[i].height + 18;
        }
        resetPosParent.height = startPos - 4;
        this.step2Panel.getComponent(cc.Layout).updateLayout();
        this.scrollContent.height = this.step2Panel.height + 40;
      },
      clearInputInfo: function clearInputInfo(event, flag) {
        audioMgr.playEffect(this.clickAudio);
        if ("clearInputMoney" == flag) {
          this.moneyInput.string = "";
          this.userSelChargeMoney = 0;
          var toggle = void 0;
          for (var i = 0; i < this.moneyIntervalParent.childrenCount; i++) {
            var childNode = this.moneyIntervalParent.children[i];
            toggle = childNode.getComponent(cc.Toggle);
            if (toggle.isChecked) {
              toggle.checkEvents[0].target = null;
              toggle.uncheck();
              toggle.checkEvents[0].target = this;
            }
            childNode.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
            childNode.getChildByName("money").color = new cc.Color(158, 109, 60);
          }
        } else this.payNameInput.string = "";
      },
      confirmOrder: function confirmOrder() {
        audioMgr.playEffect(this.clickAudio);
        var ajaxDataByCommon = {
          RechargeWayBank: {
            Qort: 2
          },
          RechargeWayWeixin: {
            Qort: 4
          },
          RechargeWayAlipay: {
            Qort: 3
          },
          RechargeWayQQ: {
            Qort: 8
          },
          RechargeWayUnion: {
            Qort: 11
          },
          RechargeWayJD: {
            Qort: 12
          }
        };
        if (!this.payNameInput.string) {
          this.showLayerTip("\u8bf7\u586b\u5199\u4ed8\u6b3e\u4eba");
          return;
        }
        var nowAjax = ajaxDataByCommon[this.curChargeWayType];
        nowAjax.Action = "Recharge";
        nowAjax.PayUser = this.payNameInput.string;
        nowAjax.Money = this.userSelChargeMoney;
        nowAjax.ID = this.curRechargeWay.Id;
        "RechargeWayBank" === this.curChargeWayType && (nowAjax.BankCode = this.curRechargeWay.BankCode);
        this.reqDateAndShowLoadView(nowAjax, "getRechargeCb");
      },
      payQuickOrder: function payQuickOrder() {
        audioMgr.playEffect(this.clickAudio);
        var ajaxDataByQuick = {
          RechargeWayWeixin: {
            Qort: 5
          },
          RechargeWayAlipay: {
            Qort: 6
          },
          RechargeWayQQ: {
            Qort: 7
          },
          RechargeWayUnion: {
            Qort: 9
          },
          RechargeWayJD: {
            Qort: 10
          },
          RechargeWayQuick: {
            Qort: 1
          }
        };
        var nowAjax = ajaxDataByQuick[this.curChargeWayType];
        nowAjax.Action = "Recharge";
        nowAjax.Money = this.userSelChargeMoney;
        nowAjax.ID = this.curRechargeWay.Id;
        "RechargeWayBank" === this.curChargeWayType && (nowAjax.BankCode = this.curRechargeWay.BankCode);
        this.reqDateAndShowLoadView(nowAjax, "getRechargeCb", null, true);
      },
      getRechargeCb: function getRechargeCb(data) {
        this.hideLoadView();
        for (var i = 0; i < this.moneyIntervalParent.childrenCount; i++) {
          var childNode = this.moneyIntervalParent.children[i];
          if (childNode.active) {
            childNode.getComponent(cc.Toggle).isChecked = false;
            childNode.getChildByName("money").color = new cc.Color(158, 109, 60);
            childNode.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
          }
        }
        if (1 == data.Code) if ("\u4e00\u822c" != this.curRechargeWay.PayType && this.curRechargeWay.PayType) {
          dataLogic.openWindow(data.BackUrl);
          this.moneyInput.string = "";
          this.userSelChargeMoney = "";
        } else {
          this.showLayerTip("\u63d0\u4ea4\u5145\u503c\u8ba2\u5355\u6210\u529f");
          this.payNameInput.string = "";
          this.moneyInput.string = "";
          this.userSelChargeMoney = 0;
          this.setComfirmBtnState("unActive");
        } else this.setComfirmBtnState("active");
      },
      setComfirmBtnState: function setComfirmBtnState(state) {
        if ("active" == state) {
          this.comfirmLabel.string = "\u63d0\u4ea4\u8ba2\u5355";
          this.comfirmLabel.node.parent.getComponent(cc.Button).enabled = true;
          this.comfirmLabel.node.parent.opacity = 255;
        } else {
          this.comfirmLabel.string = "\u5df2\u63d0\u4ea4";
          this.comfirmLabel.node.parent.getComponent(cc.Button).enabled = false;
          this.comfirmLabel.node.parent.opacity = 120;
        }
      },
      backToPrePanel: function backToPrePanel() {
        var _this5 = this;
        audioMgr.playEffect(this.clickAudio);
        this.rechargeStep = 1;
        var _scrollView = this.scrollContent.parent.parent.getComponent(cc.ScrollView);
        _scrollView.stopAutoScroll();
        _scrollView.scrollToTop();
        this.payNameInput.string = "";
        for (var i = 0; i < this.moneyIntervalParent.childrenCount; i++) {
          var childNode = this.moneyIntervalParent.children[i];
          childNode.getComponent(cc.Toggle).isChecked = false;
          childNode.getChildByName("money").getComponent(cc.LabelOutline).enabled = false;
          childNode.getChildByName("money").color = new cc.Color(158, 109, 60);
        }
        this.moneyInput.string = "";
        this.userSelChargeMoney = 0;
        this.codeImg.spriteFrame = null;
        this.step2Panel.runAction(cc.sequence(cc.spawn(cc.moveTo(.2, cc.v2(100, 0)), cc.fadeOut(.15)), cc.callFunc(function() {
          _this5.step1Panel.active = true;
          _this5.step2Panel.x = 0;
          _this5.step2Panel.active = false;
          _this5.step2Panel.opacity = 255;
          _this5.scrollContent.height = _this5.step1Panel.height + 30;
        }, this))).easing(cc.easeBezierAction(.5, .5, 1, 1));
      },
      toggleBankOrChannel: function toggleBankOrChannel(event, Id) {
        var _this6 = this;
        audioMgr.playEffect(this.clickAudio);
        this.bankData.length && this.scheduleOnce(function() {
          for (var i = 0; i < _this6.bankData.length; i++) if (_this6.bankData[i].Id == Id) {
            _this6.curRechargeWay = _this6.bankData[i];
            _this6.renderChargePanel();
            _this6.rechargeWay_parent.children[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
            _this6.rechargeWay_parent.children[i].getChildByName("txt").color = new cc.Color(255, 255, 255);
          } else if ("RechargeWayFast" != _this6.curChargeWayType) {
            _this6.rechargeWay_parent.children[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
            _this6.rechargeWay_parent.children[i].getChildByName("txt").color = new cc.Color(158, 109, 60);
          }
        }, 0);
        this.userSelChargeMoney = 0;
        this.moneyInput.string = "";
        this.payNameInput.string = "";
      },
      clearObj: function clearObj() {
        for (var i = this.rechargeWay_parent.children.length - 1; i >= 0; i--) this.rechargeWay_parent.children[i].active = false;
        for (var _i2 = this.moneyIntervalParent.children.length - 1; _i2 >= 0; _i2--) {
          this.moneyIntervalParent.children[_i2].getChildByName("checkmark").active = false;
          this.moneyIntervalParent.children[_i2].active = false;
        }
      },
      toggleRechargeMethod: function toggleRechargeMethod(event, type) {
        http.abortAllReq();
        this.curChargeWayType = type;
        this.clearObj();
        this.showLoadView();
        this.bankData = [];
        this.moneyInput.string = "";
        this.payNameInput.string = "";
        this.userSelChargeMoney = "";
        var _scrollView = this.scrollContent.parent.parent.getComponent(cc.ScrollView);
        _scrollView.stopAutoScroll();
        _scrollView.scrollToTop();
        for (var i = 0; i < this.leftMenuBar.children.length; i++) {
          this.leftMenuBar.children[i].getChildByName("txt").color = new cc.Color(138, 69, 58);
          this.leftMenuBar.children[i].getChildByName("txt").getComponent(cc.LabelOutline).enabled = false;
        }
        event.target.getChildByName("txt").getComponent(cc.LabelOutline).enabled = true;
        event.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
        if ("RechargeWayForth" != type) {
          _scrollView.enabled = true;
          this.changePayType("", type);
        } else {
          this.setYinShangView(false);
          _scrollView.enabled = false;
          this.showFourthPanel(event.target.getChildByName("txt").getComponent(cc.Label).string);
        }
      },
      showFourthPanel: function showFourthPanel(fourthPayName) {
        this.hideLoadView();
        audioMgr.playEffect(this.clickAudio);
        this.step1Panel.active = this.step2Panel.active = this.underMaintain.active = false;
        this.fourthPay.active = true;
        for (var i = 0; i < this.allRechargeWayBackData["RechargeWayForth"].length; i++) this.allRechargeWayBackData["RechargeWayForth"][i].payName == fourthPayName && (this.curRechargeWay = this.allRechargeWayBackData["RechargeWayForth"][i]);
      },
      showRechargeRecord: function showRechargeRecord() {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/rechargeRecord",
          js: "rechargeRecord",
          initArg: 1
        });
      },
      start: function start() {},
      copyTxt: function copyTxt(event, type) {
        audioMgr.playEffect(this.clickAudio);
        var copyTxt;
        copyTxt = "BankStore" == type ? event.target.parent.getChildByName("txt").realTxt : event.target.parent.getChildByName("txt").getComponent(cc.Label).string;
        var isSucceed = kf.copyToClipboard(copyTxt);
        this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.clickAudio);
        switch (name) {
         case "inform":
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/informAward",
            js: "informAward"
          });
          break;

         case "copyMyAccount":
          var isSucceed = kf.copyToClipboard(dataLogic.account);
          this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  personalCenter: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "6e0dfJ0tm1Ca5t0HbaN3vQt", "personalCenter");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _sendData = {
      action: "GetInitData",
      Requirement: null
    };
    var _gradeData = null;
    var _UserLastLoginInfo = null;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        toggle_nav: [ cc.Node ],
        scroll_panel: [ cc.Node ],
        scroll_view: cc.ScrollView,
        userName: cc.Label,
        userAcccount: cc.Label,
        spUserAvatar: cc.Sprite,
        userGrade: cc.Label,
        sex: cc.Node,
        sexPic: [ cc.SpriteFrame ],
        gradeScore: cc.Label,
        curLevel: cc.Label,
        nextLevel: cc.Label,
        upLevel_tip: cc.Node,
        title_txt: cc.Label,
        upLevel_progress: cc.ProgressBar,
        progress_tip: cc.Node,
        pfDialogCommonLayer: cc.Prefab,
        txtSecurityLevel: cc.Label,
        txtLastLoginTime: cc.Label,
        txtLastLoginAddr: cc.Label,
        txtSetSecurityPassword: cc.Label,
        txtSetSecretQuestion: cc.Label,
        txtSetLoginPassword: cc.Label,
        loginPasswordBtn: cc.Node,
        securityPasswordBtn: cc.Node,
        secretQuestionBtn: cc.Node,
        pointer: cc.Node,
        sfYellow: cc.SpriteFrame,
        sfBlue: cc.SpriteFrame,
        achievementArea: cc.Node,
        achievementBox: cc.Prefab,
        achievementRule: cc.Node,
        unLockAchievementNum: cc.Label,
        achievementBg: [ cc.SpriteFrame ]
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getGradeDataCb", this.getGradeDataCb.bind(this) ], [ "getSecurityCentreDataCb", this.getSecurityCentreDataCb.bind(this) ], [ "customCallBack", this.customCallBack.bind(this) ], [ "getLoginOutCb", this.getLoginOutCb.bind(this) ], [ "getAchievementCb", this.getAchievementCb.bind(this) ], [ "setAchievementCb", this.setAchievementCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _gradeData = null;
        _UserLastLoginInfo = null;
        this.toastShow();
        this.registerEvent();
        this.callBack = initArg.callBack;
        this.levelName = [ "\u65b0\u624b", "\u9752\u94dc", "\u767d\u94f6", "\u9ec4\u91d1", "\u94c2\u91d1", "\u94bb\u77f3", "\u661f\u8000", "\u738b\u8005", "\u724c\u7687" ];
        kf.createPool(constant.PoolId.DialogComonLayer, 1, this.pfDialogCommonLayer, "dialogCommonLayer");
        this.scroll_view.enabled = false;
        this.userName.string = dataLogic.userName || "\u6635\u79f0\u672a\u8bbe\u7f6e";
        this.userAcccount.string = "\u8d26\u53f7\uff1a" + dataLogic.account;
        this.sex.getComponent(cc.Sprite).spriteFrame = this.sexPic[dataLogic.userSex - 1];
        _sendData.Requirement = JSON.stringify([ "UserGradeGrow", "GradeList", "UserGrade" ]);
        var self = this;
        this.reqDateAndShowLoadView(_sendData, "getGradeDataCb");
        resMgr.loadSingleRes("baoWang" + dataLogic.userHeadUrl.replace(".jpg", ""), function(res) {
          self.spUserAvatar.isValid && (self.spUserAvatar.spriteFrame = res);
        }, cc.SpriteFrame);
        this.scroll_panel[2].on(cc.Node.EventType.TOUCH_START, function() {
          this.achievementRule.active && (this.achievementRule.active = false);
        }, this);
        this.achievementData = [];
      },
      getGradeDataCb: function getGradeDataCb(data) {
        this.hideLoadView();
        this.scroll_panel[0].active = true;
        this.userAcccount.node.parent.width = this.userAcccount.node.width + 57;
        if (1 == data.Code) {
          _gradeData = _gradeData || kf.clone(data);
          this.scroll_panel[0].active || (this.scroll_panel[0].active = true);
          this.gradeScore.string = data.BackData.UserGradeGrow;
          dataLogic.userGrade = data.BackData.UserGrade;
          this.userGrade.string = dataLogic.userGrade || 0;
          this.curLevel.string = dataLogic.userGrade;
          this.nextLevel.string = "VIP9" == dataLogic.userGrade ? "VIP9" : "VIP" + (Number(dataLogic.userGrade.split("VIP")[1]) + 1);
          this.title_txt.string = this.levelName[dataLogic.userGrade.split("VIP")[1] - 1];
          var gradeListData = data.BackData.GradeList;
          var upLevelScore;
          var upPercent;
          for (var i = 0; i < gradeListData.length; i++) if (dataLogic.userGrade == "VIP" + (gradeListData[i].Grade - 1)) {
            upLevelScore = gradeListData[i].GradeGrow - data.BackData.UserGradeGrow;
            this.upLevel_tip.getComponent(cc.RichText).string = "<color=#986436>\u8fd8\u6709<color=#E64724>" + upLevelScore + "</color>\u5206\u53ef\u8fbe\u5230VIP" + (i + 1) + "\uff0c\u6bcf\u5145\u503c<color=#E64724>1</color>\u5143\u52a0<color=#e64724>1</color>\u5206</c>";
            upPercent = Math.floor(data.BackData.UserGradeGrow / gradeListData[i].GradeGrow * 100) / 100;
            this.upLevel_progress.progress = upPercent;
            this.progress_tip.x = this.upLevel_progress.node.width * upPercent;
            this.progress_tip.getChildByName("txt").getComponent(cc.Label).string = Math.floor(100 * upPercent) + "%";
            this.progress_tip.width = this.progress_tip.getChildByName("txt").width + 40;
          }
        }
      },
      getSecurityCentreDataCb: function getSecurityCentreDataCb(msg) {
        this.hideLoadView();
        if (msg.Code != constant.HttpCode.Succeed) return;
        _UserLastLoginInfo = _UserLastLoginInfo || kf.clone(msg);
        this.scroll_panel[1].active || (this.scroll_panel[1].active = true);
        this.updateLoginPasswordState();
        this.updateSavePasswordState(msg.BackData.UserHasSafePwd);
        this.updatePhoneBindState();
        if ("undefined" != typeof msg.BackData.UserLastLoginInfo) if (null == msg.BackData.UserLastLoginInfo) {
          this.txtLastLoginTime.string = "\u65e0";
          this.txtLastLoginAddr.string = "\u65e0";
        } else {
          this.txtLastLoginTime.string = msg.BackData.UserLastLoginInfo.LoginTime;
          this.txtLastLoginAddr.string = msg.BackData.UserLastLoginInfo.LoginAddr;
        }
      },
      updateSaveLevel: function updateSaveLevel() {
        var level = 0;
        dataLogic.userPhoneNum && level++;
        dataLogic.hasPwd && level++;
        dataLogic.hasSafePassword && level++;
        var levelStr = [ "\u4f4e", "\u4f4e", "\u4e2d", "\u9ad8" ];
        var angle = [ -90, -90, 0, 90 ];
        this.txtSecurityLevel.string = levelStr[level];
        this.pointer.rotation = angle[level];
      },
      updateLoginPasswordState: function updateLoginPasswordState() {
        if (dataLogic.hasPwd) {
          this.txtSetLoginPassword.string = "\u5df2\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801";
          this.loginPasswordBtn.getComponent(cc.Sprite).spriteFrame = this.sfBlue;
          this.loginPasswordBtn.getChildByName("txt").getComponent(cc.Label).string = "\u4fee \u6539";
          this.loginPasswordBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(33, 102, 181);
        } else {
          this.txtSetLoginPassword.string = "\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801";
          this.loginPasswordBtn.getComponent(cc.Sprite).spriteFrame = this.sfYellow;
          this.loginPasswordBtn.getChildByName("txt").getComponent(cc.Label).string = "\u8bbe \u7f6e";
          this.loginPasswordBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(179, 79, 26);
        }
        this.updateSaveLevel();
      },
      updateSavePasswordState: function updateSavePasswordState() {
        cc.log("dataLogic.hasSafePassword", dataLogic.hasSafePassword);
        if (dataLogic.hasSafePassword) {
          this.txtSetSecurityPassword.string = "\u5df2\u8bbe\u7f6e\u5b89\u5168\u5bc6\u7801";
          this.securityPasswordBtn.getComponent(cc.Sprite).spriteFrame = this.sfBlue;
          this.securityPasswordBtn.getChildByName("txt").getComponent(cc.Label).string = "\u4fee \u6539";
          this.securityPasswordBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(33, 102, 181);
        } else {
          this.txtSetSecurityPassword.string = "\u8bbe\u7f6e\u5b89\u5168\u5bc6\u7801";
          this.securityPasswordBtn.getComponent(cc.Sprite).spriteFrame = this.sfYellow;
          this.securityPasswordBtn.getChildByName("txt").getComponent(cc.Label).string = "\u8bbe \u7f6e";
          this.securityPasswordBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(179, 79, 26);
        }
        this.updateSaveLevel();
      },
      updatePhoneBindState: function updatePhoneBindState() {
        if (dataLogic.userPhoneNum) {
          dataLogic.setSecretState(true);
          this.txtSetSecretQuestion.string = "\u5df2\u7ed1\u5b9a\u624b\u673a\u53f7(" + dataLogic.userPhoneNum + ")";
          this.secretQuestionBtn.getComponent(cc.Sprite).spriteFrame = this.sfBlue;
          this.secretQuestionBtn.getChildByName("txt").getComponent(cc.Label).string = "\u4fee \u6539";
          this.secretQuestionBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(33, 102, 181);
        } else {
          dataLogic.setSecretState(false);
          this.txtSetSecretQuestion.string = "\u7ed1\u5b9a\u624b\u673a\u53f7";
          this.secretQuestionBtn.getComponent(cc.Sprite).spriteFrame = this.sfYellow;
          this.secretQuestionBtn.getChildByName("txt").getComponent(cc.Label).string = "\u8bbe \u7f6e";
          this.secretQuestionBtn.getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(179, 79, 26);
        }
        this.updateSaveLevel();
      },
      toggleLeftNav: function toggleLeftNav(event, toggleIndex) {
        http.abortAllReq();
        this.hideLoadView();
        audioMgr.playEffect(this.clickAudio);
        this.scroll_panel[toggleIndex].parent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        this.scroll_panel[toggleIndex].parent.parent.parent.getComponent(cc.ScrollView).scrollToTop();
        for (var i = 0; i < this.toggle_nav.length; i++) {
          this.toggle_nav[i].getChildByName("txt").color = new cc.Color(165, 114, 27);
          this.toggle_nav[i].getChildByName("txt").getComponent(cc.LabelOutline).width = 0;
          this.toggle_nav[i].getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(165, 114, 27);
          this.scroll_panel[i].active = false;
        }
        this.toggle_nav[toggleIndex].getChildByName("txt").color = new cc.Color(255, 255, 255);
        this.toggle_nav[toggleIndex].getChildByName("txt").getComponent(cc.LabelOutline).width = 2;
        this.toggle_nav[toggleIndex].getChildByName("txt").getComponent(cc.LabelOutline).color = new cc.Color(187, 53, 0);
        this.achievementRule.active && (this.achievementRule.active = false);
        if (0 == toggleIndex) {
          this.scroll_view.enabled = false;
          if (_gradeData) this.getGradeDataCb(_gradeData); else {
            _sendData.Requirement = JSON.stringify([ "UserGradeGrow", "GradeList", "UserGrade" ]);
            this.reqDateAndShowLoadView(_sendData, "getGradeDataCb");
          }
        } else if (1 == toggleIndex) {
          this.scroll_view.enabled = false;
          if (_UserLastLoginInfo) this.getSecurityCentreDataCb(_UserLastLoginInfo); else {
            _sendData.Requirement = JSON.stringify([ "UserLastLoginInfo" ]);
            this.reqDateAndShowLoadView(_sendData, "getSecurityCentreDataCb");
          }
        } else if (2 == toggleIndex) {
          this.scroll_view.enabled = true;
          this.achievementData.length ? this.scroll_panel[2].active = true : this.reqDateAndShowLoadView({
            action: "GetAchievement"
          }, "getAchievementCb");
        }
      },
      getAchievementCb: function getAchievementCb(data) {
        this.hideLoadView();
        var _data = data.Data.achievementList;
        this.achievementData = _data;
        this.scroll_panel[2].active || (this.scroll_panel[2].active = true);
        for (var i = 0; i < _data.length; i++) {
          var node = cc.instantiate(this.achievementBox);
          node.getChildByName("state").opacity = 0 != _data[i].status ? 0 : 255;
          node.getChildByName("condition").getComponent(cc.Label).string = 1 != _data[i].condition.indexOf("$") ? _data[i].condition.replace("$", "\n") : _data[i].condition;
          node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame = this.achievementBg[_data[i].achievementId - 1];
          node.getChildByName("mask").getComponent(cc.Sprite).spriteFrame = this.achievementBg[_data[i].achievementId - 1];
          node.getChildByName("name").getComponent(cc.Label).string = _data[i].name;
          node.parent = this.achievementArea;
          node.x = i % 4 * (node.width + 11) + node.width / 2;
          node.y = Math.floor(i / 4) * (-node.height - 14) - node.height / 2;
          if (_data[i].status >= 5) node.getChildByName("isShow").opacity = 255; else if (0 == _data[i].status) {
            node.getChildByName("mask").color = new cc.Color(0, 0, 0);
            node.getChildByName("mask").opacity = 120;
          }
          var clickEventHandler = new cc.Component.EventHandler();
          clickEventHandler.target = this.node;
          clickEventHandler.component = "personalCenter";
          clickEventHandler.handler = "toggleAchievementShow";
          clickEventHandler.customEventData = _data[i].achievementId;
          node.getComponent(cc.Button).clickEvents[0] = clickEventHandler;
        }
        this.unLockAchievementNum.string = data.Data.enableNum + "/" + data.Data.totalNum;
        this.scroll_panel[2].parent.height = Math.ceil(data.Data.achievementList.length / 4) * (this.achievementArea.children[0].height + 14) + 50;
      },
      toggleAchievementShow: function toggleAchievementShow(event, achievementId) {
        if (event.target.getChildByName("mask").opacity || 255 == event.target.getChildByName("isShow").opacity) return;
        audioMgr.playEffect(this.clickAudio);
        this.curToggleBox = event.target;
        var sendData = {
          action: "SetAchievement",
          AchievementId: achievementId
        };
        this.reqDateAndShowLoadView(sendData, "setAchievementCb");
      },
      setAchievementCb: function setAchievementCb(data) {
        this.hideLoadView();
        if (1 == data.Code) {
          for (var i = 0; i < this.achievementArea.children.length; i++) this.achievementArea.children[i].getChildByName("isShow").opacity = 0;
          this.curToggleBox.getChildByName("isShow").opacity = 255;
        }
      },
      showAchievementRule: function showAchievementRule() {
        this.achievementRule.active = !this.achievementRule.active;
      },
      seeLevelRule: function seeLevelRule() {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/levelRule",
          js: "levelRule",
          initArg: 1
        });
      },
      editInfo: function editInfo() {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/editPersonalInfo",
          js: "editPersonalInfo",
          initArg: {
            callBack: this.cbFromEditPersonalInfo.bind(this)
          }
        });
      },
      cbFromEditPersonalInfo: function cbFromEditPersonalInfo(cbFlag) {
        if ("success" == cbFlag) {
          this.showLayerTip("\u66f4\u65b0\u8d44\u6599\u6210\u529f");
          this.userName.string = dataLogic.userName || "\u6635\u79f0\u672a\u8bbe\u7f6e";
          this.userAcccount.string = "\u8d26\u53f7\uff1a" + dataLogic.account;
          this.userAcccount.node.parent.width = this.userAcccount.node.width + 57;
          this.sex.getComponent(cc.Sprite).spriteFrame = this.sexPic[dataLogic.userSex - 1];
          var self = this;
          resMgr.loadSingleRes("baoWang" + dataLogic.userHeadUrl.replace(".jpg", ""), function(res) {
            self.spUserAvatar.isValid && (self.spUserAvatar.spriteFrame = res);
          }, cc.SpriteFrame);
          this.callBack();
        } else this.showLayerTip("\u66f4\u65b0\u5931\u8d25");
      },
      loginOut: function loginOut() {
        clientEvent.dispatchEvent("showLayerToast", {
          contentTxt: "\u662f\u5426\u6ce8\u9500\u5f53\u524d\u8d26\u6237\uff1f",
          btnTxt: [ "\u6ce8\u9500", "\u53d6\u6d88" ],
          btnEventName: [ "customFunc", "toastClose" ]
        }, 1);
      },
      customCallBack: function customCallBack() {
        var sendData = {
          action: "LogOut"
        };
        http.post(sendData, "getLoginOutCb");
      },
      getLoginOutCb: function getLoginOutCb(data) {
        if (1 == data.Code) {
          dataLogic.clearIntervalSend();
          this.showLayerTip("\u6ce8\u9500\u6210\u529f");
          dataLogic.userName = "";
          dataLogic.userHeadUrl = "";
          dataLogic.userGrade = "";
          dataLogic.userBalance = "";
          dataLogic.doneLogin = false;
          this.scheduleOnce(function() {
            clientEvent.dispatchEvent("loadScene", constant.SceneName.Login);
          }, 1.5);
        }
      },
      start: function start() {},
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "showAchievementRule":
          this.showAchievementRule();
          break;

         case "editPersonalInfo":
          this.editInfo();
          break;

         case "loginOut":
          this.loginOut();
          break;

         case "seeLevelRule":
          this.seeLevelRule();
          break;

         case "notMyLogin":
          if (!dataLogic.userPhoneNum) {
            this.createBindPhoneDialog(null, null, true, "\u7ed1\u5b9a\u624b\u673a\u53f7\u5373\u53ef\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\uff0c\u540e\u7eed\u53ef\u4f7f\u7528\u624b\u673a\u53f7\u767b\u5f55\u3002");
            break;
          }
          dataLogic.hasPwd ? kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/alterPassword",
            js: "alterPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 1
            }
          }) : kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/setPassword",
            js: "setPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 1,
              isSetLoginPassword: true
            }
          });
          break;

         case "alterLoginPassword":
          if (!dataLogic.userPhoneNum) {
            this.showLayerTip("\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u53f7");
            break;
          }
          dataLogic.hasPwd ? kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/alterPassword",
            js: "alterPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 1
            }
          }) : kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/setPassword",
            js: "setPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 1,
              isSetLoginPassword: true
            }
          });
          break;

         case "alterSecurityPassword":
          dataLogic.hasSafePassword ? kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/alterPassword",
            js: "alterPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 0
            }
          }) : kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/setPassword",
            js: "setPassword",
            initArg: {
              callBack: this.operationDone.bind(this),
              passwordType: 0
            }
          });
          break;

         case "bindPhone":
          dataLogic.userPhoneNum ? kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/bindAndCheckPhoneNum",
            js: "bindAndCheckPhoneNum",
            initArg: {
              isBindPhoneNum: false,
              curStep: 1,
              totalStep: 2,
              isUnbindPhoneNum: true,
              doneCb: this.createBindPhoneDialog.bind(this, 2, 2)
            }
          }) : this.createBindPhoneDialog(null, null, true, "\u7ed1\u5b9a\u624b\u673a\u53f7\u5373\u53ef\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\uff0c\u540e\u7eed\u53ef\u4f7f\u7528\u624b\u673a\u53f7\u767b\u5f55\u3002");
          break;

         case "copyAccount":
          var isSucceed = kf.copyToClipboard(dataLogic.account);
          this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
        }
      },
      createBindPhoneDialog: function createBindPhoneDialog(curStep, totalStep, isFirstBind, hintStr) {
        var _this = this;
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/bindAndCheckPhoneNum",
          js: "bindAndCheckPhoneNum",
          initArg: {
            isBindPhoneNum: true,
            doneCb: function doneCb(phoneNum, hintStr) {
              var node = cc.find("Canvas/topBg/recharge/money");
              node.getComponent(cc.Label).string = dataLogic.userBalance.toFixed(2);
              node = cc.find("Canvas/btBindPhoneNum");
              node.active = false;
              dataLogic.setUserPhoneNum(phoneNum);
              _this.showLayerTip(hintStr);
              _this.updatePhoneBindState();
            },
            curStep: curStep,
            totalStep: totalStep,
            isFirstBind: isFirstBind,
            hintStr: hintStr
          }
        });
      },
      operationDone: function operationDone(hintStr) {
        this.showLayerTip(hintStr);
        this.updateLoginPasswordState();
        this.updateSavePasswordState();
        this.updatePhoneBindState();
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  pfbCommon: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b96d7T6uJBGeoyrOZpGAMx6", "pfbCommon");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        slider: cc.Slider,
        sliderBackground: cc.Node,
        sliderTip: cc.Node,
        sliderHandle: cc.Node,
        closeBtn: cc.Node,
        userBalance: cc.Label,
        minCarryChipNum: cc.Label,
        maxCarryChipNum: cc.Label,
        autoCarryBtn: cc.Toggle,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        mask: cc.Node,
        panelMain: cc.Node
      },
      sliderEvent: function sliderEvent() {
        this.sliderBackground.width = this.slider.progress * this.slider.node.width;
        this.sliderTip.x = this.sliderHandle.position.x;
        this.userCarryChipNum = Math.floor(this.slider.progress * this.sliderRange + this.minCarryChipNumVal);
        this.sliderTip.getChildByName("carryChipNum").getComponent(cc.Label).string = this.userCarryChipNum;
      },
      closePanel: function closePanel() {
        var _this = this;
        audioMgr.playEffect(this.clickAudio);
        var seq1 = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0));
        this.panelMain.runAction(seq1);
        this.mask.active = false;
        this.scheduleOnce(function() {
          kf.killObj(_this.node);
        }, .1);
      },
      toggleEvent: function toggleEvent() {
        audioMgr.playEffect(this.clickAudio);
      },
      comfirmSet: function comfirmSet() {
        cc.log("\u786e\u8ba4\u5e26\u5165", dataLogic.carryChipNumData[dataLogic.curRoomKey - 1]);
        dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] = this.userCarryChipNum;
        cc.sys.localStorage.setItem("game_carryChipNumData", JSON.stringify(dataLogic.carryChipNumData));
        this.autoCarryBtn.isChecked ? dataLogic.autoFreshChipNum = 1 : dataLogic.autoFreshChipNum = 0;
        cc.sys.localStorage.setItem("game_autoFreshChipNum", dataLogic.autoFreshChipNum);
        this.closePanel();
        dzDataLogic.needBringCoin = 1;
        "dzpkHall" == dataLogic.getCurSceneName() ? dzDataLogic.needShowNotice = 1 : dzDataLogic.needShowNotice = 2;
        dzDataLogic.showNoticeType = 1;
        this.scheduleOnce(function() {
          if ("dzpkHall" == dataLogic.getCurSceneName()) {
            var gameSceneName = dataLogic.getGameSceneNameByGameId(dataLogic.curGameId);
            clientEvent.dispatchEvent("loadScene", gameSceneName);
          } else clientEvent.dispatchEvent("showNotice");
        }, .1);
      },
      loadResource: function loadResource(sceneName) {
        var _this2 = this;
        if (dataLogic.isToastLoad) {
          cc.log("\u663e\u793a\u5e26\u5165\u9762\u677f\u5f39\u7a97");
          this.panelShow();
        } else {
          var arg = {
            type: constant.ToastType.Loading
          };
          cc.log("this.toastLoadingPf", this.toastLoadingPf);
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var preloadRes = constant.GameRes[sceneName];
          var loadDone = function loadDone() {
            kf.killObj(load);
            _this2.panelShow();
            dataLogic.isToastLoad = true;
          };
          var loadTimeout = function loadTimeout() {
            kf.killObj(load);
            kf.killObj(_this2.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      panelShow: function panelShow() {
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(0, 0), cc.scaleTo(.2, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.mask.active = true;
        this.panelMain.runAction(seq);
        this.initPanelData();
      },
      reuse: function reuse() {
        this.loadResource(constant.ToastName.InfoToast);
      },
      unuse: function unuse() {},
      initPanelData: function initPanelData() {
        var storage_carryChipNumData = cc.sys.localStorage.getItem("game_carryChipNumData") ? JSON.parse(cc.sys.localStorage.getItem("game_carryChipNumData")) : dataLogic.carryChipNumData;
        dataLogic.autoFreshChipNum = cc.sys.localStorage.getItem("game_autoFreshChipNum") ? +cc.sys.localStorage.getItem("game_autoFreshChipNum") : dataLogic.autoFreshChipNum;
        this.chipCarryRange = dataLogic.carryChipNumRange[dataLogic.curRoomKey - 1];
        cc.log(dataLogic.carryChipNumRange, "carryChipNumRange");
        cc.log(dataLogic.carryChipNumData, "carryChipNumData");
        this.maxCarryChipNumVal = dataLogic.userBalance > this.chipCarryRange[1] ? Math.floor(this.chipCarryRange[1]) : Math.floor(dataLogic.userBalance);
        this.minCarryChipNumVal = this.chipCarryRange[0];
        this.chipCarryRange = [ this.minCarryChipNumVal, this.maxCarryChipNumVal ];
        this.minCarryChipNum.string = this.minCarryChipNumVal;
        this.maxCarryChipNum.string = this.maxCarryChipNumVal;
        if (storage_carryChipNumData[dataLogic.curRoomKey - 1]) {
          var storage_chipNum = storage_carryChipNumData[dataLogic.curRoomKey - 1];
          storage_chipNum > this.maxCarryChipNumVal ? dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] = this.maxCarryChipNumVal > dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] ? dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] : this.maxCarryChipNumVal : storage_chipNum < this.minCarryChipNumVal ? dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] = this.minCarryChipNumVal : dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] = storage_chipNum;
        } else dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] = this.maxCarryChipNumVal > dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] ? dataLogic.carryChipNumData[dataLogic.curRoomKey - 1] : this.maxCarryChipNumVal;
        this.userCarryChipNum = dataLogic.carryChipNumData[dataLogic.curRoomKey - 1];
        this.sliderRange = this.chipCarryRange[1] - this.chipCarryRange[0];
        this.sliderTip.getChildByName("carryChipNum").getComponent(cc.Label).string = this.userCarryChipNum;
        var ratio = void 0;
        if (this.sliderRange) {
          ratio = (this.userCarryChipNum - this.minCarryChipNumVal) / this.sliderRange;
          this.slider.enabled = true;
        } else {
          ratio = 0;
          this.slider.enabled = false;
        }
        this.slider.progress = ratio;
        this.sliderTip.x = this.sliderHandle.position.x;
        this.sliderBackground.width = this.slider.node.width * ratio;
        this.userBalance.string = "\u8d26\u6237\u4f59\u989d\uff1a" + dataLogic.userBalance;
        dataLogic.autoFreshChipNum ? this.autoCarryBtn.isChecked = true : this.autoCarryBtn.isChecked = false;
      },
      onLoad: function onLoad() {
        this.mask.width = cc.winSize.width;
        this.mask.height = cc.winSize.height;
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {} ],
  phoneLogin: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "9c5fdwyhgBIw5pfVnZLr40e", "phoneLogin");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loginSucceedCb = null;
    var _registerSucceedCb = null;
    var _phoneLoginSucceedCb = null;
    var _phoneRegisterSucceedCb = null;
    var _spreadCode = null;
    var _timerId = null;
    var _normalColor = new cc.Color(209, 132, 86);
    var _disableColor = new cc.Color(160, 153, 137);
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebPhoneNum: cc.EditBox,
        ebCheckCode: cc.EditBox,
        delPhoneNumIcon: cc.Node,
        delCheckCodeIcon: cc.Node,
        txtGetCheckCode: cc.Label,
        sfGrayBtn: cc.SpriteFrame,
        sfYellowBtn: cc.SpriteFrame,
        btSendSMSCheckCode: cc.Button
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "CheckShowCodeCb", this.CheckShowCodeCb.bind(this) ], [ "reqSendSMSCheckCodeCb", this.reqSendSMSCheckCodeCb.bind(this) ], [ "loginCb", this.loginCb.bind(this) ], [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        _loginSucceedCb = initArg.loginSucceedCb;
        _registerSucceedCb = initArg.registerSucceedCb;
        _phoneLoginSucceedCb = initArg.phoneLoginSucceedCb;
        _phoneRegisterSucceedCb = initArg.phoneRegisterSucceedCb;
        _spreadCode = initArg.spreadCode;
        this.txtSendCheckCode = this.btSendSMSCheckCode.node.getChildByName("txt").getComponent(cc.Label);
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "reqSendCheckCode":
          var result = dataLogic.checkFormat(this.ebPhoneNum.string, {
            PhoneNum: true,
            name: "\u624b\u673a\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          this.reqDateAndShowLoadView({
            Action: "GetImageCode",
            CheckShowCode: 2,
            isJack: 1
          }, "CheckShowCodeCb", "phoneLogin", true);
          break;

         case "login":
          this.login();
          break;

         case "showAccountLogin":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/login",
            js: "loginView",
            initArg: {
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb,
              spreadCode: _spreadCode
            }
          });
          break;

         case "delPhoneNum":
          this.ebPhoneNum.string = "";
          this.delPhoneNumIcon.active = false;
          break;

         case "delCheckCode":
          this.ebCheckCode.string = "";
          this.delCheckCodeIcon.active = false;
          break;

         case "forgetPassword":
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/resetPassword",
            js: "resetPassword",
            initArg: {
              doneCb: this.showLayerTip.bind(this),
              isResetLoginPassword: true
            }
          });
        }
      },
      login: function login() {
        var result = dataLogic.checkFormat(this.ebPhoneNum.string, {
          PhoneNum: true,
          name: "\u624b\u673a\u53f7"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        result = dataLogic.checkFormat(this.ebCheckCode.string, {
          PhoneCheckCode: true,
          name: "\u9a8c\u8bc1\u7801"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        this.reqDateAndShowLoadView({
          Action: "Login",
          PhoneNum: this.ebPhoneNum.string,
          VerifyCode: this.ebCheckCode.string
        }, "loginCb", null, true);
      },
      loginCb: function loginCb(msg) {
        var _this = this;
        cc.log("\u767b\u9646\u56de\u8c03");
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          clearInterval(_timerId);
          _timerId = null;
          this.showLayerTip("\u767b\u5f55\u6210\u529f", true, false);
          this.scheduleOnce(function() {
            _this.toastClose();
            _phoneLoginSucceedCb();
          }, .5);
        } else 2 == msg.Code && this.showLayerTip(msg.StrCode);
      },
      CheckShowCodeCb: function CheckShowCodeCb(msg, jsName) {
        if ("phoneLogin" != jsName) return;
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        if (1 == msg.BackData) this.reqCheckCode(false, "phoneLogin"); else {
          constant.PostSendMobileCode.type = constant.SendCheckCodeUesType.Login;
          constant.PostSendMobileCode.mobileNum = this.ebPhoneNum.string;
          this.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", null, true);
        }
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this2 = this;
        if ("phoneLogin" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "phoneLogin") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          delete constant.PostSendMobileCode.imgCode;
          constant.PostSendMobileCode.type = constant.SendCheckCodeUesType.Login;
          constant.PostSendMobileCode.mobileNum = _this2.ebPhoneNum.string;
          constant.PostSendMobileCode.Ticket = ticket;
          _this2.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", null, true);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              delete constant.PostSendMobileCode.Ticket;
              constant.PostSendMobileCode.type = constant.SendCheckCodeUesType.Login;
              constant.PostSendMobileCode.mobileNum = _this2.ebPhoneNum.string;
              constant.PostSendMobileCode.imgCode = checkCode;
              _this2.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", callbacks, true);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      reqSendSMSCheckCodeCb: function reqSendSMSCheckCodeCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.restrictAgainReqSendCheckCode();
          callbacks && callbacks.closeCheckCodeDialog();
        } else msg.Code == constant.HttpCode.CheckCodeError ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      restrictAgainReqSendCheckCode: function restrictAgainReqSendCheckCode() {
        var _this3 = this;
        this.btSendSMSCheckCode.interactable = false;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfGrayBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _disableColor;
        this.txtSendCheckCode.string = "60s";
        var time = 60;
        null == _timerId && (_timerId = setInterval(function() {
          time--;
          if (0 == time) {
            clearInterval(_timerId);
            _timerId = null;
            _this3.openReqSendCheckCode();
            return;
          }
          _this3.txtSendCheckCode.string = time + "s";
        }, 1e3));
      },
      openReqSendCheckCode: function openReqSendCheckCode() {
        this.btSendSMSCheckCode.interactable = true;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfYellowBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _normalColor;
        this.txtSendCheckCode.string = "\u83b7\u53d6\u9a8c\u8bc1\u7801";
      },
      closeBeforeHandle: function closeBeforeHandle() {
        clearInterval(_timerId);
        _timerId = null;
      },
      editChangeEvent: function editChangeEvent(txt, editbox, name) {
        switch (name) {
         case "phoneNum":
          this.delPhoneNumIcon.active = "" != txt;
          break;

         case "checkCode":
          this.delCheckCodeIcon.active = "" != txt;
        }
      },
      editEvent: function editEvent(txt, editbox, data) {
        editbox.isFocused() || (editbox.string = "");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  phoneRegister: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "29d2dUzmBdN5oeSoGVnmu1c", "phoneRegister");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loginSucceedCb = null;
    var _registerSucceedCb = null;
    var _phoneLoginSucceedCb = null;
    var _phoneRegisterSucceedCb = null;
    var _timerId = null;
    var _spreadCode = null;
    var _normalColor = new cc.Color(209, 132, 86);
    var _disableColor = new cc.Color(160, 153, 137);
    var _postSendMobileCode = null;
    var _Register = {
      Action: "Register",
      InvitationCode: null,
      PhoneNum: null,
      VerifyCode: null
    };
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebInvitationCode: cc.EditBox,
        ebAccount: cc.EditBox,
        ebCheckCode: cc.EditBox,
        pfDialogCommonLayer: cc.Prefab,
        invitationCode: cc.Node,
        bottom: cc.Node,
        delPhoneNumIcon: cc.Node,
        delInvitationCodeIcon: cc.Node,
        delCheckCodeIcon: cc.Node,
        sfGrayBtn: cc.SpriteFrame,
        sfYellowBtn: cc.SpriteFrame,
        btSendSMSCheckCode: cc.Button
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "CheckShowCodeCb", this.CheckShowCodeCb.bind(this) ], [ "reqSendSMSCheckCodeCb", this.reqSendSMSCheckCodeCb.bind(this) ], [ "registerCb", this.registerCb.bind(this) ], [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _postSendMobileCode = kf.clone(constant.PostSendMobileCode);
        this.toastShow();
        this.registerEvent();
        _loginSucceedCb = initArg.loginSucceedCb;
        _registerSucceedCb = initArg.registerSucceedCb;
        _phoneLoginSucceedCb = initArg.phoneLoginSucceedCb;
        _phoneRegisterSucceedCb = initArg.phoneRegisterSucceedCb;
        this.txtSendCheckCode = this.btSendSMSCheckCode.node.getChildByName("txt").getComponent(cc.Label);
        _postSendMobileCode.type = constant.SendCheckCodeUesType.Register;
        _spreadCode = initArg.spreadCode;
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "reqSendCheckCode":
          var result = "";
          result = dataLogic.checkFormat(this.ebInvitationCode.string, {
            canNull: 2 == dataLogic.inviteCodeType,
            InvitationCode: true,
            name: "\u63a8\u5e7f\u7801"
          });
          if (0 != result) {
            this.showLayerTip(result);
            return;
          }
          _Register.InvitationCode = this.ebInvitationCode.string;
          result = dataLogic.checkFormat(this.ebAccount.string, {
            PhoneNum: true,
            name: "\u624b\u673a\u53f7"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          _postSendMobileCode.mobileNum = this.ebAccount.string;
          this.reqDateAndShowLoadView({
            Action: "GetImageCode",
            CheckShowCode: 2,
            isJack: 1
          }, "CheckShowCodeCb", "phoneRegister", true);
          break;

         case "delPhoneNum":
          this.ebAccount.string = "";
          this.delPhoneNumIcon.active = false;
          break;

         case "delInvitationCode":
          this.ebInvitationCode.string = "";
          this.delInvitationCodeIcon.active = false;
          break;

         case "delCheckCode":
          this.ebCheckCode.string = "";
          this.delCheckCodeIcon.active = false;
          break;

         case "register":
          this.register();
          break;

         case "showLogin":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/login",
            js: "loginView",
            initArg: {
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb,
              spreadCode: _spreadCode
            }
          });
          break;

         case "showAccountRegister":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/register",
            js: "register",
            initArg: {
              spreadCode: _spreadCode,
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb
            }
          });
        }
      },
      CheckShowCodeCb: function CheckShowCodeCb(msg, jsName) {
        if ("phoneRegister" != jsName) return;
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        1 == msg.BackData ? this.reqCheckCode(false, "phoneRegister") : this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", true, true);
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this = this;
        if ("phoneRegister" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "phoneRegister") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          delete _postSendMobileCode.imgCode;
          _postSendMobileCode.Ticket = ticket;
          _this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", null, true);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              delete _postSendMobileCode.Ticket;
              _postSendMobileCode.imgCode = checkCode;
              _this.reqDateAndShowLoadView(_postSendMobileCode, "reqSendSMSCheckCodeCb", callbacks, true);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      reqSendSMSCheckCodeCb: function reqSendSMSCheckCodeCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.restrictAgainReqSendCheckCode();
          callbacks && callbacks.closeCheckCodeDialog();
        } else msg.Code == constant.HttpCode.CheckCodeError ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      restrictAgainReqSendCheckCode: function restrictAgainReqSendCheckCode() {
        var _this2 = this;
        this.btSendSMSCheckCode.interactable = false;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfGrayBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _disableColor;
        this.txtSendCheckCode.string = "60s";
        var time = 60;
        null == _timerId && (_timerId = setInterval(function() {
          time--;
          if (0 == time) {
            clearInterval(_timerId);
            _timerId = null;
            _this2.openReqSendCheckCode();
            return;
          }
          _this2.txtSendCheckCode.string = time + "s";
        }, 1e3));
      },
      openReqSendCheckCode: function openReqSendCheckCode() {
        this.btSendSMSCheckCode.interactable = true;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfYellowBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _normalColor;
        this.txtSendCheckCode.string = "\u83b7\u53d6\u9a8c\u8bc1\u7801";
      },
      register: function register() {
        var result = "";
        result = dataLogic.checkFormat(this.ebInvitationCode.string, {
          canNull: 2 == dataLogic.inviteCodeType,
          InvitationCode: true,
          name: "\u63a8\u5e7f\u7801"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.InvitationCode = this.ebInvitationCode.string;
        result = dataLogic.checkFormat(this.ebAccount.string, {
          UserName: true,
          name: "\u624b\u673a\u53f7"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.PhoneNum = this.ebAccount.string;
        result = dataLogic.checkFormat(this.ebCheckCode.string, {
          PhoneCheckCode: true,
          name: "\u9a8c\u8bc1\u7801"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.VerifyCode = this.ebCheckCode.string;
        cc.log("window._spCode", window._spCode);
        window._spCode ? _Register.InvitationCode = window._spCode || "" : cc.sys.isNative || (_Register.InvitationCode = kf.getUrlArg("spreadCode") || "");
        this.reqDateAndShowLoadView(_Register, "registerCb", null, true);
      },
      registerCb: function registerCb(msg) {
        var _this3 = this;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          clearInterval(_timerId);
          _timerId = null;
          this.scheduleOnce(function() {
            _this3.toastClose();
            _phoneRegisterSucceedCb();
          }, .5);
        } else if (2 == msg.Code) {
          this.ebCheckCode.string = "";
          this.showLayerTip(msg.StrCode);
        }
      },
      editEvent: function editEvent(txt, editbox, name) {
        if (!editbox.isFocused()) {
          editbox.string = "";
          txt = "";
        }
        switch (name) {
         case "invitationCode":
          this.delInvitationCodeIcon.active = "" != txt;
          break;

         case "phoneNum":
          this.delPhoneNumIcon.active = "" != txt;
          break;

         case "checkCode":
          this.delCheckCodeIcon.active = "" != txt;
        }
      },
      closeBeforeHandle: function closeBeforeHandle() {
        clearInterval(_timerId);
        _timerId = null;
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  playerCard: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4cb19bkRGVMcZcySeWy0oDx", "playerCard");
    "use strict";
    var achievementPfbName = [ "zdjs", "nqct", "wsds", "wzry", "sjbz", "llds", "bzbn", "cdqc", "xyzc", "ycwg", "fkdg", "yzqj", "yybf", "jbtm", "dfzj" ];
    cc.Class({
      extends: cc.Component,
      properties: {
        avatar: cc.Sprite,
        sexIcon: cc.Sprite,
        playerName: cc.Label,
        userGrade: cc.Label,
        address: cc.Label,
        balanceMoney: cc.Label,
        bonusMoney: cc.Label,
        playRoundNum: cc.Label,
        sexIconArr: [ cc.SpriteFrame ],
        noneAchievement: cc.SpriteFrame,
        achievement: cc.Node,
        achievementPfb: [ cc.Prefab ],
        unlockNum: cc.Label
      },
      init: function init(playerInfo) {
        var _this = this;
        var self = this;
        resMgr.loadSingleRes("baoWang" + playerInfo.headUrl.replace(".jpg", ""), function(res) {
          self.avatar.spriteFrame = res;
        }, cc.SpriteFrame);
        this.achievement.destroyAllChildren();
        this.playerName.getComponent(cc.Label).string = playerInfo.nickName;
        this.userGrade.getComponent(cc.Label).string = "VIP" + playerInfo.vip;
        this.address.getComponent(cc.Label).string = playerInfo.location || "\u6682\u65e0";
        this.balanceMoney.getComponent(cc.Label).string = +playerInfo < 0 ? 0 : (+playerInfo.balance).toFixed(2);
        this.bonusMoney.getComponent(cc.Label).string = (+playerInfo.winMoney).toFixed(2) > 0 ? playerInfo.winMoney.toFixed(2) : 0;
        this.playRoundNum.getComponent(cc.Label).string = playerInfo.gameTimes;
        this.sexIcon.spriteFrame = this.sexIconArr[playerInfo.sex - 1];
        if (playerInfo.achievementName) {
          this.achievement.getComponent(cc.Sprite).spriteFrame = null;
          var self = this;
          var desTexture = "baoWang/playerCard/icon_" + achievementPfbName[playerInfo.achievementId - 1];
          var desObj = [ {
            path: desTexture,
            resType: "dir"
          } ];
          resMgr.loadRes(desObj, function() {
            var pfbNode = new cc.instantiate(_this.achievementPfb[playerInfo.achievementId - 1]);
            pfbNode.parent = self.achievement;
            self.achievement.scaleX = .63;
            self.achievement.scaleY = .63;
            self.achievement.opacity = 255;
            _this.achievement.y = 85;
          });
          this.unlockNum.string = playerInfo.achievementNum;
        } else {
          this.unlockNum.string = 0;
          this.achievement.scale = .82;
          this.achievement.y = 87;
          this.achievement.getComponent(cc.Sprite).spriteFrame = this.noneAchievement;
        }
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {} ],
  rankingListItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "74bf7ed8VtGf4YMaKtYalxT", "rankingListItem");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        ranking: cc.Node,
        avatar: cc.Node,
        userName: cc.Label,
        winMoney: cc.Label,
        bg: cc.Node,
        itemBgArr: [ cc.SpriteFrame ],
        rankingNumber: cc.SpriteAtlas,
        crownSprite: [ cc.SpriteFrame ],
        borderSprite: [ cc.SpriteFrame ],
        crown: cc.Sprite,
        avatarBorder: cc.Sprite,
        goldenIconArr: [ cc.SpriteFrame ],
        goldIcon: cc.Sprite
      },
      start: function start() {},
      initData: function initData(data, index) {
        this.userName.string = data.NickName;
        this.winMoney.string = data.Bonus;
        var avatar = this.avatar.getComponent(cc.Sprite);
        this.ranking.getComponent(cc.Sprite).spriteFrame = kf.getSFByImgName(this.rankingNumber, index + 1);
        var self = this;
        resMgr.loadSingleRes("baoWang" + data.UserPhoto.replace(".jpg", ""), function(res) {
          avatar.spriteFrame = res;
        }, cc.SpriteFrame);
        if (data.UserId === dataLogic.userId) {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.itemBgArr[1];
          this.avatarBorder.spriteFrame = this.borderSprite[1];
          this.goldIcon.spriteFrame = this.goldenIconArr[1];
        } else {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.itemBgArr[0];
          this.avatarBorder.spriteFrame = this.borderSprite[0];
          this.goldIcon.spriteFrame = this.goldenIconArr[0];
        }
        if (index < 3) {
          this.crown.spriteFrame = this.crownSprite[index];
          this.crown.node.active = true;
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  rankingList: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "f097c2Vt2NNg7IBPX3cfH7X", "rankingList");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        rankingItemPf: cc.Prefab,
        scrollViewContent: cc.Node,
        nullData: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getRankingListCb", this.getRankingListCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.registerEvent();
        this.toastShow();
        var sendData = {
          action: "YesterdayRank"
        };
        this.nullData.active = false;
        this.reqDateAndShowLoadView(sendData, "getRankingListCb");
      },
      getRankingListCb: function getRankingListCb(data) {
        this.hideLoadView();
        if (data.BackData.length) {
          for (var i = 0; i < data.BackData.length; i++) {
            var rankListItem_node = cc.instantiate(this.rankingItemPf);
            rankListItem_node.parent = this.scrollViewContent;
            rankListItem_node.getComponent("rankingListItem").initData(data.BackData[i], i);
            rankListItem_node.y = -(rankListItem_node.height / 2 + 11 + (rankListItem_node.height + 2) * i);
          }
          this.scrollViewContent.height = (this.scrollViewContent.children[0].height + 3) * data.BackData.length;
        } else this.nullData.active = true;
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  rechargeRecord: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "a05c1JcF09B24j0lHKk+7zY", "rechargeRecord");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {},
      start: function start() {}
    });
    cc._RF.pop();
  }, {} ],
  recordItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "49f68byDSxBALR2IyTOhK/v", "recordItem");
    "use strict";
    var gameType = [ "Base game", "Bonus game", "Free game", "Jackpot" ];
    cc.Class({
      extends: cc.Component,
      properties: {
        bg: cc.Node,
        idNum: cc.Label,
        number: cc.Label,
        room: cc.Label,
        profit: cc.Label,
        dateTime: cc.Label
      },
      onLoad: function onLoad() {},
      init: function init(data, i) {
        this.idNum.string = i + 1;
        this.number.string = data.deskNo;
        var gameName = data.deskNo.split("-")[0];
        this.room.string = "WZRY" == gameName ? gameType[data.moduleId - 1] : data.gameRoomName;
        this.dateTime.string = data.createTime;
        if (0 == data.type) {
          this.profit.string = "-" + data.amount.toFixed(2);
          this.profit.node.color = new cc.color(69, 166, 42, 255);
        } else {
          this.profit.string = "+" + data.amount.toFixed(2);
          this.profit.node.color = new cc.color(198, 91, 13, 255);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  record: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "88b92E7sSZLjq84Evqfq70n", "record");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loadProcessCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        closeBtn: cc.Button,
        bg: cc.Node,
        recordMain: cc.Node,
        nullRecord: cc.Node,
        itemPf: cc.Prefab,
        view: cc.Node,
        content: cc.Node,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        loadIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "syncRecordCb", this.syncRecordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      unregisterEvent: function unregisterEvent() {
        if (null == this.registerHandler) return;
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.bg.width = cc.winSize.width;
        this.bg.height = cc.winSize.height;
      },
      loadResource: function loadResource(sceneName) {
        var _this = this;
        if (dataLogic.isToastLoad) this.toastShow(); else {
          var arg = {
            type: constant.ToastType.Loading
          };
          var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
          var txt = load.getChildByName("txt").getComponent(cc.Label);
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
          var n = 0;
          _loadProcessCb = function _loadProcessCb() {
            n++;
            txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
          };
          this.schedule(_loadProcessCb, .1, 98);
          var preloadRes = constant.GameRes[sceneName];
          var loadDone = function loadDone() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            _this.toastShow();
            dataLogic.isToastLoad = true;
          };
          var loadTimeout = function loadTimeout() {
            _this.unschedule(_loadProcessCb);
            kf.killObj(load);
            kf.killObj(_this.node);
            clientEvent.dispatchEvent("showLoadTimeoutToast");
          };
          resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
        }
      },
      toastShow: function toastShow() {
        var _this2 = this;
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(.08, 1.1, 1.1), cc.scaleTo(.03, 1, 1), cc.callFunc(function() {
          var repeatForever = cc.repeatForever(cc.rotateBy(1, 360));
          _this2.loadIcon.active = true;
          _this2.loadIcon.runAction(repeatForever);
          var reqExtendArg = {
            timeoutRefresh: false
          };
          http.post({
            action: "GetUserFlowList",
            gameTypeId: _this2.gameTypeid,
            reqExtendArg: reqExtendArg
          }, "syncRecordCb", {
            timeoutRefresh: false
          });
        }));
        this.recordMain.runAction(seq);
        this.bg.active = true;
      },
      unuse: function unuse() {
        this.unregisterEvent();
      },
      reuse: function reuse() {
        this.registerEvent();
        this.content.y = this.view.height / 2;
        this.initCount = 10;
        this.initRecordItem(this.initCount);
        this.loadResource(constant.ToastName.InfoToast);
      },
      btnEvent: function btnEvent(event, key) {
        switch (key) {
         case "closeBtn":
          audioMgr.playEffect(this.clickAudio);
          this.recordMainClose();
        }
      },
      recordMainShow: function recordMainShow(gameTypeid) {
        this.gameTypeid = gameTypeid;
      },
      syncRecordCb: function syncRecordCb(msg) {
        cc.log("\u540c\u6b65\u6e38\u620f\u8bb0\u5f55");
        this.loadIcon.stopAllActions();
        this.loadIcon.active = false;
        1 == msg.Code ? this.showRecordItem(msg.Data) : kf.killObj(this.node);
      },
      recordMainClose: function recordMainClose() {
        var _this3 = this;
        this.nullRecord.opacity = 0;
        var seq = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0), cc.callFunc(function() {
          kf.killObj(_this3.node);
        }));
        this.recordMain.runAction(seq);
        this.bg.active = false;
      },
      initRecordItem: function initRecordItem(initCount) {
        this.content.removeAllChildren();
        for (var i = 0; i < initCount; i++) {
          var item = cc.instantiate(this.itemPf);
          item.parent = this.content;
          item.name = "item" + i;
          item.opacity = 0;
          item.y = -(item.height / 2 + item.height * i);
          i % 2 === 1 && (item.getChildByName("bg").opacity = 0);
        }
      },
      showRecordItem: function showRecordItem(data) {
        var item = void 0;
        for (var i = data.length; i < this.initCount; i++) {
          item = this.content.getChildByName("item" + i);
          item.opacity = 0;
        }
        if (null == data || 0 == data.length) {
          this.nullRecord.opacity = 255;
          return;
        }
        data.length > this.initCount && (data.length = this.initCount);
        if (0 != data.length) {
          this.nullRecord.opacity = 0;
          this.content.height = data.length * this.content.getChildByName("item0").height;
        }
        for (var _i = 0; _i < data.length; _i++) {
          item = this.content.getChildByName("item" + _i);
          item.opacity = 255;
          item.getComponent("recordItem").init(data[_i], _i);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  registerCashGift: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "75084bHcbFHW4anabVxG8c/", "registerCashGift");
    "use strict";
    var _audioId = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        txtCashGift: cc.Label,
        audioBtn: {
          default: null,
          type: cc.AudioClip
        },
        audioEf: {
          default: null,
          type: cc.AudioClip
        },
        font: cc.Font
      },
      init: function init(cashGiftType, money) {
        var _this = this;
        switch (cashGiftType) {
         case "register":
          this.txtCashGift.string = "\u6ce8\u518c\u793c\u91d1";
          break;

         case "signIn":
          this.txtCashGift.string = "\u7b7e\u5230\u793c\u91d1";
        }
        _audioId = audioMgr.playEffect(this.audioEf);
        var txt = this.node.getChildByName("txt").getComponent(cc.Label);
        txt.font = this.font;
        txt.string = "x" + money;
        this.scheduleOnce(function() {
          _this.node.getChildByName("glod").x = -(txt.node.width / 2 + 2);
        }, .1);
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.audioBtn);
        audioMgr.stopEffect(_audioId);
        var resList = constant.RegisterCashGiftRes;
        for (var i = 0; i < resList.length; i++) if ("dir" == resList[i].resType) cc.loader.releaseResDir(resList[i].path); else {
          "" !== resList[i].resType && resList[i].resType !== cc.Prefab && cc.loader.releaseRes(resList[i].path, resList[i].resType);
          cc.loader.release(resList[i].path);
        }
        this.node.destroy();
      }
    });
    cc._RF.pop();
  }, {} ],
  register: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3d1057OmB5IKYhfp7jUIsxH", "register");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loginSucceedCb = null;
    var _registerSucceedCb = null;
    var _phoneLoginSucceedCb = null;
    var _phoneRegisterSucceedCb = null;
    var _spreadCode = null;
    var _hidePassword = true;
    var _Register = {
      Action: "Register",
      InvitationCode: null,
      UserName: null,
      Password: null,
      ImgCode: null
    };
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        ebInvitationCode: cc.EditBox,
        ebAccount: cc.EditBox,
        ebPassword: cc.EditBox,
        ebCheckCode: cc.EditBox,
        spCheckCode: cc.Sprite,
        spShowPassword: cc.Sprite,
        sfShowPasswordIcon: cc.SpriteFrame,
        sfHidePasswordIcon: cc.SpriteFrame,
        pfDialogCommonLayer: cc.Prefab,
        arrow: cc.Node,
        invitationCode: cc.Node,
        bottom: cc.Node,
        delAccountIcon: cc.Node,
        delPasswordIcon: cc.Node,
        delInvitationCodeIcon: cc.Node,
        delCheckCodeIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ], [ "registerCb", this.registerCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        var _this = this;
        this.toastShow();
        this.registerEvent();
        _loginSucceedCb = initArg.loginSucceedCb;
        _registerSucceedCb = initArg.registerSucceedCb;
        _phoneLoginSucceedCb = initArg.phoneLoginSucceedCb;
        _phoneRegisterSucceedCb = initArg.phoneRegisterSucceedCb;
        _spreadCode = initArg.spreadCode;
        this.spCheckCode.node.on(cc.Node.EventType.TOUCH_END, function() {
          _this.btnEvent("", "refreshCheckCode");
        });
        if (initArg.spreadCode && "null" != initArg.spreadCode) {
          this.ebInvitationCode.string = initArg.spreadCode;
          this.invitationCode.active = false;
          this.bottom.y = 38;
          this.setDialogSize(this.mainNodeWidth, 476);
          resMgr.loadSingleRes("prefab/baoWang/login", function() {
            dataLogic.setLoadedPrefab("prefab/baoWang/login");
          }, cc.Prefab);
        } else {
          this.invitationCode.active = true;
          this.bottom.y = 0;
          this.setDialogSize(this.mainNodeWidth, 553);
          2 == dataLogic.inviteCodeType && (this.ebInvitationCode.placeholder += "\uff08\u9009\u586b\uff09");
        }
      },
      start: function start() {
        cc.log("==========start");
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "setPasswordView":
          this.ebPassword.InputFlag == cc.EditBox.InputFlag.PASSWORD ? this.ebPassword.InputFlag = cc.EditBox.InputFlag.DEFAULT : this.ebPassword.InputFlag = cc.EditBox.InputFlag.PASSWORD;
          break;

         case "delAccount":
          this.ebAccount.string = "";
          this.delAccountIcon.active = false;
          break;

         case "delPassword":
          this.ebPassword.string = "";
          this.delPasswordIcon.active = false;
          break;

         case "delCheckCode":
          this.ebCheckCode.string = "";
          this.delCheckCodeIcon.active = false;
          break;

         case "refreshCheckCode":
          this.reqCheckCode(false, "register");
          break;

         case "delInvitationCode":
          this.ebInvitationCode.string = "";
          this.delInvitationCodeIcon.active = false;
          break;

         case "register":
          this.register();
          break;

         case "showLogin":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/login",
            js: "loginView",
            initArg: {
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              spreadCode: _spreadCode,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb
            }
          });
          break;

         case "showPhoneRegister":
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/phoneRegister",
            js: "phoneRegister",
            initArg: {
              registerSucceedCb: _registerSucceedCb,
              loginSucceedCb: _loginSucceedCb,
              phoneLoginSucceedCb: _phoneLoginSucceedCb,
              spreadCode: _spreadCode,
              phoneRegisterSucceedCb: _phoneRegisterSucceedCb
            }
          });
          break;

         case "alterPasswordView":
          if (this.ebPassword.inputFlag == cc.EditBox.InputFlag.PASSWORD) {
            _hidePassword = false;
            this.ebPassword.inputFlag = cc.EditBox.InputFlag.DEFAULT;
            this.spShowPassword.spriteFrame = this.sfShowPasswordIcon;
          } else {
            _hidePassword = true;
            this.ebPassword.inputFlag = cc.EditBox.InputFlag.PASSWORD;
            this.spShowPassword.spriteFrame = this.sfHidePasswordIcon;
          }
        }
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this2 = this;
        if ("register" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "register") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          _Register.Ticket = ticket;
          delete _Register.ImgCode;
          _this2.reqData(_Register, "registerCb", null, true);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: this.reqRegister.bind(this, _Register)
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      register: function register() {
        var result = "";
        result = dataLogic.checkFormat(this.ebInvitationCode.string, {
          canNull: 2 == dataLogic.inviteCodeType,
          InvitationCode: true,
          name: "\u63a8\u5e7f\u7801"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.InvitationCode = this.ebInvitationCode.string;
        result = dataLogic.checkFormat(this.ebAccount.string, {
          UserName: true,
          name: "\u8d26\u53f7"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.UserName = this.ebAccount.string;
        result = dataLogic.checkFormat(this.ebPassword.string, {
          Password: true,
          name: "\u5bc6\u7801"
        });
        if (0 != result) {
          this.showLayerTip(result);
          return;
        }
        _Register.Password = this.ebPassword.string;
        this.reqCheckCode(false, "register");
      },
      reqRegister: function reqRegister(reqArg, checkCode, callbacks) {
        reqArg.ImgCode = checkCode;
        this.reqData(reqArg, "registerCb", callbacks);
      },
      registerCb: function registerCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          callbacks && callbacks.closeCheckCodeDialog();
          _registerSucceedCb();
        } else constant.HttpCode.CheckCodeError == msg.Code ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      editEvent: function editEvent(txt, editbox, name) {
        !editbox.isFocused();
        switch (name) {
         case "invitationCode":
          this.delInvitationCodeIcon.active = "" != txt;
          break;

         case "account":
          this.delAccountIcon.active = "" != txt;
          break;

         case "password":
          this.delPasswordIcon.active = "" != txt;
          break;

         case "checkCode":
          this.delCheckCodeIcon.active = "" != txt;
        }
      },
      editBeginEvent: function editBeginEvent(editbox) {
        cc.log("-----editBeginEvent----------", editbox.isFocused());
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  resMgr: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c8cf8NnfMtMyoCSy0cFRrP9", "resMgr");
    "use strict";
    window.resMgr = window.resMgr || {
      extends: cc.Component
    };
    resMgr.init = function() {
      this.bgTexture = null;
      this.tableTexture = null;
      this.gameNameTexture = null;
      this.resList = {};
    };
    resMgr.loadRes = function(resList, loadedCb, timeLimit, loadTimeoutCb, loadErrorCb, loadProcessCb) {
      var _this = this;
      cc.log("\u52a0\u8f7d\u8d44\u6e90", resList);
      var isTimeOut = false, timerId = void 0;
      var timeoutFun = function timeoutFun() {
        isTimeOut = true;
        loadTimeoutCb && loadTimeoutCb();
      };
      null != timeLimit && (timerId = setTimeout(timeoutFun, timeLimit));
      var num = 0, data = void 0, time = new Date().getTime();
      0 == resList.length && loadedCb && loadedCb();
      var loadDoneFun = function loadDoneFun(res, path) {
        switch (path) {
         case "cattle/seeThreeCattle/bg":
         case "cattle/seeFourCattle/bg":
         case "selectRoom/cattle/seeFourCattleHallBg":
         case "cattle/seeThreeCattle/hallBg":
         case "login/bg":
         case "BRCattle/bg":
         case "selectRoom/BRCattle/brnn_room":
         case "tenfoldBRCattle/BG":
         case "selectRoom/tenfoldBRCattle/hall":
          _this.bgTexture = res;
          break;

         case "selectRoom/cattle/seeThreeCattle":
         case "selectRoom/cattle/seeFourCattle":
         case "selectRoom/BRCattle/gameName":
         case "selectRoom/tenfoldBRCattle/gameName":
          _this.gameNameTexture = res;
          break;

         case "tenfoldBRCattle/tenfoldTable":
         case "BRCattle/table":
          _this.tableTexture = res;
        }
        num++;
        loadProcessCb && loadProcessCb(num / resList.length, res, path);
        if (num == resList.length && !isTimeOut) {
          clearTimeout(timerId);
          loadedCb && loadedCb();
        }
      };
      var completeCb = function completeCb(path, resType, err, assets) {
        if (err) {
          cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
          loadErrorCb && loadErrorCb();
          return;
        }
        if (isTimeOut) return;
        "dir" == resType || (this.resList[path] = assets);
        loadDoneFun(assets, path);
        time = new Date().getTime();
      };
      for (var i = 0; i < resList.length; i++) {
        data = resList[i];
        "dir" == data.resType ? cc.loader.loadResDir(data.path, completeCb.bind(this, resList[i].path, data.resType)) : cc.loader.loadRes(data.path, completeCb.bind(this, resList[i].path, data.resType));
      }
    };
    resMgr.loadSingleRes = function(path, loadedCb, resType, timeLimit, loadTimeoutCb, loadErrorCb) {
      var isTimeOut = false, timerId = void 0;
      var timeoutFun = function timeoutFun() {
        isTimeOut = true;
        loadTimeoutCb && loadTimeoutCb();
      };
      null != timeLimit && (timerId = setTimeout(timeoutFun, timeLimit));
      cc.loader.loadRes(path, resType, function(err, res) {
        if (err) {
          cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
          loadErrorCb && loadErrorCb();
          return;
        }
        if (isTimeOut) return;
        clearTimeout(timerId);
        loadedCb && loadedCb(res);
      });
    };
    resMgr.init();
    cc._RF.pop();
  }, {} ],
  resetPassword: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b84bbgR3b9F3ZFbfbQmF5sw", "resetPassword");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _doneCb = null;
    var _timerId = null;
    var _type = null;
    var _normalColor = new cc.Color(209, 132, 86);
    var _disableColor = new cc.Color(160, 153, 137);
    var _phoneNum = null;
    var _resetPassword = {
      Action: "ResetPassWord",
      VerifyCode: null
    };
    var _CheckUserExist = {
      Action: "CheckUserExist",
      UserName: null
    };
    var _isResetLoginPassword = null;
    var _isLogined = false;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtConfirm: cc.Label,
        txtPhoneNum: cc.Label,
        ebCheckCode: cc.EditBox,
        ebPassword: cc.EditBox,
        ebPhoneNum: cc.EditBox,
        spShowPassword: cc.Sprite,
        spPhoneNumBg: cc.Sprite,
        delPasswordIcon: cc.Node,
        sfGrayBtn: cc.SpriteFrame,
        sfYellowBtn: cc.SpriteFrame,
        sfShowPasswordIcon: cc.SpriteFrame,
        sfHidePasswordIcon: cc.SpriteFrame,
        sfAbleInputPhoneNum: cc.SpriteFrame,
        sfDisableInputPhoneNum: cc.SpriteFrame,
        btSendSMSCheckCode: cc.Button
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "checkUserExistCb", this.checkUserExistCb.bind(this) ], [ "CheckShowCodeCb", this.CheckShowCodeCb.bind(this) ], [ "reqSendSMSCheckCodeCb", this.reqSendSMSCheckCodeCb.bind(this) ], [ "setNewPasswordCb", this.setNewPasswordCb.bind(this) ], [ "reqCheckCodeCb", this.reqCheckCodeCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        _doneCb = initArg.doneCb;
        _phoneNum = initArg.phoneNum;
        if (initArg.phoneNum) {
          this.txtPhoneNum.string = initArg.phoneNum;
          this.ebPhoneNum.node.active = false;
          this.spPhoneNumBg.spriteFrame = this.sfDisableInputBg;
          _isLogined = true;
        } else {
          _isLogined = false;
          this.spPhoneNumBg.node.color = new cc.Color(255, 255, 255);
          this.spPhoneNumBg.spriteFrame = this.sfAbleInputPhoneNum;
        }
        this.txtSendCheckCode = this.btSendSMSCheckCode.node.getChildByName("txt").getComponent(cc.Label);
        _isResetLoginPassword = initArg.isResetLoginPassword;
        if (_isResetLoginPassword) {
          _resetPassword.Action = "ResetPassWord";
          _type = constant.SendCheckCodeUesType.ResetPassword;
          this.setTitleContent("\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801");
        } else {
          _type = constant.SendCheckCodeUesType.Check;
          this.setTitleContent("\u8bbe\u7f6e\u5b89\u5168\u5bc6\u7801");
          _resetPassword.Action = "SetSafePwd";
          this.ebPassword.placeholder = "6-16\u4f4d\u82f1\u6587\u548c\u6570\u5b57";
        }
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "reqSendCheckCode":
          if (_isLogined) this.reqDateAndShowLoadView({
            Action: "GetImageCode",
            CheckShowCode: 2,
            isJack: 1
          }, "CheckShowCodeCb", "resetPassword", true); else {
            var result = dataLogic.checkFormat(this.ebPhoneNum.string, {
              PhoneNum: true,
              name: "\u624b\u673a\u53f7"
            });
            if (result) {
              this.showLayerTip(result);
              return;
            }
            _CheckUserExist.UserName = this.ebPhoneNum.string;
            this.reqDateAndShowLoadView(_CheckUserExist, "checkUserExistCb", null, true);
          }
          break;

         case "alterPasswordView":
          if (this.ebPassword.inputFlag == cc.EditBox.InputFlag.PASSWORD) {
            this.ebPassword.inputFlag = cc.EditBox.InputFlag.DEFAULT;
            this.spShowPassword.spriteFrame = this.sfShowPasswordIcon;
          } else {
            this.ebPassword.inputFlag = cc.EditBox.InputFlag.PASSWORD;
            this.spShowPassword.spriteFrame = this.sfHidePasswordIcon;
          }
          break;

         case "delPassword":
          this.ebPassword.string = "";
          this.delPasswordIcon.active = false;
          break;

         case "confirm":
          this.resetPassword();
        }
      },
      checkUserExistCb: function checkUserExistCb(msg) {
        this.hideLoadView();
        msg.Code == constant.HttpCode.Succeed && this.reqDateAndShowLoadView({
          Action: "GetImageCode",
          CheckShowCode: 2,
          isJack: 1
        }, "CheckShowCodeCb", "resetPassword", true);
      },
      CheckShowCodeCb: function CheckShowCodeCb(msg, jsName) {
        if ("resetPassword" != jsName) return;
        this.hideLoadView();
        if (constant.HttpCode.Succeed != msg.Code) return;
        if (1 == msg.BackData) this.reqCheckCode(false, "resetPassword"); else {
          constant.PostSendMobileCode.type = _type;
          this.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", true, true);
        }
      },
      reqCheckCodeCb: function reqCheckCodeCb(msg, jsName) {
        var _this = this;
        if ("resetPassword" != jsName) return;
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) if (1 == msg.Data) "" == msg.BackData ? this.reqCheckCode(true, "resetPassword") : kf.createSlideCheckCode(msg.BackData, function(ticket) {
          delete constant.PostSendMobileCode.imgCode;
          constant.PostSendMobileCode.type = _type;
          constant.PostSendMobileCode.Ticket = ticket;
          _this.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", null, true);
        }, this); else {
          var initArg = {
            checkCode: msg.BackData,
            confirmCb: function confirmCb(checkCode, callbacks) {
              delete constant.PostSendMobileCode.Ticket;
              constant.PostSendMobileCode.type = _type;
              constant.PostSendMobileCode.imgCode = checkCode;
              _this.reqDateAndShowLoadView(constant.PostSendMobileCode, "reqSendSMSCheckCodeCb", callbacks, true);
            }
          };
          this.showImgCheckCodeDialog(initArg);
        }
      },
      reqSendSMSCheckCodeCb: function reqSendSMSCheckCodeCb(msg, callbacks) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.restrictAgainReqSendCheckCode();
          callbacks && callbacks.closeCheckCodeDialog();
        } else msg.Code == constant.HttpCode.CheckCodeError ? callbacks ? callbacks.reqCheckCode(msg.StrCode) : this.showLayerTip(msg.StrCode) : callbacks && callbacks.closeCheckCodeDialog();
      },
      restrictAgainReqSendCheckCode: function restrictAgainReqSendCheckCode() {
        var _this2 = this;
        this.btSendSMSCheckCode.interactable = false;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfGrayBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _disableColor;
        this.txtSendCheckCode.string = "60s";
        var time = 60;
        null == _timerId && (_timerId = setInterval(function() {
          time--;
          if (0 == time) {
            clearInterval(_timerId);
            _timerId = null;
            _this2.openReqSendCheckCode();
            return;
          }
          _this2.txtSendCheckCode.string = time + "s";
        }, 1e3));
      },
      openReqSendCheckCode: function openReqSendCheckCode() {
        this.btSendSMSCheckCode.interactable = true;
        this.btSendSMSCheckCode.node.getComponent(cc.Sprite).spriteFrame = this.sfYellowBtn;
        this.txtSendCheckCode.node.getComponent(cc.LabelOutline).color = _normalColor;
        this.txtSendCheckCode.string = "\u83b7\u53d6\u9a8c\u8bc1\u7801";
      },
      resetPassword: function resetPassword() {
        var result = "";
        result = dataLogic.checkFormat(this.ebCheckCode.string, {
          PhoneCheckCode: true,
          name: "\u9a8c\u8bc1\u7801"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        result = dataLogic.checkFormat(this.ebPassword.string, {
          Password: true,
          name: "\u65b0\u5bc6\u7801"
        });
        if (result) {
          this.showLayerTip(result);
          return;
        }
        _resetPassword.VerifyCode = this.ebCheckCode.string;
        _resetPassword.Password = this.ebPassword.string;
        this.reqDateAndShowLoadView(_resetPassword, "setNewPasswordCb", null, true);
      },
      setNewPasswordCb: function setNewPasswordCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          clearInterval(_timerId);
          _timerId = null;
          this.toastClose();
          _doneCb(msg.StrCode);
        } else if (2 == msg.Code) {
          this.ebCheckCode.string = "";
          this.showLayerTip(msg.StrCode);
        }
      },
      editEvent: function editEvent(txt, editbox, name) {
        if (!editbox.isFocused()) {
          editbox.string = "";
          txt = "";
        }
        name;
      },
      closeBeforeHandle: function closeBeforeHandle() {
        clearInterval(_timerId);
        _timerId = null;
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  sanGongConstant: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "9ba4a7iCChN6L8xQWUJGpL7", "sanGongConstant");
    "use strict";
    window.sanGongConstant = window.sanGongConstant || {};
    sanGongConstant.maxPlayerNum = 4;
    sanGongConstant.CardType = {
      sanGong: 10,
      daSanGong: 11,
      zhiZhun: 12
    };
    sanGongConstant.PostSyncNetInfo = {
      action: "GetConnect"
    };
    sanGongConstant.PostMatching = {
      action: "JoinRoom",
      roomId: "061"
    };
    var _action = "DoPlay";
    sanGongConstant.PostVillage = {
      action: _action,
      eventName: "village",
      villageNum: -1
    };
    sanGongConstant.PostBet = {
      action: _action,
      eventName: "bet",
      betNum: -1
    };
    sanGongConstant.OpenCards = {
      action: _action,
      eventName: "openCards"
    };
    cc._RF.pop();
  }, {} ],
  sanGongDataLogic: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "36af2SVhyVJcLfdTQEsC6Yv", "sanGongDataLogic");
    "use strict";
    window.sanGongDataLogic = {
      init: function init() {
        this.selfSeatId = 0;
        this.betBtnConfig = [];
        this.playerState = [];
        this.roomId = "011";
      },
      setBetBtnConfig: function setBetBtnConfig(data) {
        this.betBtnConfig = kf.clone(data);
      },
      setPlayerState: function setPlayerState(UISeatId, state) {
        this.playerState[UISeatId] = state;
        console.log("this.playerState", this.playerState);
      },
      getViewSeat: function getViewSeat(serverSeatId) {
        cc.log("this.seatTable", this.seatTable);
        for (var i = 0; i < this.seatTable.length; i++) if (this.seatTable[i] == serverSeatId) return i;
      },
      setRoomId: function setRoomId(roomId) {
        this.roomId = roomId;
      },
      getCardValue: function getCardValue(cardKey) {
        return cardKey % 13 + 1;
      },
      getCardCorol: function getCardCorol(cardKey) {
        return Math.floor(cardKey / 13);
      },
      getCardValueAndColor: function getCardValueAndColor(cardKey) {
        var value = this.getCardValue(cardKey);
        var type = this.getCardCorol(cardKey);
        var order = void 0;
        order = [ 10, 11, 12, 13 ].indexOf(value) >= 0 ? 0 : value;
        return {
          value: value,
          order: order,
          type: type,
          key: cardKey
        };
      },
      getSFByImgName: function getSFByImgName(spriteAtlas, imgName) {
        return spriteAtlas.getSpriteFrame(imgName);
      },
      isNiu: function isNiu(pokers) {
        this.order(pokers);
        if (pokers[0].value == pokers[1].value && pokers[1].value == pokers[2].value) {
          if (3 == pokers[0].value) {
            cc.log("\u81f3\u5c0a");
            return sanGongConstant.CardType.zhiZhun;
          }
          cc.log("\u5927\u4e09\u516c");
          return sanGongConstant.CardType.daSanGong;
        }
        if (pokers[0].value > 10 && pokers[1].value > 10 && pokers[2].value > 10) {
          cc.log("\u4e09\u516c");
          return sanGongConstant.CardType.sanGong;
        }
        var lave = (pokers[0].order + pokers[1].order + pokers[2].order) % 10;
        return lave;
      },
      order: function order(pokers) {
        pokers && pokers.length > 1 && pokers.sort(function(a, b) {
          return b.value === a.value ? b.type - a.type : b.value - a.value;
        });
        return pokers;
      }
    };
    sanGongDataLogic.init();
    cc._RF.pop();
  }, {} ],
  sanGongHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "27017xau0pGNZ9/zkG66QV3", "sanGongHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.SanGong);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "sanGong/bg", "cattle/table", "card", "sanGong/sanGong", "sanGong/effect/glow3", "cattle/ui/zhuang", "cattle/seeThreeCattle/selNormal" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  sanGong: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "88451CwpXxMrouwxtHFaLbB", "sanGong");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        betNum: cc.Node,
        roomNum: cc.Node,
        cardBoxP: cc.Node,
        cardBox: [ cc.Node ],
        backCardPf: cc.Prefab,
        dispenseCardNode: cc.Node,
        openCardBox: cc.Node,
        pokersSf: cc.SpriteFrame,
        showdown: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        villageMultiple: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        grab: cc.Node,
        grabBtn: [ cc.Button ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        villageIcon: cc.Node,
        villageBgBox: cc.Node,
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        gameStartAnim: cc.Node,
        tongChiAnim: cc.Node,
        tongPeiAnim: cc.Node,
        winAnim: cc.Node,
        isSG: [ cc.Node ],
        sgAnimPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        isSGAtlas: cc.SpriteAtlas,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        femaleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleSgAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        upturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onVillage", this.onVillage.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "village", this.village.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        dataLogic.setLimitPlayerNum(4);
        this.baseInit(constant.GameId.SanGong);
        this.registerEvent();
        this.backCard = [];
        this.clearOtherPlayer();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        var isCheck = cc.sys.localStorage.getItem("sanGongAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        for (var i = 0; i < 20; i++) {
          this.backCard[i] = cc.instantiate(this.backCardPf);
          this.backCard[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.backCard[i].parent = this.dispenseCardNode;
          this.backCard[i].opacity = 0;
        }
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(constant.GameId.SanGong);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[selRoomKey - 1].ante;
        this.setBetNumState();
        var playerPos = [ {
          x: 99,
          y: -157
        }, {
          x: 155,
          y: 74
        }, {
          x: 229,
          y: 87
        }, {
          x: -155,
          y: 74
        } ];
        for (var _i = 0; _i < this.player.length; _i++) {
          this.player[_i].playerPos = playerPos[_i];
          this.bindLongTouchEvent(this.player[_i]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.roomNum.x + this.roomNum.width + 20);
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.villageBgBox.stopAllActions();
        for (var i = 0; i < this.pokers.length; i++) {
          for (var j = 0; j < this.pokers[i].childrenCount; j++) {
            this.pokers[i].children[j].stopAllActions();
            i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
          }
          this.isSG[i].children[1] && this.isSG[i].children[1].destroy();
        }
        for (var _j = 0; _j < 20; _j++) this.backCard[_j].opacity = 0;
      },
      gameShow: function gameShow() {
        var UISeatId = void 0;
        cc.log("this.progress", this.progress);
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        var seatId = void 0;
        if (this.progress >= 2) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.getVillage(this.confirmVillage);
          2 == this.progress && this.showVillageCallFun(UISeatId);
          if (this.progress >= 3) {
            for (var i = 0; i < this.pokers.length; i++) {
              seatId = dataLogic.getSeatIdByUISeatId(i);
              if (!this.player[i].active || dataLogic.isOnlooker(seatId) || 0 == this.openCardsArr[seatId].length) continue;
              this.initCards(i);
            }
            for (var k = 0; k < this.openCardsArr.length; k++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(k);
              if (!this.player[UISeatId].active || dataLogic.isOnlooker(k)) continue;
              if (this.openCardsArr[k].length > 0) {
                k == constant.SelfUISeatId && (this.openCardBox.active = false);
                for (var j = 0; j < this.pokers[UISeatId].childrenCount; j++) this.pokers[UISeatId].children[j].x = 50 * (j - 2);
                this.setPlayerHandCard(UISeatId, this.openCardsArr[k]);
                var sanGongNum = this.showPokers(UISeatId, this.openCardsArr[k]);
                var sgNum = this.isSG[UISeatId].getChildByName("sgNum");
                var sgPic = this.isSGAtlas.getSpriteFrame("" + sanGongNum);
                this.isSG[UISeatId].active = true;
                sgNum.getComponent(cc.Sprite).spriteFrame = sgPic;
                this.isSG[UISeatId].getChildByName("sgNum").width = sgPic._originalSize.width;
                this.isSG[UISeatId].getChildByName("sgNum").height = sgPic._originalSize.height;
                this.isSG[UISeatId].getComponent(cc.Sprite).spriteFrame = sanGongNum >= 0 && sanGongNum < 10 ? this.isSGAtlas.getSpriteFrame("bg1") : this.isSGAtlas.getSpriteFrame("bg2");
              } else if (dataLogic.isFriendRoom) ; else if (k == constant.SelfUISeatId) {
                this.pokers[k].active = false;
                this.openCardBox.active = true;
                var _seatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
                this.showMyPorkers(this.onBetData, _seatId);
              }
            }
            if (this.progress > 3) {
              this.reciprocal.active = false;
              if (this.isResultAnim) if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
                this.matchBtn.active = true;
                this.autoMatch.active = true;
              }
              return;
            }
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          if (!dataLogic.isOnlooker()) {
            if (1 == this.progress && newDate > 0) {
              this.isVillage || (this.grab.active = true);
              this.wait.active = true;
            }
            if (2 == this.progress && newDate > 0) {
              this.isBet || (this.multiple.active = true);
              this.wait.active = true;
            }
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      initCards: function initCards(UISeatId) {
        this.pokers[UISeatId].active = true;
        for (var l = 0; l < this.pokers[UISeatId].childrenCount; l++) {
          this.pokers[UISeatId].children[l].active = true;
          this.pokers[UISeatId].children[l].x = 50 * (l - 2);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        cc.log("\u5339\u914ding");
        dataLogic.setNeedRecover(true);
        this.clearOtherPlayer();
        this.total = 0;
        var roomKey = dataLogic.curRoomKey;
        sanGongConstant.PostMatching.roomId = constant.GameId.SanGong + roomKey;
        http.post(sanGongConstant.PostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.initMatchingView(true, false);
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        if (-4 == msg.Code) this.initMatchingView(false); else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        cc.log("show", show);
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.matchingToastLayer.active = false;
          this.efMatchingLoad.getComponent(cc.Animation).stop();
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setDeskId(data.Data.deskId);
        }
        this.setMatchingToastUI(true);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.selectRoomConfig[roomKey - 1].ante;
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.hidePoker(constant.SelfUISeatId);
          this.setMatchingToastView(false);
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
          constant.HttpCode.GameOver == msg.Code && dataLogic.setReqRecoverState(false);
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + dataLogic.selectRoomConfig[roomKey - 1].ante;
        this.setBetNumState();
        if (0 == msg.state) {
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerInfo(msg);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            this.initMatchingView(true, true);
            this.btMatching.node.active = false;
          }
          return;
        }
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        dataLogic.matching();
        this.setMatchingToastView(false);
        var playerInfo = kf.clone(msg.playerInfo);
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        this.playerInfo = playerInfo;
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        this.setAllPlayerInfo(msg, remainingTime);
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:" + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        this.confirmVillage = msg.isVillage;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        sanGongDataLogic.setRoomId(dataLogic.roomConfig.roomId);
      },
      hidePlayer: function hidePlayer(i) {
        this.multipleTxt[i].string = "";
        this.villageMultiple[i].string = "";
        this.player[i].getChildByName("pokers").active = false;
        this.getBetTxt[i].string = "";
        if (0 != i) {
          this.player[i].active = false;
          this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
          this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
        }
        for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
        for (var j = 0; j < 3; j++) {
          this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
        }
        this.isSG[i].active = false;
        this.isSG[i].getComponent(cc.Sprite).spriteFrame = "";
        this.isSG[i].getChildByName("sgNum").getComponent(cc.Sprite).spriteFrame = "";
        this.isSG[i].children[1] && this.isSG[i].children[1].destroy();
      },
      playerLeave: function playerLeave(seatId) {
        cc.log("\u6e05\u7406\u73a9\u5bb6UI");
        if (seatId == this.confirmVillage) {
          this.villageIcon.y = 1e4;
          this.villageBgBox.y = 1e4;
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        this.hidePlayer(UISeatId);
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId) {
        this.player[UISeatId].active = true;
        this.player[UISeatId].userId = info.userId;
        this.player[UISeatId].getChildByName("bg").active = true;
        UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = info.nickName);
        this.setPlayerBalance(UISeatId, info.balance);
        this.balanceArr = this.balanceArr.concat(info.balance);
        var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(info.headUrl, avatarSp);
      },
      setAllPlayerInfo: function setAllPlayerInfo(msg, remainingTime) {
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(msg.playerInfo);
        var playerInfo = dataLogic.playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          cc.log("UISeatId---", UISeatId, playerInfo[i]);
          if (null == playerInfo[i].headUrl) continue;
          this.setPlayerInfo(playerInfo[i], UISeatId);
          cc.log("dataLogic.isOnlooker", i, dataLogic.isOnlooker(i));
          if (0 == msg.state || dataLogic.isOnlooker(i)) continue;
          dataLogic.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Gaming);
          if (1 == msg.state) if (-1 == playerInfo[i].state) {
            if (UISeatId == constant.SelfUISeatId) {
              this.isVillage = false;
              this.grab.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
            }
          } else {
            this.isVillage = true;
            0 == playerInfo[i].state ? this.villageMultiple[UISeatId].string = "\u4e0d\u62a2" : this.villageMultiple[UISeatId].string = "\u62a2\u5e84";
          }
          if (msg.state >= 2) if (i == msg.isVillage) {
            this.multipleTxt[UISeatId].string = "";
            this.villageMultiple[UISeatId].string = "\u62a2\u5e84";
            if (UISeatId == constant.SelfUISeatId && 2 == msg.state) {
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
            }
          } else if (playerInfo[i].betMultiple < 0 && UISeatId == sanGongDataLogic.selfSeatId) {
            if (2 == msg.state) {
              dataLogic.setRoomConfig("betConfig", msg.multiples[i]);
              this.betMultipleBtn();
              this.isBet = false;
              this.multiple.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
            }
          } else if (playerInfo[i].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d";
          }
          if (3 == msg.state) {
            var cards = msg.cards[i];
            cc.log("remainingTime--", remainingTime);
            if (remainingTime > 0) if (UISeatId == constant.SelfUISeatId) if (playerInfo[i].isComplete) {
              this.openCardBox.active = false;
              this.isOpenCard = true;
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.showMyPorkers(msg, i);
              this.isOpenCard = false;
              this.openCardBox.active = true;
              this.pokers[UISeatId].active = false;
            } else if (playerInfo[i].isComplete) {
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else this.setSendCard(UISeatId, msg); else {
              if (playerInfo[i].isComplete) {
                this.upturnCards(i, cards, true);
                this.isOpenState[UISeatId] = true;
              }
              this.openCardBox.active = false;
              this.pokers[UISeatId].active = true;
            }
          }
        }
        this.initAllPlayerReadyStateUI();
      },
      setSendCard: function setSendCard(UISeatId, msg) {
        var endPos = this.getHandCardPos(UISeatId);
        for (var j = 0; j < 3; j++) {
          var key = 3 * UISeatId + j;
          this.backCard[key].opacity = 255;
          if (UISeatId === constant.SelfUISeatId) {
            this.showMyPorkers(msg);
            this.backCard[key].scale = .92;
            this.backCard[key].x = endPos.x + 129 * j * .9;
            this.backCard[key].y = endPos.y;
          } else {
            this.backCard[key].scale = .72;
            this.backCard[key].x = endPos.x + 50 * j * .72;
            this.backCard[key].y = endPos.y;
          }
        }
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        dataLogic.matching();
        if (dataLogic.isFriendRoom) {
          this.gameStartCommonHandle();
          this.updateTips();
          this.clearOtherPlayer();
        }
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        var playerInfo = msgData.playerInfo, UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) playerInfo[i].seatId = i;
        for (var _i2 = 0; _i2 < playerInfo.length; _i2++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[_i2].seatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i2].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i2].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[_i2].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i2].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i2].headUrl, avatarSp);
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        this.scheduleOnce(function() {
          _this.grab.active = true;
          _this.wait.active = true;
          _this.WaitString.string = "\u8bf7\u62a2\u5e84";
          _this.countDown(msgData.endTime, 1);
        }, 1.5);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.balanceArr = [];
        this.dealerBetNum = [];
        this.isVillageNum = 1;
        this.isBetNum = 2;
        this.isVillage = false;
        this.isBet = false;
        this.isOpenCard = false;
        this.send = false;
        this.isResultAnim = false;
        this.villageBgBox.x = 1e4;
        this.villageBgBox.y = 1e4;
        this.villageIcon.x = 1e4;
        this.villageIcon.y = 1e4;
        this.winTxt.opacity = 0;
        this.openPokers = [];
        this.openCardBox.active = false;
        this.grab.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.grab.active = false;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var i = 0; i < this.player.length; i++) this.hidePlayer(i);
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.openCardBox.active = false;
          this.grab.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.grab.active = false;
            this.multiple.active = false;
            if (dataLogic.isOnlooker()) return;
            switch (type) {
             case 1:
              this.grab.active = false;
              this.isVillage || this.scheduleOnce(function() {
                cc.log("\u62a2\u5e84");
                _this2.postGrabVillage(0);
              }, .1 * mySeatId);
              break;

             case 2:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                cc.log("\u4e0b\u6ce8");
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 3:
              for (var i = 0; i < this.pokers.length; i++) {
                var seatId = dataLogic.getSeatIdByUISeatId(i);
                if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
                this.pokers[i].active || (this.pokers[i].active = true);
              }
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                cc.log("\u644a\u724c");
                _this2.openTheCard();
              }, .3 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var i = 0; i < multiple.length; i++) if (i < 5) {
          this.multipleBtn[i].node.active = true;
          this.multipleBtn[i].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.multipleBtn[i].node.x = i * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      grabVillage: function grabVillage(event, key) {
        this.grab.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postGrabVillage(key);
      },
      postGrabVillage: function postGrabVillage(key) {
        sanGongConstant.PostVillage.villageNum = key;
        http.post(sanGongConstant.PostVillage, "village");
        this.isVillage = true;
        this.grab.active = false;
        this.isVillageNum < this.playerInfo.length ? this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u62a2\u5e84" : this.wait.active = false;
      },
      village: function village(msgData) {
        if (0 == msgData.Code) return;
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      onVillage: function onVillage(msgData) {
        var _this3 = this;
        this.isVillageNum++;
        var lastVillage = msgData.seatId.toString().split(","), multiple = void 0, UISeatId = void 0;
        multiple = 0 == msgData.villageNum ? "\u4e0d\u62a2" : "\u62a2\u5e84";
        for (var i = 0; i < lastVillage.length; i++) if ("" != lastVillage[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastVillage[i]);
          this.villageMultiple[UISeatId].string = multiple;
          this._village.push({
            seatId: lastVillage[i],
            villageNum: msgData.villageNum
          });
          this.dealerBetNum.push(msgData.villageNum);
        }
        if (void 0 != msgData.confirmVillage) {
          this.progress = 2;
          this.reciprocal.active = false;
          this.grab.active = false;
          this.wait.active = false;
          var seatId = dataLogic.getSeatIdByUISeatId(sanGongDataLogic.selfSeatId);
          if (seatId != msgData.confirmVillage) {
            dataLogic.setRoomConfig("betConfig", msgData.multiples[seatId]);
            this.betMultipleBtn();
          }
          this.confirmVillage = msgData.confirmVillage;
          this.endTime = msgData.endTime;
          UISeatId = dataLogic.getUISeatIdBySeatId(msgData.confirmVillage);
          this.dealerBetNum.sort(function(a, b) {
            return a - b;
          });
          this.max = this.dealerBetNum[this.dealerBetNum.length - 1];
          this.unschedule(this.callback);
          dataLogic.isHide ? this.showVillage() : this.node.runAction(cc.sequence(cc.delayTime(.6), cc.callFunc(function() {
            var delay = _this3.selVillage(msgData.confirmVillage);
            _this3.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(function() {
              this.showVillage();
              audioMgr.playEffect(this.selVillageOver);
            }, _this3)));
          }, this)));
        }
      },
      showVillage: function showVillage() {
        var _this4 = this;
        cc.log("max", this.max);
        var UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
        0 == this.max && (this.villageMultiple[UISeatId].string = "\u62a2\u5e84");
        this.getVillage(this.confirmVillage);
        var callFunc = cc.callFunc(function() {
          _this4.showVillageCallFun(UISeatId);
        }, this);
        dataLogic.isHide ? this.showVillageCallFun(UISeatId) : this.node.runAction(cc.sequence(cc.delayTime(.8), callFunc));
      },
      showVillageCallFun: function showVillageCallFun(UISeatId) {
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
        if (!dataLogic.isOnlooker()) {
          this.wait.active = true;
          if (UISeatId != constant.SelfUISeatId) if (this.isBet) this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8"; else {
            this.multiple.active = true;
            this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
          } else this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
        }
        this.countDown(this.endTime, 2);
        cc.log("run callFunc");
      },
      selVillage: function selVillage(confirmVillage) {
        var _this5 = this;
        var len = void 0, UISeatId = void 0, time = .15, num = 4, delay = void 0, delay1 = void 0;
        var newVillage = [];
        var max = Math.max.apply(Math, this._village.map(function(o) {
          return o.villageNum;
        }));
        for (var i = 0; i < this._village.length; i++) {
          this._village[i].villageNum == max && newVillage.push(Number(this._village[i].seatId));
          newVillage.sort(function(a, b) {
            return a - b;
          });
        }
        var aArr = [], aArr1 = [];
        for (var k = 0; k < newVillage.length; k++) newVillage[k] <= confirmVillage ? aArr.push(newVillage[k]) : aArr1.push(newVillage[k]);
        newVillage = aArr1.concat(aArr);
        len = newVillage.length;
        if (len > 1) {
          var _loop = function _loop(j) {
            delay = cc.delayTime(time * len);
            delay1 = cc.delayTime(j * time);
            UISeatId = dataLogic.getUISeatIdBySeatId(newVillage[j]);
            var pos = _this5.player[UISeatId].position;
            var callFun = cc.callFunc(function() {
              _this5.selTheVillage(pos, delay, num);
            }, _this5);
            _this5.node.runAction(cc.sequence(delay1, callFun));
          };
          for (var j = 0; j < newVillage.length; j++) _loop(j);
          return time * len * num;
        }
        return 0;
      },
      selTheVillage: function selTheVillage(pos, delay, num) {
        var sequence = void 0, repeat = void 0;
        var AudioCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.selVillageAudio);
        }, this);
        sequence = cc.sequence(AudioCallFun, cc.moveTo(0, pos.x, pos.y), delay);
        repeat = cc.repeat(sequence, num);
        this.villageBgBox.runAction(repeat);
      },
      getVillage: function getVillage(confirmVillage) {
        this.confirmVillage = confirmVillage;
        var UISeatId = dataLogic.getUISeatIdBySeatId(confirmVillage);
        this.villageBgBox.x = this.player[UISeatId].x;
        this.villageBgBox.y = this.player[UISeatId].y;
        if (1 == UISeatId) {
          this.villageIcon.x = this.player[UISeatId].x + 54;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        } else {
          this.villageIcon.x = this.player[UISeatId].x - 53;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        }
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        sanGongConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(sanGongConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.playerInfo.length > 2 && this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this6 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        var betNums = msgData.betNum.toString().split(",");
        for (var i = 0; i < lastBet.length; i++) if ("" != lastBet[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[i]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + betNums[i] + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          var showPokerTime = this.dispenseCardAction();
          cc.log("showPokerTime", showPokerTime);
          this.progress = 3;
          var seatId = dataLogic.getSeatIdByUISeatId(sanGongDataLogic.selfSeatId);
          this.endTime = msgData.endTime;
          this.onBetData = msgData;
          if (dataLogic.isHide) {
            this.showMyPorkers(msgData, seatId);
            for (var j = 0; j < this.pokers.length; j++) {
              seatId = dataLogic.getSeatIdByUISeatId(j);
              if (!this.player[j].active || dataLogic.isOnlooker(seatId)) continue;
              if (j != constant.SelfUISeatId) {
                this.pokers[j].active = true;
                for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x += 50 * k;
              }
            }
          } else this.node.runAction(cc.sequence(cc.delayTime(showPokerTime), cc.callFunc(function() {
            _this6.showMyPorkers(msgData, seatId);
            _this6.countDown(msgData.endTime, 3);
          }, this)));
        }
      },
      initPokers: function initPokers() {
        for (var i = 0; i < this.cardBox.length; i++) this.cardBox[i].x = -258;
        for (var j = 0; j < this.pokers.length; j++) {
          if (!this.player[j].active) continue;
          if (j != constant.SelfUISeatId) for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x = -100;
        }
      },
      showMyPorkers: function showMyPorkers(msgData, seatId) {
        if (dataLogic.isOnlooker()) return;
        this.openCardBox.active = true;
        this.pokersData = [], this.myInitPokersData = [];
        for (var i = 0; i < this.cardBox.length; i++) {
          this.cardBox[i].getComponent(cc.Sprite).spriteFrame = sanGongDataLogic.getSFByImgName(this.cardAtlas, msgData.cards[seatId][i]);
          this.pokersData.push(sanGongDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
          this.myInitPokersData.push(sanGongDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
        }
        this.hidePoker(constant.SelfUISeatId);
      },
      hidePoker: function hidePoker(UISeatId) {
        for (var i = 0; i < 3; i++) this.backCard[3 * UISeatId + i].opacity = 0;
      },
      dispenseCardAction: function dispenseCardAction() {
        if (dataLogic.isHide) return;
        this.send = true;
        var startPos = cc.v2(0, 0), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0, seatId = void 0;
        for (var i = 0; i < 4; i++) {
          seatId = dataLogic.getSeatIdByUISeatId(i);
          if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
          basecDelay += .1;
          for (var j = 0; j < 3; j++) {
            key = 3 * i + j;
            delay = cc.delayTime(.1 * j + basecDelay);
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .55;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(i);
            move = cc.moveTo(actionTime, endPos);
            if (i === constant.SelfUISeatId) {
              scale = cc.scaleTo(actionTime, .92);
              cardMove = cc.moveTo(.15, endPos.x + 129 * j * .9, endPos.y);
            } else {
              scale = cc.scaleTo(actionTime, .72);
              cardMove = cc.moveTo(.15, endPos.x + 50 * j * .72, endPos.y);
            }
            var fpCallFun = cc.callFunc(function() {
              audioMgr.playEffect(this.sendCard);
            }, this);
            spawn = cc.spawn(move, scale, fpCallFun);
            sequence = cc.sequence(delay, spawn, cardMove);
            this.backCard[key].runAction(sequence);
          }
          showPokerTime = basecDelay + .65;
        }
        return showPokerTime;
      },
      moveCard: function moveCard(i, j) {
        cc.log("i---", i, "j---", j);
        i === constant.SelfUISeatId ? this.cardBox[j].runAction(cc.moveBy(.15, 129 * j, 0)) : this.pokers[i].children[j].runAction(cc.moveBy(.15, 50 * j, 0));
      },
      getHandCardPos: function getHandCardPos(UISeatId) {
        var pos = cc.v2(0, 0);
        pos.x = 0 == UISeatId ? this.player[UISeatId].x + 150 : 1 == UISeatId ? this.player[UISeatId].x - 205 : this.player[UISeatId].x + 130;
        pos.y = this.player[UISeatId].y;
        return pos;
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this7 = this;
        var cards = void 0, UISeatId = void 0, txt = "", endAudio = void 0, lastArr = [], win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          this.upturnCards(msgData.seatId, cards);
        }
        if (1 == msgData.isEnd) {
          this.endData = msgData.endData;
          this.progress = 4;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          this.openCardBox.active = false;
          var max = Math.max.apply(null, msgData.endData);
          var min = Math.min.apply(null, msgData.endData);
          var isMeMax = 0;
          var isMeMin = 0;
          var newEndData = [];
          for (var _j2 = 0; _j2 < msgData.endData.length; _j2++) {
            var _playerInfo = dataLogic.playerInfo[_j2];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[_j2]) / 100;
            msgData.endData[_j2] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[_j2]) / 100);
            _playerInfo.gameTimes += 1;
            newEndData[_j2] = Math.abs(msgData.endData[_j2]);
            msgData.endData[_j2] >= 0 && isMeMax++;
            msgData.endData[_j2] <= 0 && isMeMin++;
          }
          var absMax = Math.max.apply(null, newEndData);
          cc.log("isMeMin", isMeMin, "isMeMax", isMeMax);
          for (var i = 0; i < msgData.endData.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            if (UISeatId == constant.SelfUISeatId) if (msgData.endData[i] > 0) {
              if (this.confirmVillage == i && msgData.endData[i] == max && absMax == max && 1 == isMeMax) if (msgData.endData.length < 3) {
                txt = 1;
                cc.log("\u4e24\u4eba\u5bf9\u5c40\u52dd\u5229");
                endAudio = this.winGold;
              } else {
                txt = 0;
                cc.log("\u901a\u5403");
                endAudio = this.allWin;
              } else {
                txt = 1;
                cc.log("\u52dd\u5229");
                endAudio = this.winGold;
              }
              win = false;
            } else {
              if (this.confirmVillage == i && msgData.endData[i] < 0 && msgData.endData[i] == min && 1 == isMeMin) {
                if (msgData.endData.length >= 3 && Math.abs(min) == absMax) {
                  txt = 2;
                  cc.log("\u901a\u8d54");
                }
              } else cc.log("\u5931\u8d25");
              endAudio = this.lose;
              win = true;
            }
          }
          time = dataLogic.isHide ? 0 : lastArr.length + .5;
          cc.log("time======", time);
          var scrollNumCallFunc = cc.callFunc(function() {
            for (var _i3 = 0; _i3 < msgData.endData.length; _i3++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i3);
              if (msgData.endData[_i3] >= 0) {
                _this7.getBetTxt[UISeatId].font = _this7.winChipNumFont;
                _this7.scrollNum(msgData.endData[_i3].toFixed(2), UISeatId);
              } else {
                _this7.getBetTxt[UISeatId].font = _this7.loseChipNumFont;
                _this7.getBetTxt[UISeatId].string = msgData.endData[_i3].toFixed(2);
              }
            }
          }, this);
          var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc);
          this.winTxt.runAction(sequence);
          sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
          this.winTxt.runAction(sequence);
          this.resultAnim(txt, time, endAudio, win, dataLogic.isHide);
          dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
          this.gamingPlayerToUnready();
          this.updateTips();
        }
      },
      updateUserBalance: function updateUserBalance() {
        for (var i = 0; i < this.endData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = Math.abs(balance).toFixed(2);
          UISeatId == constant.SelfUISeatId && dataLogic.setUserBalance(balance);
        }
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this8 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this8.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
          _this8.updateUserBalance();
        }, this)));
      },
      resultAnim: function resultAnim(type, time, endAudio, win, hide) {
        var delayTime = cc.delayTime(3);
        var showAnimCallFun = cc.callFunc(function() {
          switch (type) {
           case 0:
            this.tongChiAnim.active = true;
            this.tongChiAnim.getComponent(cc.Animation).play();
            break;

           case 1:
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
            break;

           case 2:
            this.tongPeiAnim.active = true;
            this.tongPeiAnim.getComponent(cc.Animation).play();
          }
          audioMgr.playEffect(endAudio);
          win || audioMgr.playEffect(this.scrollNumber);
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.isResultAnim = true;
          this.tongChiAnim.active = false;
          this.tongPeiAnim.active = false;
          this.winAnim.active = false;
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(.3), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr, isOpen) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        if (this.isUserOpenPokers(UISeatId)) return false;
        this.openPokers.push(UISeatId);
        var sanGongNum = this.showPokers(UISeatId, cards);
        var hideCardsCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.upturnPoker);
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          var pokers = this.pokers[UISeatId].children;
          if (UISeatId == constant.SelfUISeatId) for (var i = 0; i < pokers.length; i++) pokers[i].runAction(cc.moveBy(.1, 50 * -i, 0)); else {
            for (var _i4 = 0; _i4 < pokers.length; _i4++) pokers[_i4].x = -100;
            for (var _i5 = 0; _i5 < 3; _i5++) this.backCard[3 * UISeatId + 1 * _i5].runAction(cc.sequence(cc.moveBy(5, 50 * -_i5, 0), cc.fadeOut(.1, 0)));
          }
          this.showCardsCallFun(UISeatId, sanGongNum, cards);
        }, this);
        cc.log(sanGongNum, "\u70b9");
        var sgNum = this.isSG[UISeatId].getChildByName("sgNum");
        if (!dataLogic.isHide || isOpen) this.node.runAction(cc.sequence(cc.delayTime(1 * index), hideCardsCallFun)); else {
          this.pokers[UISeatId].active = true;
          this.setPlayerHandCard(UISeatId, cards);
          var sgPic = this.isSGAtlas.getSpriteFrame("" + sanGongNum);
          this.isSG[UISeatId].active = true;
          sgNum.getComponent(cc.Sprite).spriteFrame = sgPic;
          this.isSG[UISeatId].getChildByName("sgNum").width = sgPic._originalSize.width;
          this.isSG[UISeatId].getChildByName("sgNum").height = sgPic._originalSize.height;
          this.isSG[UISeatId].getComponent(cc.Sprite).spriteFrame = sanGongNum >= 0 && sanGongNum < 10 ? this.isSGAtlas.getSpriteFrame("bg1") : this.isSGAtlas.getSpriteFrame("bg2");
        }
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, sanGongNum, cards) {
        var showCardsCallFun = cc.callFunc(function() {
          this.setPlayerHandCard(UISeatId, cards);
          var pokers = this.pokers[UISeatId].children;
          for (var j = 0; j < pokers.length; j++) pokers[j].runAction(cc.moveBy(.25, 50 * j, 0));
          this.sgA(UISeatId, sanGongNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleSgAudio[sanGongNum]) : audioMgr.playEffect(this.femaleSgAudio[sanGongNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      sgA: function sgA(UISeatId, sanGongNum) {
        var sgAnim = cc.instantiate(this.sgAnimPf);
        sgAnim.parent = this.isSG[UISeatId];
        this.isSG[UISeatId].active = true;
        var sgPic = sanGongDataLogic.getSFByImgName(this.isSGAtlas, sanGongNum);
        if (sanGongNum >= 0 && sanGongNum < 10) {
          sgAnim.children[0].getChildByName("sg_zi").getComponent(cc.Sprite).spriteFrame = sgPic;
          sgAnim.children[0].getChildByName("sg_zi").width = sgPic._originalSize.width;
          sgAnim.children[0].getChildByName("sg_zi").height = sgPic._originalSize.height;
          sgAnim.children[0].active = true;
          sgAnim.children[0].getComponent(cc.Animation).play();
        } else {
          sgAnim.children[1].getChildByName("sg_zi").getComponent(cc.Sprite).spriteFrame = sgPic;
          sgAnim.children[1].getChildByName("sg_zi").width = sgPic._originalSize.width;
          sgAnim.children[1].getChildByName("sg_zi").height = sgPic._originalSize.height;
          sgAnim.children[1].active = true;
          sgAnim.children[1].getComponent(cc.Animation).play();
        }
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var pokers = [];
        for (var j = 0; j < cards.length; j++) pokers.push(sanGongDataLogic.getCardValueAndColor(cards[j]));
        pokers = sanGongDataLogic.order(pokers);
        for (var i = 0; i < pokers.length; i++) this.pokers[UISeatId].getChildByName("pokers" + i).getComponent(cc.Sprite).spriteFrame = sanGongDataLogic.getSFByImgName(this.cardAtlas, pokers[i].key);
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var i = 0; i < cards.length; i++) playerPokersData.push(sanGongDataLogic.getCardValueAndColor(cards[i]));
        UISeatId == constant.SelfUISeatId && (this.openCardBox.active = false);
        return sanGongDataLogic.isNiu(playerPokersData);
      },
      openTheCard: function openTheCard() {
        if (dataLogic.isOnlooker()) return;
        this.openCardBox.active = false;
        http.post(sanGongConstant.OpenCards, "openCards");
        this.isOpenCard = true;
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
      },
      exitRoom: function exitRoom() {
        dataLogic.leaveTable();
        dataLogic.gameEnd();
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "cardType":
          this.cardTypeView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.SanGong);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "showdown":
          this.openTheCard();
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("sanGongAutoMatch", isCheck);
          break;

         case "1":
          this.dispenseCardAction();
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  sceneBase: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "855b9d2045Gk58qW0dR4lGS", "sceneBase");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    var nextScene = null;
    var loadTimeout = true;
    var byUrlJumpScene = false;
    var loadingScene = false;
    var _recoveringMsgId = -1;
    var _nextSceneGameId = null;
    module.exports = cc.Class({
      extends: cc.Component,
      properties: {
        pfNotice: cc.Prefab,
        layerMsgPf: cc.Prefab,
        pfToastHint: cc.Prefab,
        toastLoadingPf: cc.Prefab,
        toastRequestErrorPf: cc.Prefab,
        toastInGameDisconnectPf: cc.Prefab,
        helpPf: cc.Prefab,
        recordPf: cc.Prefab,
        settingPf: cc.Prefab,
        toastLayer: [ cc.Node ],
        bgAudio: {
          default: null,
          type: cc.AudioClip
        },
        audioBtn: {
          default: null,
          type: cc.AudioClip
        },
        pfDialogCommonLayer: cc.Prefab,
        layerTipPos: cc.v2(0, 0),
        loadIconPos: cc.v2(0, 0),
        playerCard: cc.Prefab
      },
      baseRegisterEvent: function baseRegisterEvent() {
        this.registerHandler = [ [ "loadScene", this.loadScene.bind(this) ], [ "socketDisconnect", this.socketDisconnect.bind(this) ], [ "reconnect", this.reconnect.bind(this) ], [ "httpCbRepeater", this.httpCbRepeater.bind(this) ], [ "socketMsg", this.socketMsg.bind(this) ], [ "intoNextScene", this.intoNextScene.bind(this) ], [ "toastType", this.toastType.bind(this) ], [ "killAllToast", this.killAllToast.bind(this) ], [ "killToast", this.killToast.bind(this) ], [ "showLoadTimeoutToast", this.showLoadTimeoutToast.bind(this) ], [ "showRefreshToast", this.showRefreshToast.bind(this) ], [ "cancelRefreshToastShow", this.cancelRefreshToastShow.bind(this) ], [ "showLayerToast", this.showLayerToast.bind(this) ], [ "showLayerTip", this.showLayerTip.bind(this) ], [ "getUserInfoCardCb", this.getUserInfoCardCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      ctor: function ctor() {},
      initSceneBase: function initSceneBase() {
        _nextSceneGameId = null;
        _recoveringMsgId = 0;
        loadingScene = false;
        byUrlJumpScene = false;
        loadTimeout = true;
        if (null == this.bgAudio) {
          audioMgr.stopMusic();
          audioMgr.setMusicClip(null);
        } else {
          var isPlayNewMusic = this.bgAudio._uuid != audioMgr.getCurMusicClipUuid();
          if (isPlayNewMusic) {
            audioMgr.playMusic(this.bgAudio);
            audioMgr.setMusicClip(this.bgAudio);
          }
        }
        this.socketIO = kf.require("util.socketIO");
        dataLogic.registerEvent();
        cc.debug.setDisplayStats(false);
        this.baseRegisterEvent();
        var sceneName = void 0;
        if (null == this.sceneName) {
          sceneName = this.node.parent.name;
          this.sceneName = sceneName;
        } else sceneName = this.sceneName;
        dataLogic.setCurSceneName(sceneName);
        null == dataLogic.fristScene && dataLogic.setFristScene(sceneName);
        cc.log("\u5f53\u524d\u573a\u666f", this.sceneName);
        this.releaseRes();
        this.fitScreen();
        kf.createPool(constant.PoolId.ToastInGameDisconnect, 1, this.toastInGameDisconnectPf, "toast");
        kf.createPool(constant.PoolId.ToastLoading, 1, this.toastLoadingPf, "toast");
        kf.createPool(constant.PoolId.ToastRequestError, 1, this.toastRequestErrorPf, "toast");
        kf.createPool(constant.PoolId.ToastHint, 1, this.pfToastHint, "toast");
        kf.createPool(constant.PoolId.Setting, 1, this.settingPf, "setting");
        kf.createPool(constant.PoolId.Notice, 1, this.pfNotice, "notice");
        kf.createPool(constant.PoolId.DialogComonLayer, 1, this.pfDialogCommonLayer, "dialogCommonLayer");
        kf.createPool(constant.PoolId.layerMsg, 1, this.layerMsgPf, "layerMsg");
        if (sceneName == constant.SceneName.BaseGame || sceneName == constant.SceneName.BonusGame) {
          kf.createPool(constant.PoolId.KingHelp, 1, this.helpPf, "kingHelp");
          kf.createPool(constant.PoolId.Record, 1, this.recordPf, "kingRecord");
        } else {
          kf.createPool(constant.PoolId.Help, 1, this.helpPf, "newHelp", false);
          kf.createPool(constant.PoolId.Record, 1, this.recordPf, "record");
        }
        dataLogic.doneLogin && null == dataLogic.getIntervalSendId() && dataLogic.intervalSendNewMsg();
        if (true != this.isSelectRoomScene && sceneName != constant.SceneName.Bank && sceneName != constant.SceneName.BonusGame && sceneName != constant.SceneName.Hall) {
          var y = cc.winSize.height / 2 - 105;
          sceneName == constant.SceneName.BaseGame && (y = cc.winSize.height / 2 - 102);
          this.showGlobalNotice(y);
        }
        this.playerCardNode = null;
        this.touchStartTime = this.touchEndTime = 0;
        this.showPlayerCardFuc = null;
        this.onTheTouch = false;
        this.nowTouchUserId = null;
      },
      bindLongTouchEvent: function bindLongTouchEvent(bindNode) {
        this.playerCardNode && this.playerCardNode.destroy();
        this.onTheTouch = false;
        bindNode.on("touchstart", function() {
          this.touchStartTime = this.touchEndTime = 0;
          this.touchStartTime = +new Date();
          if (this.playerCardNode) this.playerCardNode.parent || (this.playerCardNode.parent = this.node); else {
            this.playerCardNode = new cc.instantiate(this.playerCard);
            this.playerCardNode.parent = this.node;
          }
          var posX = bindNode.playerPos.x;
          var posY = bindNode.playerPos.y;
          this.playerCardNode.x = posX;
          this.playerCardNode.y = posY;
          this.nowTouchUserId = bindNode.userId;
          this.showPlayerCardFuc = this.showPlayerCard.bind(this, bindNode);
          this.schedule(this.showPlayerCardFuc, 0);
        }, this);
        bindNode.on("touchmove", function(event) {
          if (Math.abs(event.getDelta().x) > 5 || Math.abs(event.getDelta().y) > 5) {
            this.unschedule(this.showPlayerCardFuc);
            this.playerCardNode && (this.playerCardNode.x = -1e4);
            this.onTheTouch = false;
          }
        }, this);
        bindNode.on("touchend", function() {
          this.touchEndTime = +new Date();
          this.onTheTouch = false;
          this.unschedule(this.showPlayerCardFuc);
          this.playerCardNode && (this.playerCardNode.x = -1e4);
          this.touchEndTime - this.touchStartTime < 250 && cc.log("click");
        }, this);
        bindNode.on("active-in-hierarchy-changed", function(node) {
          node.active || this.playerCardNode && -1e4 != this.playerCardNode.x && (this.playerCardNode.x = -1e4);
        }, this);
      },
      showPlayerCard: function showPlayerCard(srcEle) {
        this.killGuideWatchPlayerCard && this.killGuideWatchPlayerCard();
        this.unschedule(this.showPlayerCardFuc);
        var posX, posY;
        posX = srcEle.playerPos.x;
        posY = srcEle.playerPos.y;
        this.onTheTouch = true;
        if (dataLogic.playerInfo.length) {
          var userId = srcEle.userId;
          if (userId != this.nowTouchUserId) return;
          var playerInfo = srcEle._playerInfo ? srcEle._playerInfo : {};
          for (var i = 0; i < dataLogic.playerInfo.length; i++) if (dataLogic.playerInfo[i].userId == userId) {
            playerInfo = dataLogic.playerInfo[i];
            this.playerCardNode.getComponent("playerCard").init(playerInfo);
          }
        } else this.onTheTouch && http.post({
          action: "GetUserInfoCard"
        }, "getUserInfoCardCb", {
          x: posX,
          y: posY
        });
      },
      getUserInfoCardCb: function getUserInfoCardCb(data, cbArg) {
        if (1 == data.Code && "{}" != JSON.stringify(data.Data) && this.onTheTouch) {
          "dzpk" == dataLogic.getCurSceneName() && (data.Data.balance = dataLogic.carryChipNumData[dataLogic.curRoomKey - 1]);
          this.playerCardNode.getComponent("playerCard").init(data.Data);
        }
      },
      showGlobalNotice: function showGlobalNotice(y) {
        var _this = this;
        var notHide = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        if (!this.pfNotice || this.globalNotice) return;
        if (dataLogic.notices.length > 0) {
          var index = 0;
          var arg = {
            isKing: constant.GameId.King == dataLogic.curGameId,
            notHide: notHide
          };
          this.globalNotice = kf.getObj(constant.PoolId.Notice, this.toastLayer[0].parent, this.pfNotice);
          this.globalNotice.zIndex = -1;
          this.globalNotice.y = y;
          notHide ? this.globalNotice.getComponent("notice").show(arg) : this.globalNotice.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function() {
            arg.str = dataLogic.notices[index];
            _this.globalNotice.getComponent("notice").show(arg);
            index++;
            index == dataLogic.notices.length && (index = 0);
          }), cc.delayTime(180))));
        }
      },
      toastType: function toastType(index, type, pf, arg) {
        switch (index) {
         case constant.ToastPriority.ExitToast:
          var recharge = kf.getObj(type, this.toastLayer[index], pf, arg);
        }
      },
      fitScreen: function fitScreen() {
        var canvas = this.node.getComponent(cc.Canvas);
        if (cc.winSize.width < canvas.designResolution.width) {
          canvas.fitHeight = false;
          canvas.fitWidth = true;
        } else cc.winSize.width > 1560 && (this.node.getChildByName("bg").width = cc.winSize.width);
        window.onresize = function() {
          cc.log("\u5c4f\u5e55size\u53d8\u52a8", cc.winSize);
        };
      },
      setNextSceneInfo: function setNextSceneInfo(sceneName, gameId) {
        nextScene = sceneName;
        null != gameId && (_nextSceneGameId = gameId);
      },
      intoNextScene: function intoNextScene() {
        if (null == nextScene) return;
        if (!(dataLogic.doneTimeSync && dataLogic.IOState && dataLogic.isCheckRecover)) {
          cc.log("\u6682\u65f6\u4e0d\u80fd\u8fdb\u5165\u4e0b\u4e00\u4e2a\u573a\u666f", dataLogic.doneTimeSync, dataLogic.IOState, dataLogic.isCheckRecover);
          return;
        }
        if (!dataLogic.doneSelectRoomConfigSync && nextScene != constant.SceneName.Login && nextScene != constant.SceneName.Hall && nextScene != constant.SceneName.BaseGame && nextScene != constant.SceneName.BonusGame) {
          cc.log("\u6ca1\u6709\u9009\u623f\u6570\u636e\uff0c\u6682\u65f6\u4e0d\u80fd\u8fdb\u5165\u4e0b\u4e00\u4e2a\u573a\u666f");
          return;
        }
        this.sceneName != nextScene && this.loadScene(nextScene, _nextSceneGameId);
      },
      loadScene: function loadScene(sceneName, gameId) {
        var _this2 = this;
        if (loadingScene) {
          cc.log("------\u5df2\u7ecf\u5728\u52a0\u8f7d\u573a\u666f\u4e86------");
          return;
        }
        nextScene = sceneName;
        if (sceneName != constant.SceneName.Login && (!dataLogic.doneTimeSync || !dataLogic.IOState || !dataLogic.isCheckRecover || !dataLogic.doneGameListSyne && sceneName == constant.SceneName.Hall)) {
          cc.log("\u6682\u65f6\u4e0d\u80fd\u8fdb\u5165\u4e0b\u4e00\u4e2a\u573a\u666f, \u540c\u6b65\u670d\u52a1\u5668\u65f6\u95f4 \uff1a" + dataLogic.doneTimeSync + ", socket\u72b6\u6001\uff1a " + dataLogic.IOState + ", \n\t\t\t\t\u68c0\u67e5\u6e38\u620f\u6062\u590d\uff1a" + dataLogic.isCheckRecover + ", \u5927\u5385\u6e38\u620f\u5217\u8868\uff1a" + dataLogic.doneGameListSyne);
          return;
        }
        dataLogic.setLoadSceneTimeout(false);
        nextScene = null;
        this.loadSceneFrontDispose && this.loadSceneFrontDispose();
        var loadSceneRelevantRes = function loadSceneRelevantRes() {
          loadingScene = true;
          _this2.loadSceneRelevantRes(sceneName, function() {
            clientEvent.unregisterAllEvent();
            kf.killObj(_this2.loadToast);
            _this2.loadToast = null;
            _this2.switchSceneFrontDispose && _this2.switchSceneFrontDispose();
            null != gameId && dataLogic.setCurGameId(gameId);
            cc.director.loadScene(sceneName);
          }, true, gameId);
        };
        this.checkUpgrade && dataLogic.needRecover ? this.checkUpgrade(gameId, loadSceneRelevantRes) : loadSceneRelevantRes();
      },
      loadSceneRelevantRes: function loadSceneRelevantRes(sceneName, allLoadDoneCb) {
        var _this3 = this;
        var needLoadToast = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        var gameId = arguments[3];
        if (needLoadToast && !this.loadToast) {
          var arg = {
            type: constant.ToastType.Loading
          };
          this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        }
        this.loadToast && this.loadToast.parent && (this.loadToast.getChildByName("txt").getComponent(cc.Label).string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...1%");
        null == gameId && (gameId = dataLogic.getGameIdBySceneName(sceneName));
        sceneName != constant.SceneName.BaseGame && sceneName != constant.SceneName.BonusGame || (gameId = constant.GameId.King);
        var resList = gameMgr.getSceneResList(sceneName, gameId);
        var isPreloadScene = false;
        var resDoneCb = null;
        var _allLoadDoneFunc = null;
        var loadTimeoutFunc = null;
        var progress = .01;
        if (allLoadDoneCb) {
          this.isLoadTimeout = false;
          loadTimeoutFunc = setTimeout(function() {
            dataLogic.setLoadSceneTimeout(true);
            _this3.isLoadTimeout = true;
            kf.killObj(_this3.loadToast);
            _this3.globalNotice && kf.killObj(_this3.globalNotice);
            _this3.loadToast = null;
            if (dataLogic.needRecover) {
              cc.log("\u8d44\u6e90\u52a0\u8f7d\u8d85\u65f6");
              _this3.showRefreshToast();
            } else _this3.showLoadTimeoutToast();
            loadingScene = false;
          }, 3e4);
          _allLoadDoneFunc = function allLoadDoneFunc() {
            _this3.unschedule(falseLoadProcess);
            if (_this3.isLoadTimeout) return;
            null != loadTimeoutFunc && clearTimeout(loadTimeoutFunc);
            allLoadDoneCb && allLoadDoneCb();
            _allLoadDoneFunc = null;
          };
          resDoneCb = function resDoneCb() {
            if (_this3.isLoadTimeout) return;
            progress = 1;
            isPreloadScene && _allLoadDoneFunc && _allLoadDoneFunc();
          };
        }
        var resLoadTimeLimit = 2e4;
        var resLoadTimeoutCb = function resLoadTimeoutCb() {
          _this3.isLoadTimeout || resMgr.loadRes(resList, resDoneCb, resLoadTimeLimit, resLoadTimeoutCb);
        };
        var falseLoadProcess = function falseLoadProcess() {
          if (!_this3.loadToast || progress >= 1) return;
          progress += .01;
          _this3.loadToast.getChildByName("txt").getComponent(cc.Label).string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + Math.floor(100 * progress) + "%";
          cc.log("\u8bbe\u7f6e\u5047\u5047\u5047\u5047\u5047\u8fdb\u5ea6", 100 * progress);
        };
        if (needLoadToast) {
          falseLoadProcess();
          this.schedule(falseLoadProcess, .2, 100 / resList.length);
        }
        var resLoadProcessCb = function resLoadProcessCb(progressVal) {
          if (progressVal < progress) return;
          if (_this3.loadToast && progressVal) {
            progress = progressVal * (resList.length / (resList.length + 1));
            progress > 1 && (progress = 1);
            _this3.loadToast.getChildByName("txt").getComponent(cc.Label).string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + Math.floor(100 * progress) + "%";
            _this3.unschedule(falseLoadProcess);
            progress < 1 && _this3.schedule(falseLoadProcess, .2, 100 / resList.length);
          }
        };
        resList.length > 0 ? resMgr.loadRes(resList, resDoneCb, resLoadTimeLimit, resLoadTimeoutCb, null, needLoadToast && resLoadProcessCb) : resDoneCb && resDoneCb();
        cc.log("sceneName===========", sceneName);
        cc.director.preloadScene(sceneName, function() {
          isPreloadScene = true;
          if (needLoadToast) {
            progress += 1 / (resList.length + 1);
            progress > 1 && (progress = 1);
            _this3.unschedule(falseLoadProcess);
            1 == progress ? _allLoadDoneFunc && _allLoadDoneFunc() : _this3.schedule(falseLoadProcess, .2, 100 / resList.length);
          }
        });
      },
      socketDisconnect: function socketDisconnect() {
        this.netDisconnect && this.netDisconnect();
        cc.log("socket\u65ad\u4e86");
        if (cc.sys.isNative) ; else {
          var splash = document.getElementById("splash");
          if ("block" == splash.style.display) {
            this.showLayerTip("\u65e0\u6cd5\u8fde\u63a5websocket,\u7cfb\u7edf\u5c06\u81ea\u52a8\u91cd\u542f\u5e94\u7528");
            this.scheduleOnce(function() {
              cc.game.restart();
            }, 2);
          }
        }
        if (dataLogic.needRecover) {
          var arg = {
            type: constant.ToastType.InGameDisconnect
          };
          kf.getObj(constant.PoolId.ToastInGameDisconnect, this.toastLayer[4], this.toastInGameDisconnectPf, arg);
        }
      },
      IOConnect: function IOConnect() {
        cc.log("socket\u94fe\u63a5\u6210\u529f", nextScene);
        dataLogic.setIOState(true);
        this.intoNextScene();
      },
      reconnect: function reconnect() {
        cc.log("-----socket\u65ad\u7ebf\u91cd\u8fde\u6210\u529f", dataLogic.needRecover);
        if (dataLogic.needRecover) {
          this.doneGameRecover = false;
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
        }
        this.killAllToast();
      },
      socketMsg: function socketMsg(msg) {
        var data = void 0;
        try {
          data = JSON.parse(msg);
        } catch (e) {
          cc.log(msg, e.name + ": " + e.message);
          return;
        }
        cc.log("socketMsg", data);
        if (dataLogic.reqRecovering) {
          _recoveringMsgId = data.msgId;
          cc.log("\u6b63\u5728\u8bf7\u6c42\u6e38\u620f\u6062\u590d\u6570\u636e\uff0c\u4e0d\u5904\u7406socket\u6d88\u606f", _recoveringMsgId);
          return;
        }
        if (data.deskId != dataLogic.roomConfig.deskId) {
          cc.log("\u5f53\u524d\u6d88\u606f\u4e0d\u5904\u7406", data, "\u670d\u52a1\u7aefdeskId", data.deskId, "\u5ba2\u6237\u7aefdeskId", dataLogic.roomConfig.deskId);
          return;
        }
        if (1 != data.msgId && Number(data.msgId) != dataLogic.msgId + 1) {
          cc.log("\u670d\u52a1\u7aef\u6d88\u606fmsgId", data.msgId, "\u5ba2\u6237\u7aef\u6d88\u606fmsgId", dataLogic.msgId);
          this.setMatchingToastView && this.setMatchingToastView(false);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
          return;
        }
        dataLogic.setMsgId(data.msgId);
        clientEvent.dispatchEvent(data.eventName, data);
      },
      httpCbRepeater: function httpCbRepeater(msg, cb, reqArg) {
        constant.HttpCode.JumpToGoogle == msg.Code && (cc.sys.isNative || (window.location.href = "https://www.google.com"));
        if (constant.HttpCode.Disconnect == msg.Code) {
          if (dataLogic.isPlaying && !this.toastLayer[4].getChildByName("toastInGameDisconnect")) {
            var arg = {
              type: constant.ToastType.InGameDisconnect
            };
            kf.getObj(constant.PoolId.ToastInGameDisconnect, this.toastLayer[4], this.toastInGameDisconnectPf, arg);
          } else if (!dataLogic.isPlaying && !this.getToast(constant.ToastType.Hint, 4)) {
            this.showOutsideGameDisconnectToast();
            this.initMatchingView && !dataLogic.isFriendRoom && this.initMatchingView(false);
          }
        } else if (constant.HttpCode.error != msg.Code && constant.HttpCode.GameOver != msg.Code && constant.HttpCode.NotCommand != msg.Code || this.toastLayer[4].getChildByName("toastRequestError")) {
          if (constant.HttpCode.Timeout == msg.Code) if (msg.needRefresh) this.showRefreshToast(); else {
            var _arg3 = {
              type: constant.ToastType.RequestError,
              extend: {
                hintStr: msg.StrCode
              }
            };
            kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg3);
          }
        } else if (msg.isLightHint) this.showLayerTip(msg.StrCode, msg.hintPos); else if (!dataLogic.isFriendRoom) {
          var _arg2 = {
            type: constant.ToastType.RequestError,
            extend: {
              hintStr: msg.StrCode
            }
          };
          kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, _arg2);
        }
        switch (msg.Code) {
         case constant.HttpCode.LoginOut:
          cc.log("\u7528\u6237\u5df2\u767b\u51fa");
          if (!dataLogic.doneLogin) break;
          dataLogic.loginOut();
          this.showLoginOutToast(msg.StrCode);
          this.setMatchingToastView && this.setMatchingToastView(false);
          return;
        }
        if ("gameRecoverCb" == cb.eventName) if (msg.Code == constant.HttpCode.Succeed) {
          if (msg.Data.msgId < _recoveringMsgId) {
            _recoveringMsgId = 0;
            cc.log("\u4e0d\u662f\u6700\u65b0\u7684\u6570\u636e,\u91cd\u65b0\u8bf7\u6c42\u6e38\u620f\u6062\u590d\u6570\u636e", msg);
            http.post(constant.PostRecover, "gameRecoverCb");
            return;
          }
        } else _recoveringMsgId = 0;
        if (cb && cb.eventName) if (reqArg && "GetInitData" == reqArg.action) if (1 === msg.Code || 0 === msg.Code) {
          var _data = kf.clone(msg);
          var Data = this.SetFilter(_data.BackData);
          this.SaveInitData(Data);
          "{}" !== JSON.stringify(_data.CacheData) && cc.sys.localStorage.setItem("CacheData", JSON.stringify(Object.assign(dataLogic.CacheData, _data.CacheData)));
          var _Requirement = JSON.parse(reqArg.Requirement);
          var _BackData = {};
          for (var i in _Requirement) _BackData[_Requirement[i]] = dataLogic.storeObj[_Requirement[i]];
          clientEvent.dispatchEvent(cb.eventName, {
            Code: msg.Code,
            BackData: _BackData
          }, cb.arg);
        } else clientEvent.dispatchEvent(cb.eventName, msg, cb.arg); else clientEvent.dispatchEvent(cb.eventName, msg, cb.arg);
      },
      createBindPhoneDialog: function createBindPhoneDialog(hintStr, succeedCb) {
        var _this4 = this;
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/bindAndCheckPhoneNum",
          js: "bindAndCheckPhoneNum",
          initArg: {
            isBindPhoneNum: true,
            doneCb: function doneCb(phoneNum, hintStr) {
              dataLogic.setUserPhoneNum(phoneNum);
              _this4.showLayerTip(hintStr);
              succeedCb && succeedCb();
            },
            isFirstBind: true,
            hintStr: hintStr || "\u60a8\u5f53\u524d\u4e3a\u6e38\u5ba2\u8d26\u53f7\uff0c\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u53f7\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\u54e6\uff01"
          }
        });
      },
      SetFilter: function SetFilter(data) {
        if (!data) return;
        (function(s) {
          s;
        })(data.SiteConfig);
        data.Announcements && data.Announcements.length && data.Announcements.length > 5 && (data.Announcements.length = 5);
        if (data.GradeList && data.GradeList.length) {
          data.levelName = [];
          for (var i = data.GradeList.length - 1; i >= 0; i--) {
            data.GradeList[i].Grade = Number(data.GradeList[i].Grade);
            data.GradeList[i].GradeGrow = Number(data.GradeList[i].GradeGrow);
            data.GradeList[i].Bonus = Number(data.GradeList[i].Bonus);
            data.GradeList[i].JumpBonus = Number(data.GradeList[i].JumpBonus);
            data.levelName.unshift(data.GradeList[i].GradeName);
          }
        }
        (function(a) {
          if (!a) return;
          for (var i = a.length - 1; i >= 0; i--) "object" == _typeof(a[i].Img) && (a[i].Img = a[i].Img && a[i].Img[0]);
        })(data.OtherActivity);
        return data;
      },
      SaveInitData: function SaveInitData(Data) {
        for (var k in Data) {
          dataLogic.storeObj[k] = Data[k];
          if (dataLogic.CacheArr.indexOf(k) + 1) {
            null === Data[k] ? dataLogic.storeObj[k] = Data[k] = "" : "object" == _typeof(Data[k]) && (Data[k] = JSON.stringify(Data[k]));
            cc.sys.localStorage.setItem(k, Data[k]);
          }
        }
      },
      killAllToast: function killAllToast() {
        var toasts = void 0;
        for (var j in this.toastLayer) {
          toasts = this.toastLayer[j].children;
          for (var i = 0; i < toasts.length; i++) toasts[i].isToast && !toasts[i].onlyManualClose && kf.killObj(toasts[i]);
        }
      },
      killToast: function killToast(toastType) {
        var toasts = void 0;
        for (var j in this.toastLayer) {
          toasts = this.toastLayer[j].children;
          for (var i = 0; i < toasts.length; i++) toasts[i].toastType == toastType && kf.killObj(toasts[i]);
        }
      },
      releaseRes: function releaseRes() {
        if (dataLogic.playedGameIdList.length > constant.MaxGameResNum) {
          var gameId = dataLogic.playedGameIdList[0];
          dataLogic.delPlayedGameIdList(0);
          this.releaseGameRes(gameId);
        }
      },
      releaseGameRes: function releaseGameRes(gameId) {
        var list = constant.GameRes[gameId], release = void 0;
        var curUseResList = [];
        var gameList = dataLogic.playedGameIdList;
        for (var i = 0; i < gameList.length; i++) if (gameId != gameList[i]) for (var j = 0; j < constant.GameRes[gameList[i]].length; j++) curUseResList.push(constant.GameRes[gameList[i]][j]);
        if (!list) return;
        for (var _i = 0; _i < list.length; _i++) {
          if (list[_i].notRelease) continue;
          release = true;
          for (var _j = 0; _j < curUseResList.length; _j++) if (list[_i].path == curUseResList[_j].path || "font" == list[_i].path) {
            release = false;
            break;
          }
          if (release) if ("dir" == list[_i].resType) cc.loader.releaseResDir(list[_i].path); else {
            "" !== list[_i].resType && list[_i].resType !== cc.Prefab && cc.loader.releaseRes(list[_i].path, list[_i].resType);
            cc.loader.release(list[_i].path);
          }
        }
      },
      showLayerTip: function showLayerTip(str) {
        var pos = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.layerTipPos;
        var isAutoHide = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        var isListeningClick = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3];
        var layerMsg_node = kf.getObj(constant.PoolId.layerMsg, this.toastLayer[0], this.layerMsgPf);
        layerMsg_node.position = pos;
        layerMsg_node.getComponent("layerMsg").layerTip(str, isAutoHide, isListeningClick);
      },
      toastShow: function toastShow(node) {
        node.active = true;
        node.getChildByName("toastMain").opacity = 0;
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(0, 0), cc.scaleTo(.2, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        node.getChildByName("toastMain").runAction(seq);
      },
      toastHide: function toastHide(node) {
        var seq1 = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0));
        node.getChildByName("toastMain").runAction(seq1);
        this.scheduleOnce(function() {
          node.active = false;
        }, .05);
      },
      showLoginOutToast: function showLoginOutToast() {
        var str = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u60a8\u5df2\u6389\u7ebf\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55";
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: str,
            btnEventName: [ null, "gotoLogin" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      showRechargeToast: function showRechargeToast(minBet, isInGame) {
        var arg = void 0;
        arg = isInGame ? {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5728\u8be5\u623f\u95f4\u7ee7\u7eed\u6e38\u620f\uff0c\u662f\u5426\u7acb\u5373\u5145\u503c",
            btnEventName: [ "toastClose", "gotoRecharge" ],
            btnTxt: [ "\u53d6\u6d88", "\u5145\u503c" ]
          }
        } : {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u60a8\u7684\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8fdb\u5165\u8be5\u623f\u95f4\uff0c\u662f\u5426\u7acb\u5373\u5145\u503c",
            btnEventName: [ "toastClose", "gotoRecharge" ],
            btnTxt: [ "\u53d6\u6d88", "\u5145\u503c" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[1], this.pfToastHint, arg);
      },
      showLoadTimeoutToast: function showLoadTimeoutToast() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u52a0\u8f7d\u8d85\u65f6\uff0c\u5f85\u4f1a\u518d\u8bd5\u770b\u770b\u54e6",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      showConnectTimeoutToast: function showConnectTimeoutToast() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u65e0\u6cd5\u8fde\u63a5\u7f51\u7edc\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u540e\u91cd\u8bd5",
            btnEventName: [ null, "reconnect" ],
            btnTxt: [ null, "\u91cd\u8bd5" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[3], this.pfToastHint, arg);
      },
      showOutsideGameDisconnectToast: function showOutsideGameDisconnectToast() {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: "\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u7ed9\u529b\uff0c\u8bf7\u68c0\u67e5",
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      showExitGameToast: function showExitGameToast(hintStr) {
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintStr,
            btnEventName: [ null, "toastClose" ],
            btnTxt: [ null, "\u786e\u5b9a" ]
          }
        };
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[4], this.pfToastHint, arg);
      },
      cancelRefreshToastShow: function cancelRefreshToastShow() {
        this.toastLayer[4].stopAllActions();
      },
      showRefreshToast: function showRefreshToast() {
        var hintTxt = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "\u52a0\u8f7d\u8d85\u65f6\uff0c\u91cd\u542f\u8bd5\u4e0b\u5427";
        var _this5 = this;
        var zOrder = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 4;
        var delayTime = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
        if (kf.getPoolSize(constant.PoolId.ToastHint) < 1) return;
        var arg = {
          type: constant.ToastType.Hint,
          extend: {
            contentTxt: hintTxt,
            btnEventName: [ null, "refresh" ],
            btnTxt: [ null, "\u91cd\u542f" ]
          }
        };
        0 == delayTime ? this.showHintToast(arg, zOrder) : this.toastLayer[4].runAction(cc.sequence(cc.delayTime(delayTime), cc.callFunc(function() {
          _this5.showHintToast(arg, zOrder);
        })));
      },
      showHintToast: function showHintToast(arg, zOrder) {
        kf.getObj(constant.PoolId.ToastHint, this.toastLayer[zOrder], this.pfToastHint, arg);
      },
      showLayerToast: function showLayerToast(arg, zOrder) {
        var _arg = {
          type: constant.ToastType.Hint,
          extend: arg
        };
        this.showHintToast(_arg, zOrder);
      },
      getToast: function getToast(toastType, toastZorder) {
        if (null == toastZorder) {
          var toasts = void 0;
          for (var j in this.toastLayer) {
            toasts = this.toastLayer[j].children;
            for (var i = 0; i < toasts.length; i++) if (toasts[i].isToast && toastType == toasts[i].toastType) return toasts[i];
          }
        } else {
          var _toasts = this.toastLayer[toastZorder].children;
          for (var _i2 = 0; _i2 < _toasts.length; _i2++) if (_toasts[_i2].isToast && toastType == _toasts[_i2].toastType) return _toasts[_i2];
        }
        return false;
      },
      showReqErrorToast: function showReqErrorToast(hintStr) {
        var arg = {
          type: constant.ToastType.RequestError,
          extend: {
            hintStr: hintStr
          }
        };
        kf.getObj(constant.PoolId.ToastRequestError, this.toastLayer[4], this.toastRequestErrorPf, arg);
      },
      reqDateAndShowLoadView: function reqDateAndShowLoadView(reqArg, cbEventName, cbArg) {
        var needLoadMask = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
        var loadIconPos = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : this.loadIconPos;
        this.showLoadView(needLoadMask, loadIconPos);
        this.reqData(reqArg, cbEventName, cbArg);
      },
      reqData: function reqData(reqArg, cbEventName, cbArg) {
        reqArg.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false,
          isLightHint: true
        };
        http.post(reqArg, cbEventName, cbArg);
      },
      showLoadView: function showLoadView() {
        var needLoadMask = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        var loadIconPos = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : cc.v2(0, 0);
        cc.log("\u663e\u793a\u52a0\u8f7d\u89c6\u56fe", needLoadMask);
        if (needLoadMask) {
          this.loadMask.getComponent(cc.BlockInputEvents).enabled = true;
          this.loadMask.opacity = 153;
          this.loadIcon.x = 0;
          this.loadIcon.y = 0;
        } else this.loadIcon.position = loadIconPos;
        this.loadIcon.opacity = 255;
        this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
      },
      hideLoadView: function hideLoadView() {
        cc.log("\u9690\u85cf\u52a0\u8f7d\u89c6\u56fe");
        this.loadMask.opacity = 0;
        this.loadMask.getComponent(cc.BlockInputEvents).enabled = false;
        this.loadIcon.stopAllActions();
        this.loadIcon.opacity = 0;
      }
    });
    cc._RF.pop();
  }, {} ],
  seeThreeCattleHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "80c2a/wiv1KV6cbQ1AxYDTD", "seeThreeCattleHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {
        bg: cc.Sprite,
        acSeeThreeBg: {
          default: null,
          type: cc.AudioClip
        },
        acSeeFourBg: {
          default: null,
          type: cc.AudioClip
        }
      },
      onLoad: function onLoad() {
        this.bg.spriteFrame = new cc.SpriteFrame(resMgr.bgTexture);
        dataLogic.curGameId == constant.GameId.SeeThreeCattle ? this.bgAudio = this.acSeeThreeBg : this.bgAudio = this.acSeeFourBg;
        this.baseInit(dataLogic.curGameId);
      },
      setGameNameSf: function setGameNameSf() {
        this.gameNameIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(resMgr.gameNameTexture);
        this.sFGameName = this.gameNameIcon.getComponent(cc.Sprite).spriteFrame;
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "cattle/table", "card", "cattle/cow", "cattle/effect/cow/cattle_paixing_di1", "cattle/ui/zhuang", "cattle/effect/start/cattle_start_di_00008" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  seeThreeCattle: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "30103KPUGJJOLKlfPoREznH", "seeThreeCattle");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _seeN = 3;
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        table: cc.Sprite,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        cardTypeView: cc.Node,
        betNum: cc.Node,
        roomNum: cc.Node,
        cardBoxP: cc.Node,
        cardBox: [ cc.Node ],
        backCardPf: cc.Prefab,
        dispenseCardNode: cc.Node,
        openCardBox: cc.Node,
        pokersSf: cc.SpriteFrame,
        pinPai: cc.Node,
        pinPaiLabel: [ cc.Label ],
        pinWarnErr: cc.Node,
        haveNiu: cc.Node,
        nullNiu: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        villageMultiple: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        grab: cc.Node,
        grabBtn: [ cc.Button ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        villageIcon: cc.Node,
        villageBgBox: cc.Node,
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        gameStartAnim: cc.Node,
        tongChiAnim: cc.Node,
        tongPeiAnim: cc.Node,
        winAnim: cc.Node,
        isCow: [ cc.Node ],
        cowAnimPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        isNiuAtlas: cc.SpriteAtlas,
        cowBgAudio: {
          default: null,
          type: cc.AudioClip
        },
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        femaleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        pinError: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        clickPoker: {
          default: null,
          type: cc.AudioClip
        },
        upturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        },
        acSeeThreeBg: {
          default: null,
          type: cc.AudioClip
        },
        acSeeFourBg: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "onVillage", this.onVillage.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "village", this.village.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        cc.log("--------\u5f53\u524d\u6e38\u620fId-----------", dataLogic.curGameId);
        _seeN = dataLogic.curGameId == constant.GameId.SeeThreeCattle ? 3 : 4;
        this.gameBg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(resMgr.bgTexture);
        this.bgAudio = 3 == _seeN ? this.acSeeThreeBg : this.acSeeFourBg;
        this.baseInit(dataLogic.curGameId);
        dataLogic.setLimitPlayerNum(4);
        this.registerEvent();
        this.backCard = [];
        this.clearOtherPlayer();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        this.clickBind();
        var isCheck = cc.sys.localStorage.getItem("seeThreeCattleAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        for (var i = 0; i < 20; i++) {
          this.backCard[i] = cc.instantiate(this.backCardPf);
          this.backCard[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.backCard[i].parent = this.dispenseCardNode;
          this.backCard[i].opacity = 0;
        }
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(dataLogic.curGameId);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + selRoomKey);
        this.setBetNumState();
        var playerPos = [ {
          x: -23,
          y: -165
        }, {
          x: 155,
          y: 78
        }, {
          x: 228,
          y: 92
        }, {
          x: -155,
          y: 74
        } ];
        for (var _i = 0; _i < this.player.length; _i++) {
          this.player[_i].playerPos = playerPos[_i];
          this.bindLongTouchEvent(this.player[_i]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.roomNum.x + this.roomNum.width + 20);
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.pinWarnErr.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        this.villageBgBox.stopAllActions();
        for (var i = 0; i < this.pokers.length; i++) {
          for (var j = 0; j < this.pokers[i].childrenCount; j++) {
            this.pokers[i].children[j].stopAllActions();
            i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
          }
          this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
        }
        for (var _j = 0; _j < 20; _j++) this.backCard[_j].opacity = 0;
      },
      gameShow: function gameShow() {
        var UISeatId = void 0;
        cc.log("this.progress", this.progress);
        this.unscheduleAllCallbacks();
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        if (this.progress >= 1) for (var i = 0; i < this.pokers.length; i++) {
          if (!this.player[i].active) continue;
          this.initCards(i);
          this.showMyPorkers(this.gameStartData);
        }
        if (this.progress >= 2) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.getVillage(this.confirmVillage);
          2 == this.progress && this.showVillageCallFun(UISeatId);
          if (this.progress >= 3) {
            for (var _i2 = 0; _i2 < this.pokers.length; _i2++) {
              if (!this.player[_i2].active) continue;
              this.initCards(_i2, 1);
            }
            for (var k = 0; k < this.openCardsArr.length; k++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(k);
              if (this.openCardsArr[k].length > 0) {
                if (k == constant.SelfUISeatId) {
                  this.openCardBox.active = false;
                  this.initCards(0);
                }
                for (var j = 0; j < this.pokers[UISeatId].childrenCount; j++) this.pokers[UISeatId].children[j].x = 50 * (j - 2);
                this.setPlayerHandCard(UISeatId, this.openCardsArr[k]);
                var niuNum = this.showPokers(UISeatId, this.openCardsArr[k]);
                this.isCow[UISeatId].active = true;
                this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
                this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
              } else if (dataLogic.isFriendRoom) ; else if (k == constant.SelfUISeatId) {
                this.pokers[k].active = false;
                this.openCardBox.active = true;
                var seatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
                this.showMyRemainPorkers(this.onBetData, seatId);
              }
            }
            if (this.progress > 3) {
              this.reciprocal.active = false;
              if (this.isResultAnim) if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
                this.matchBtn.active = true;
                this.autoMatch.active = true;
              }
              return;
            }
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          if (!dataLogic.isOnlooker()) {
            if (1 == this.progress && newDate > 0) {
              this.isVillage || (this.grab.active = true);
              this.wait.active = true;
              this.showMyPorkers(this.gameStartData);
            }
            if (2 == this.progress && newDate > 0) {
              this.isBet || (this.multiple.active = true);
              this.wait.active = true;
            }
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      initCards: function initCards(UISeatId, index) {
        UISeatId != constant.SelfUISeatId && (this.pokers[UISeatId].active = true);
        if (index) for (var l = 0; l < 5; l++) {
          this.pokers[UISeatId].children[l].active = true;
          this.pokers[UISeatId].children[l].x = 50 * (l - 2);
        } else for (var _l = 0; _l < _seeN; _l++) {
          this.pokers[UISeatId].children[_l].active = true;
          this.pokers[UISeatId].children[_l].x = 50 * (_l - 2);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        cc.log("\u5339\u914ding");
        this.clearOtherPlayer();
        this.total = 0;
        var roomKey = dataLogic.curRoomKey;
        cConstant.SeeThreePostMatching.roomId = dataLogic.curGameId + roomKey;
        http.post(cConstant.SeeThreePostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.initMatchingView(true, false);
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        if (-4 == msg.Code) {
          cc.log("msg.Code", msg.Code);
          this.initMatchingView(false);
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCencel) {
        cc.log("show", show);
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCencel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setSelfSeatId(data.Data.seatId);
          dataLogic.setDeskId(data.Data.deskId);
        }
        this.setMatchingToastUI(true);
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.setMatchingToastView(false);
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
          constant.HttpCode.GameOver == msg.Code && dataLogic.setReqRecoverState(false);
          return;
        }
        this.onGameRecover(msg.Data);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
        if (0 == msg.state) {
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerInfo(msg);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            this.initMatchingView(true, true);
          }
          return;
        }
        this.setMatchingToastView(false);
        var playerInfo = kf.clone(msg.playerInfo), UISeatId = void 0;
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        this.playerInfo = playerInfo;
        if (4 == msg.state) {
          dataLogic.gameEnd();
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          for (var k = 0; k < playerInfo.length; k++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[k].seatId);
            UISeatId == constant.SelfUISeatId && this.setPlayerBalance(UISeatId, playerInfo[k].balance);
          }
          return;
        }
        dataLogic.matching();
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        this.setAllPlayerInfo(msg, remainingTime);
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        this.confirmVillage = msg.isVillage;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        cDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        this.updateTips();
      },
      playerLeave: function playerLeave(seatId) {
        cc.log("\u6e05\u7406\u73a9\u5bb6UI");
        if (seatId == this.confirmVillage) {
          this.villageIcon.y = 1e4;
          this.villageBgBox.y = 1e4;
        }
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        this.hidePlayer(UISeatId);
      },
      hidePlayer: function hidePlayer(i) {
        this.multipleTxt[i].string = "";
        this.villageMultiple[i].string = "";
        this.player[i].getChildByName("pokers").active = false;
        this.getBetTxt[i].string = "";
        if (0 != i) {
          this.player[i].active = false;
          this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
          this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
        }
        for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
        for (var j = 0; j < 5; j++) {
          this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
        }
        if (i != constant.SelfUISeatId) for (var k = 0; k < this.pokers[i].childrenCount; k++) {
          this.pokers[i].children[k].active = false;
          this.cardBox[k].active = false;
        }
        this.isCow[i].active = false;
        this.isCow[i].getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[i].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId, isNewJoin) {
        this.player[UISeatId].active = true;
        this.player[UISeatId].userId = info.userId;
        this.player[UISeatId].getChildByName("bg").active = true;
        UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = info.nickName);
        this.setPlayerBalance(UISeatId, info.balance);
        this.balanceArr = this.balanceArr.concat(info.balance);
        var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(info.headUrl, avatarSp);
      },
      setAllPlayerInfo: function setAllPlayerInfo(msg, remainingTime) {
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(msg.playerInfo);
        var playerInfo = dataLogic.playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          cc.log("UISeatId---", UISeatId);
          if (null == playerInfo[i].headUrl) continue;
          this.setPlayerInfo(playerInfo[i], UISeatId);
          cc.log("dataLogic.isOnlooker", i, dataLogic.isOnlooker(i));
          if (0 == msg.state || dataLogic.isOnlooker(i)) continue;
          dataLogic.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Gaming);
          if (1 == msg.state) if (-1 == playerInfo[i].state) {
            if (UISeatId == constant.SelfUISeatId) {
              this.isVillage = false;
              this.grab.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
              cDataLogic.setVillageMul(msg.robMultiples[i]);
              this.initQzMultipleBtn();
            }
          } else {
            this.isVillage = true;
            0 == playerInfo[i].state ? this.villageMultiple[UISeatId].string = "\u4e0d\u62a2" : this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
          }
          if (msg.state >= 2) if (i == msg.isVillage) {
            this.multipleTxt[UISeatId].string = "";
            this.villageMultiple[UISeatId].string = "\u62a2" + playerInfo[i].state + "\u500d";
            if (UISeatId == constant.SelfUISeatId && 2 == msg.state) {
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
            }
          } else if (playerInfo[i].betMultiple < 0 && UISeatId == cDataLogic.selfSeatId) {
            if (2 == msg.state) {
              dataLogic.setRoomConfig("betConfig", msg.multiples[i]);
              this.betMultipleBtn();
              this.isBet = false;
              this.multiple.active = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
            }
          } else if (playerInfo[i].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d";
          }
          if (msg.state > 0) {
            UISeatId == constant.SelfUISeatId ? this.pokers[UISeatId].active = false : this.pokers[UISeatId].active = true;
            this.setSendCard(UISeatId, msg, _seeN);
            this.gameStartData = msg;
          }
          if (3 == msg.state) {
            cc.log("remainingTime", remainingTime);
            var cards = msg.cards[i];
            if (remainingTime > 0) if (UISeatId == constant.SelfUISeatId) if (playerInfo[i].isComplete) {
              this.openCardBox.active = false;
              this.isOpenCard = true;
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.showMyRemainPorkers(msg, i);
              this.isOpenCard = false;
              this.openCardBox.active = true;
              this.pokers[UISeatId].active = false;
            } else if (playerInfo[i].isComplete) {
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else this.setSendCard(UISeatId, msg, 5); else {
              if (playerInfo[i].isComplete) {
                this.upturnCards(i, cards, true);
                this.isOpenState[UISeatId] = true;
              }
              this.openCardBox.active = false;
              this.pokers[UISeatId].active = true;
            }
          }
        }
        this.initAllPlayerReadyStateUI();
      },
      setSendCard: function setSendCard(UISeatId, msg, len) {
        var endPos = this.getHandCardPos(UISeatId);
        for (var j = 0; j < len; j++) {
          var key = 5 * UISeatId + j;
          this.backCard[key].opacity = 255;
          if (UISeatId === constant.SelfUISeatId) {
            this.showMyPorkers(msg);
            this.backCard[key].scale = .92;
            this.backCard[key].x = endPos.x + 129 * j * .9;
            this.backCard[key].y = endPos.y;
          } else {
            this.backCard[key].scale = .72;
            this.backCard[key].x = endPos.x + 50 * j * .72;
            this.backCard[key].y = endPos.y;
          }
        }
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        dataLogic.matching();
        if (dataLogic.isFriendRoom) {
          this.gameStartCommonHandle();
          this.updateTips();
          this.clearOtherPlayer();
        }
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        var playerInfo = msgData.playerInfo, UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) playerInfo[i].seatId = i;
        for (var _i3 = 0; _i3 < playerInfo.length; _i3++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[_i3].seatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i3].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i3].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[_i3].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i3].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i3].headUrl, avatarSp);
          if (UISeatId == constant.SelfUISeatId) {
            balance = playerInfo[_i3].balance;
            cDataLogic.setVillageMul(msgData.robMultiples[_i3]);
            this.initQzMultipleBtn();
          }
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        this.gameStartData = msgData;
        if (dataLogic.isHide) {
          this.showMyPorkers(msgData);
          this.firstDispenseCardAction();
        } else this.scheduleOnce(function() {
          var firstShowPokerTime = _this.firstDispenseCardAction();
          cc.log("firstShowPokerTime", firstShowPokerTime);
          _this.node.runAction(cc.sequence(cc.delayTime(firstShowPokerTime), cc.callFunc(function() {
            _this.grab.active = true;
            _this.wait.active = true;
            _this.showMyPorkers(msgData);
            cc.log("\u524d\u53f0\u53d1\u724c");
            _this.countDown(msgData.endTime, 1);
          }, _this)));
        }, 1.5);
      },
      showMyPorkers: function showMyPorkers(msgData) {
        cc.log(msgData, 1222);
        if (dataLogic.isOnlooker()) return;
        this.openCardBox.active = true;
        for (var i = 0; i < _seeN; i++) {
          this.cardBox[i].active = true;
          this.cardBox[i].y = 0;
          this.cardBox[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + msgData.cards[i]);
        }
        this.hidePoker(constant.SelfUISeatId);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        dataLogic.loadNativeAvatar(headUrl, sp);
      },
      firstDispenseCardAction: function firstDispenseCardAction() {
        var startPos = cc.v2(0, 0), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0, seatId = void 0;
        for (var i = 0; i < 4; i++) {
          seatId = dataLogic.getSeatIdByUISeatId(i);
          cc.log(i, "\u53d1\u724c\u662f\u5426\u65c1\u89c2");
          if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
          basecDelay += .1;
          for (var j = 0; j < _seeN; j++) {
            key = 5 * i + j;
            delay = cc.delayTime(.1 * j + basecDelay);
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .55;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(i);
            if (dataLogic.isHide) if (i === constant.SelfUISeatId) {
              this.backCard[key].scale = .92;
              this.backCard[key].x = endPos.x + 129 * j * .9;
              this.backCard[key].y = endPos.y;
            } else {
              this.backCard[key].scale = .72;
              this.backCard[key].x = endPos.x + 50 * j * .72;
              this.backCard[key].y = endPos.y;
            } else {
              move = cc.moveTo(actionTime, endPos);
              if (i === constant.SelfUISeatId) {
                scale = cc.scaleTo(actionTime, .92);
                cardMove = cc.moveTo(.15, endPos.x + 129 * j * .9, endPos.y);
              } else {
                scale = cc.scaleTo(actionTime, .72);
                cardMove = cc.moveTo(.15, endPos.x + 50 * j * .72, endPos.y);
              }
              var fpCallFun = cc.callFunc(function() {
                audioMgr.playEffect(this.sendCard);
              }, this);
              spawn = cc.spawn(move, scale, fpCallFun);
              sequence = cc.sequence(delay, spawn, cardMove);
              this.backCard[key].runAction(sequence);
            }
          }
          showPokerTime = basecDelay + .65;
        }
        return showPokerTime;
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.balanceArr = [];
        this.isVillageNum = 1;
        this.isBetNum = 2;
        this.isVillage = false;
        this.isBet = false;
        this.isOpenCard = false;
        this.firstSend = false;
        this.send = false;
        this.isResultAnim = false;
        this.villageBgBox.x = 1e4;
        this.villageBgBox.y = 1e4;
        this.villageIcon.x = 1e4;
        this.villageIcon.y = 1e4;
        this.openPokers = [];
        this.openCardBox.active = false;
        this.pinPai.active = false;
        this.haveNiu.active = false;
        this.nullNiu.active = false;
        this.grab.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.tongChiAnim.active = false;
        this.tongPeiAnim.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.winTxt.opacity = 0;
        for (var h = 0; h < this.pinPaiLabel.length; h++) this.pinPaiLabel[h].string = "";
        for (var l = 0; l < this.grabBtn.length; l++) this.grabBtn[l].node.active = false;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var i = 0; i < this.player.length; i++) {
          this.multipleTxt[i].string = "";
          this.villageMultiple[i].string = "";
          this.player[i].getChildByName("pokers").active = false;
          this.getBetTxt[i].string = "";
          if (0 != i) {
            this.player[i].active = false;
            this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
            this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
          }
          for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
          for (var j = 0; j < 5; j++) {
            this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
            i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
          }
          if (i != constant.SelfUISeatId) for (var _k = 0; _k < this.pokers[i].childrenCount; _k++) {
            this.pokers[i].children[_k].active = false;
            this.cardBox[_k].active = false;
          }
          this.isCow[i].active = false;
          this.isCow[i].getComponent(cc.Sprite).spriteFrame = "";
          this.isCow[i].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = "";
          this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
        }
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.grab.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.grab.active = false;
            this.multiple.active = false;
            if (dataLogic.isOnlooker()) return;
            switch (type) {
             case 1:
              this.grab.active = false;
              this.isVillage || this.scheduleOnce(function() {
                _this2.postGrabVillage(0);
              }, .1 * mySeatId);
              break;

             case 2:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 3:
              for (var i = 0; i < this.pokers.length; i++) {
                var seatId = dataLogic.getSeatIdByUISeatId(i);
                cc.log("\u5f00\u724c", i, seatId, dataLogic.selfSeatId);
                if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
                this.pokers[i].active || (this.pokers[i].active = true);
              }
              if (!dataLogic.isOnlooker()) for (var j = 0; j < this.pokers[0].childrenCount; j++) this.pokers[0].children[j].active = true;
              this.openCardBox.active = false;
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                _this2.openTheCard();
              }, .3 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      initQzMultipleBtn: function initQzMultipleBtn() {
        var multiple = cDataLogic.qzBtnConfig;
        cc.log("multiple", multiple);
        this.grabBtn[0].node.active = true;
        for (var i = 0; i < multiple.length; i++) if (i < 4 && multiple[i] > 0) {
          this.grabBtn[Number(i) + 1].node.active = true;
          this.grabBtn[Number(i) + 1].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
        }
        this.reviseBtnPosition(multiple, 1);
        this.WaitString.string = "\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570";
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var i = 0; i < multiple.length; i++) if (i < 5 && multiple[i] > 0) {
          this.multipleBtn[i].node.active = true;
          this.multipleBtn[i].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
        }
        this.reviseBtnPosition(multiple, 2);
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      reviseBtnPosition: function reviseBtnPosition(multiple, type) {
        var len = multiple.length;
        if (1 == type) for (var i = 0; i <= len; i++) this.grabBtn[i].node.x = (i - len / 2) * (this.multiplBtnWidth + 22); else for (var _i4 = 0; _i4 < multiple.length; _i4++) this.multipleBtn[_i4].node.x = (_i4 - (len - 1) / 2) * (this.multiplBtnWidth + 22);
      },
      grabVillage: function grabVillage(event, key) {
        this.grab.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postGrabVillage(key);
      },
      postGrabVillage: function postGrabVillage(key) {
        cConstant.PostVillage.villageNum = 0 == key ? key : cDataLogic.qzBtnConfig[key - 1];
        http.post(cConstant.PostVillage, "village");
        this.isVillage = true;
        this.grab.active = false;
        this.isVillageNum < this.playerInfo.length ? this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u62a2\u5e84" : this.wait.active = false;
      },
      village: function village(msgData) {
        if (0 == msgData.Code) return;
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      onVillage: function onVillage(msgData) {
        var _this3 = this;
        this.isVillageNum++;
        var lastVillage = msgData.seatId.toString().split(","), multiple = void 0, UISeatId = void 0;
        multiple = 0 == msgData.villageNum ? "\u4e0d\u62a2" : "\u62a2" + msgData.villageNum + "\u500d";
        for (var i = 0; i < lastVillage.length; i++) if ("" != lastVillage[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastVillage[i]);
          this.villageMultiple[UISeatId].string = multiple;
          this._village.push({
            seatId: lastVillage[i],
            villageNum: msgData.villageNum
          });
        }
        if (void 0 != msgData.confirmVillage) {
          this.progress = 2;
          this.reciprocal.active = false;
          this.grab.active = false;
          this.wait.active = false;
          var seatId = dataLogic.getSeatIdByUISeatId(cDataLogic.selfSeatId);
          if (seatId != msgData.confirmVillage && !dataLogic.isOnlooker()) {
            dataLogic.setRoomConfig("betConfig", msgData.multiples[seatId]);
            this.betMultipleBtn();
          }
          this.confirmVillage = msgData.confirmVillage;
          this.endTime = msgData.endTime;
          UISeatId = dataLogic.getUISeatIdBySeatId(msgData.confirmVillage);
          this.max = msgData.dealerMultiple;
          this.unschedule(this.callback);
          dataLogic.isHide ? this.showVillage() : this.node.runAction(cc.sequence(cc.delayTime(.6), cc.callFunc(function() {
            var delay = _this3.selVillage(msgData.confirmVillage);
            _this3.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(function() {
              this.showVillage();
              audioMgr.playEffect(this.selVillageOver);
            }, _this3)));
          }, this)));
        }
      },
      showVillage: function showVillage() {
        var _this4 = this;
        cc.log("max22", this.max);
        var UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
        this.villageMultiple[UISeatId].string = "\u62a2" + this.max + "\u500d";
        this.getVillage(this.confirmVillage);
        var callFunc = cc.callFunc(function() {
          _this4.showVillageCallFun(UISeatId);
        }, this);
        dataLogic.isHide ? this.showVillageCallFun(UISeatId) : this.node.runAction(cc.sequence(cc.delayTime(.8), callFunc));
      },
      showVillageCallFun: function showVillageCallFun(UISeatId) {
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
        if (!dataLogic.isOnlooker()) {
          this.wait.active = true;
          if (UISeatId != constant.SelfUISeatId) if (this.isBet) this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8"; else {
            this.multiple.active = true;
            this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
          } else this.WaitString.string = "\u8bf7\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8";
        }
        this.countDown(this.endTime, 2);
        cc.log("run callFunc");
      },
      selVillage: function selVillage(confirmVillage) {
        var _this5 = this;
        var len = void 0, UISeatId = void 0, time = .15, num = 4, delay = void 0, delay1 = void 0;
        var newVillage = [];
        var max = Math.max.apply(Math, this._village.map(function(o) {
          return o.villageNum;
        }));
        for (var i = 0; i < this._village.length; i++) {
          this._village[i].villageNum == max && newVillage.push(Number(this._village[i].seatId));
          newVillage.sort(function(a, b) {
            return a - b;
          });
        }
        var aArr = [], aArr1 = [];
        for (var k = 0; k < newVillage.length; k++) newVillage[k] <= confirmVillage ? aArr.push(newVillage[k]) : aArr1.push(newVillage[k]);
        newVillage = aArr1.concat(aArr);
        len = newVillage.length;
        if (len > 1) {
          var _loop = function _loop(j) {
            delay = cc.delayTime(time * len);
            delay1 = cc.delayTime(j * time);
            UISeatId = dataLogic.getUISeatIdBySeatId(newVillage[j]);
            var pos = _this5.player[UISeatId].position;
            var callFun = cc.callFunc(function() {
              _this5.selTheVillage(pos, delay, num);
            }, _this5);
            _this5.node.runAction(cc.sequence(delay1, callFun));
          };
          for (var j = 0; j < newVillage.length; j++) _loop(j);
          return time * len * num;
        }
        return 0;
      },
      selTheVillage: function selTheVillage(pos, delay, num) {
        var sequence = void 0, repeat = void 0;
        var AudioCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.selVillageAudio);
        }, this);
        sequence = cc.sequence(AudioCallFun, cc.moveTo(0, pos.x, pos.y), delay);
        repeat = cc.repeat(sequence, num);
        this.villageBgBox.runAction(repeat);
      },
      getVillage: function getVillage(confirmVillage) {
        this.confirmVillage = confirmVillage;
        var UISeatId = dataLogic.getUISeatIdBySeatId(confirmVillage);
        this.villageBgBox.x = this.player[UISeatId].x;
        this.villageBgBox.y = this.player[UISeatId].y;
        if (1 == UISeatId) {
          this.villageIcon.x = this.player[UISeatId].x + 54;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        } else {
          this.villageIcon.x = this.player[UISeatId].x - 53;
          this.villageIcon.y = this.player[UISeatId].y + 73;
        }
        for (var i = 0; i < this.player.length; i++) UISeatId != i && (this.villageMultiple[i].string = "");
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        cConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(cConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.playerInfo.length > 2 && this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u95f2\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this6 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        for (var i = 0; i < lastBet.length; i++) if ("" != lastBet[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[i]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + msgData.betNum + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          var showPokerTime = this.dispenseCardAction();
          this.progress = 3;
          var seatId = dataLogic.getSeatIdByUISeatId(cDataLogic.selfSeatId);
          this.endTime = msgData.endTime;
          this.onBetData = msgData;
          if (dataLogic.isHide) {
            this.showMyRemainPorkers(msgData, seatId);
            for (var j = 0; j < this.pokers.length; j++) {
              seatId = dataLogic.getSeatIdByUISeatId(j);
              if (!this.player[j].active || dataLogic.isOnlooker(seatId)) continue;
              if (j != constant.SelfUISeatId) {
                this.pokers[j].active = true;
                for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x += 50 * k;
              }
            }
          } else this.node.runAction(cc.sequence(cc.delayTime(showPokerTime), cc.callFunc(function() {
            _this6.showMyRemainPorkers(msgData, seatId);
            _this6.countDown(msgData.endTime, 3);
          }, this)));
        }
      },
      showMyRemainPorkers: function showMyRemainPorkers(msgData, seatId) {
        cc.log(seatId, 12);
        if (dataLogic.isOnlooker(seatId)) return;
        this.openCardBox.active = true;
        this.pinPai.active = true;
        this.haveNiu.active = true;
        this.nullNiu.active = true;
        this.pokersData = [], this.myInitPokersData = [];
        for (var i = 0; i < this.cardBox.length; i++) {
          this.cardBox[i].active = true;
          this.cardBox[i].y = 0;
          this.cardBox[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + msgData.cards[seatId][i]);
          this.pokersData.push(cDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
          this.myInitPokersData.push(cDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
        }
        this.myNiuNum = cDataLogic.isNiu(kf.clone(this.myInitPokersData));
        this.hidePoker(constant.SelfUISeatId);
      },
      hidePoker: function hidePoker(UISeatId) {
        for (var i = 0; i < 5; i++) this.backCard[5 * UISeatId + i].opacity = 0;
      },
      dispenseCardAction: function dispenseCardAction() {
        var startPos = cc.v2(0, 0), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0, seatId = void 0;
        for (var i = 0; i < 4; i++) {
          seatId = dataLogic.getSeatIdByUISeatId(i);
          cc.log(i, "\u53d1\u724c\u662f\u5426\u65c1\u89c2");
          if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
          basecDelay += .1;
          for (var j = 0; j < 5 - _seeN; j++) {
            key = 5 * i + j + _seeN;
            delay = cc.delayTime(.1 * j + basecDelay);
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .55;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(i, 1);
            if (dataLogic.isHide) if (i === constant.SelfUISeatId) {
              this.backCard[key].scale = .92;
              this.backCard[key].x = endPos.x + 129 * j * .9;
              this.backCard[key].y = endPos.y;
            } else {
              this.backCard[key].scale = .72;
              this.backCard[key].x = endPos.x + 50 * j * .72;
              this.backCard[key].y = endPos.y;
            } else {
              if (3 == _seeN) {
                move = cc.moveTo(actionTime, endPos);
                if (i === constant.SelfUISeatId) {
                  scale = cc.scaleTo(actionTime, .92);
                  cardMove = cc.moveTo(.15, endPos.x + 129 * j * .9, endPos.y);
                } else {
                  scale = cc.scaleTo(actionTime, .72);
                  cardMove = cc.moveTo(.15, endPos.x + 50 * j * .72, endPos.y);
                }
                var fpCallFun = cc.callFunc(function() {
                  audioMgr.playEffect(this.sendCard);
                }, this);
                spawn = cc.spawn(move, scale, fpCallFun);
                sequence = cc.sequence(delay, spawn, cardMove);
              } else {
                if (i === constant.SelfUISeatId) {
                  scale = cc.scaleTo(actionTime, .92);
                  cardMove = cc.moveTo(actionTime, endPos.x + 129 * .9, endPos.y);
                } else {
                  scale = cc.scaleTo(actionTime, .72);
                  cardMove = cc.moveTo(actionTime, endPos.x + 36, endPos.y);
                }
                var _fpCallFun = cc.callFunc(function() {
                  audioMgr.playEffect(this.sendCard);
                }, this);
                spawn = cc.spawn(cardMove, scale, _fpCallFun);
                sequence = cc.sequence(delay, spawn);
              }
              this.backCard[key].runAction(sequence);
            }
          }
          showPokerTime = basecDelay + .55;
        }
        return showPokerTime;
      },
      getHandCardPos: function getHandCardPos(UISeatId, index) {
        var pos = cc.v2(0, 0), playX = this.player[UISeatId].x;
        pos.x = index ? 0 == UISeatId ? playX + 498 : 1 == UISeatId ? playX - 167 : playX + 238 : 0 == UISeatId ? playX + 150 : 1 == UISeatId ? playX - 275 : playX + 130;
        pos.y = this.player[UISeatId].y;
        return pos;
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this7 = this;
        var cards = void 0, UISeatId = void 0, txt = "", endAudio = void 0, lastArr = [], win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          this.upturnCards(msgData.seatId, cards);
        }
        if (1 == msgData.isEnd) {
          this.endData = msgData.endData;
          this.progress = 4;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          this.openCardBox.active = false;
          var max = Math.max.apply(null, msgData.endData);
          var min = Math.min.apply(null, msgData.endData);
          var isMeMax = 0;
          var isMeMin = 0;
          var newEndData = [];
          for (var _j2 = 0; _j2 < msgData.endData.length; _j2++) {
            newEndData[_j2] = Math.abs(msgData.endData[_j2]);
            msgData.endData[_j2] >= 0 && isMeMax++;
            msgData.endData[_j2] <= 0 && isMeMin++;
          }
          var absMax = Math.max.apply(null, newEndData);
          cc.log("isMeMin", isMeMin, "isMeMax", isMeMax);
          for (var i = 0; i < msgData.endData.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            var _playerInfo = dataLogic.playerInfo[i];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[i]) / 100;
            msgData.endData[i] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[i]) / 100);
            _playerInfo.gameTimes += 1;
            this.player[i]._playerInfo = _playerInfo;
            if (UISeatId == constant.SelfUISeatId) if (msgData.endData[i] > 0) {
              if (this.confirmVillage == i && msgData.endData[i] == max && absMax == max && 1 == isMeMax) if (msgData.endData.length < 3) {
                txt = 1;
                cc.log("\u4e24\u4eba\u5bf9\u5c40\u52dd\u5229");
                endAudio = this.winGold;
              } else {
                txt = 0;
                cc.log("\u901a\u5403");
                endAudio = this.allWin;
              } else {
                txt = 1;
                cc.log("\u52dd\u5229");
                endAudio = this.winGold;
              }
              win = false;
            } else {
              if (this.confirmVillage == i && msgData.endData[i] < 0 && msgData.endData[i] == min && 1 == isMeMin) {
                if (msgData.endData.length >= 3 && Math.abs(min) == absMax) {
                  txt = 2;
                  cc.log("\u901a\u8d54");
                }
              } else cc.log("\u5931\u8d25");
              endAudio = this.lose;
              win = true;
            }
          }
          time = dataLogic.isHide ? 0 : lastArr.length + .5;
          cc.log("time======", time);
          var scrollNumCallFunc = cc.callFunc(function() {
            for (var _i5 = 0; _i5 < msgData.endData.length; _i5++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i5);
              if (msgData.endData[_i5] >= 0) {
                _this7.getBetTxt[UISeatId].font = _this7.winChipNumFont;
                _this7.scrollNum(msgData.endData[_i5].toFixed(2), UISeatId);
              } else {
                _this7.getBetTxt[UISeatId].font = _this7.loseChipNumFont;
                _this7.getBetTxt[UISeatId].string = msgData.endData[_i5].toFixed(2);
              }
            }
          }, this);
          var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc);
          this.winTxt.runAction(sequence);
          sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
          this.winTxt.runAction(sequence);
          this.resultAnim(txt, time, endAudio, win, dataLogic.isHide);
          dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
          this.gamingPlayerToUnready();
          this.updateTips();
        }
      },
      updateUserBalance: function updateUserBalance() {
        for (var i = 0; i < this.endData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = Math.abs(balance).toFixed(2);
          UISeatId == constant.SelfUISeatId && dataLogic.setUserBalance(balance);
        }
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this8 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this8.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this8.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
          _this8.updateUserBalance();
        }, this)));
      },
      resultAnim: function resultAnim(type, time, endAudio, win, hide) {
        var delayTime = cc.delayTime(3);
        var showAnimCallFun = cc.callFunc(function() {
          switch (type) {
           case 0:
            this.tongChiAnim.active = true;
            this.tongChiAnim.getComponent(cc.Animation).play();
            break;

           case 1:
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
            break;

           case 2:
            this.tongPeiAnim.active = true;
            this.tongPeiAnim.getComponent(cc.Animation).play();
          }
          audioMgr.playEffect(endAudio);
          win || audioMgr.playEffect(this.scrollNumber);
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.tongChiAnim.active = false;
          this.tongPeiAnim.active = false;
          this.winAnim.active = false;
          this.isResultAnim = true;
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(.3), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr, isOpen) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        if (this.isUserOpenPokers(UISeatId)) return false;
        this.openPokers.push(UISeatId);
        var niuNum = this.showPokers(UISeatId, cards);
        var hideCardsCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.upturnPoker);
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          var pokers = this.pokers[UISeatId].children;
          if (UISeatId == constant.SelfUISeatId) for (var i = 0; i < pokers.length; i++) pokers[i].runAction(cc.moveBy(.1, 50 * -i, 0)); else {
            for (var _i6 = 0; _i6 < pokers.length; _i6++) pokers[_i6].x = -100;
            for (var _i7 = 0; _i7 < 5; _i7++) this.backCard[5 * UISeatId + 1 * _i7].runAction(cc.sequence(cc.moveBy(5, 50 * -_i7, 0), cc.fadeOut(.1, 0)));
          }
          this.showCardsCallFun(UISeatId, niuNum, cards);
        }, this);
        cc.log("\u725b", niuNum);
        if (!dataLogic.isHide || isOpen) this.node.runAction(cc.sequence(cc.delayTime(1 * index), hideCardsCallFun)); else {
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          for (var j = 0; j < this.pokers[UISeatId].childrenCount; j++) {
            this.pokers[UISeatId].children[j].active = true;
            UISeatId != constant.SelfUISeatId && cc.log("this.pokers[UISeatId].children[j].x", this.pokers[UISeatId].children[j].x);
          }
          this.setPlayerHandCard(UISeatId, cards);
          this.isCow[UISeatId].active = true;
          this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
          this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
        }
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, niuNum, cards) {
        var showCardsCallFun = cc.callFunc(function() {
          this.setPlayerHandCard(UISeatId, cards);
          var pokers = this.pokers[UISeatId].children;
          for (var j = 0; j < pokers.length; j++) {
            pokers[j].active = true;
            pokers[j].runAction(cc.moveBy(.25, 50 * j, 0));
          }
          this.cowA(UISeatId, niuNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleCowAudio[niuNum]) : audioMgr.playEffect(this.femaleCowAudio[niuNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      cowA: function cowA(UISeatId, niuNum) {
        var cowAnim = cc.instantiate(this.cowAnimPf);
        cowAnim.parent = this.isCow[UISeatId];
        this.isCow[UISeatId].active = true;
        var cowPic = cDataLogic.getSFByImgName(this.isNiuAtlas, niuNum);
        if (0 == niuNum) {
          cowAnim.children[2].active = true;
          cowAnim.children[2].getComponent(cc.Animation).play();
        } else if (niuNum > 0 && niuNum < 10) {
          cowAnim.children[0].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[0].active = true;
          cowAnim.children[0].getComponent(cc.Animation).play();
        } else {
          cowAnim.children[1].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[1].active = true;
          cowAnim.children[1].getComponent(cc.Animation).play();
        }
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var pokers = [];
        for (var j = 0; j < cards.length; j++) pokers.push(cDataLogic.getCardValueAndColor(cards[j]));
        pokers = cDataLogic.sortCard(pokers);
        for (var i = 0; i < pokers.length; i++) this.pokers[UISeatId].getChildByName("pokers" + i).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("" + pokers[i].key);
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var i = 0; i < cards.length; i++) playerPokersData.push(cDataLogic.getCardValueAndColor(cards[i]));
        cc.log("playerPokersData", playerPokersData);
        UISeatId == constant.SelfUISeatId && (this.openCardBox.active = false);
        return cDataLogic.isNiu(playerPokersData);
      },
      clickBind: function clickBind() {
        var _this9 = this;
        this.cardTypeView.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this9.cardTypeView.active = false;
        });
        var _loop2 = function _loop2(i) {
          _this9.cardBox[i].on(cc.Node.EventType.TOUCH_END, function() {
            if (!_this9.cardBox[4].active) return;
            audioMgr.playEffect(_this9.clickPoker);
            if (0 == _this9.cardBox[i].y) {
              if (_this9.pinPokers.length < 3) {
                _this9.cardBox[i].y = 20;
                _this9.pinPokers.push(_this9.myInitPokersData[i]);
              }
            } else {
              _this9.cardBox[i].y = 0;
              for (var j = 0; j < _this9.pinPokers.length; j++) _this9.pinPokers[j] == _this9.myInitPokersData[i] && _this9.pinPokers.splice(j, 1);
            }
            _this9.countPinPokers(_this9.pinPokers);
          });
        };
        for (var i = 0; i < this.cardBox.length; i++) _loop2(i);
      },
      countPinPokers: function countPinPokers(pinPokers) {
        this.total = 0;
        for (var j = 0; j < this.pinPaiLabel.length; j++) this.pinPaiLabel[j].string = "";
        for (var i = 0; i < pinPokers.length; i++) {
          this.pinPaiLabel[i].string = pinPokers[i].order;
          this.total = this.total + pinPokers[i].order;
          this.pinPaiLabel[3].string = this.total;
        }
      },
      openTheCard: function openTheCard() {
        http.post(cConstant.OpenCards, "openCards");
        this.isOpenCard = true;
      },
      isHaveNiu: function isHaveNiu(pokers, type) {
        var lave = this.total % 10;
        if (0 == pokers.length) if (0 == cDataLogic.isNiu(this.pokersData) && 0 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else if (0 != cDataLogic.isNiu(this.pokersData) && 1 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else {
          audioMgr.playEffect(this.pinError);
          this.showPinWarn(0);
        } else if (3 == pokers.length) if (0 == lave) if (0 == type) {
          audioMgr.playEffect(this.pinError);
          cc.log("\u62fc\u724c\u6709\u8bef!");
          this.showPinWarn(0);
        } else {
          cc.log("\u6210\u529f!");
          this.openTheCard();
          this.openCardBox.active = false;
        } else if (0 == this.myNiuNum && 0 == type) {
          cc.log("\u6210\u529f!");
          this.openTheCard();
          this.openCardBox.active = false;
        } else {
          audioMgr.playEffect(this.pinError);
          cc.log("\u9519\u8bef!");
          this.showPinWarn(0);
        } else if (0 == cDataLogic.isNiu(this.pokersData) && 0 == type) {
          this.openCardBox.active = false;
          this.openTheCard();
        } else {
          audioMgr.playEffect(this.pinError);
          cc.log("\u9519\u8bef\uff0c\u724c\u6570\u4e0d\u5bf9!");
          this.showPinWarn(0);
        }
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
      },
      showPinWarn: function showPinWarn(type) {
        var _this10 = this;
        this.pinWarnErr.active = false;
        0 == type && (this.pinWarnErr.active = true);
        this.scheduleOnce(function() {
          _this10.pinWarnErr.active = false;
        }, 1);
      },
      exitRoom: function exitRoom() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        dataLogic.leaveTable();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "cardType":
          this.cardTypeView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(dataLogic.curGameId);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "haveNiu":
          this.isHaveNiu(this.pinPokers, 1);
          break;

         case "noNiu":
          this.isHaveNiu(this.pinPokers, 0);
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("seeThreeCattleAutoMatch", isCheck);
          break;

         case "1":
          this.firstDispenseCardAction();
          break;

         case "2":
          this.dispenseCardAction();
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  selectRoomSceneBase: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "7d137UKnRxOprhPShRc/2JD", "selectRoomSceneBase");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        roomList: cc.Node,
        roomListBox: cc.Node,
        roomListScrollView: cc.Node,
        roomListContent: cc.Node,
        selRoomPf: cc.Prefab,
        pfTopBar: cc.Prefab,
        leftArrow: cc.Node,
        rightArrow: cc.Node,
        sFGameName: cc.SpriteFrame
      },
      selectRoomBaseRegisterEvent: function selectRoomBaseRegisterEvent() {
        this.registerHandler = [ [ "reqUserBalanceCb", this.reqUserBalanceCb.bind(this) ], [ "btnIntoGameEvent", this.btnIntoGameEvent.bind(this) ], [ "reqSelectRoomConfigCb", this.reqSelectRoomConfigCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      baseInit: function baseInit(gameId) {
        var _this = this;
        if (null == gameId) {
          cc.error("gameId \u4e0d\u80fd\u4e3a\u7a7a");
          return;
        }
        kf.createPool(constant.PoolId.RoomCard, 4, this.selRoomPf);
        this.isSelectRoomScene = true;
        this.roomCard = [];
        dataLogic.addPlayedGameIdList(gameId);
        dataLogic.setCurGameId(gameId);
        this.initSceneBase();
        this.hallName = this.sceneName + "RoomX";
        this.selectRoomBaseRegisterEvent();
        this.topBar = cc.instantiate(this.pfTopBar);
        this.topBar.y = cc.winSize.height / 2 + 75;
        this.topBar.width = cc.winSize.width;
        this.topBar.parent = this.node.getChildByName("selectRoom");
        this.gameNameIcon = this.topBar.getChildByName("gameName");
        this.setGameNameSf();
        this.btSetting = this.topBar.getChildByName("setting").getComponent(cc.Button);
        this.btRule = this.topBar.getChildByName("rule").getComponent(cc.Button);
        this.scheduleOnce(function() {
          _this.btRule.node.x = _this.gameNameIcon.x + _this.sFGameName._originalSize.width + 44;
        }, 0);
        this.btRecord = this.topBar.getChildByName("record").getComponent(cc.Button);
        this.btExit = this.topBar.getChildByName("goBackBg").getChildByName("goBack").getComponent(cc.Button);
        this.btRecharge = this.topBar.getChildByName("recharge").getChildByName("add").getComponent(cc.Button);
        this.txtBalance = this.topBar.getChildByName("recharge").getChildByName("money").getComponent(cc.Label);
        this.txtBalance.string = dataLogic.userBalance.toFixed(2);
        var curFileName = this.name.split(/<|>/)[1];
        this.btSetting.clickEvents[0].target = this.node;
        this.btSetting.clickEvents[0].component = curFileName;
        this.btSetting.clickEvents[0].handler = "btnEvent";
        this.btRule.clickEvents[0].target = this.node;
        this.btRule.clickEvents[0].component = curFileName;
        this.btRule.clickEvents[0].handler = "btnEvent";
        this.btRecord.clickEvents[0].target = this.node;
        this.btRecord.clickEvents[0].component = curFileName;
        this.btRecord.clickEvents[0].handler = "btnEvent";
        this.btRecharge.clickEvents[0].target = this.node;
        this.btRecharge.clickEvents[0].component = curFileName;
        this.btRecharge.clickEvents[0].handler = "btnEvent";
        this.btExit.clickEvents[0].target = this.node;
        this.btExit.clickEvents[0].component = curFileName;
        this.btExit.clickEvents[0].handler = "btnEvent";
        this.initJoinAmount();
        this.sceneFadeIn();
        dataLogic.setRoomNum(0);
        dataLogic.setRoomType(false);
      },
      setGameNameSf: function setGameNameSf() {
        this.gameNameIcon.getComponent(cc.Sprite).spriteFrame = this.sFGameName;
      },
      sceneFadeIn: function sceneFadeIn() {
        var _this2 = this;
        this.topBar.runAction(cc.sequence(cc.moveBy(.25, 0, -125), cc.moveBy(.15, 0, 10)));
        this.gameNameIcon.runAction(cc.sequence(this.delay(.2), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.btRule.node.runAction(cc.sequence(this.delay(.25), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.btRecord.node.runAction(cc.sequence(this.delay(.35), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.btSetting.node.runAction(cc.sequence(this.delay(.45), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.roomList.runAction(cc.sequence(this.delay(.15), cc.moveTo(.3, -20, -45), cc.moveTo(.1, 0, -45), cc.callFunc(function() {
          _this2.preloadRes && _this2.preloadRes();
        })));
      },
      delay: function delay(time) {
        return cc.delayTime(time);
      },
      updateHallBalance: function updateHallBalance() {
        this.txtBalance && (this.txtBalance.string = dataLogic.userBalance.toFixed(2));
      },
      initJoinAmount: function initJoinAmount() {
        var data = dataLogic.selectRoomConfig;
        this.len = data.length;
        this.leftArrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4, 5, 0), cc.moveBy(.4, -5, 0))));
        this.rightArrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4, -5, 0), cc.moveBy(.4, 5, 0))));
        this.selBtnWidth = 254;
        this.maxW = 4 * this.selBtnWidth + 30 + 82;
        var listWidth = this.len * this.selBtnWidth + 10 * (this.len - 1);
        if (this.len <= 4) {
          this.leftArrow.active = false;
          this.rightArrow.active = false;
          this.roomListBox.width = listWidth + 2;
          this.roomListScrollView.width = listWidth;
          this.roomListScrollView.x = -listWidth / 2 - 1;
          this.roomListContent.width = listWidth;
        } else {
          this.roomListBox.width = this.maxW;
          this.roomListScrollView.width = this.maxW;
          this.roomListContent.width = listWidth;
          this.roomListScrollView.x = -this.maxW / 2;
          var roomX = Number(cc.sys.localStorage.getItem(this.hallName));
          if (roomX) {
            this.roomListContent.x = Number(roomX);
            if (roomX < -10 && roomX > -(this.roomListContent.width - this.maxW - 10)) {
              this.leftArrow.active = true;
              this.rightArrow.active = true;
            } else if (roomX < -(this.roomListContent.width - this.maxW - 10)) {
              this.leftArrow.active = true;
              this.rightArrow.active = false;
            } else {
              this.leftArrow.active = false;
              this.rightArrow.active = true;
            }
          } else {
            this.roomListContent.x = 0;
            this.leftArrow.active = false;
            this.rightArrow.active = true;
          }
        }
        this.initRoomCard();
      },
      initRoomCard: function initRoomCard() {
        var data = dataLogic.selectRoomConfig;
        for (var i = 0; i < data.length; i++) {
          this.roomCard[i] || (this.roomCard[i] = kf.getObj(constant.PoolId.RoomCard, this.roomListContent, this.selRoomPf));
          this.roomCard[i].x = (1 * i + .5) * this.selBtnWidth + 10 * i;
          this.roomCard[i].getComponent("selectRoom").init(data[i], i, this.sceneName);
        }
      },
      onScrollingEvent: function onScrollingEvent(event) {
        if (this.len > 4) if (event.content.x >= -10) {
          this.leftArrow.active = false;
          this.rightArrow.active = true;
        } else if (event.content.x <= -(this.roomListContent.width - this.maxW - 10)) {
          this.leftArrow.active = true;
          this.rightArrow.active = false;
        } else {
          this.leftArrow.active = true;
          this.rightArrow.active = true;
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.audioBtn);
        switch (key) {
         case "goBackHall":
          this.goBackHall();
          break;

         case "rule":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "record":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(dataLogic.curGameId);
          break;

         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "left":
          this.roomListContent.runAction(cc.moveTo(.15, 0, 0));
          this.leftArrow.active = false;
          this.rightArrow.active = true;
          break;

         case "right":
          this.roomListContent.runAction(cc.moveTo(.15, -(this.roomListContent.width - this.maxW), 0));
          this.leftArrow.active = true;
          this.rightArrow.active = false;
          break;

         case "recharge":
          kf.getObj(constant.PoolId.DialogComonLayer, this.toastLayer[0], this.pfDialogCommonLayer, {
            path: "prefab/baoWang/payCenter",
            js: "payCenter",
            initArg: 1
          });
          break;

         default:
          cc.warn("\u672a\u77e5\u7684 key,", key);
        }
      },
      btnIntoGameEvent: function btnIntoGameEvent(key) {
        var sceneName = dataLogic.getGameSceneNameByGameId(dataLogic.curGameId);
        var resList = gameMgr.getSceneResList(sceneName, dataLogic.curGameId);
        resMgr.loadRes(resList);
        cc.sys.localStorage.setItem(this.hallName, this.roomListContent.x);
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        var reqArg = kf.clone(constant.PostReqUserBalance);
        reqArg.reqExtendArg = {
          timeoutRefresh: false,
          reRequested: false
        };
        http.post(reqArg, "reqUserBalanceCb", key);
      },
      reqUserBalanceCb: function reqUserBalanceCb(msg, roomKey) {
        if (msg.Code != constant.HttpCode.Succeed) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          return;
        }
        var gameSceneName = dataLogic.getGameSceneNameByGameId(dataLogic.curGameId);
        var Json = cc.sys.localStorage.getItem("gameSelectRoomConfig" + this.sceneName);
        var nextSceneInfo = {
          sceneName: gameSceneName,
          gameId: dataLogic.curGameId
        };
        if (null == Json) {
          dataLogic.reqSelectRoomConfig(dataLogic.curGameId, nextSceneInfo);
          return;
        }
        var data = JSON.parse(Json);
        if (null == data || data.BackData != msg.BackData) {
          dataLogic.reqSelectRoomConfig(dataLogic.curGameId, nextSceneInfo);
          return;
        }
        dataLogic.setCurRoomKey(roomKey);
        this.txtBalance.string = msg.Data.balance.toFixed(2);
        dataLogic.setUserBalance(Number(this.txtBalance.string));
        this.tryIntoGame(roomKey);
      },
      reqSelectRoomConfigCb: function reqSelectRoomConfigCb(msg) {
        if (msg.Code != constant.HttpCode.Succeed) {
          if (this.loadToast) {
            kf.killObj(this.loadToast);
            this.loadToast = null;
          }
          return;
        }
        this.initRoomCard();
        cc.sys.localStorage.setItem("gameSelectRoomConfig" + this.sceneName, JSON.stringify(msg));
        this.tryIntoGame(dataLogic.curRoomKey);
      },
      goBackHall: function goBackHall() {
        var arg = {
          type: constant.ToastType.Loading
        };
        this.loadToast = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[3], this.toastLoadingPf, arg);
        this.loadScene(constant.SceneName.Hall);
      },
      switchSceneFrontDispose: function switchSceneFrontDispose() {
        for (var j = 0; j < this.roomCard.length; j++) kf.killObj(this.roomCard[j]);
      },
      tryIntoGame: function tryIntoGame(roomKey) {
        var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
        if (admittanceChipNum > dataLogic.userBalance) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          this.showRechargeToast(admittanceChipNum);
          return;
        }
        dataLogic.setCheckRecoverState(true);
        if ("dzpkHall" == dataLogic.getCurSceneName()) {
          kf.killObj(this.loadToast);
          this.loadToast = null;
          kf.getObj(constant.PoolId.SetCarryChipNumPanel, this.setCarryChipNumPanel, this.setCarryChipNumPanelPfb);
        } else {
          var gameSceneName = dataLogic.getGameSceneNameByGameId(dataLogic.curGameId);
          this.loadScene(gameSceneName, dataLogic.curGameId);
        }
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  selectRoom: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "b3c88hd/B5FJ6b0LmciPg1o", "selectRoom");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: cc.Component,
      properties: {
        bg: cc.Node,
        roomName: cc.Label,
        bet: cc.Label,
        admittance: cc.Label,
        selRoomAtlas: cc.SpriteAtlas,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        selRoomAnim: cc.Node,
        antesTxt: cc.Label
      },
      baseRegisterEvent: function baseRegisterEvent() {
        this.registerHandler = [ [ "updateHallBalance", this.updateHallBalance.bind(this) ], [ "btnIntoGameEvent", this.btnIntoGameEvent.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(msg, index, sceneName) {
        var _this = this;
        var picKey = index % 6;
        sceneName == constant.SceneName.DzpkHall ? this.antesTxt.string = "\u76f2\u6ce8" : sceneName == constant.SceneName.BRCattleHall || sceneName == constant.SceneName.LongHuHall || sceneName == constant.SceneName.BcbmHall || sceneName == constant.SceneName.BaiJiaLeHall ? this.antesTxt.string = "\u9650\u7ea2" : this.antesTxt.string = "\u5e95\u6ce8";
        this.roomName.string = msg.roomName;
        if (sceneName == constant.SceneName.BRCattleHall || sceneName == constant.SceneName.LongHuHall || sceneName === constant.SceneName.BcbmHall || sceneName == constant.SceneName.BaiJiaLeHall) {
          this.bet.string = msg.ante + "~" + 100 * msg.ante;
          this.bet.fontSize = 30;
        } else {
          this.bet.fontSize = 44;
          this.bet.string = msg.ante;
        }
        this.roomKey = Number(dataLogic.selectRoomConfig[index].roomId[2]);
        this.selRoomAnim.runAction(cc.sequence(cc.delayTime(1 * index + .45), cc.callFunc(function() {
          _this.selRoomAnim.getComponent(cc.Animation).play();
        }, this)));
        if (1 != msg.roomState) {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.selRoomAtlas.getSpriteFrame("1");
          this.admittance.string = "\u7ef4\u62a4\u4e2d";
          this.bg.getComponent(cc.Button).interactable = false;
        } else {
          this.bg.getComponent(cc.Sprite).spriteFrame = this.selRoomAtlas.getSpriteFrame("" + picKey);
          this.admittance.string = "\u51c6\u5165\uff1a" + msg.joinAmount;
          this.bg.getComponent(cc.Button).interactable = true;
        }
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        clientEvent.dispatchEvent("btnIntoGameEvent", this.roomKey);
      }
    });
    cc._RF.pop();
  }, {} ],
  setPassword: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "5b04fqfRRlGWYmDgJwOGpVa", "setPassword");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _SetPwd = {
      Action: "SetPwd",
      Password: null
    };
    var _SetSafePwd = {
      Action: "SetSafePwd",
      Password: null
    };
    var _setPasswordSucceedCb = null;
    var _passwordType = 1;
    var _placeholder1 = [ "\u8bf7\u8f93\u51656-16\u4f4d\u5b89\u5168\u5bc6\u7801", "\u8bf7\u8f93\u51656-16\u4f4d\u65b0\u5bc6\u7801" ];
    var _placeholder2 = [ "\u8bf7\u518d\u6b21\u8f93\u5165\u5b89\u5168\u5bc6\u7801", "\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801" ];
    var _titleStr = [ "\u8bbe\u7f6e\u5b89\u5168\u5bc6\u7801", "\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801" ];
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        hintBg: cc.Node,
        txtNewPassword1: cc.Label,
        txtNewPassword2: cc.Label,
        txtConfirm: cc.Label,
        ebNewPassword1: cc.EditBox,
        ebNewPassword2: cc.EditBox
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "setNewPasswordCb", this.setNewPasswordCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        _setPasswordSucceedCb = initArg.callBack;
        _passwordType = initArg.passwordType;
        this.ebNewPassword1.placeholder = _placeholder1[_passwordType];
        this.ebNewPassword2.placeholder = _placeholder2[_passwordType];
        this.setTitleContent(_titleStr[_passwordType]);
        if (initArg.isResetPassword) _SetPwd.Action = "ResetPassWord"; else {
          _SetPwd.Action = "SetPwd";
          this.txtNewPassword1.string = 0 == _passwordType ? "\u5b89\u5168\u5bc6\u7801" : "\u65b0\u5bc6\u7801";
        }
        if (0 == _passwordType || initArg.isSetLoginPassword) {
          this.hintBg.opacity = 255;
          initArg.isFirstUseBank ? this.hintBg.getChildByName("hint").getComponent(cc.Label).string = "\u9996\u6b21\u4f7f\u7528\u94f6\u884c\u529f\u80fd\uff0c\u8bf7\u5148\u8bbe\u7f6e\u5b89\u5168\u5bc6\u7801\uff0c\u4ee5\u4fdd\u969c\u8d44\u91d1\u5b89\u5168\u3002" : initArg.isSetLoginPassword ? this.hintBg.getChildByName("hint").getComponent(cc.Label).string = "\u8bbe\u7f6e\u5bc6\u7801\u540e\uff0c\u5c31\u53ef\u4ee5\u7528\u624b\u673a\u53f7+\u5bc6\u7801\u767b\u5f55\u54e6\uff01" : this.hintBg.getChildByName("hint").getComponent(cc.Label).string = "\u4e3a\u4fdd\u969c\u8d44\u91d1\u5b89\u5168\uff0c\u8bf7\u59a5\u5584\u4fdd\u7ba1\u60a8\u7684\u5b89\u5168\u5bc6\u7801\u3002";
        } else {
          this.hintBg.opacity = 0;
          this.mainNodeHight = 390;
          this.setDialogSize(this.mainNodeWidth, 390);
          this.node.y += 21;
        }
        if (null == initArg.curStep) {
          this.txtConfirm.string = "\u786e\u5b9a";
          this.txtConfirm.node.width = 201;
        } else {
          this.txtConfirm.string = initArg.curStep + "/" + initArg.totalStep + " \u786e\u5b9a";
          this.txtConfirm.node.width = 218;
        }
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "confirmPassword":
          var result = dataLogic.checkFormat(this.ebNewPassword1.string, {
            Password: true,
            name: "\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          result = dataLogic.checkFormat(this.ebNewPassword2.string, {
            Password: true,
            name: "\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          if (this.ebNewPassword1.string != this.ebNewPassword2.string) {
            this.showLayerTip("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");
            break;
          }
          if (1 == _passwordType) {
            _SetPwd.Password = this.ebNewPassword1.string;
            this.reqDateAndShowLoadView(_SetPwd, "setNewPasswordCb", null, true);
          } else {
            _SetSafePwd.Password = this.ebNewPassword1.string;
            this.reqDateAndShowLoadView(_SetSafePwd, "setNewPasswordCb", null, true);
          }
        }
      },
      setNewPasswordCb: function setNewPasswordCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          0 == _passwordType ? dataLogic.setSafePasswordState(true) : dataLogic.setHasPwd(true);
          this.toastClose();
          _setPasswordSucceedCb(msg.StrCode);
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  setting: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "c1896UruSNBy7zFT5fvY/jE", "setting");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _loadProcessCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        musicSlider: cc.Slider,
        effectSlider: cc.Slider,
        musicProgressBar: cc.Node,
        effectProgressBar: cc.Node,
        musicSwitch: cc.Toggle,
        effectSwitch: cc.Toggle,
        mask: cc.Node,
        settingMain: cc.Node,
        pfLayerTips: cc.Prefab
      },
      onLoad: function onLoad() {
        this.mask.width = cc.winSize.width + 200;
        this.mask.height = cc.winSize.height + 200;
      },
      settingMainShow: function settingMainShow() {
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(.08, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.settingMain.runAction(seq);
        this.mask.active = true;
      },
      settingMainHide: function settingMainHide() {
        var _this = this;
        var seq1 = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0));
        this.settingMain.runAction(seq1);
        this.mask.active = false;
        this.scheduleOnce(function() {
          kf.killObj(_this.node);
        }, .3);
      },
      init: function init() {
        cc.log("--------\u521d\u59cb\u5316");
        var isOpen = audioMgr.getEffectSwitch(), volume = void 0;
        if (isOpen) {
          this.effectSwitch.isChecked = true;
          volume = audioMgr.getEffectVolume();
          this.effectSlider.progress = volume;
          this.effectProgressBar.width = this.effectSlider.progress * this.effectSlider.node.width + 20;
        } else {
          this.effectSwitch.isChecked = false;
          this.effectSlider.progress = 0;
          this.effectProgressBar.width = this.effectSlider.progress * this.effectSlider.node.width + 20;
        }
        isOpen = audioMgr.getMusicSwitch();
        if (isOpen) {
          this.musicSwitch.isChecked = true;
          volume = audioMgr.getMusicVolume();
          this.musicSlider.progress = volume;
          this.musicProgressBar.width = this.musicSlider.progress * this.musicSlider.node.width + 20;
        } else {
          this.musicSwitch.isChecked = false;
          this.musicSlider.progress = 0;
          this.musicProgressBar.width = this.musicSlider.progress * this.musicSlider.node.width + 20;
        }
      },
      sliderEvent: function sliderEvent(eventType, name) {
        cc.log("sliderEvent", name);
        switch (name) {
         case "music":
          this.musicProgressBar.width = this.musicSlider.progress * this.musicSlider.node.width + 20;
          audioMgr.setMusicVolume(this.musicSlider.progress);
          if (this.musicSwitch.isChecked && this.musicSlider.progress <= 0) {
            this.musicSwitch.uncheck();
            audioMgr.getMusicSwitch() && audioMgr.setMusicSwitch(false);
          } else if (!this.musicSwitch.isChecked && this.musicSlider.progress > 0) {
            this.musicSwitch.check();
            audioMgr.getMusicSwitch() || audioMgr.setMusicSwitch(true);
          }
          break;

         case "effect":
          this.effectProgressBar.width = this.effectSlider.progress * this.effectSlider.node.width + 20;
          audioMgr.setEffectVolume(this.effectSlider.progress);
          if (this.effectSwitch.isChecked && this.effectSlider.progress <= 0) {
            this.effectSwitch.uncheck();
            audioMgr.getEffectSwitch() && audioMgr.setEffectSwitch(false);
          } else if (!this.effectSwitch.isChecked && this.effectSlider.progress > 0) {
            this.effectSwitch.check();
            audioMgr.getEffectSwitch() || audioMgr.setEffectSwitch(true);
          }
        }
      },
      btnEvent: function btnEvent(eventType, name) {
        cc.log("btnEvent", name);
        var isChecked = void 0, volume = void 0;
        switch (name) {
         case "close":
          audioMgr.playEffect(this.clickAudio);
          audioMgr.localStorageData();
          this.settingMainHide();
          break;

         case "music":
          isChecked = this.musicSwitch.isChecked;
          audioMgr.setMusicSwitch(isChecked);
          if (isChecked) {
            volume = audioMgr.getMusicVolume();
            volume = 0 == volume ? .5 : volume;
            this.musicSlider.progress = volume;
            audioMgr.setMusicVolume(volume);
          } else this.musicSlider.progress = 0;
          this.musicProgressBar.width = this.musicSlider.progress * this.musicSlider.node.width + 20;
          break;

         case "effect":
          isChecked = this.effectSwitch.isChecked;
          audioMgr.setEffectSwitch(isChecked);
          volume = audioMgr.getEffectVolume();
          volume = 0 == volume ? .5 : volume;
          if (isChecked) {
            this.effectSlider.progress = volume;
            audioMgr.setEffectVolume(volume);
          } else this.effectSlider.progress = 0;
          this.effectProgressBar.width = this.effectSlider.progress * this.effectSlider.node.width + 20;
          break;

         case "loginOut":
          audioMgr.playEffect(this.clickAudio);
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), null, {
            path: "prefab/baoWang/loginOut",
            js: "loginOut"
          });
        }
      },
      loadResource: function loadResource(preloadRes) {
        var _this2 = this;
        var arg = {
          type: constant.ToastType.Loading
        };
        var load = kf.getObj(constant.PoolId.ToastLoading, this.node, this.toastLoadingPf, arg);
        var txt = load.getChildByName("txt").getComponent(cc.Label);
        txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
        var n = 0;
        _loadProcessCb = function _loadProcessCb() {
          n++;
          txt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d..." + n + "%";
        };
        this.schedule(_loadProcessCb, .1, 98);
        var loadDone = function loadDone() {
          _this2.unschedule(_loadProcessCb);
          kf.killObj(load);
          _this2.settingMainShow();
          dataLogic.isToastLoad = true;
        };
        var loadTimeout = function loadTimeout() {
          _this2.unschedule(_loadProcessCb);
          kf.killObj(load);
          kf.killObj(_this2.node);
          clientEvent.dispatchEvent("showLoadTimeoutToast");
        };
        resMgr.loadRes(preloadRes, loadDone, constant.loadResTimeLimit, loadTimeout);
      },
      showLayerTip: function showLayerTip(str) {
        var layerMsg_node = kf.getObj(constant.PoolId.layerMsg, this.node, this.pfLayerTips);
        layerMsg_node.position = cc.v2(0, 0);
        layerMsg_node.getComponent("layerMsg").layerTip(str);
      },
      reuse: function reuse() {
        dataLogic.curGameId == constant.GameId.King ? kingDataLogic.loadedDialogRes ? this.settingMainShow() : this.loadResource([ {
          path: "king/common",
          resType: "dir"
        } ]) : dataLogic.isToastLoad ? this.settingMainShow() : this.loadResource(constant.GameRes[constant.ToastName.InfoToast]);
        this.init();
      }
    });
    cc._RF.pop();
  }, {} ],
  signIn: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "6fcd6y807NEUZDAVdRq+MXG", "signIn");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _getSucceedCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        acClick: {
          type: cc.AudioClip,
          default: null
        },
        sfMiniItemBg: [ cc.SpriteFrame ],
        sfMaxItemBg: [ cc.SpriteFrame ],
        sfGetCashGiftBtnState: [ cc.SpriteFrame ],
        btGetCashGift: cc.Button,
        loadIcon: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "getSignInConfigCb", this.getSignInConfigCb.bind(this) ], [ "signInCb", this.signInCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      unregisterEvent: function unregisterEvent() {
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.unregisterEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        cc.log("signIn onLoad");
      },
      getSignInConfigCb: function getSignInConfigCb(data) {
        this.loadIcon.stopAllActions();
        this.loadIcon.active = false;
        if (1 != data.Code) return;
        var waitGetKey = -1, itemBg = void 0;
        for (var i = 0; i < 7; i++) {
          this.signInList[i].opacity = 255;
          this.signInList[i].getChildByName("txtMoney").getComponent(cc.Label).string = "x" + data.Data[i].Money;
          this.signInList[i].getChildByName("GetaPrize").active = 2 == data.Data[i].Status;
          itemBg = 1 != data.Data[i].Status ? 6 == i ? this.sfMaxItemBg[0] : this.sfMiniItemBg[0] : 6 == i ? this.sfMaxItemBg[1] : this.sfMiniItemBg[1];
          1 == data.Data[i].Status && (waitGetKey = i);
          this.signInList[i].getComponent(cc.Sprite).spriteFrame = itemBg;
        }
        this.btGetCashGift.node.active = true;
        if (-1 == waitGetKey) {
          this.btGetCashGift.interactable = false;
          this.btGetCashGift.node.getComponent(cc.Sprite).spriteFrame = this.sfGetCashGiftBtnState[1];
        } else {
          this.btGetCashGift.interactable = true;
          this.btGetCashGift.node.getComponent(cc.Sprite).spriteFrame = this.sfGetCashGiftBtnState[0];
        }
      },
      start: function start() {},
      init: function init(getSucceedCb) {
        _getSucceedCb = getSucceedCb;
        this.registerEvent();
        this.signInList = [];
        for (var i = 0; i < 7; i++) {
          this.signInList[i] = this.node.getChildByName("signInItem" + i);
          this.signInList[i].opacity = false;
        }
        this.btGetCashGift.node.active = false;
        this.loadIcon.active = true;
        this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
        http.post({
          Action: "GetSignInEvent"
        }, "getSignInConfigCb");
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.acClick);
        switch (name) {
         case "close":
          this.close();
          break;

         case "getCashGift":
          this.btGetCashGift.interactable = false;
          this.loadIcon.active = true;
          this.loadIcon.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
          http.post({
            Action: "SignIn"
          }, "signInCb");
          resMgr.loadSingleRes("prefab/baoWang/registerCashGift", function(res) {}, cc.Prefab);
          break;

         default:
          cc.log("\u672a\u77e5\u4e8b\u4ef6\u540d", name);
        }
      },
      close: function close() {
        this.unregisterEvent();
        this.node.destroy();
      },
      signInCb: function signInCb(data) {
        var _this = this;
        if (data.Code == constant.HttpCode.Succeed) {
          dataLogic.setUserBalance(Number(dataLogic.userBalance).add(data.Data.Money));
          _getSucceedCb();
          resMgr.loadSingleRes("prefab/baoWang/registerCashGift", function(res) {
            _this.close();
            var node = cc.instantiate(res);
            node.parent = _this.node.parent;
            node.getComponent("registerCashGift").init("signIn", data.Data.Money);
          }, cc.Prefab);
        } else {
          this.btGetCashGift.interactable = true;
          this.loadIcon.active = false;
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  slider: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "cf3b0Z2leZKbrhCLYGSj7Bi", "slider");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        progress: {
          default: null,
          type: cc.Node
        },
        _width: 0,
        musicSwitchBgOn: {
          default: null,
          type: cc.Node
        },
        musicSwitchBgOff: {
          default: null,
          type: cc.Node
        },
        musicSwitchSlider: {
          default: null,
          type: cc.Node
        },
        musicSwitchComponent: {
          default: null,
          type: cc.Node
        },
        isMusic: true
      },
      toggleMusicSwitchState: function toggleMusicSwitchState() {
        this.musicSwitchBgOn.active = this.sliderHandler.x > this.startPosX;
        this.musicSwitchBgOff.active = !(this.sliderHandler.x > this.startPosX);
        this.musicSwitchSlider.x = this.sliderHandler.x > this.startPosX ? Math.abs(this.musicSwitchSlider.x) : -Math.abs(this.musicSwitchSlider.x);
        this.isMusic ? audioMgr.setMusicSwitch(this.musicSwitchBgOn.active) : audioMgr.setAudioSwitch(this.musicSwitchBgOn.active);
      },
      switchMusicState: function switchMusicState() {
        this.musicSwitchSlider.x = -this.musicSwitchSlider.x;
        this.musicSwitchBgOn.active = this.musicSwitchSlider.x > 0;
        this.musicSwitchBgOff.active = !(this.musicSwitchSlider.x > 0);
        if (this.musicSwitchSlider.x > 0) if (this.tempProgressWidth) {
          this.progress.width = this.tempProgressWidth;
          this.sliderHandler.x = this.tempProgressWidth - this.node.width / 2;
        } else {
          this.progress.width = this.node.width / 2;
          this.sliderHandler.x = 0;
        } else {
          this.progress.width = 0;
          this.sliderHandler.x = -this.node.width / 2;
        }
      },
      onLoad: function onLoad() {
        var slider = this.getComponent(cc.Slider);
        this.sliderHandler = cc.find("Handle", this.node);
        this.sliderHandler.x = -this.node.width / 2;
        this.musicSwitchBgOn.active = false;
        this.startPosX = this.sliderHandler.x;
        if (null == slider || null == this.progress) return;
        this._width = this.node.width;
        this.progress.width = this.tempProgressWidth = 0;
        var self = this;
        slider.node.on("slide", function(event) {
          self.progress.width = self.tempProgressWidth = slider.progress * self._width;
          this.isMusic ? audioMgr.setMusicVolume(slider.progress) : audioMgr.setAudioVolume(slider.progress);
          this.toggleMusicSwitchState();
        }, this);
        this.musicSwitchComponent.on("touchstart", this.switchMusicState, this);
      },
      start: function start() {}
    });
    cc._RF.pop();
  }, {} ],
  socketIO: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "18dc46PwORNDb6sZFZcj9o3", "socketIO");
    "use strict";
    var n = 0;
    var _SocketState = {
      Disconnect: n++,
      Connect: n++,
      ConnectFailed: n++,
      Error: n++,
      TimeOut: n++,
      Reconnect: n++
    };
    var _state = _SocketState.Disconnect;
    window["util"]["socketIO"] = function() {
      var _connectCb = null;
      var _reconnectCb = null;
      var _createConnected = false;
      var socketIO = {};
      var clientEvent = kf.require("basic.clientEvent");
      socketIO.init = function() {
        this.IO;
      };
      socketIO.disconnect = function() {
        this.IO.disconnect();
      };
      socketIO.connect = function(url, path, cb) {
        if (cb) {
          _connectCb = cb.connect;
          _reconnectCb = cb.reconnect;
        }
        cc.log("\u8fde\u63a5socket--------------");
        this.IO = io(url, path);
        this.IO.on("connect_failed", function(msg) {
          clientEvent.dispatchEvent("socketDisconnect");
          cc.error("\u8fde\u63a5\u5931\u8d25", msg);
          _state = _SocketState.ConnectFailed;
        });
        this.IO.on("error", function(msg) {
          clientEvent.dispatchEvent("socketDisconnect");
          _state = _SocketState.Error;
          cc.error("\u8fde\u63a5\u9519\u8bef", msg);
        });
        this.IO.on("connect", function(data) {
          cc.log("socketIO\u8fde\u63a5\u6210\u529f", _createConnected);
          _state = _SocketState.Connect;
          if (_createConnected) return;
          _createConnected = true;
          _connectCb && _connectCb();
        });
        this.IO.on("reconnect", function(data) {
          _state = _SocketState.Connect;
          clientEvent.dispatchEvent("reconnect");
          cc.log("socketIO\u91cd\u65b0\u8fde\u63a5\u6210\u529f", data);
        });
        this.IO.on("disconnect", function(data) {
          cc.log("socketIO\u8fde\u63a5\u65ad\u5f00", data);
          _state = _SocketState.Disconnect;
          clientEvent.dispatchEvent("socketDisconnect");
        });
        this.IO.on("connect_timeout", function(data) {
          cc.log("socketIO\u8fde\u63a5\u8d85\u65f6", data);
          _state = _SocketState.TimeOut;
          clientEvent.dispatchEvent("socketDisconnect");
        });
      };
      socketIO.addMsgListen = function(msgName, callback) {
        this.IO.on(msgName, function(data) {
          clientEvent.dispatchEvent("socketMsg", data);
        });
      };
      socketIO.msgCallBack = function(evenType, event) {};
      socketIO.send = function(eventName, msg) {
        this.IO.send(eventName, JSON.stringify(msg));
      };
      socketIO.emit = function(eventName, msg) {
        cc.log("socketIO.emit", eventName, msg);
        this.IO.emit(eventName, JSON.stringify(msg));
      };
      socketIO.isConnected = function() {
        return _SocketState.Connect == _state;
      };
      socketIO.isDisconnect = function() {
        return _SocketState.Disconnect == _state;
      };
      socketIO.emit = function(eventName, msg) {
        cc.log("socketIO.emit", eventName, msg);
        this.IO.emit(eventName, JSON.stringify(msg));
      };
      return socketIO;
    };
    cc._RF.pop();
  }, {} ],
  socket: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "e4697Cpj79M8p1qV8bKQwKa", "socket");
    "use strict";
    window["util"]["socket"] = function() {
      var socket = {
        web_socket: null,
        init: function init() {},
        send: function send(data) {
          if (this.web_socket && this.web_socket.readyState === WebSocket.OPEN) {
            this.web_socket.send(data);
            return null;
          }
          return null;
        },
        connect: function connect(ip, port, callback) {
          var socketUrl = 0 !== port ? "ws://" + ip + ":" + port : "ws://" + ip;
          if (this.web_socket) {
            this.web_socket.clearCallback();
            this.web_socket.close();
          }
          this.ip = ip;
          this.port = port;
          this.callback = callback;
          this.web_socket = new WebSocket(socketUrl);
          this.web_socket.onmessage = function(event) {
            callback(socket.eventType.onmessage, event);
          }.bind(this);
          this.web_socket.onopen = function(event) {
            cc.log("onopen------------");
            callback(socket.eventType.onopen, event);
          }.bind(this);
          this.web_socket.onclose = function(event) {
            this.web_socket = null;
            callback(socket.eventType.onclose, event);
          }.bind(this);
          this.web_socket.onerror = function(event) {
            callback(socket.eventType.onerror, event);
          }.bind(this);
          return this;
        },
        close: function close() {
          if (!this.web_socket) return;
          this.web_socket.close();
          this.web_socket = null;
        },
        clearCallback: function clearCallback() {
          if (!this.web_socket) return;
          this.web_socket.onMessage = null;
          this.web_socket.onopen = null;
          this.web_socket.onerror = null;
          this.web_socket.onclose = null;
        },
        reconnect: function reconnect() {
          this.connect(this.ip, this.port, this.callback);
        },
        isConnecting: function isConnecting() {
          return this.web_socket && this.web_socket.readyState === WebSocket.CONNECTING || false;
        },
        isOpen: function isOpen() {
          return this.web_socket && this.web_socket.readyState === WebSocket.OPEN || false;
        },
        isClosed: function isClosed() {
          return this.web_socket && this.web_socket.readyState === WebSocket.CLOSED || true;
        },
        isClosing: function isClosing() {
          return this.web_socket && this.web_socket.readyState === WebSocket.CLOSING || true;
        }
      };
      socket.eventType = {
        onmessage: 1,
        onopen: 2,
        onclose: 3,
        onerror: 4
      };
      return socket;
    };
    cc._RF.pop();
  }, {} ],
  spreadInfo: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "4ed93YeF99EaKIGmk9nOa/y", "spreadInfo");
    "use strict";
    var _typeof = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && "function" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var clientEvent = kf.require("basic.clientEvent");
    var _dayStr = {
      0: "\u4eca\u5929",
      1: "\u6628\u5929",
      7: "\u4e03\u5929"
    };
    var getReportInfoParams = {
      action: "GetReportInfo",
      BetweenType: 0,
      Index: 0,
      DataNum: 10,
      UserName: 0,
      SortType: 0,
      SortAsc: 0
    };
    var _module = {
      info: "0",
      tutorial: "1",
      detail: "2"
    };
    var _curCheckModule = -1;
    var _key = 0;
    var _item = null;
    var _y = 0;
    var _tradingRecordItemSpacing = 48;
    var _canViewItemList = [];
    var _itemList = [], _msgLocalKey = void 0, _infoList = [], _isInTheRequest = false;
    var _infoItemLimit = 13, _maxShowItemNum = 11, _infoCount = 0;
    cc.Class({
      extends: require("sceneBase"),
      properties: {
        txtTradingRecordHint: cc.Label,
        txtInquireDayCheck: cc.Label,
        pfTradingRecordItem: cc.Prefab,
        top: cc.Node,
        gameName: cc.Node,
        settingBtn: cc.Node,
        serviceBtn: cc.Node,
        loadMask: cc.Node,
        loadIcon: cc.Node,
        userAvatar: cc.Sprite,
        userName: cc.Label,
        userGrade: cc.Label,
        newRegisterNum: cc.Label,
        rewardMoney: cc.Label,
        teamProfit: cc.Label,
        daysToggleArr: [ cc.Label ],
        funcCheckMask: cc.Node,
        tradingRecordContent: cc.Node,
        inquireDayCheck: cc.Node,
        inquireDayCheckArrows: cc.Node,
        funcItem: [ cc.Node ],
        panelArr: [ cc.Node ],
        nullData: cc.Node,
        qb: cc.Node,
        biaoti: cc.Node,
        userRebate: [ cc.Label ],
        spCodeBox: cc.Node
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "reqTradingRecordCb", this.reqTradingRecordCb.bind(this) ], [ "getSpreadCodeCb", this.getSpreadCodeCb.bind(this) ], [ "getAgentReportCb", this.getAgentReportCb.bind(this) ], [ "getInitDataCb", this.getInitDataCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.initSceneBase();
        this.registerEvent();
        _curCheckModule = _module.info;
        this.tradingRecordContent.parent.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.tradingRecordScrollEvent.bind(this, this.tradingRecordContent.parent.parent.getComponent(cc.ScrollView), cc.ScrollView.EventType.TOUCH_UP));
        this.renderPersonalSpreadInfo();
      },
      start: function start() {
        this.top.runAction(cc.sequence(cc.moveBy(.25, 0, -125), cc.moveBy(.15, 0, 10)));
        this.gameName.runAction(cc.sequence(cc.delayTime(.2), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 10)));
        this.serviceBtn.runAction(cc.sequence(cc.delayTime(.35), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
        this.settingBtn.runAction(cc.sequence(cc.delayTime(.45), cc.moveBy(.1, 0, -82.2), cc.moveBy(.1, 0, 15)));
      },
      renderPersonalSpreadInfo: function renderPersonalSpreadInfo() {
        var self = this;
        resMgr.loadSingleRes("baoWang" + dataLogic.userHeadUrl.replace(".jpg", ""), function(res) {
          self.userAvatar.spriteFrame = res;
        }, cc.SpriteFrame);
        this.userName.string = dataLogic.userName;
        this.userGrade.string = dataLogic.userGrade;
        var sendData = {
          action: "GetInviteCode"
        };
        this.reqDateAndShowLoadView(sendData, "getSpreadCodeCb");
      },
      getSpreadCodeCb: function getSpreadCodeCb(data) {
        if (1 == data.Code) {
          this.spreadCodeTxt = data.BackData + "/?spreadCode=" + data.Data;
          this.spreadCodeUrl = data.BackData;
          var sendData2 = {
            action: "GetAgentReport",
            BetweenType: this.betweenDays,
            UserName: 0
          };
          this.reqDateAndShowLoadView(sendData2, "getAgentReportCb");
        }
      },
      getAgentReportCb: function getAgentReportCb(data) {
        this.hideLoadView();
        this.panelArr[0].active = true;
        if (1 == data.Code) {
          this.newRegisterNum.string = (data.BackData.RegisterNum || 0) + "/" + (data.BackData.TeamNum || 0);
          this.rewardMoney.string = data.BackData.AgentRebate;
          this.teamProfit.string = data.BackData.TeamTax;
          var arr = data.Data.split(",");
          this.userRebate[0].string = "(" + arr[0] + "%)";
          this.userRebate[1].string = "(" + arr[1] + "%)";
          this.userRebate[2].string = "(" + arr[2] + "%)";
        }
      },
      btnEvent: function btnEvent(eventTouch, eventName) {
        cc.log("btnEvent", eventName);
        audioMgr.playEffect(this.audioBtn);
        if ("dayChoiceView" != eventName) {
          this.inquireDayCheck.active = false;
          this.inquireDayCheckArrows.rotationX = 0;
        }
        switch (eventName) {
         case "setting":
          kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "service":
          var sendData = {
            action: "GetInitData",
            Requirement: JSON.stringify([ "SiteConfig" ])
          };
          http.post(sendData, "getInitDataCb");
          break;

         case "dayChoiceView":
          this.inquireDayCheck.active = !this.inquireDayCheck.active;
          this.inquireDayCheckArrows.rotationX = 180 == this.inquireDayCheckArrows.rotationX ? 0 : 180;
          break;

         case "exit":
          this.loadScene(constant.SceneName.Hall);
          break;

         case "showSpCodeBox":
          this.showSpCodeBox();
          break;

         case "closeSpCodeBox":
          this.closeSpCodeBox();
          break;

         default:
          cc.log("\u672a\u77e5\u7684\u6309\u94ae\u4e8b\u4ef6\u540d:", eventName);
        }
      },
      closeSpCodeBox: function closeSpCodeBox() {
        audioMgr.playEffect(this.audioBtn);
        this.spCodeBox.active = false;
      },
      showSpCodeBox: function showSpCodeBox() {
        this.spCodeBox.active = true;
        var url = -1 != this.spreadCodeTxt.indexOf("http") ? this.spreadCodeTxt : "http://" + this.spreadCodeTxt;
        this.spCodeBox.getChildByName("spCode").getComponent("TTQRcode").string = url;
      },
      getInitDataCb: function getInitDataCb(data) {
        1 == data.Code && data.BackData.SiteConfig.Service ? dataLogic.openWindow(data.BackData.SiteConfig.Service) : this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
      },
      switchPanel: function switchPanel(event, module) {
        audioMgr.playEffect(this.audioBtn);
        if (_curCheckModule == module) return;
        _curCheckModule = module;
        for (var i = 0; i < 3; i++) {
          this.panelArr[i].active = false;
          this.funcItem[i].getChildByName("txt").color = new cc.Color(246, 229, 194);
        }
        event.target.getChildByName("txt").color = new cc.Color(255, 255, 255);
        this.funcCheckMask.y = event.target.y + 2;
        this.qb.getComponent(cc.Animation).stop();
        this.biaoti.getComponent(cc.Animation).stop();
        http.abortAllReq();
        switch (module) {
         case _module.info:
          this.renderPersonalSpreadInfo();
          break;

         case _module.tutorial:
          this.panelArr[1].active = true;
          this.qb.getComponent(cc.Animation).play();
          this.biaoti.getComponent(cc.Animation).play();
          break;

         case _module.detail:
          this.toggleFilterListConditionByDays("", 0);
          this.genInfoItem();
          _infoList = [];
          getReportInfoParams.Index = 0;
          this.reqDateAndShowLoadView(getReportInfoParams, "reqTradingRecordCb", true);
          break;

         default:
          cc.warn("\u672a\u77e5\u4e8b\u4ef6\u540d", module);
        }
      },
      setTradingRecord: function setTradingRecord(data) {
        var needInitCurItem = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        _isInTheRequest = false;
        this.updateInfo(data);
        if (needInitCurItem) this.initInfoItem(); else if (data.length) for (var i = 0; i < 3; i++) this.tradingRecordScrollEvent();
      },
      toggleFilterListConditionByDays: function toggleFilterListConditionByDays(event, day) {
        getReportInfoParams.Index = 0;
        this.inquireDayCheck.active = false;
        this.inquireDayCheckArrows.rotationX = 0;
        getReportInfoParams.BetweenType = day;
        this.txtInquireDayCheck.string = _dayStr[day];
        if ("" != event) {
          audioMgr.playEffect(this.audioBtn);
          this.txtTradingRecordHint.node.opacity = 0;
          this.nullData.opacity = 0;
          _infoList = [];
          this.initInfoItem();
          this.inquireDayCheck.getChildByName("mask").y = event.target.y;
          this.reqDateAndShowLoadView(getReportInfoParams, "reqTradingRecordCb", true);
        } else this.inquireDayCheck.getChildByName("mask").y = -37.6;
      },
      setInfoItemState: function setInfoItemState(key, state) {
        _itemList[key].x = state ? 9999 : 0;
      },
      reqTradingRecordCb: function reqTradingRecordCb(msg) {
        var needInitCurItem = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        this.hideLoadView();
        this.panelArr[2].active = true;
        if (constant.HttpCode.Succeed == msg.Code) {
          if (needInitCurItem) {
            _infoList = [];
            _infoCount = msg.DataCount;
          }
          this.setTradingRecord(msg.BackData, needInitCurItem);
        } else constant.HttpCode.Timeout == msg.Code && (_isInTheRequest = false);
      },
      genInfoItem: function genInfoItem() {
        if (null != _itemList[0]) return;
        for (var i = 0; i < _infoItemLimit; i++) {
          _itemList[i] = cc.instantiate(this.pfTradingRecordItem);
          _itemList[i].parent = this.tradingRecordContent;
        }
        this.initInfoItem();
      },
      initInfoItem: function initInfoItem() {
        this.tradingRecordContent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll();
        this.tradingRecordContent.y = 0;
        _canViewItemList = [];
        for (var i = 0; i < _infoItemLimit; i++) if (i < _maxShowItemNum && i < _infoList.length) {
          _itemList[i].getComponent("agentReport_item").init(_infoList[i], {
            msgLocalKey: i
          });
          _canViewItemList[i] = i;
          _itemList[i].y = i * -_tradingRecordItemSpacing;
          this.setInfoItemState(i, false);
        } else this.setInfoItemState(i, true);
      },
      updateInfo: function updateInfo(data) {
        if ("object" == ("undefined" === typeof data ? "undefined" : _typeof(data))) for (var i = 0; i < data.length; i++) _infoList.push(data[i]);
        if (0 == _infoCount) {
          this.txtTradingRecordHint.node.opacity = 0;
          this.nullData.opacity = 255;
        } else {
          this.txtTradingRecordHint.node.opacity = 255;
          this.nullData.opacity = 0;
          this.txtTradingRecordHint.node.getChildByName("loadIcon").stopAllActions();
          this.txtTradingRecordHint.node.getChildByName("loadIcon").opacity = 0;
          _infoCount == _infoList.length ? this.txtTradingRecordHint.string = "\u5df2\u663e\u793a" + this.txtInquireDayCheck.string + "\u5168\u90e8\u6570\u636e" : this.txtTradingRecordHint.string = "\u7ee7\u7eed\u6ed1\u52a8\u52a0\u8f7d\u66f4\u591a";
        }
        this.txtTradingRecordHint.node.y = -(_infoList.length * _tradingRecordItemSpacing + 38);
        this.tradingRecordContent.height = 62 - this.txtTradingRecordHint.node.y;
      },
      getLeiSureInfoItemKey: function getLeiSureInfoItemKey() {
        for (var i = 0; i < _itemList.length; i++) if (9999 == _itemList[i].x) return i;
        cc.error("\u6ca1\u6709\u7a7a\u95f2\u7684Item");
      },
      tradingRecordScrollEvent: function tradingRecordScrollEvent(event, eventName) {
        if (!_canViewItemList.length) return;
        if (eventName == cc.ScrollView.EventType.TOUCH_UP && this.tradingRecordContent.y + this.tradingRecordContent.parent.height == this.tradingRecordContent.height && _infoList.length < _infoCount && _infoList.length) {
          if (!_isInTheRequest) {
            _isInTheRequest = true;
            getReportInfoParams.Index++;
            this.reqDateAndShowLoadIcon(getReportInfoParams, "reqTradingRecordCb", false);
          }
          return;
        }
        _key = _canViewItemList[0];
        _item = _itemList[_key];
        _y = _item.y + this.tradingRecordContent.y;
        while (_y > _tradingRecordItemSpacing) {
          this.setInfoItemState(_key, true);
          _canViewItemList.shift();
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
        do {
          _msgLocalKey = _itemList[_key].getComponent("agentReport_item")._msgLocalKey;
          if (!(_y < 0 && _msgLocalKey > 0)) break;
          _key = this.getLeiSureInfoItemKey();
          if (null == _key) break;
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y + _tradingRecordItemSpacing;
          _itemList[_key].getComponent("agentReport_item").init(_infoList[_msgLocalKey - 1], {
            msgLocalKey: _msgLocalKey - 1
          });
          _canViewItemList.unshift(_key);
          _key = _canViewItemList[0];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        } while (_y < 0);
        _key = _canViewItemList[_canViewItemList.length - 1];
        _item = _itemList[_key];
        _y = _item.y + this.tradingRecordContent.y;
        while (-_y + _tradingRecordItemSpacing < this.tradingRecordContent.parent.height) {
          _msgLocalKey = _itemList[_key].getComponent("agentReport_item")._msgLocalKey;
          if (_msgLocalKey == _infoList.length - 1) break;
          _key = this.getLeiSureInfoItemKey();
          cc.log("\u7a7a\u95f2\u7684item", _key, _msgLocalKey);
          this.setInfoItemState(_key, false);
          _itemList[_key].y = _item.y - _tradingRecordItemSpacing;
          _itemList[_key].getComponent("agentReport_item").init(_infoList[_msgLocalKey + 1], {
            msgLocalKey: _msgLocalKey + 1
          });
          _canViewItemList.push(_key);
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
        while (-_y > this.tradingRecordContent.parent.height) {
          this.setInfoItemState(_key, true);
          _canViewItemList.pop();
          _key = _canViewItemList[_canViewItemList.length - 1];
          _item = _itemList[_key];
          _y = _item.y + this.tradingRecordContent.y;
        }
      },
      reqDateAndShowLoadIcon: function reqDateAndShowLoadIcon(reqArg, cbEventName, cbArg) {
        this.txtTradingRecordHint.node.getChildByName("loadIcon").stopAllActions();
        this.txtTradingRecordHint.node.getChildByName("loadIcon").opacity = 255;
        this.txtTradingRecordHint.string = "\u52a0\u8f7d\u4e2d";
        this.txtTradingRecordHint.node.getChildByName("loadIcon").runAction(cc.repeatForever(cc.rotateBy(1, 360)));
        this.txtTradingRecordHint.node.getChildByName("loadIcon").x = -this.txtTradingRecordHint.node.width / 2 - 23;
        this.reqData(reqArg, cbEventName, cbArg);
      },
      toggleDays: function toggleDays(event, key) {
        audioMgr.playEffect(this.audioBtn);
        for (var i = 0; i < this.daysToggleArr.length; i++) this.daysToggleArr[i].node.color = new cc.Color(122, 121, 92);
        this.betweenDays = key;
        event.target.getChildByName("txt").color = new cc.Color(218, 88, 1);
        var sendData2 = {
          action: "GetAgentReport",
          BetweenType: this.betweenDays,
          UserName: 0
        };
        this.reqDateAndShowLoadView(sendData2, "getAgentReportCb");
      },
      copyTxt: function copyTxt(event, type) {
        audioMgr.playEffect(this.audioBtn);
        var isSucceed = kf.copyToClipboard(this.spreadCodeTxt);
        this.showLayerTip(isSucceed ? "\u590d\u5236\u6210\u529f" : "\u62b1\u6b49\uff0c\u8be5\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u5207\u6362\u6d4f\u89c8\u5668");
      },
      switchSceneFrontDispose: function switchSceneFrontDispose() {
        _canViewItemList = [];
        _itemList = [];
        _infoList = [];
      }
    });
    cc._RF.pop();
  }, {
    sceneBase: "sceneBase"
  } ],
  systemNotice: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3dcc7/dXEtGGrQhpXwEKaDe", "systemNotice");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _doneCb = null;
    var _loginSucceedCb = null;
    var _serviceAddr = null;
    var _Register = {
      Action: "Register",
      InvitationCode: null,
      UserName: null,
      Password: null,
      ImgCode: null
    };
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        txtContent: cc.Label
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        this.toastShow();
        this.registerEvent();
        initArg.FinishTime = initArg.FinishTime || "";
        _serviceAddr = initArg.Service;
        this.txtContent.string = "\u62b1\u6b49\uff0c\u670d\u52a1\u5668\u6b63\u5728\u7ef4\u62a4\u4e2d\uff0c\u9884\u8ba1\u6062\u590d\n\u65f6\u95f4\u4e3a" + initArg.FinishTime + "\uff0c\n\u611f\u8c22\u60a8\u7684\u7406\u89e3\u4e0e\u652f\u6301\uff01";
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        cc.log("-----event", eventName);
        switch (eventName) {
         case "service":
          _serviceAddr ? dataLogic.openWindow(_serviceAddr) : this.showLayerTip("\u6682\u672a\u8bbe\u7f6e\u5ba2\u670d");
        }
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  toast: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "761c65EmsNFfrcG4uf/5j32", "toast");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _closeCb = null;
    cc.Class({
      extends: cc.Component,
      properties: {
        mask: cc.Node,
        isClickMaskClose: cc.Boolean,
        loadBox: cc.Node,
        loadTxt: cc.Label,
        loadAnim: cc.Node,
        hintTxt: cc.Label,
        hintBox: cc.Node,
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        txtButton: [ cc.Label ],
        btClose: cc.Button
      },
      onLoad: function onLoad() {
        var _this = this;
        this.mask.width = cc.winSize.width + 200;
        this.mask.height = cc.winSize.height + 200;
        this.toastType = null;
        this.mask.on(cc.Node.EventType.TOUCH_END, function() {
          if ("true" == _this.isClickMaskClose) {
            _this.unscheduleAllCallbacks();
            kf.killObj(_this.node);
          }
        });
      },
      countDown: function countDown() {
        var _this2 = this;
        dataLogic.hideTime = 0;
        this.loadBox.active = true;
        this.hintBox.active = false;
        var time = 5;
        this.loadTxt.string = "\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d\uff08" + time + "S\uff09";
        var func = function func() {
          time--;
          _this2.loadTxt.string = "\u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d\uff08" + time + "S\uff09";
          if (time < 1) {
            time = 0;
            _this2.loadBox.active = false;
            _this2.hintBox.active = true;
            _this2.toastShow();
            _this2.unschedule(func);
          }
        };
        this.unscheduleAllCallbacks();
        this.schedule(func, 1);
      },
      requestError: function requestError(data) {
        var _this3 = this;
        this.hintTxt.string = data.hintStr;
        this.scheduleOnce(function() {
          _this3.hintTxt.node.parent.width = _this3.hintTxt.node.width + 100;
        }, 0);
        this.closeToast(2);
      },
      closeToast: function closeToast(time) {
        var _this4 = this;
        this.scheduleOnce(function() {
          kf.killObj(_this4.node);
        }, time);
      },
      reuse: function reuse(data) {
        _closeCb = data.extend && data.extend.closeCb ? data.extend.closeCb : null;
        this.mask.width = cc.winSize.width + 200;
        this.mask.height = cc.winSize.height + 200;
        this.node.x = 0;
        this.node.y = 0;
        this.node.isToast = true;
        this.node.toastType = data.type;
        this.node.onlyManualClose = data.onlyManualClose;
        this.toastType = data.type;
        switch (data.type) {
         case constant.ToastType.Loading:
          this.loadTxt.string = "\u52aa\u529b\u52a0\u8f7d\u8d44\u6e90\u4e2d...0%";
          break;

         case constant.ToastType.RequestError:
          this.requestError(data.extend);
          break;

         case constant.ToastType.InGameDisconnect:
          this.countDown();
          break;

         case constant.ToastType.OutsideGameDisconnect:
          this.toastShow();
          break;

         case constant.ToastType.Hint:
          this.toastShow();
          this.hintTxt.string = data.extend.contentTxt;
          var useButton = [];
          this.btnEventName = [];
          for (var i = 0; i < 2; i++) if (null == data.extend.btnEventName[i]) {
            useButton[i] = false;
            this.txtButton[i].node.parent.active = false;
          } else {
            useButton[i] = true;
            this.txtButton[i].node.parent.active = true;
            this.btnEventName[i] = data.extend.btnEventName[i];
            this.txtButton[i].string = data.extend.btnTxt[i];
          }
          if (useButton[0] && useButton[1]) {
            this.txtButton[0].node.parent.x = -120;
            this.txtButton[1].node.parent.x = 120;
          } else useButton[0] ? this.txtButton[0].node.parent.x = 0 : this.txtButton[1].node.parent.x = 0;
          this.btClose && (data.extend.isShowCloseBtn ? this.btClose.node.active = true : this.btClose.node.active = false);
          break;

         case constant.ToastType.Recharge:
          this.toastShow();
          if (data.minBet) {
            this.hintTxt.string = "\u60a8\u81f3\u5c11\u9700\u8981" + data.minBet + "\u91d1\u5e01\u624d\u80fd\u8fdb\u5165\u623f\u95f4";
            this.hintBox.getChildByName("exitBtn").active = false;
            this.hintBox.getChildByName("toastBtnLeft").active = true;
          } else {
            this.hintTxt.string = "\u60a8\u7684\u91d1\u5e01\u4f59\u989d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u5728\u8be5\u623f\u95f4\u7ee7\u7eed\u6e38\u620f\uff0c\u662f\u5426\u7acb\u5373\u5145\u503c\uff01";
            this.hintBox.getChildByName("exitBtn").active = true;
            this.hintBox.getChildByName("toastBtnLeft").active = false;
          }
          break;

         case constant.ToastType.LoadingWaitStart:
          this.loadTxt.string = "\u73a9\u5bb6\u5c31\u4f4d\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...";
        }
      },
      unuse: function unuse() {},
      toastShow: function toastShow() {
        this.hintBox.opacity = 0;
        var seq = cc.sequence(cc.fadeIn(0), cc.scaleTo(0, 0), cc.scaleTo(.2, 1.1, 1.1), cc.scaleTo(.03, 1, 1));
        this.hintBox.stopAllActions();
        this.hintBox.runAction(seq);
      },
      toastClose: function toastClose(index) {
        var _this5 = this;
        var seq = cc.sequence(cc.scaleTo(.05, .7, .7), cc.fadeOut(0), cc.scaleTo(0, 0, 0));
        this.hintBox.runAction(seq);
        1 != index && this.scheduleOnce(function() {
          kf.killObj(_this5.node);
        }, .3);
      },
      btnOutsideGameEvent: function btnOutsideGameEvent(eventTouch, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "close":
          _closeCb && _closeCb();
          this.toastClose();
          break;

         case "gotoLogin":
          this.toastClose();
          clientEvent.dispatchEvent("loadScene", constant.SceneName.Login);
          break;

         case "goBackGame":
          this.toastClose();
          clientEvent.dispatchEvent("intoNextScene");
        }
      },
      btnInGameEvent: function btnInGameEvent(eventTouch, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "exitRoom":
          clientEvent.dispatchEvent("exitRoom");
          this.toastClose();
          break;

         case "goRecharge":
          break;

         case "retry":
          this.toastClose(1);
          this.countDown();
          break;

         case "refresh":
          cc.game.restart();
        }
      },
      toastHintBtnEvent: function toastHintBtnEvent(event, eventName) {
        cc.log("toastHintBtnEvent", eventName, this.btnEventName);
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "btn1":
          this.toastHintBtnHandle(this.btnEventName[0]);
          break;

         case "btn2":
          this.toastHintBtnHandle(this.btnEventName[1]);
        }
      },
      createBindPhoneDialog: function createBindPhoneDialog() {
        kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
          path: "prefab/baoWang/bindAndCheckPhoneNum",
          js: "bindAndCheckPhoneNum",
          initArg: {
            isBindPhoneNum: true,
            doneCb: function doneCb(phoneNum, hintStr) {
              dataLogic.setUserPhoneNum(phoneNum);
              clientEvent.dispatchEvent("showLayerTip", hintStr);
              var node = cc.find("Canvas/selectRoom/selectRoomTop/recharge/money");
              node.getComponent(cc.Label).string = dataLogic.userBalance.toFixed(2);
            },
            isFirstBind: true,
            hintStr: "\u60a8\u5f53\u524d\u4e3a\u6e38\u5ba2\u8d26\u53f7\uff0c\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u53f7\u5347\u7ea7\u4e3a\u6b63\u5f0f\u8d26\u53f7\u54e6\uff01"
          }
        });
      },
      toastHintBtnHandle: function toastHintBtnHandle(eventName) {
        this.toastClose();
        if ("function" == typeof eventName) {
          eventName();
          return;
        }
        switch (eventName) {
         case "gotoRecharge":
          cc.log("\u53bb\u5145\u503c");
          this.toastClose();
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/payCenter",
            js: "payCenter",
            initArg: 1
          });
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "toastClose":
          this.toastClose();
          break;

         case "gotoLogin":
          clientEvent.dispatchEvent("loadScene", constant.SceneName.Login);
          break;

         case "goBackGame":
          clientEvent.dispatchEvent("intoNextScene");
          break;

         case "goBackHall":
          clientEvent.dispatchEvent("loadScene", constant.SceneName.Hall);
          break;

         case "reconnect":
          break;

         case "recoverGame":
          http.post(constant.PostCheckForMatch, "checkRecoverCb");
          break;

         case "customFunc":
          clientEvent.dispatchEvent("customCallBack");
          break;

         default:
          clientEvent.dispatchEvent(eventName);
        }
      }
    });
    cc._RF.pop();
  }, {} ],
  tongBiCattleHall: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "3c93bOQf0JDCIvV15WyQrmk", "tongBiCattleHall");
    "use strict";
    cc.Class({
      extends: require("selectRoomSceneBase"),
      properties: {},
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.TongBiCattle);
      },
      preloadRes: function preloadRes() {
        cc.log("\u9884\u52a0\u8f7d\u8d44\u6e90");
        var list = [ "cattle/tongBi/bg", "common/UI/table", "card", "cattle/cow", "cattle/effect/cow/cattle_paixing_di1", "cattle/ui/zhuang", "cattle/effect/start/cattle_start_di_00008" ];
        for (var i = 0; i < list.length; i++) cc.loader.loadRes(list[i], function(err, res) {
          if (err) {
            cc.error("\u52a0\u8f7d\u8d44\u6e90\u9519\u8bef", err);
            return;
          }
        });
      }
    });
    cc._RF.pop();
  }, {
    selectRoomSceneBase: "selectRoomSceneBase"
  } ],
  tongBiCattle: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "8ba48vuag9Cnq4V2KIojJiS", "tongBiCattle");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    cc.Class({
      extends: require("gameSceneBase"),
      properties: {
        gameLayer: cc.Node,
        gameBg: cc.Node,
        matchingToastLayer: cc.Node,
        matchingToastLayerTxt: cc.Label,
        efMatchingLoad: cc.Node,
        btCancelMatching: cc.Button,
        helpBtn: cc.Button,
        recordBtn: cc.Button,
        cardTypeView: cc.Node,
        betNum: cc.Node,
        roomNum: cc.Node,
        cardBoxP: cc.Node,
        cardBox: [ cc.Node ],
        backCardPf: cc.Prefab,
        dispenseCardNode: cc.Node,
        openCardBox: cc.Node,
        pokersSf: cc.SpriteFrame,
        showdown: cc.Node,
        winTxt: cc.Node,
        getBetTxt: [ cc.Label ],
        multipleTxt: [ cc.Label ],
        reciprocal: cc.Node,
        player: [ cc.Node ],
        pokers: [ cc.Node ],
        multiple: cc.Node,
        multipleBtn: [ cc.Button ],
        matchBtn: cc.Node,
        autoMatch: cc.Node,
        wait: cc.Node,
        winChipNumFont: cc.Font,
        loseChipNumFont: cc.Font,
        gameStartAnim: cc.Node,
        winAnim: cc.Node,
        isCow: [ cc.Node ],
        cowAnimPf: cc.Prefab,
        cardAtlas: cc.SpriteAtlas,
        isNiuAtlas: cc.SpriteAtlas,
        cowBgAudio: {
          default: null,
          type: cc.AudioClip
        },
        clickAudio: {
          default: null,
          type: cc.AudioClip
        },
        femaleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        maleCowAudio: {
          default: [],
          type: cc.AudioClip
        },
        selVillageAudio: {
          default: null,
          type: cc.AudioClip
        },
        selVillageOver: {
          default: null,
          type: cc.AudioClip
        },
        pinSuccess: {
          default: null,
          type: cc.AudioClip
        },
        pinError: {
          default: null,
          type: cc.AudioClip
        },
        winGold: {
          default: null,
          type: cc.AudioClip
        },
        allWin: {
          default: null,
          type: cc.AudioClip
        },
        scrollNumber: {
          default: null,
          type: cc.AudioClip
        },
        lose: {
          default: null,
          type: cc.AudioClip
        },
        clickPoker: {
          default: null,
          type: cc.AudioClip
        },
        upturnPoker: {
          default: null,
          type: cc.AudioClip
        },
        sendCard: {
          default: null,
          type: cc.AudioClip
        },
        startGame: {
          default: null,
          type: cc.AudioClip
        }
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "gameShow", this.gameShow.bind(this) ], [ "gameHide", this.gameHide.bind(this) ], [ "matchingCb", this.matchingCb.bind(this) ], [ "onGameStart", this.onGameStart.bind(this) ], [ "betCb", this.betCb.bind(this) ], [ "onBet", this.onBet.bind(this) ], [ "onOpenCards", this.onOpenCards.bind(this) ], [ "openCards", this.openCards.bind(this) ], [ "cancelMatchingCb", this.cancelMatchingCb.bind(this) ], [ "exitRoom", this.exitRoom.bind(this) ], [ "gameRecoverCb", this.gameRecoverCb.bind(this) ], [ "onGameRecover", this.onGameRecover.bind(this) ], [ "updateBalanceCb", this.updateBalanceCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      onLoad: function onLoad() {
        this.baseInit(constant.GameId.TongBiCattle);
        dataLogic.setLimitPlayerNum(4);
        this.registerEvent();
        this.backCard = [];
        this.clearOtherPlayer();
        this.gameBg.height <= cc.winSize.height && (this.gameBg.height = cc.winSize.height);
        this.clickBind();
        var isCheck = cc.sys.localStorage.getItem("game_tongBiCattleAutoMatch");
        this.autoMatch.getComponent(cc.Toggle).isChecked = "true" == isCheck;
        this.multiplBtnWidth = 130;
        for (var i = 0; i < 20; i++) {
          this.backCard[i] = cc.instantiate(this.backCardPf);
          this.backCard[i].getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          this.backCard[i].parent = this.dispenseCardNode;
          this.backCard[i].opacity = 0;
        }
        this.WaitString = this.wait.getChildByName("Label").getComponent(cc.Label);
        this.setSelfUI();
        if (dataLogic.needRecover) {
          this.matchBtn.active = false;
          this.autoMatch.active = false;
          var roomKey = dataLogic.roomConfig.roomId.split(constant.GameId.TongBiCattle);
          dataLogic.setCurRoomKey(roomKey[1]);
          dataLogic.setReqRecoverState(true);
          http.post(constant.PostRecover, "gameRecoverCb");
          var arg = {
            type: constant.ToastType.Loading
          };
          this.recoverLoad = kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
        }
        var selRoomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + selRoomKey);
        this.setBetNumState();
        var playerPos = [ {
          x: -23,
          y: -165
        }, {
          x: 155,
          y: 78
        }, {
          x: 228,
          y: 92
        }, {
          x: -155,
          y: 74
        } ];
        for (var _i = 0; _i < this.player.length; _i++) {
          this.player[_i].playerPos = playerPos[_i];
          this.bindLongTouchEvent(this.player[_i]);
        }
        dataLogic.isFriendRoom && this.genReadyStateFlag();
      },
      setBetNumState: function setBetNumState() {
        this.betNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.betNum.width = this.betNum.getChildByName("txt").width + 40;
        this.roomNum.x = this.betNum.x + this.betNum.width + 20;
      },
      setRoomNumState: function setRoomNumState() {
        this.roomNum.getChildByName("txt").getComponent(cc.Label)._updateRenderData(true);
        this.roomNum.width = this.roomNum.getChildByName("txt").width + 40;
        this.friendRoomMenuBar && (this.friendRoomMenuBar.x = this.roomNum.x + this.roomNum.width + 20);
      },
      gotogame: function gotogame() {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        http.post(constant.PostRecover, "gameRecoverCb");
        var arg = {
          type: constant.ToastType.Loading
        };
        kf.getObj(constant.PoolId.ToastLoading, this.toastLayer[2], this.toastLoadingPf, arg);
      },
      gameHide: function gameHide() {
        this.winAnim.active = false;
        this.unscheduleAllCallbacks();
        this.node.stopAllActions();
        for (var i = 0; i < this.pokers.length; i++) {
          for (var j = 0; j < this.pokers[i].childrenCount; j++) {
            this.pokers[i].children[j].stopAllActions();
            i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
          }
          this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
        }
        for (var _j = 0; _j < 20; _j++) this.backCard[_j].opacity = 0;
      },
      gameShow: function gameShow() {
        var UISeatId = void 0, seatId = void 0;
        cc.log("this.progress", this.progress);
        this.unscheduleAllCallbacks();
        this.unschedule(this.callback);
        this.reciprocal.active = false;
        this.wait.active = false;
        this.gameStartAnim.active = false;
        if (this.progress >= 1 && this.progress > 1) {
          for (var i = 0; i < this.pokers.length; i++) {
            seatId = dataLogic.getSeatIdByUISeatId(i);
            if (!this.player[i].active || dataLogic.isOnlooker(seatId) || 0 == this.openCardsArr[seatId].length) continue;
            this.initCards(i);
          }
          for (var k = 0; k < this.openCardsArr.length; k++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(k);
            if (!this.player[UISeatId].active || dataLogic.isOnlooker(k)) continue;
            if (this.openCardsArr[k].length > 0) {
              k == constant.SelfUISeatId && (this.openCardBox.active = false);
              for (var j = 0; j < this.pokers[UISeatId].childrenCount; j++) this.pokers[UISeatId].children[j].x = 50 * (j - 2);
              this.setPlayerHandCard(UISeatId, this.openCardsArr[k]);
              var niuNum = this.showPokers(UISeatId, this.openCardsArr[k]);
              this.isCow[UISeatId].active = true;
              this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
              this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
            } else if (dataLogic.isFriendRoom) ; else if (k == constant.SelfUISeatId) {
              this.pokers[k].active = false;
              this.openCardBox.active = true;
              cc.log("\u663e\u793a\u5f00\u724c", k, dataLogic.isOnlooker(k), this.openCardsArr[k]);
              var _seatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
              this.showMyPorkers(this.onBetData, _seatId);
            }
          }
          if (this.progress > 2) {
            this.reciprocal.active = false;
            if (this.isResultAnim) if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
              this.matchBtn.active = true;
              this.autoMatch.active = true;
            }
            return;
          }
        }
        if (this.endTime) {
          var newDate = this.endTime + dataLogic.timeOff - new Date().getTime();
          newDate = Math.floor(newDate / 1e3);
          if (!dataLogic.isOnlooker() && 1 == this.progress && newDate > 0) {
            this.isBet || (this.multiple.active = true);
            this.wait.active = true;
          }
          newDate > 0 && this.countDown(this.endTime, this.progress);
        }
      },
      initCards: function initCards(UISeatId) {
        cc.log("\u521d\u59cb\u724c", UISeatId);
        this.pokers[UISeatId].active = true;
        for (var l = 0; l < this.pokers[UISeatId].childrenCount; l++) {
          this.pokers[UISeatId].children[l].active = true;
          this.pokers[UISeatId].children[l].x = 50 * (l - 2);
        }
      },
      setSelfUI: function setSelfUI() {
        this.player[constant.SelfUISeatId].getChildByName("bg").active = true;
        this.player[constant.SelfUISeatId].getChildByName("playerName").getComponent(cc.Label).string = dataLogic.userName;
        this.setPlayerBalance(constant.SelfUISeatId, dataLogic.userBalance);
        var avatarSp = this.player[constant.SelfUISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(dataLogic.userHeadUrl, avatarSp);
      },
      matching: function matching() {
        this.killGuideWatchPlayerCard();
        dataLogic.setDeskId(-1);
        this.goMatchIng();
      },
      goMatchIng: function goMatchIng() {
        cc.log("\u5339\u914ding");
        dataLogic.setNeedRecover(true);
        this.clearOtherPlayer();
        var roomKey = dataLogic.curRoomKey;
        cConstant.TongBiPostMatching.roomId = constant.GameId.TongBiCattle + roomKey;
        http.post(cConstant.TongBiPostMatching, "matchingCb");
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.setSelfUI();
        this.initMatchingView(true, false);
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
      },
      initMatchingView: function initMatchingView(isWaitMatching, canCancel) {
        if (isWaitMatching) {
          this.setMatchingToastView(true, canCancel);
          this.matchBtn.active = false;
          this.autoMatch.active = false;
        } else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
        }
      },
      cancelMatchingCb: function cancelMatchingCb(msg) {
        if (0 == msg.Code || -1 == msg.Code) return;
        if (-4 == msg.Code) this.initMatchingView(false); else {
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          dataLogic.gameEnd();
        }
      },
      setMatchingToastView: function setMatchingToastView(show, canCancel) {
        cc.log("show", show);
        this.matchingToastLayer.stopAllActions();
        if (show) {
          this.matchingToastLayer.active = true;
          this.setMatchingToastUI(canCancel);
          this.efMatchingLoad.getComponent(cc.Animation).play();
        } else {
          this.efMatchingLoad.getComponent(cc.Animation).stop();
          this.matchingToastLayer.active = false;
        }
      },
      matchingCb: function matchingCb(data) {
        if (constant.HttpCode.Succeed != data.Code) {
          dataLogic.setNeedRecover(false);
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          this.setMatchingToastView(false);
          if (constant.HttpCode.NotSufficientFunds == data.Code) {
            this.setPlayerBalance(constant.SelfUISeatId, data.Data);
            var roomKey = dataLogic.curRoomKey;
            var admittanceChipNum = dataLogic.getJoinAmountByRoomId(dataLogic.curGameId + roomKey);
            this.showRechargeToast(admittanceChipNum, true);
          }
          return;
        }
        if (null != data.Data) {
          this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
          this.setRoomNumState();
          dataLogic.setDeskId(data.Data.deskId);
        }
        this.setMatchingToastUI(true);
      },
      updateBalanceCb: function updateBalanceCb(msg) {
        this.setPlayerBalance(constant.SelfUISeatId, msg.Data.balance);
        this.killAllToast();
      },
      gameRecoverCb: function gameRecoverCb(msg) {
        kf.killObj(this.recoverLoad);
        if (constant.HttpCode.Succeed != msg.Code) {
          var roomKey = dataLogic.curRoomKey;
          this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
          this.setBetNumState();
          http.post(constant.PostReqUserBalance, "updateBalanceCb");
          this.doneGameRecover = true;
          this.killAllToast();
          dataLogic.gameEnd();
          this.clearOtherPlayer();
          this.setMatchingToastView(false);
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
          constant.HttpCode.GameOver == msg.Code && dataLogic.setReqRecoverState(false);
          return;
        }
        this.onGameRecover(msg.Data);
      },
      onGameRecover: function onGameRecover(msg) {
        this.matchBtn.active = false;
        this.autoMatch.active = false;
        this.clearOtherPlayer();
        dataLogic.setReqRecoverState(false);
        dataLogic.setMsgId(msg.msgId);
        var roomKey = dataLogic.curRoomKey;
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8\uff1a" + dataLogic.getAnteByRoomId(dataLogic.curGameId + roomKey);
        this.setBetNumState();
        if (0 == msg.state) {
          if (dataLogic.isFriendRoom) {
            this.setAllPlayerInfo(msg);
            dataLogic.playerInfo[dataLogic.selfSeatId].InvUserState == constant.FriendRoomPlayerState.Unready ? this.btReady.node.active = true : this.btReady.node.active = false;
            this.updateTips(msg.kickOutTime, true);
          } else {
            cc.log("\u7b49\u5f85\u5339\u914d");
            this.initMatchingView(true, true);
          }
          return;
        }
        dataLogic.isFriendRoom && (this.btReady.node.active = false);
        this.setMatchingToastView(false);
        var playerInfo = kf.clone(msg.playerInfo), UISeatId = void 0;
        for (var j = 0; j < playerInfo.length; j++) playerInfo[j].seatId = j;
        this.playerInfo = playerInfo;
        if (4 == msg.state) {
          dataLogic.gameEnd();
          this.matchBtn.active = true;
          this.autoMatch.active = true;
          for (var k = 0; k < playerInfo.length; k++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[k].seatId);
            UISeatId == constant.SelfUISeatId && this.setPlayerBalance(UISeatId, playerInfo[k].balance);
          }
          return;
        }
        dataLogic.matching();
        var remainingTime = msg.endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        this.setAllPlayerInfo(msg, remainingTime);
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msg.playId;
        this.setRoomNumState();
        cc.log("msg.isVillage", msg.isVillage, "msg.state", msg.state);
        this.progress = msg.state;
        msg.isVillage >= 0 && msg.state > 1 && this.getVillage(msg.isVillage);
        0 != msg.endTime && msg.state > 0 && remainingTime > 0 && this.countDown(msg.endTime, msg.state);
        cDataLogic.setRoomId(dataLogic.roomConfig.roomId);
        this.updateTips();
      },
      playerLeave: function playerLeave(seatId) {
        cc.log("\u6e05\u7406\u73a9\u5bb6UI");
        seatId == this.confirmVillage;
        var UISeatId = dataLogic.getUISeatIdBySeatId(seatId);
        this.hidePlayer(UISeatId);
      },
      hidePlayer: function hidePlayer(i) {
        this.multipleTxt[i].string = "";
        this.player[i].getChildByName("pokers").active = false;
        this.getBetTxt[i].string = "";
        if (0 != i) {
          this.player[i].active = false;
          this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
          this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
        }
        for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
        for (var j = 0; j < 5; j++) {
          this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
          i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
        }
        this.isCow[i].active = false;
        this.isCow[i].getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[i].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = "";
        this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
      },
      setPlayerInfo: function setPlayerInfo(info, UISeatId) {
        this.player[UISeatId].active = true;
        this.player[UISeatId].userId = info.userId;
        this.player[UISeatId].getChildByName("bg").active = true;
        UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = info.nickName);
        this.setPlayerBalance(UISeatId, info.balance);
        this.balanceArr = this.balanceArr.concat(info.balance);
        var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
        this.setPlayerHead(info.headUrl, avatarSp);
      },
      setAllPlayerInfo: function setAllPlayerInfo(msg, remainingTime) {
        var UISeatId = void 0;
        dataLogic.setPlayerInfo(msg.playerInfo);
        var playerInfo = dataLogic.playerInfo;
        for (var i = 0; i < playerInfo.length; i++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[i].seatId);
          cc.log("UISeatId---", UISeatId);
          if (null == playerInfo[i].headUrl) continue;
          this.setPlayerInfo(playerInfo[i], UISeatId);
          cc.log("dataLogic.isOnlooker", i, dataLogic.isOnlooker(i));
          if (0 == msg.state || dataLogic.isOnlooker(i)) continue;
          dataLogic.setFriendRoomPlayerState(i, constant.FriendRoomPlayerState.Gaming);
          if (1 == msg.state) if (playerInfo[i].betMultiple < 0 && UISeatId == cDataLogic.selfSeatId) {
            dataLogic.setRoomConfig("betConfig", msg.multiples[i]);
            this.betMultipleBtn();
            this.isBet = false;
            this.multiple.active = true;
            this.wait.active = true;
            this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
          } else if (playerInfo[i].betMultiple > 0) {
            this.isBet = true;
            this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d";
            this.wait.active = true;
            this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8";
          }
          if (2 == msg.state) {
            var cards = msg.cards[i];
            cc.log("remainingTime", remainingTime);
            playerInfo[i].betMultiple > 0 && (this.multipleTxt[UISeatId].string = "\u4e0b" + playerInfo[i].betMultiple + "\u500d");
            if (remainingTime > 0) if (UISeatId == constant.SelfUISeatId) if (playerInfo[i].isComplete) {
              this.openCardBox.active = false;
              this.pokers[UISeatId].active = true;
              this.isOpenCard = true;
              this.wait.active = true;
              this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u644a\u724c";
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else {
              this.showMyPorkers(msg, i);
              this.isOpenCard = false;
              this.openCardBox.active = true;
              cc.warn("\u663e\u793a\u5f00\u724c");
              this.pokers[UISeatId].active = false;
              this.wait.active = false;
            } else if (playerInfo[i].isComplete) {
              this.upturnCards(i, cards, true);
              this.isOpenState[UISeatId] = true;
            } else this.setSendCard(UISeatId, msg); else {
              if (playerInfo[i].isComplete) {
                this.upturnCards(i, cards, true);
                this.isOpenState[UISeatId] = true;
              }
              this.openCardBox.active = false;
              this.pokers[UISeatId].active = true;
            }
          }
        }
        this.initAllPlayerReadyStateUI();
      },
      setSendCard: function setSendCard(UISeatId, msg) {
        var endPos = this.getHandCardPos(UISeatId);
        for (var j = 0; j < 5; j++) {
          var key = 5 * UISeatId + j;
          this.backCard[key].opacity = 255;
          if (UISeatId === constant.SelfUISeatId) {
            this.showMyPorkers(msg);
            this.backCard[key].scale = .92;
            this.backCard[key].x = endPos.x + 129 * j * .9;
            this.backCard[key].y = endPos.y;
          } else {
            this.backCard[key].scale = .72;
            this.backCard[key].x = endPos.x + 50 * j * .72;
            this.backCard[key].y = endPos.y;
          }
        }
      },
      onGameStart: function onGameStart(msgData) {
        var _this = this;
        dataLogic.matching();
        if (dataLogic.isFriendRoom) {
          this.gameStartCommonHandle();
          this.updateTips();
          this.clearOtherPlayer();
        }
        this.setMatchingToastView(false);
        this.efMatchingLoad.getComponent(cc.Animation).stop();
        this.matchingToastLayer.active = false;
        cc.log("\u5339\u914d\u6210\u529f");
        audioMgr.playEffect(this.startGame);
        if (!dataLogic.isHide) {
          this.gameStartAnim.active = true;
          this.gameStartAnim.getComponent(cc.Animation).play();
        }
        this.betNum.getChildByName("txt").getComponent(cc.Label).string = "\u5e95\u6ce8: " + msgData.ante;
        this.setBetNumState();
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7: " + msgData.playId;
        this.setRoomNumState();
        var playerInfo = msgData.playerInfo, UISeatId = void 0, balance = void 0;
        this.playerInfo = playerInfo;
        dataLogic.setPlayerInfo(playerInfo);
        for (var i = 0; i < playerInfo.length; i++) playerInfo[i].seatId = i;
        for (var _i2 = 0; _i2 < playerInfo.length; _i2++) {
          UISeatId = dataLogic.getUISeatIdBySeatId(playerInfo[_i2].seatId);
          this.player[UISeatId].active = true;
          this.player[UISeatId].userId = playerInfo[_i2].userId;
          this.player[UISeatId].getChildByName("bg").active = true;
          UISeatId != constant.SelfUISeatId && (this.player[UISeatId].getChildByName("playerName").getComponent(cc.Label).string = playerInfo[_i2].nickName);
          this.setPlayerBalance(UISeatId, playerInfo[_i2].balance);
          this.balanceArr = this.balanceArr.concat(playerInfo[_i2].balance);
          var avatarSp = this.player[UISeatId].getChildByName("avatar").getComponent(cc.Sprite);
          this.setPlayerHead(playerInfo[_i2].headUrl, avatarSp);
          if (UISeatId == constant.SelfUISeatId) {
            balance = playerInfo[_i2].balance;
            dataLogic.setRoomConfig("betConfig", msgData.multiples[_i2]);
            this.betMultipleBtn();
          }
        }
        this.progress = 1;
        this.endTime = msgData.endTime;
        if (dataLogic.isHide) {
          this.wait.active = true;
          this.multiple.active = true;
          this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
        } else this.scheduleOnce(function() {
          _this.wait.active = true;
          _this.multiple.active = true;
          _this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
          _this.countDown(msgData.endTime, 1);
        }, 1.5);
      },
      setPlayerHead: function setPlayerHead(headUrl, sp) {
        resMgr.loadSingleRes("baoWang" + headUrl.replace(".jpg", ""), function(res) {
          sp.spriteFrame = res;
        }, cc.SpriteFrame);
      },
      setPlayerBalance: function setPlayerBalance(UISeatId, balance) {
        "string" == typeof balance && (balance = Number(balance));
        balance = Math.floor(100 * balance) / 100;
        var balanceTxt = this.player[UISeatId].getChildByName("balance").getComponent(cc.Label);
        constant.SelfUISeatId == UISeatId && dataLogic.setUserBalance(balance);
        balanceTxt.string = balance.toFixed(2);
      },
      clearOtherPlayer: function clearOtherPlayer() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        this.progress = 0;
        this.openId = [];
        this._village = [];
        this.pinPokers = [];
        this.isOpenState = [ false, false, false, false ];
        this.openCardsArr = [ [], [], [], [] ];
        this.balanceArr = [];
        this.isBetNum = 1;
        this.isOpenNum = 1;
        this.isBet = false;
        this.isOpenCard = false;
        this.send = false;
        this.isResultAnim = false;
        this.openPokers = [];
        this.openCardBox.active = false;
        this.multiple.active = false;
        this.reciprocal.active = false;
        this.wait.active = false;
        this.winAnim.active = false;
        this.roomNum.getChildByName("txt").getComponent(cc.Label).string = "\u724c\u5c40\u7f16\u53f7:";
        this.setRoomNumState();
        this.winTxt.opacity = 0;
        for (var k = 0; k < this.multipleBtn.length; k++) this.multipleBtn[k].node.active = false;
        for (var i = 0; i < this.player.length; i++) {
          this.multipleTxt[i].string = "";
          this.player[i].getChildByName("pokers").active = false;
          this.getBetTxt[i].string = "";
          if (0 != i) {
            this.player[i].active = false;
            this.player[i].getChildByName("playerName").getComponent(cc.Label).string = "";
            this.player[i].getChildByName("balance").getComponent(cc.Label).string = "";
          }
          for (var m = 0; m < this.backCard.length; m++) this.backCard[m].opacity = 0;
          for (var j = 0; j < 5; j++) {
            this.pokers[i].getChildByName("pokers" + j).getComponent(cc.Sprite).spriteFrame = this.cardAtlas.getSpriteFrame("backCard");
            i != constant.SelfUISeatId && (this.pokers[i].children[j].x = -100);
          }
          this.isCow[i].active = false;
          this.isCow[i].getComponent(cc.Sprite).spriteFrame = "";
          this.isCow[i].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = "";
          this.isCow[i].children[1] && this.isCow[i].children[1].destroy();
        }
      },
      countDown: function countDown(endTime, type) {
        this.endTime = endTime;
        var timeTxt = this.reciprocal.getChildByName("Label").getComponent(cc.Label);
        var remainingTime = endTime + dataLogic.timeOff - new Date().getTime();
        remainingTime = Math.floor(remainingTime / 1e3);
        var mySeatId = dataLogic.getSeatIdByUISeatId(constant.SelfUISeatId);
        if (remainingTime > 0) this.reciprocal.active = true; else {
          this.reciprocal.active = false;
          this.wait.active = false;
          this.openCardBox.active = false;
          this.multiple.active = false;
        }
        timeTxt.string = remainingTime;
        this.callback = function() {
          var _this2 = this;
          remainingTime--;
          timeTxt.string = remainingTime;
          if (remainingTime <= 0) {
            remainingTime = 0;
            this.unschedule(this.callback);
            this.reciprocal.active = false;
            this.wait.active = false;
            this.multiple.active = false;
            if (dataLogic.isOnlooker()) return;
            switch (type) {
             case 1:
              this.multiple.active = false;
              this.isBet || this.confirmVillage == mySeatId || this.scheduleOnce(function() {
                cc.log("\u81ea\u52a8\u4e0b\u6ce8");
                _this2.postBetMultiple(0);
              }, .1 * mySeatId);
              break;

             case 2:
              for (var i = 0; i < this.pokers.length; i++) {
                var seatId = dataLogic.getSeatIdByUISeatId(i);
                cc.log("\u5f00\u724c", i, seatId, dataLogic.selfSeatId);
                if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
                this.pokers[i].active || (this.pokers[i].active = true);
              }
              this.openCardBox.active = false;
              !this.isOpenCard && dataLogic.isPlaying && this.scheduleOnce(function() {
                cc.log("\u81ea\u52a8\u644a\u724c");
                _this2.openTheCard();
              }, .35 * mySeatId);
            }
          }
        };
        this.schedule(this.callback, 1);
      },
      betMultipleBtn: function betMultipleBtn() {
        var multiple = dataLogic.roomConfig.betConfig;
        for (var i = 0; i < multiple.length; i++) if (i < 5) {
          this.multipleBtn[i].node.active = true;
          this.multipleBtn[i].node.getChildByName("Label").getComponent(cc.Label).string = multiple[i] + "\u500d";
          this.multipleBtn[i].node.x = i * (this.multiplBtnWidth + 22);
        }
        this.WaitString.string = "\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570";
      },
      betCb: function betCb(msgData) {
        if (0 == msgData.Code) return;
      },
      getBetMultiple: function getBetMultiple(event, key) {
        this.multiple.active = false;
        audioMgr.playEffect(this.clickAudio);
        this.postBetMultiple(key);
      },
      postBetMultiple: function postBetMultiple(key) {
        cConstant.PostBet.betNum = dataLogic.roomConfig.betConfig[key];
        http.post(cConstant.PostBet, "betCb");
        this.isBet = true;
        this.multipleTxt[0].string = "\u4e0b" + dataLogic.roomConfig.betConfig[key] + "\u500d";
        this.multiple.active = false;
        if (this.isBetNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8";
        } else this.wait.active = false;
      },
      onBet: function onBet(msgData) {
        var _this3 = this;
        this.isBetNum++;
        var lastBet = msgData.seatId.toString().split(","), UISeatId = void 0;
        for (var i = 0; i < lastBet.length; i++) if ("" != lastBet[i]) {
          UISeatId = dataLogic.getUISeatIdBySeatId(lastBet[i]);
          this.multipleTxt[UISeatId].string = "\u4e0b" + msgData.betNum + "\u500d";
        }
        if (void 0 != msgData.endTime) {
          UISeatId = dataLogic.getUISeatIdBySeatId(this.confirmVillage);
          this.wait.active = false;
          this.multiple.active = false;
          this.unschedule(this.callback);
        } else {
          this.betList = lastBet;
          cc.log("betList", this.betList);
        }
        if (void 0 != msgData.cards) {
          this.reciprocal.active = false;
          this.wait.active = false;
          var showPokerTime = this.dispenseCardAction();
          this.progress = 2;
          var seatId = dataLogic.getSeatIdByUISeatId(cDataLogic.selfSeatId);
          this.endTime = msgData.endTime;
          this.onBetData = msgData;
          if (dataLogic.isHide) {
            this.showMyPorkers(msgData, seatId);
            for (var j = 0; j < this.pokers.length; j++) {
              seatId = dataLogic.getSeatIdByUISeatId(j);
              if (!this.player[j].active || dataLogic.isOnlooker(seatId)) continue;
              if (j != constant.SelfUISeatId) {
                this.pokers[j].active = true;
                for (var k = 0; k < this.pokers[j].childrenCount; k++) this.pokers[j].children[k].x += 50 * k;
              }
            }
          } else this.node.runAction(cc.sequence(cc.delayTime(showPokerTime), cc.callFunc(function() {
            _this3.countDown(msgData.endTime, 2);
            _this3.showMyPorkers(msgData, seatId);
          }, this)));
        }
      },
      showMyPorkers: function showMyPorkers(msgData, seatId) {
        if (dataLogic.isOnlooker(seatId)) return;
        cc.warn("\u663e\u793a\u5f00\u724c", msgData, seatId);
        this.openCardBox.active = true;
        this.pokersData = [];
        for (var i = 0; i < this.cardBox.length; i++) {
          this.cardBox[i].y = 0;
          this.cardBox[i].getComponent(cc.Sprite).spriteFrame = cDataLogic.getSFByImgName(this.cardAtlas, msgData.cards[seatId][i]);
          this.pokersData.push(cDataLogic.getCardValueAndColor(msgData.cards[seatId][i]));
        }
        this.hidePoker(constant.SelfUISeatId);
      },
      hidePoker: function hidePoker(UISeatId) {
        for (var i = 0; i < 5; i++) this.backCard[5 * UISeatId + i].opacity = 0;
      },
      dispenseCardAction: function dispenseCardAction() {
        if (dataLogic.isHide) return;
        this.send = true;
        var startPos = cc.v2(0, 0), endPos = cc.v2(0, 0), actionTime = .3, basecDelay = 0, showPokerTime = 0, cardMove = void 0, key = void 0, move = void 0, scale = void 0, spawn = void 0, sequence = void 0, delay = void 0, seatId = void 0;
        for (var i = 0; i < 4; i++) {
          seatId = dataLogic.getSeatIdByUISeatId(i);
          cc.log(i, "\u53d1\u724c\u662f\u5426\u65c1\u89c2");
          if (!this.player[i].active || dataLogic.isOnlooker(seatId)) continue;
          basecDelay += .1;
          for (var j = 0; j < 5; j++) {
            key = 5 * i + j;
            delay = cc.delayTime(.1 * j + basecDelay);
            this.backCard[key].position = startPos;
            this.backCard[key].scale = .55;
            this.backCard[key].opacity = 255;
            endPos = this.getHandCardPos(i);
            if (dataLogic.isHide) if (i === constant.SelfUISeatId) {
              this.backCard[key].scale = .92;
              this.backCard[key].x = endPos.x + 129 * j * .9;
              this.backCard[key].y = endPos.y;
            } else {
              this.backCard[key].scale = .72;
              this.backCard[key].x = endPos.x + 50 * j * .72;
              this.backCard[key].y = endPos.y;
            } else {
              move = cc.moveTo(actionTime, endPos);
              if (i === constant.SelfUISeatId) {
                scale = cc.scaleTo(actionTime, .92);
                cardMove = cc.moveTo(.15, endPos.x + 129 * j * .9, endPos.y);
              } else {
                scale = cc.scaleTo(actionTime, .72);
                cardMove = cc.moveTo(.15, endPos.x + 50 * j * .72, endPos.y);
              }
              var fpCallFun = cc.callFunc(function() {
                audioMgr.playEffect(this.sendCard);
              }, this);
              spawn = cc.spawn(move, scale, fpCallFun);
              sequence = cc.sequence(delay, spawn, cardMove);
              this.backCard[key].runAction(sequence);
            }
          }
          showPokerTime = basecDelay + .85;
        }
        return showPokerTime;
      },
      getHandCardPos: function getHandCardPos(UISeatId) {
        var pos = cc.v2(0, 0);
        pos.x = 0 == UISeatId ? this.player[UISeatId].x + 150 : 1 == UISeatId ? this.player[UISeatId].x - 275 : this.player[UISeatId].x + 130;
        pos.y = this.player[UISeatId].y;
        return pos;
      },
      onOpenCards: function onOpenCards(msgData) {
        var _this4 = this;
        this.isOpenNum++;
        var cards = void 0, UISeatId = void 0, lastArr = [], txt = "", win = true, time = void 0;
        if (msgData.cards[0] instanceof Array) {
          cc.log("openCardsArr--");
          this.openCardsArr = msgData.cards;
          for (var j = 0; j < msgData.cards.length; j++) lastArr.push({
            id: j,
            cards: msgData.cards[j]
          });
          if (0 != this.openId.length) for (var k = 0; k < this.openId.length; k++) for (var h = 0; h < lastArr.length; h++) lastArr[h].id == this.openId[k] && lastArr.splice(h, 1);
          cc.log("lastArr", lastArr);
          for (var l = 0; l < lastArr.length; l++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(l);
            if (this.isOpenState[UISeatId]) continue;
            this.upturnCards(l, lastArr[l]);
          }
        } else {
          cc.log("openCardsArr--==");
          this.openCardsArr[msgData.seatId] = msgData.cards;
          this.openId.push(msgData.seatId);
          cards = msgData.cards;
          this.upturnCards(msgData.seatId, cards);
        }
        if (1 == msgData.isEnd) {
          this.wait.active = false;
          this.endData = msgData.endData;
          this.progress = 3;
          this.reciprocal.active = false;
          this.unschedule(this.callback);
          this.openCardBox.active = false;
          time = dataLogic.isHide ? 0 : lastArr.length + .5;
          for (var i = 0; i < msgData.endData.length; i++) {
            UISeatId = dataLogic.getUISeatIdBySeatId(i);
            var _playerInfo = dataLogic.playerInfo[i];
            _playerInfo.balance = (100 * _playerInfo.balance + 100 * msgData.endData[i]) / 100;
            msgData.endData[i] > 0 && (_playerInfo.winMoney = (100 * _playerInfo.winMoney + 100 * msgData.endData[i]) / 100);
            _playerInfo.gameTimes += 1;
            this.player[i]._playerInfo = _playerInfo;
            if (UISeatId == constant.SelfUISeatId && msgData.endData[i] > 0) {
              win = false;
              txt = 1;
            }
          }
          cc.log("time======", time);
          var scrollNumCallFunc = cc.callFunc(function() {
            for (var _i3 = 0; _i3 < msgData.endData.length; _i3++) {
              UISeatId = dataLogic.getUISeatIdBySeatId(_i3);
              if (msgData.endData[_i3] >= 0) {
                _this4.getBetTxt[UISeatId].font = _this4.winChipNumFont;
                _this4.scrollNum(msgData.endData[_i3].toFixed(2), UISeatId);
              } else {
                _this4.getBetTxt[UISeatId].font = _this4.loseChipNumFont;
                _this4.getBetTxt[UISeatId].string = msgData.endData[_i3].toFixed(2);
              }
            }
          }, this);
          var sequence = cc.sequence(cc.delayTime(time), scrollNumCallFunc);
          this.winTxt.runAction(sequence);
          sequence = cc.sequence(cc.delayTime(time), cc.fadeIn(0, 1), cc.moveBy(0, 0, -50), cc.moveBy(.3, 0, 50));
          this.winTxt.runAction(sequence);
          this.resultAnim(txt, time, win, dataLogic.isHide);
          dataLogic.isFriendRoom ? dataLogic.setPlayState(false) : dataLogic.gameEnd();
          this.gamingPlayerToUnready();
          this.updateTips();
        }
      },
      updateUserBalance: function updateUserBalance() {
        for (var i = 0; i < this.endData.length; i++) {
          var UISeatId = dataLogic.getUISeatIdBySeatId(i);
          var balance = Number(this.endData[i] + this.balanceArr[i]);
          this.player[UISeatId].getChildByName("balance").getComponent(cc.Label).string = Math.abs(balance).toFixed(2);
          UISeatId == constant.SelfUISeatId && dataLogic.setUserBalance(balance);
        }
      },
      scrollNum: function scrollNum(maxNum, UISeatId) {
        var _this5 = this;
        var num = 0, frequency = 40, allTime = 1.4, time = allTime / frequency;
        var scrollNumCallFun = cc.callFunc(function() {
          if (100 * maxNum > num) {
            num += Math.floor(100 * maxNum) / frequency;
            _this5.getBetTxt[UISeatId].string = "+" + Number(num / 100).toFixed(2);
          } else _this5.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
        }, this);
        var seq = cc.repeat(cc.sequence(cc.delayTime(time), scrollNumCallFun), frequency + 1);
        this.getBetTxt[UISeatId].node.runAction(cc.sequence(seq, cc.callFunc(function() {
          _this5.getBetTxt[UISeatId].string = "+" + Number(maxNum).toFixed(2);
          _this5.updateUserBalance();
        }, this)));
      },
      resultAnim: function resultAnim(txt, time, win, hide) {
        var delayTime = cc.delayTime(3);
        var showAnimCallFun = cc.callFunc(function() {
          if (1 == txt) {
            this.winAnim.active = true;
            this.winAnim.getComponent(cc.Animation).play();
          }
          if (win) audioMgr.playEffect(this.lose); else {
            audioMgr.playEffect(this.winGold);
            audioMgr.playEffect(this.scrollNumber);
          }
        }, this);
        var hideAnimCallFun = cc.callFunc(function() {
          this.isResultAnim = true;
          this.winAnim.active = false;
        }, this);
        var initCallFun = cc.callFunc(function() {
          if (dataLogic.isFriendRoom) this.btReady.node.active = true; else if (this.autoMatch.getComponent(cc.Toggle).isChecked && !hide) this.matching(); else {
            this.matchBtn.active = true;
            this.autoMatch.active = true;
          }
        }, this);
        var sequence = cc.sequence(cc.delayTime(time), showAnimCallFun, delayTime, hideAnimCallFun, cc.delayTime(.3), initCallFun);
        this.gameLayer.runAction(sequence);
      },
      isUserOpenPokers: function isUserOpenPokers(UISeatId) {
        var isOpen = false;
        for (var k = 0; k < this.openPokers.length; k++) UISeatId == this.openPokers[k] && (isOpen = true);
        return isOpen;
      },
      upturnCards: function upturnCards(ind, arr) {
        var UISeatId = void 0, cards = void 0, index = void 0, playerId = void 0;
        if (Array.isArray(arr)) {
          cards = arr;
          index = 0;
          playerId = ind;
        } else {
          cards = arr.cards;
          index = ind;
          playerId = arr.id;
        }
        UISeatId = dataLogic.getUISeatIdBySeatId(playerId);
        if (this.isUserOpenPokers(UISeatId)) {
          cc.log(1212121212);
          return false;
        }
        this.openPokers.push(UISeatId);
        var niuNum = this.showPokers(UISeatId, cards);
        var hideCardsCallFun = cc.callFunc(function() {
          audioMgr.playEffect(this.upturnPoker);
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          var pokers = this.pokers[UISeatId].children;
          if (UISeatId == constant.SelfUISeatId) for (var i = 0; i < pokers.length; i++) pokers[i].runAction(cc.moveBy(.1, 50 * -i, 0)); else {
            for (var _i4 = 0; _i4 < pokers.length; _i4++) pokers[_i4].x = -100;
            for (var _i5 = 0; _i5 < 5; _i5++) this.backCard[5 * UISeatId + 1 * _i5].runAction(cc.sequence(cc.moveBy(5, 50 * -_i5, 0), cc.fadeOut(.1, 0)));
          }
          this.showCardsCallFun(UISeatId, niuNum, cards);
        }, this);
        cc.log("\u725b", niuNum);
        if (dataLogic.isHide) {
          this.hidePoker(UISeatId);
          this.pokers[UISeatId].active = true;
          this.setPlayerHandCard(UISeatId, cards);
          this.isCow[UISeatId].active = true;
          this.isCow[UISeatId].getChildByName("cowNum").getComponent(cc.Sprite).spriteFrame = this.isNiuAtlas.getSpriteFrame("" + niuNum);
          this.isCow[UISeatId].getComponent(cc.Sprite).spriteFrame = 0 == niuNum ? this.isNiuAtlas.getSpriteFrame("noCow") : niuNum > 0 && niuNum < 10 ? this.isNiuAtlas.getSpriteFrame("cow") : this.isNiuAtlas.getSpriteFrame("cowCow");
        } else this.node.runAction(cc.sequence(cc.delayTime(1 * index), hideCardsCallFun));
      },
      showCardsCallFun: function showCardsCallFun(UISeatId, niuNum, cards) {
        var showCardsCallFun = cc.callFunc(function() {
          this.setPlayerHandCard(UISeatId, cards);
          var pokers = this.pokers[UISeatId].children;
          for (var j = 0; j < pokers.length; j++) pokers[j].runAction(cc.moveBy(.25, 50 * j, 0));
          this.cowA(UISeatId, niuNum);
          var sex = dataLogic.getSex(UISeatId);
          0 == sex ? audioMgr.playEffect(this.maleCowAudio[niuNum]) : audioMgr.playEffect(this.femaleCowAudio[niuNum]);
        }, this);
        this.node.runAction(cc.sequence(cc.delayTime(.12), showCardsCallFun));
      },
      cowA: function cowA(UISeatId, niuNum) {
        var cowAnim = cc.instantiate(this.cowAnimPf);
        cowAnim.parent = this.isCow[UISeatId];
        this.isCow[UISeatId].active = true;
        var cowPic = cDataLogic.getSFByImgName(this.isNiuAtlas, niuNum);
        if (0 == niuNum) {
          cowAnim.children[2].active = true;
          cowAnim.children[2].getComponent(cc.Animation).play();
        } else if (niuNum > 0 && niuNum < 10) {
          cowAnim.children[0].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[0].active = true;
          cowAnim.children[0].getComponent(cc.Animation).play();
        } else {
          cowAnim.children[1].getChildByName("cattle_paixing_zi").getComponent(cc.Sprite).spriteFrame = cowPic;
          cowAnim.children[1].active = true;
          cowAnim.children[1].getComponent(cc.Animation).play();
        }
      },
      setPlayerHandCard: function setPlayerHandCard(UISeatId, cards) {
        var pokers = [];
        for (var j = 0; j < cards.length; j++) pokers.push(cDataLogic.getCardValueAndColor(cards[j]));
        pokers = cDataLogic.sortCard(pokers);
        for (var i = 0; i < pokers.length; i++) this.pokers[UISeatId].getChildByName("pokers" + i).getComponent(cc.Sprite).spriteFrame = cDataLogic.getSFByImgName(this.cardAtlas, pokers[i].key);
      },
      showPokers: function showPokers(UISeatId, cards) {
        var playerPokersData = [];
        for (var i = 0; i < cards.length; i++) playerPokersData.push(cDataLogic.getCardValueAndColor(cards[i]));
        UISeatId == constant.SelfUISeatId && (this.openCardBox.active = false);
        return cDataLogic.isNiu(playerPokersData);
      },
      clickBind: function clickBind() {
        var _this6 = this;
        this.cardTypeView.getChildByName("mask").on(cc.Node.EventType.TOUCH_END, function() {
          _this6.cardTypeView.active = false;
        });
      },
      openTheCard: function openTheCard() {
        this.openCardBox.active = false;
        http.post(cConstant.OpenCards, "openCards");
        this.isOpenCard = true;
      },
      openCards: function openCards(data) {
        if (0 == data.Code) return;
        if (this.isOpenNum < this.playerInfo.length) {
          this.wait.active = true;
          this.WaitString.string = "\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u644a\u724c";
        } else this.wait.active = false;
      },
      exitRoom: function exitRoom() {
        this.node.stopAllActions();
        this.unscheduleAllCallbacks();
        dataLogic.leaveTable();
        dataLogic.isFriendRoom ? this.reqLeaveGame() : this.goBackSelectRoom();
      },
      btnEvent: function btnEvent(event, key) {
        audioMgr.playEffect(this.clickAudio);
        switch (key) {
         case "matchBtn":
          this.matching();
          break;

         case "goBackHall":
          cc.director.loadScene(constant.SceneName.Hall);
          break;

         case "exitRoom":
          if (dataLogic.isPlaying) {
            cc.log("\u9000\u51fa\u6e38\u620f");
            this.showExitGameToast("\u6e38\u620f\u4e2d\u4e0d\u80fd\u9000\u51fa\uff0c\u8bf7\u5148\u6253\u5b8c\u8fd9\u5c40\u54e6");
          } else this.exitRoom();
          break;

         case "cardType":
          this.cardTypeView.active = true;
          break;

         case "helpBtn":
          kf.getObj(constant.PoolId.Help, this.toastLayer[0], this.helpPf, dataLogic.curGameId);
          break;

         case "recordBtn":
          var record = kf.getObj(constant.PoolId.Record, this.toastLayer[0], this.recordPf, "record");
          record.getComponent("record").recordMainShow(constant.GameId.TongBiCattle);
          break;

         case "Setting":
          var Setting = kf.getObj(constant.PoolId.Setting, this.toastLayer[0], this.settingPf, "setting");
          break;

         case "cancelMatching":
          this.btCancelMatching.node.active = false;
          this.matchingToastLayerTxt.string = "\u6b63\u5728\u53d6\u6d88\u5339\u914d...";
          http.post(constant.PostCancelMatching, "cancelMatchingCb");
          break;

         case "forceExit":
          this.toastHide(this.exitToastLayer);
          this.exitRoom();

         case "closeExitToastLayer":
          this.toastHide(this.exitToastLayer);
          break;

         case "closeMatchingToast":
          break;

         case "refresh":
          cc.game.restart();
          break;

         case "haveNiu":
          this.isHaveNiu(this.pinPokers, 1);
          break;

         case "autoMatch":
          var isCheck = this.autoMatch.getComponent(cc.Toggle).isChecked;
          cc.sys.localStorage.setItem("game_tongBiCattleAutoMatch", isCheck);
        }
      }
    });
    cc._RF.pop();
  }, {
    gameSceneBase: "gameSceneBase"
  } ],
  tradingRecordItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "85ccdaPbTROnJnl6uh4kBX0", "tradingRecordItem");
    "use strict";
    var _pos3 = [ -302, 1, 320 ];
    var _pos4 = [ -344, -120, 105, 330 ];
    var _moneyKey = 0;
    var _bgColor1 = new cc.Color(252, 250, 243);
    var _bgColor2 = new cc.Color(252, 242, 227);
    var _txtColor1 = new cc.Color(69, 166, 42);
    var _txtColor2 = new cc.Color(198, 91, 13);
    cc.Class({
      extends: cc.Component,
      properties: {
        txt: [ cc.Label ]
      },
      init: function init(data, extendArg) {
        var count = 3;
        switch (extendArg.recordType) {
         case "accountDetail":
          _moneyKey = 1;
          this.txt[0].string = data.TypeName;
          "---" == data.InMoney ? this.txt[1].string = "-" + data.OutMoney : this.txt[1].string = "+" + data.InMoney;
          this.txt[2].string = data.AddTime;
          this.txt[3].node.opacity = 0;
          break;

         case "withdrawRecord":
          _moneyKey = 1;
          this.txt[0].string = data.State;
          this.txt[1].string = "-" + data.OutMoney;
          this.txt[2].string = data.AddTime;
          this.txt[3].node.opacity = 0;
          break;

         case "rechargeRecord":
          _moneyKey = 2;
          this.txt[0].string = data.State;
          this.txt[1].string = data.TypeName;
          this.txt[2].string = "+" + data.ApplyMoney;
          this.txt[3].string = data.AddTime;
          this.txt[3].node.opacity = 255;
          count = 4;
        }
        if (3 == count) for (var i = 0; i < 3; i++) this.txt[i].node.x = _pos3[i]; else for (var _i = 0; _i < 4; _i++) this.txt[_i].node.x = _pos4[_i];
        for (var _i2 = 0; _i2 < count; _i2++) this.txt[_i2].node.color = new cc.Color(106, 81, 66);
        "-" == this.txt[_moneyKey].string[0] ? this.txt[_moneyKey].node.color = _txtColor1 : this.txt[_moneyKey].node.color = _txtColor2;
        this._msgLocalKey = extendArg.msgLocalKey;
        0 == this._msgLocalKey % 2 ? this.node.getChildByName("bg").opacity = 255 : this.node.getChildByName("bg").opacity = 0;
      }
    });
    cc._RF.pop();
  }, {} ],
  transferConfirm: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "ced9bW7qz1FDKAfyl6+30FR", "transferConfirm");
    "use strict";
    var clientEvent = kf.require("basic.clientEvent");
    var _transfer = {
      Action: "Transfer",
      ToUserName: null,
      SafePassword: null,
      Money: 0
    };
    var _doneCb = null;
    var _isWithdrawalFromSafe = false;
    cc.Class({
      extends: require("dialogBase"),
      properties: {
        eb: cc.EditBox,
        txtHint: cc.RichText
      },
      registerEvent: function registerEvent() {
        this.registerHandler = [ [ "transferCb", this.transferCb.bind(this) ] ];
        for (var i = 0; i < this.registerHandler.length; i++) {
          var handler = this.registerHandler[i];
          clientEvent.registerEvent(handler[0], handler[1]);
        }
      },
      init: function init(initArg) {
        _transfer.ToUserName = initArg.payeeId;
        _transfer.Money = initArg.transferNum;
        this.txtHint.string = "<color=#C95E1D>\u60a8\u6b63\u5728\u5411</c> <color=#FC2F25>" + initArg.payeeId + "</c> <color=#C95E1D>\u8f6c\u8d26</c> <color=#FC2F25>" + initArg.transferNum + "</c> <color=#C95E1D>\u5143\uff0c\u8bf7\u8f93\u5165\u5b89\u5168\u5bc6\u7801\u5b8c\u6210\u8f6c\u8d26\u3002</c>";
        this.txtHint.node.width > 549 ? this.txtHint.node.scale = 549 / this.txtHint.node.width : this.txtHint.scale = 1;
        _doneCb = initArg.doneCb;
        this.registerEvent();
        this.toastShow();
      },
      btnDepositNumEvent: function btnDepositNumEvent(event, num) {
        audioMgr.playEffect(this.clickAudio);
        this.eb.string = "all" == num ? _isWithdrawalFromSafe ? this.txtSaveBalance.string : this.txtAccountBalance.string : num;
      },
      btnEvent: function btnEvent(event, eventName) {
        audioMgr.playEffect(this.clickAudio);
        switch (eventName) {
         case "confirm":
          var result = dataLogic.checkFormat(this.eb.string, {
            UserName: true,
            name: "\u5b89\u5168\u5bc6\u7801"
          });
          if (result) {
            this.showLayerTip(result);
            return;
          }
          _transfer.SafePassword = this.eb.string;
          this.reqDateAndShowLoadView(_transfer, "transferCb", null, true);
        }
      },
      transferCb: function transferCb(msg) {
        this.hideLoadView();
        if (msg.Code == constant.HttpCode.Succeed) {
          this.toastClose();
          _doneCb("\u8f6c\u8d26\u6210\u529f");
        }
      },
      editEvent: function editEvent(txt, editbox) {
        editbox.isFocused() || (editbox.string = "");
      }
    });
    cc._RF.pop();
  }, {
    dialogBase: "dialogBase"
  } ],
  yinShangItem: [ function(require, module, exports) {
    "use strict";
    cc._RF.push(module, "d31c19HS2pPcqL04SnDswDQ", "yinShangItem");
    "use strict";
    cc.Class({
      extends: cc.Component,
      properties: {
        txtNickname: cc.Label,
        txtSingleRecharge: cc.Label,
        spContectWays: [ cc.Sprite ],
        sfContectWays: [ cc.SpriteFrame ],
        acClick: {
          default: null,
          type: cc.AudioClip
        }
      },
      start: function start() {},
      reuse: function reuse(data) {
        this.yinShangInfo = data;
        this.txtNickname.string = data.BankStore;
        var index = 0;
        this.spContectWays[0].node.opacity = 0;
        this.spContectWays[1].node.opacity = 0;
        this.spContectWays[2].node.opacity = 0;
        if (data.WXAccount) {
          this.spContectWays[index].node.opacity = 255;
          this.spContectWays[index].spriteFrame = this.sfContectWays[0];
          index++;
        }
        if (data.QQAccount) {
          this.spContectWays[index].node.opacity = 255;
          this.spContectWays[index].spriteFrame = this.sfContectWays[1];
          index++;
        }
        if (data.ZFBAccount) {
          this.spContectWays[index].node.opacity = 255;
          this.spContectWays[index].spriteFrame = this.sfContectWays[2];
          index++;
        }
        this.txtSingleRecharge.string = "\u5355\u7b14\uff1a" + data.Min + "-" + data.Max;
      },
      btnEvent: function btnEvent(event, name) {
        audioMgr.playEffect(this.acClick);
        switch (name) {
         case "recharge":
          kf.getObj(constant.PoolId.DialogComonLayer, cc.find("Canvas/toastLayer/1"), this.pfDialogCommonLayer, {
            path: "prefab/baoWang/fastRecharge",
            js: "fastRecharge",
            initArg: this.yinShangInfo
          });
        }
      }
    });
    cc._RF.pop();
  }, {} ]
}, {}, [ "clientEvent", "eventListener", "TTQRcode", "engineAdapter", "miniCommon", "hotUpdate", "hotUpdateMgr", "http", "network", "socket", "socketIO", "activityCenter", "activityRule", "addBankCard", "agentReport_item", "alterPassword", "bindAndCheckPhoneNum", "checkBankCard", "checkCode", "createRoom", "createRoomItem", "deposit", "editPersonalInfo", "fastRecharge", "firstRechargeGift", "forgetPassword", "guideWatchPlayerCard", "hintBindPhone", "hotUpdateDialog", "informAward", "inputRoomNumber", "joinRoomTip", "levelRule", "loginOut", "loginView", "mailCentre", "mailDetails", "mailInfoItem", "payCenter", "personalCenter", "phoneLogin", "phoneRegister", "playerCard", "rankingList", "rankingListItem", "rechargeRecord", "register", "registerCashGift", "resetPassword", "setPassword", "signIn", "systemNotice", "tradingRecordItem", "transferConfirm", "yinShangItem", "dialogBase", "dialogCommonLayer", "dialogExtend", "gameEntrance", "gameRecord", "kingHelp", "kingRecord", "kingRecordItem", "layerMsg", "newHelp", "notice", "record", "recordItem", "setting", "toast", "BRCattleConstant", "LongHuConstant", "audioMgr", "baiJiaLeConstant", "bcbmConstant", "cattleConstant", "constant", "diceConstant", "dzpkConstant", "ebgConstant", "gameMgr", "giftMoneyConstant", "goldenFraudConstant", "kingConstant", "landlordsConstant", "paiGowConstant", "resMgr", "sanGongConstant", "BRCattleDataLogic", "LongHuDataLogic", "baiJiaLeDataLogic", "bcbmDataLogic", "cattleDataLogic", "dataLogic", "diceLogic", "dzDataLogic", "ebgDataLogic", "giftMoneyDataLogic", "goldenFraudDataLogic", "kingDataLogic", "landlordsDataLogic", "paiGowDataLogic", "sanGongDataLogic", "BRCattle", "BRCattleHall", "bcbm", "bcbmHall", "LongHu", "LongHuHall", "baiJiaLe", "baiJiaLeHall", "bank", "buttonScaler", "cattleHall", "cattleScene", "closePop", "callDiceRecord", "callDiceRecordItem", "diceHall", "diceMain", "dzpkHall", "dzpkMain", "pfbCommon", "erBaGang", "erBaGangHall", "fastZJH", "fastZJHHall", "gameSceneBase", "giftMoney", "giftMoneyHall", "chip", "goldenFraud", "goldenFraudHall", "hall", "baseGame", "bonusGame", "landlords", "landlordsHall", "login", "offerPK", "paiGow", "paiGowHall", "sanGong", "sanGongHall", "sceneBase", "seeThreeCattle", "seeThreeCattleHall", "selectRoom", "selectRoomSceneBase", "slider", "spreadInfo", "tongBiCattle", "tongBiCattleHall" ]);